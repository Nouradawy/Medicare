var NU=Object.defineProperty;var FD=r=>{throw TypeError(r)};var kU=(r,e,t)=>e in r?NU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var le=(r,e,t)=>kU(r,typeof e!="symbol"?e+"":e,t),BA=(r,e,t)=>e.has(r)||FD("Cannot "+t);var m=(r,e,t)=>(BA(r,e,"read from private field"),t?t.call(r):e.get(r)),L=(r,e,t)=>e.has(r)?FD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),j=(r,e,t,n)=>(BA(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),B=(r,e,t)=>(BA(r,e,"access private method"),t);var _r=(r,e,t,n)=>({set _(s){j(r,e,s,t)},get _(){return m(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Qf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var FA={exports:{}},ry={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function MU(){if(zD)return ry;zD=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var o in s)o!=="key"&&(i[o]=s[o])}else i=s;return s=i.ref,{$$typeof:r,type:n,key:a,ref:s!==void 0?s:null,props:i}}return ry.Fragment=e,ry.jsx=t,ry.jsxs=t,ry}var HD;function _U(){return HD||(HD=1,FA.exports=MU()),FA.exports}var f=_U(),zA={},sy={},UD;function jU(){if(UD)return sy;UD=1,sy.byteLength=o,sy.toByteArray=d,sy.fromByteArray=y;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function a(b){var v=b.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=b.indexOf("=");w===-1&&(w=v);var E=w===v?0:4-w%4;return[w,E]}function o(b){var v=a(b),w=v[0],E=v[1];return(w+E)*3/4-E}function c(b,v,w){return(v+w)*3/4-w}function d(b){var v,w=a(b),E=w[0],C=w[1],N=new t(c(b,E,C)),A=0,k=C>0?E-4:E,M;for(M=0;M<k;M+=4)v=e[b.charCodeAt(M)]<<18|e[b.charCodeAt(M+1)]<<12|e[b.charCodeAt(M+2)]<<6|e[b.charCodeAt(M+3)],N[A++]=v>>16&255,N[A++]=v>>8&255,N[A++]=v&255;return C===2&&(v=e[b.charCodeAt(M)]<<2|e[b.charCodeAt(M+1)]>>4,N[A++]=v&255),C===1&&(v=e[b.charCodeAt(M)]<<10|e[b.charCodeAt(M+1)]<<4|e[b.charCodeAt(M+2)]>>2,N[A++]=v>>8&255,N[A++]=v&255),N}function h(b){return r[b>>18&63]+r[b>>12&63]+r[b>>6&63]+r[b&63]}function g(b,v,w){for(var E,C=[],N=v;N<w;N+=3)E=(b[N]<<16&16711680)+(b[N+1]<<8&65280)+(b[N+2]&255),C.push(h(E));return C.join("")}function y(b){for(var v,w=b.length,E=w%3,C=[],N=16383,A=0,k=w-E;A<k;A+=N)C.push(g(b,A,A+N>k?k:A+N));return E===1?(v=b[w-1],C.push(r[v>>2]+r[v<<4&63]+"==")):E===2&&(v=(b[w-2]<<8)+b[w-1],C.push(r[v>>10]+r[v>>4&63]+r[v<<2&63]+"=")),C.join("")}return sy}var Wv={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var $D;function DU(){return $D||($D=1,Wv.read=function(r,e,t,n,s){var i,a,o=s*8-n-1,c=(1<<o)-1,d=c>>1,h=-7,g=t?s-1:0,y=t?-1:1,b=r[e+g];for(g+=y,i=b&(1<<-h)-1,b>>=-h,h+=o;h>0;i=i*256+r[e+g],g+=y,h-=8);for(a=i&(1<<-h)-1,i>>=-h,h+=n;h>0;a=a*256+r[e+g],g+=y,h-=8);if(i===0)i=1-d;else{if(i===c)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,n),i=i-d}return(b?-1:1)*a*Math.pow(2,i-n)},Wv.write=function(r,e,t,n,s,i){var a,o,c,d=i*8-s-1,h=(1<<d)-1,g=h>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,v=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+g>=1?e+=y/c:e+=y*Math.pow(2,1-g),e*c>=2&&(a++,c/=2),a+g>=h?(o=0,a=h):a+g>=1?(o=(e*c-1)*Math.pow(2,s),a=a+g):(o=e*Math.pow(2,g-1)*Math.pow(2,s),a=0));s>=8;r[t+b]=o&255,b+=v,o/=256,s-=8);for(a=a<<s|o,d+=s;d>0;r[t+b]=a&255,b+=v,a/=256,d-=8);r[t+b-v]|=w*128}),Wv}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var VD;function OU(){return VD||(VD=1,(function(r){const e=jU(),t=DU(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const z=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(z,_),z.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(z){if(z>s)throw new RangeError('The value "'+z+'" is invalid for option "size"');const _=new Uint8Array(z);return Object.setPrototypeOf(_,o.prototype),_}function o(z,_,D){if(typeof z=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(z)}return c(z,_,D)}o.poolSize=8192;function c(z,_,D){if(typeof z=="string")return y(z,_);if(ArrayBuffer.isView(z))return v(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(an(z,ArrayBuffer)||z&&an(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(an(z,SharedArrayBuffer)||z&&an(z.buffer,SharedArrayBuffer)))return w(z,_,D);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=z.valueOf&&z.valueOf();if(Y!=null&&Y!==z)return o.from(Y,_,D);const se=E(z);if(se)return se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return o.from(z[Symbol.toPrimitive]("string"),_,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}o.from=function(z,_,D){return c(z,_,D)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function d(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function h(z,_,D){return d(z),z<=0?a(z):_!==void 0?typeof D=="string"?a(z).fill(_,D):a(z).fill(_):a(z)}o.alloc=function(z,_,D){return h(z,_,D)};function g(z){return d(z),a(z<0?0:C(z)|0)}o.allocUnsafe=function(z){return g(z)},o.allocUnsafeSlow=function(z){return g(z)};function y(z,_){if((typeof _!="string"||_==="")&&(_="utf8"),!o.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const D=A(z,_)|0;let Y=a(D);const se=Y.write(z,_);return se!==D&&(Y=Y.slice(0,se)),Y}function b(z){const _=z.length<0?0:C(z.length)|0,D=a(_);for(let Y=0;Y<_;Y+=1)D[Y]=z[Y]&255;return D}function v(z){if(an(z,Uint8Array)){const _=new Uint8Array(z);return w(_.buffer,_.byteOffset,_.byteLength)}return b(z)}function w(z,_,D){if(_<0||z.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<_+(D||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return _===void 0&&D===void 0?Y=new Uint8Array(z):D===void 0?Y=new Uint8Array(z,_):Y=new Uint8Array(z,_,D),Object.setPrototypeOf(Y,o.prototype),Y}function E(z){if(o.isBuffer(z)){const _=C(z.length)|0,D=a(_);return D.length===0||z.copy(D,0,0,_),D}if(z.length!==void 0)return typeof z.length!="number"||gi(z.length)?a(0):b(z);if(z.type==="Buffer"&&Array.isArray(z.data))return b(z.data)}function C(z){if(z>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return z|0}function N(z){return+z!=z&&(z=0),o.alloc(+z)}o.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==o.prototype},o.compare=function(_,D){if(an(_,Uint8Array)&&(_=o.from(_,_.offset,_.byteLength)),an(D,Uint8Array)&&(D=o.from(D,D.offset,D.byteLength)),!o.isBuffer(_)||!o.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===D)return 0;let Y=_.length,se=D.length;for(let oe=0,xe=Math.min(Y,se);oe<xe;++oe)if(_[oe]!==D[oe]){Y=_[oe],se=D[oe];break}return Y<se?-1:se<Y?1:0},o.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(_,D){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return o.alloc(0);let Y;if(D===void 0)for(D=0,Y=0;Y<_.length;++Y)D+=_[Y].length;const se=o.allocUnsafe(D);let oe=0;for(Y=0;Y<_.length;++Y){let xe=_[Y];if(an(xe,Uint8Array))oe+xe.length>se.length?(o.isBuffer(xe)||(xe=o.from(xe)),xe.copy(se,oe)):Uint8Array.prototype.set.call(se,xe,oe);else if(o.isBuffer(xe))xe.copy(se,oe);else throw new TypeError('"list" argument must be an Array of Buffers');oe+=xe.length}return se};function A(z,_){if(o.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||an(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const D=z.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&D===0)return 0;let se=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Be(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return ar(z).length;default:if(se)return Y?-1:Be(z).length;_=(""+_).toLowerCase(),se=!0}}o.byteLength=A;function k(z,_,D){let Y=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,_>>>=0,D<=_))return"";for(z||(z="utf8");;)switch(z){case"hex":return te(this,_,D);case"utf8":case"utf-8":return X(this,_,D);case"ascii":return Z(this,_,D);case"latin1":case"binary":return he(this,_,D);case"base64":return V(this,_,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,_,D);default:if(Y)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Y=!0}}o.prototype._isBuffer=!0;function M(z,_,D){const Y=z[_];z[_]=z[D],z[D]=Y}o.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let D=0;D<_;D+=2)M(this,D,D+1);return this},o.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let D=0;D<_;D+=4)M(this,D,D+3),M(this,D+1,D+2);return this},o.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let D=0;D<_;D+=8)M(this,D,D+7),M(this,D+1,D+6),M(this,D+2,D+5),M(this,D+3,D+4);return this},o.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?X(this,0,_):k.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(_){if(!o.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:o.compare(this,_)===0},o.prototype.inspect=function(){let _="";const D=r.INSPECT_MAX_BYTES;return _=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(_+=" ... "),"<Buffer "+_+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(_,D,Y,se,oe){if(an(_,Uint8Array)&&(_=o.from(_,_.offset,_.byteLength)),!o.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(D===void 0&&(D=0),Y===void 0&&(Y=_?_.length:0),se===void 0&&(se=0),oe===void 0&&(oe=this.length),D<0||Y>_.length||se<0||oe>this.length)throw new RangeError("out of range index");if(se>=oe&&D>=Y)return 0;if(se>=oe)return-1;if(D>=Y)return 1;if(D>>>=0,Y>>>=0,se>>>=0,oe>>>=0,this===_)return 0;let xe=oe-se,$e=Y-D;const wt=Math.min(xe,$e),lt=this.slice(se,oe),Gt=_.slice(D,Y);for(let _t=0;_t<wt;++_t)if(lt[_t]!==Gt[_t]){xe=lt[_t],$e=Gt[_t];break}return xe<$e?-1:$e<xe?1:0};function O(z,_,D,Y,se){if(z.length===0)return-1;if(typeof D=="string"?(Y=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,gi(D)&&(D=se?0:z.length-1),D<0&&(D=z.length+D),D>=z.length){if(se)return-1;D=z.length-1}else if(D<0)if(se)D=0;else return-1;if(typeof _=="string"&&(_=o.from(_,Y)),o.isBuffer(_))return _.length===0?-1:P(z,_,D,Y,se);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?se?Uint8Array.prototype.indexOf.call(z,_,D):Uint8Array.prototype.lastIndexOf.call(z,_,D):P(z,[_],D,Y,se);throw new TypeError("val must be string, number or Buffer")}function P(z,_,D,Y,se){let oe=1,xe=z.length,$e=_.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(z.length<2||_.length<2)return-1;oe=2,xe/=2,$e/=2,D/=2}function wt(Gt,_t){return oe===1?Gt[_t]:Gt.readUInt16BE(_t*oe)}let lt;if(se){let Gt=-1;for(lt=D;lt<xe;lt++)if(wt(z,lt)===wt(_,Gt===-1?0:lt-Gt)){if(Gt===-1&&(Gt=lt),lt-Gt+1===$e)return Gt*oe}else Gt!==-1&&(lt-=lt-Gt),Gt=-1}else for(D+$e>xe&&(D=xe-$e),lt=D;lt>=0;lt--){let Gt=!0;for(let _t=0;_t<$e;_t++)if(wt(z,lt+_t)!==wt(_,_t)){Gt=!1;break}if(Gt)return lt}return-1}o.prototype.includes=function(_,D,Y){return this.indexOf(_,D,Y)!==-1},o.prototype.indexOf=function(_,D,Y){return O(this,_,D,Y,!0)},o.prototype.lastIndexOf=function(_,D,Y){return O(this,_,D,Y,!1)};function F(z,_,D,Y){D=Number(D)||0;const se=z.length-D;Y?(Y=Number(Y),Y>se&&(Y=se)):Y=se;const oe=_.length;Y>oe/2&&(Y=oe/2);let xe;for(xe=0;xe<Y;++xe){const $e=parseInt(_.substr(xe*2,2),16);if(gi($e))return xe;z[D+xe]=$e}return xe}function H(z,_,D,Y){return gn(Be(_,z.length-D),z,D,Y)}function ee(z,_,D,Y){return gn(et(_),z,D,Y)}function G(z,_,D,Y){return gn(ar(_),z,D,Y)}function J(z,_,D,Y){return gn(mn(_,z.length-D),z,D,Y)}o.prototype.write=function(_,D,Y,se){if(D===void 0)se="utf8",Y=this.length,D=0;else if(Y===void 0&&typeof D=="string")se=D,Y=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(Y)?(Y=Y>>>0,se===void 0&&(se="utf8")):(se=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const oe=this.length-D;if((Y===void 0||Y>oe)&&(Y=oe),_.length>0&&(Y<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");let xe=!1;for(;;)switch(se){case"hex":return F(this,_,D,Y);case"utf8":case"utf-8":return H(this,_,D,Y);case"ascii":case"latin1":case"binary":return ee(this,_,D,Y);case"base64":return G(this,_,D,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,_,D,Y);default:if(xe)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),xe=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(z,_,D){return _===0&&D===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(_,D))}function X(z,_,D){D=Math.min(z.length,D);const Y=[];let se=_;for(;se<D;){const oe=z[se];let xe=null,$e=oe>239?4:oe>223?3:oe>191?2:1;if(se+$e<=D){let wt,lt,Gt,_t;switch($e){case 1:oe<128&&(xe=oe);break;case 2:wt=z[se+1],(wt&192)===128&&(_t=(oe&31)<<6|wt&63,_t>127&&(xe=_t));break;case 3:wt=z[se+1],lt=z[se+2],(wt&192)===128&&(lt&192)===128&&(_t=(oe&15)<<12|(wt&63)<<6|lt&63,_t>2047&&(_t<55296||_t>57343)&&(xe=_t));break;case 4:wt=z[se+1],lt=z[se+2],Gt=z[se+3],(wt&192)===128&&(lt&192)===128&&(Gt&192)===128&&(_t=(oe&15)<<18|(wt&63)<<12|(lt&63)<<6|Gt&63,_t>65535&&_t<1114112&&(xe=_t))}}xe===null?(xe=65533,$e=1):xe>65535&&(xe-=65536,Y.push(xe>>>10&1023|55296),xe=56320|xe&1023),Y.push(xe),se+=$e}return q(Y)}const K=4096;function q(z){const _=z.length;if(_<=K)return String.fromCharCode.apply(String,z);let D="",Y=0;for(;Y<_;)D+=String.fromCharCode.apply(String,z.slice(Y,Y+=K));return D}function Z(z,_,D){let Y="";D=Math.min(z.length,D);for(let se=_;se<D;++se)Y+=String.fromCharCode(z[se]&127);return Y}function he(z,_,D){let Y="";D=Math.min(z.length,D);for(let se=_;se<D;++se)Y+=String.fromCharCode(z[se]);return Y}function te(z,_,D){const Y=z.length;(!_||_<0)&&(_=0),(!D||D<0||D>Y)&&(D=Y);let se="";for(let oe=_;oe<D;++oe)se+=Tn[z[oe]];return se}function pe(z,_,D){const Y=z.slice(_,D);let se="";for(let oe=0;oe<Y.length-1;oe+=2)se+=String.fromCharCode(Y[oe]+Y[oe+1]*256);return se}o.prototype.slice=function(_,D){const Y=this.length;_=~~_,D=D===void 0?Y:~~D,_<0?(_+=Y,_<0&&(_=0)):_>Y&&(_=Y),D<0?(D+=Y,D<0&&(D=0)):D>Y&&(D=Y),D<_&&(D=_);const se=this.subarray(_,D);return Object.setPrototypeOf(se,o.prototype),se};function W(z,_,D){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+_>D)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(_,D,Y){_=_>>>0,D=D>>>0,Y||W(_,D,this.length);let se=this[_],oe=1,xe=0;for(;++xe<D&&(oe*=256);)se+=this[_+xe]*oe;return se},o.prototype.readUintBE=o.prototype.readUIntBE=function(_,D,Y){_=_>>>0,D=D>>>0,Y||W(_,D,this.length);let se=this[_+--D],oe=1;for(;D>0&&(oe*=256);)se+=this[_+--D]*oe;return se},o.prototype.readUint8=o.prototype.readUInt8=function(_,D){return _=_>>>0,D||W(_,1,this.length),this[_]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(_,D){return _=_>>>0,D||W(_,2,this.length),this[_]|this[_+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(_,D){return _=_>>>0,D||W(_,2,this.length),this[_]<<8|this[_+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(_,D){return _=_>>>0,D||W(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(_,D){return _=_>>>0,D||W(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},o.prototype.readBigUInt64LE=Nr(function(_){_=_>>>0,Ge(_,"offset");const D=this[_],Y=this[_+7];(D===void 0||Y===void 0)&&Ze(_,this.length-8);const se=D+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,oe=this[++_]+this[++_]*2**8+this[++_]*2**16+Y*2**24;return BigInt(se)+(BigInt(oe)<<BigInt(32))}),o.prototype.readBigUInt64BE=Nr(function(_){_=_>>>0,Ge(_,"offset");const D=this[_],Y=this[_+7];(D===void 0||Y===void 0)&&Ze(_,this.length-8);const se=D*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],oe=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+Y;return(BigInt(se)<<BigInt(32))+BigInt(oe)}),o.prototype.readIntLE=function(_,D,Y){_=_>>>0,D=D>>>0,Y||W(_,D,this.length);let se=this[_],oe=1,xe=0;for(;++xe<D&&(oe*=256);)se+=this[_+xe]*oe;return oe*=128,se>=oe&&(se-=Math.pow(2,8*D)),se},o.prototype.readIntBE=function(_,D,Y){_=_>>>0,D=D>>>0,Y||W(_,D,this.length);let se=D,oe=1,xe=this[_+--se];for(;se>0&&(oe*=256);)xe+=this[_+--se]*oe;return oe*=128,xe>=oe&&(xe-=Math.pow(2,8*D)),xe},o.prototype.readInt8=function(_,D){return _=_>>>0,D||W(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},o.prototype.readInt16LE=function(_,D){_=_>>>0,D||W(_,2,this.length);const Y=this[_]|this[_+1]<<8;return Y&32768?Y|4294901760:Y},o.prototype.readInt16BE=function(_,D){_=_>>>0,D||W(_,2,this.length);const Y=this[_+1]|this[_]<<8;return Y&32768?Y|4294901760:Y},o.prototype.readInt32LE=function(_,D){return _=_>>>0,D||W(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},o.prototype.readInt32BE=function(_,D){return _=_>>>0,D||W(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},o.prototype.readBigInt64LE=Nr(function(_){_=_>>>0,Ge(_,"offset");const D=this[_],Y=this[_+7];(D===void 0||Y===void 0)&&Ze(_,this.length-8);const se=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(Y<<24);return(BigInt(se)<<BigInt(32))+BigInt(D+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),o.prototype.readBigInt64BE=Nr(function(_){_=_>>>0,Ge(_,"offset");const D=this[_],Y=this[_+7];(D===void 0||Y===void 0)&&Ze(_,this.length-8);const se=(D<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(se)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+Y)}),o.prototype.readFloatLE=function(_,D){return _=_>>>0,D||W(_,4,this.length),t.read(this,_,!0,23,4)},o.prototype.readFloatBE=function(_,D){return _=_>>>0,D||W(_,4,this.length),t.read(this,_,!1,23,4)},o.prototype.readDoubleLE=function(_,D){return _=_>>>0,D||W(_,8,this.length),t.read(this,_,!0,52,8)},o.prototype.readDoubleBE=function(_,D){return _=_>>>0,D||W(_,8,this.length),t.read(this,_,!1,52,8)};function ne(z,_,D,Y,se,oe){if(!o.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>se||_<oe)throw new RangeError('"value" argument is out of bounds');if(D+Y>z.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(_,D,Y,se){if(_=+_,D=D>>>0,Y=Y>>>0,!se){const $e=Math.pow(2,8*Y)-1;ne(this,_,D,Y,$e,0)}let oe=1,xe=0;for(this[D]=_&255;++xe<Y&&(oe*=256);)this[D+xe]=_/oe&255;return D+Y},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(_,D,Y,se){if(_=+_,D=D>>>0,Y=Y>>>0,!se){const $e=Math.pow(2,8*Y)-1;ne(this,_,D,Y,$e,0)}let oe=Y-1,xe=1;for(this[D+oe]=_&255;--oe>=0&&(xe*=256);)this[D+oe]=_/xe&255;return D+Y},o.prototype.writeUint8=o.prototype.writeUInt8=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,1,255,0),this[D]=_&255,D+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,2,65535,0),this[D]=_&255,this[D+1]=_>>>8,D+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,2,65535,0),this[D]=_>>>8,this[D+1]=_&255,D+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,4,4294967295,0),this[D+3]=_>>>24,this[D+2]=_>>>16,this[D+1]=_>>>8,this[D]=_&255,D+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,4,4294967295,0),this[D]=_>>>24,this[D+1]=_>>>16,this[D+2]=_>>>8,this[D+3]=_&255,D+4};function me(z,_,D,Y,se){En(_,Y,se,z,D,7);let oe=Number(_&BigInt(4294967295));z[D++]=oe,oe=oe>>8,z[D++]=oe,oe=oe>>8,z[D++]=oe,oe=oe>>8,z[D++]=oe;let xe=Number(_>>BigInt(32)&BigInt(4294967295));return z[D++]=xe,xe=xe>>8,z[D++]=xe,xe=xe>>8,z[D++]=xe,xe=xe>>8,z[D++]=xe,D}function we(z,_,D,Y,se){En(_,Y,se,z,D,7);let oe=Number(_&BigInt(4294967295));z[D+7]=oe,oe=oe>>8,z[D+6]=oe,oe=oe>>8,z[D+5]=oe,oe=oe>>8,z[D+4]=oe;let xe=Number(_>>BigInt(32)&BigInt(4294967295));return z[D+3]=xe,xe=xe>>8,z[D+2]=xe,xe=xe>>8,z[D+1]=xe,xe=xe>>8,z[D]=xe,D+8}o.prototype.writeBigUInt64LE=Nr(function(_,D=0){return me(this,_,D,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Nr(function(_,D=0){return we(this,_,D,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(_,D,Y,se){if(_=+_,D=D>>>0,!se){const wt=Math.pow(2,8*Y-1);ne(this,_,D,Y,wt-1,-wt)}let oe=0,xe=1,$e=0;for(this[D]=_&255;++oe<Y&&(xe*=256);)_<0&&$e===0&&this[D+oe-1]!==0&&($e=1),this[D+oe]=(_/xe>>0)-$e&255;return D+Y},o.prototype.writeIntBE=function(_,D,Y,se){if(_=+_,D=D>>>0,!se){const wt=Math.pow(2,8*Y-1);ne(this,_,D,Y,wt-1,-wt)}let oe=Y-1,xe=1,$e=0;for(this[D+oe]=_&255;--oe>=0&&(xe*=256);)_<0&&$e===0&&this[D+oe+1]!==0&&($e=1),this[D+oe]=(_/xe>>0)-$e&255;return D+Y},o.prototype.writeInt8=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,1,127,-128),_<0&&(_=255+_+1),this[D]=_&255,D+1},o.prototype.writeInt16LE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,2,32767,-32768),this[D]=_&255,this[D+1]=_>>>8,D+2},o.prototype.writeInt16BE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,2,32767,-32768),this[D]=_>>>8,this[D+1]=_&255,D+2},o.prototype.writeInt32LE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,4,2147483647,-2147483648),this[D]=_&255,this[D+1]=_>>>8,this[D+2]=_>>>16,this[D+3]=_>>>24,D+4},o.prototype.writeInt32BE=function(_,D,Y){return _=+_,D=D>>>0,Y||ne(this,_,D,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[D]=_>>>24,this[D+1]=_>>>16,this[D+2]=_>>>8,this[D+3]=_&255,D+4},o.prototype.writeBigInt64LE=Nr(function(_,D=0){return me(this,_,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Nr(function(_,D=0){return we(this,_,D,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(z,_,D,Y,se,oe){if(D+Y>z.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function je(z,_,D,Y,se){return _=+_,D=D>>>0,se||Ne(z,_,D,4),t.write(z,_,D,Y,23,4),D+4}o.prototype.writeFloatLE=function(_,D,Y){return je(this,_,D,!0,Y)},o.prototype.writeFloatBE=function(_,D,Y){return je(this,_,D,!1,Y)};function Me(z,_,D,Y,se){return _=+_,D=D>>>0,se||Ne(z,_,D,8),t.write(z,_,D,Y,52,8),D+8}o.prototype.writeDoubleLE=function(_,D,Y){return Me(this,_,D,!0,Y)},o.prototype.writeDoubleBE=function(_,D,Y){return Me(this,_,D,!1,Y)},o.prototype.copy=function(_,D,Y,se){if(!o.isBuffer(_))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!se&&se!==0&&(se=this.length),D>=_.length&&(D=_.length),D||(D=0),se>0&&se<Y&&(se=Y),se===Y||_.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),_.length-D<se-Y&&(se=_.length-D+Y);const oe=se-Y;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(D,Y,se):Uint8Array.prototype.set.call(_,this.subarray(Y,se),D),oe},o.prototype.fill=function(_,D,Y,se){if(typeof _=="string"){if(typeof D=="string"?(se=D,D=0,Y=this.length):typeof Y=="string"&&(se=Y,Y=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!o.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if(_.length===1){const xe=_.charCodeAt(0);(se==="utf8"&&xe<128||se==="latin1")&&(_=xe)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(D<0||this.length<D||this.length<Y)throw new RangeError("Out of range index");if(Y<=D)return this;D=D>>>0,Y=Y===void 0?this.length:Y>>>0,_||(_=0);let oe;if(typeof _=="number")for(oe=D;oe<Y;++oe)this[oe]=_;else{const xe=o.isBuffer(_)?_:o.from(_,se),$e=xe.length;if($e===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(oe=0;oe<Y-D;++oe)this[oe+D]=xe[oe%$e]}return this};const He={};function Ye(z,_,D){He[z]=class extends D{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:se,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}Ye("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ye("ERR_INVALID_ARG_TYPE",function(z,_){return`The "${z}" argument must be of type number. Received type ${typeof _}`},TypeError),Ye("ERR_OUT_OF_RANGE",function(z,_,D){let Y=`The value of "${z}" is out of range.`,se=D;return Number.isInteger(D)&&Math.abs(D)>2**32?se=Qe(String(D)):typeof D=="bigint"&&(se=String(D),(D>BigInt(2)**BigInt(32)||D<-(BigInt(2)**BigInt(32)))&&(se=Qe(se)),se+="n"),Y+=` It must be ${_}. Received ${se}`,Y},RangeError);function Qe(z){let _="",D=z.length;const Y=z[0]==="-"?1:0;for(;D>=Y+4;D-=3)_=`_${z.slice(D-3,D)}${_}`;return`${z.slice(0,D)}${_}`}function Ht(z,_,D){Ge(_,"offset"),(z[_]===void 0||z[_+D]===void 0)&&Ze(_,z.length-(D+1))}function En(z,_,D,Y,se,oe){if(z>D||z<_){const xe=typeof _=="bigint"?"n":"";let $e;throw _===0||_===BigInt(0)?$e=`>= 0${xe} and < 2${xe} ** ${(oe+1)*8}${xe}`:$e=`>= -(2${xe} ** ${(oe+1)*8-1}${xe}) and < 2 ** ${(oe+1)*8-1}${xe}`,new He.ERR_OUT_OF_RANGE("value",$e,z)}Ht(Y,se,oe)}function Ge(z,_){if(typeof z!="number")throw new He.ERR_INVALID_ARG_TYPE(_,"number",z)}function Ze(z,_,D){throw Math.floor(z)!==z?(Ge(z,D),new He.ERR_OUT_OF_RANGE("offset","an integer",z)):_<0?new He.ERR_BUFFER_OUT_OF_BOUNDS:new He.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${_}`,z)}const Mt=/[^+/0-9A-Za-z-_]/g;function Te(z){if(z=z.split("=")[0],z=z.trim().replace(Mt,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function Be(z,_){_=_||1/0;let D;const Y=z.length;let se=null;const oe=[];for(let xe=0;xe<Y;++xe){if(D=z.charCodeAt(xe),D>55295&&D<57344){if(!se){if(D>56319){(_-=3)>-1&&oe.push(239,191,189);continue}else if(xe+1===Y){(_-=3)>-1&&oe.push(239,191,189);continue}se=D;continue}if(D<56320){(_-=3)>-1&&oe.push(239,191,189),se=D;continue}D=(se-55296<<10|D-56320)+65536}else se&&(_-=3)>-1&&oe.push(239,191,189);if(se=null,D<128){if((_-=1)<0)break;oe.push(D)}else if(D<2048){if((_-=2)<0)break;oe.push(D>>6|192,D&63|128)}else if(D<65536){if((_-=3)<0)break;oe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((_-=4)<0)break;oe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return oe}function et(z){const _=[];for(let D=0;D<z.length;++D)_.push(z.charCodeAt(D)&255);return _}function mn(z,_){let D,Y,se;const oe=[];for(let xe=0;xe<z.length&&!((_-=2)<0);++xe)D=z.charCodeAt(xe),Y=D>>8,se=D%256,oe.push(se),oe.push(Y);return oe}function ar(z){return e.toByteArray(Te(z))}function gn(z,_,D,Y){let se;for(se=0;se<Y&&!(se+D>=_.length||se>=z.length);++se)_[se+D]=z[se];return se}function an(z,_){return z instanceof _||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===_.name}function gi(z){return z!==z}const Tn=(function(){const z="0123456789abcdef",_=new Array(256);for(let D=0;D<16;++D){const Y=D*16;for(let se=0;se<16;++se)_[Y+se]=z[D]+z[se]}return _})();function Nr(z){return typeof BigInt>"u"?Ks:z}function Ks(){throw new Error("BigInt not supported")}})(zA)),zA}var RU=OU(),HA={exports:{}},qD;function LU(){if(qD)return HA.exports;qD=1;var r=HA.exports={},e,t;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=s}catch{t=s}})();function i(w){if(e===setTimeout)return setTimeout(w,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch{try{return e.call(null,w,0)}catch{return e.call(this,w,0)}}}function a(w){if(t===clearTimeout)return clearTimeout(w);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(w);try{return t(w)}catch{try{return t.call(null,w)}catch{return t.call(this,w)}}}var o=[],c=!1,d,h=-1;function g(){!c||!d||(c=!1,d.length?o=d.concat(o):h=-1,o.length&&y())}function y(){if(!c){var w=i(g);c=!0;for(var E=o.length;E;){for(d=o,o=[];++h<E;)d&&d[h].run();h=-1,E=o.length}d=null,c=!1,a(w)}}r.nextTick=function(w){var E=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)E[C-1]=arguments[C];o.push(new b(w,E)),o.length===1&&!c&&i(y)};function b(w,E){this.fun=w,this.array=E}b.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function v(){}return r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(w){return[]},r.binding=function(w){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(w){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},HA.exports}var PU=LU();const IU=Qf(PU),Us=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fk=[.001,0,0,.001,0,0],UA=1.35,Vi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},nl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},px="pdfjs_internal_editor_",at={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},AP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ls={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},cr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Wp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mb={ERRORS:0,WARNINGS:1,INFOS:5},Vg={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Yv={moveTo:0,lineTo:1,curveTo:2,closePath:3},NP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let QC=mb.WARNINGS;function BU(r){Number.isInteger(r)&&(QC=r)}function FU(){return QC}function ZC(r){QC>=mb.INFOS&&console.info(`Info: ${r}`)}function ot(r){QC>=mb.WARNINGS&&console.warn(`Warning: ${r}`)}function Cn(r){throw new Error(r)}function Dt(r,e){r||Cn(e)}function zU(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _M(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const s=r.match(/\./g);(s==null?void 0:s.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=qU(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return zU(n)?n:null}function jM(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&_M(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ft(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Zf=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class GD extends Zf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class $A extends Zf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class CS extends Zf{constructor(e){super(e,"InvalidPDFException")}}class mx extends Zf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class HU extends Zf{constructor(e){super(e,"FormatError")}}class jc extends Zf{constructor(e){super(e,"AbortException")}}function kP(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Cn("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=r.subarray(s,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function gb(r){typeof r!="string"&&Cn("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function UU(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function $U(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function VU(){try{return new Function(""),!0}catch{return!1}}class es{static get isLittleEndian(){return ft(this,"isLittleEndian",$U())}static get isEvalSupported(){return ft(this,"isEvalSupported",VU())}static get isOffscreenCanvasSupported(){return ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ft(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ft(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ft(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const VA=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var Mc,Rw,pk;class Le{static makeHexColor(e,t,n){return`#${VA[e]}${VA[t]}${VA[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],i=e[n+1];e[n]=s*t[0]+i*t[2]+t[4],e[n+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],i=t[1],a=t[2],o=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const g=e[n+h],y=e[n+h+1];e[n+h]=g*s+y*a+c,e[n+h+1]=g*i+y*o+d}}static applyInverseTransform(e,t){const n=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const s=t[0],i=t[1],a=t[2],o=t[3],c=t[4],d=t[5],h=e[0],g=e[1],y=e[2],b=e[3];let v=s*h+c,w=v,E=s*y+c,C=E,N=o*g+d,A=N,k=o*b+d,M=k;if(i!==0||a!==0){const O=i*h,P=i*y,F=a*g,H=a*b;v+=F,C+=F,E+=H,w+=H,N+=O,M+=O,k+=P,A+=P}n[0]=Math.min(n[0],v,E,w,C),n[1]=Math.min(n[1],N,k,A,M),n[2]=Math.max(n[2],v,E,w,C),n[3]=Math.max(n[3],N,k,A,M)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],i=e[2],a=e[3],o=n**2+s**2,c=n*i+s*a,d=i**2+a**2,h=(o+d)/2,g=Math.sqrt(h**2-(o*d-c**2));t[0]=Math.sqrt(h+g||1),t[1]=Math.sqrt(h-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,s,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,n,s,i,a,o,c,d){d[0]=Math.min(d[0],e,o),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,o),d[3]=Math.max(d[3],t,c),B(this,Mc,pk).call(this,e,n,i,o,t,s,a,c,3*(-e+3*(n-i)+o),6*(e-2*n+i),3*(n-e),d),B(this,Mc,pk).call(this,e,n,i,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),d)}}Mc=new WeakSet,Rw=function(e,t,n,s,i,a,o,c,d,h){if(d<=0||d>=1)return;const g=1-d,y=d*d,b=y*d,v=g*(g*(g*e+3*d*t)+3*y*n)+b*s,w=g*(g*(g*i+3*d*a)+3*y*o)+b*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],w)},pk=function(e,t,n,s,i,a,o,c,d,h,g,y){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&B(this,Mc,Rw).call(this,e,t,n,s,i,a,o,c,-g/h,y);return}const b=h**2-4*g*d;if(b<0)return;const v=Math.sqrt(b),w=2*d;B(this,Mc,Rw).call(this,e,t,n,s,i,a,o,c,(-h+v)/w,y),B(this,Mc,Rw).call(this,e,t,n,s,i,a,o,c,(-h-v)/w,y)},L(Le,Mc);function qU(r){return decodeURIComponent(escape(r))}let qA=null,WD=null;function MP(r){return qA||(qA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,WD=new Map([["ﬅ","ſt"]])),r.replaceAll(qA,(e,t,n)=>t?t.normalize("NFKC"):WD.get(n))}function DM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),kP(r)}const OM="pdfjs_internal_id_";function GU(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...i]=t;if(!r(n)&&!Number.isInteger(n)||!e(s))return!1;const a=i.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function Ms(r,e,t){return Math.min(Math.max(r,e),t)}function _P(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(kP(r))}function WU(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):gb(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class gx{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(gx.shouldBuildText(o))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)s(d)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class RM{static setupStorage(e,t,n,s,i){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}o&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var g,y;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:n});const o=i!=="richText",c=e.div;if(c.append(a),e.viewport){const b=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=b}o&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const b=document.createTextNode(s.value);a.append(b),o&&gx.shouldBuildText(s.name)&&d.push(b)}return{textDivs:d}}const h=[[s,-1,a]];for(;h.length>0;){const[b,v,w]=h.at(-1);if(v+1===b.children.length){h.pop();continue}const E=b.children[++h.at(-1)[1]];if(E===null)continue;const{name:C}=E;if(C==="#text"){const A=document.createTextNode(E.value);d.push(A),w.append(A);continue}const N=(g=E==null?void 0:E.attributes)!=null&&g.xmlns?document.createElementNS(E.attributes.xmlns,C):document.createElement(C);if(w.append(N),E.attributes&&this.setAttributes({html:N,element:E,storage:t,intent:i,linkService:n}),((y=E.children)==null?void 0:y.length)>0)h.push([E,-1,N]);else if(E.value){const A=document.createTextNode(E.value);o&&gx.shouldBuildText(C)&&d.push(A),N.append(A)}}for(const b of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ol="http://www.w3.org/2000/svg",mh=class mh{};le(mh,"CSS",96),le(mh,"PDF",72),le(mh,"PDF_TO_CSS_UNITS",mh.CSS/mh.PDF);let Dc=mh;async function t0(r,e="text"){if(vy(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class yb{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=i,this.offsetY=a,n*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,g,y,b;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,g=0,y=0,b=1;break;case 90:h=0,g=1,y=1,b=0;break;case 270:h=0,g=-1,y=-1,b=0;break;case 0:h=1,g=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(y=-y,b=-b);let v,w,E,C;h===0?(v=Math.abs(d-e[1])*n+i,w=Math.abs(c-e[0])*n+a,E=(e[3]-e[1])*n,C=(e[2]-e[0])*n):(v=Math.abs(c-e[0])*n+i,w=Math.abs(d-e[1])*n+a,E=(e[2]-e[0])*n,C=(e[3]-e[1])*n),this.transform=[h*n,g*n,y*n,b*n,v-h*n*c-y*n*d,w-g*n*c-b*n*d],this.width=E,this.height=C}get rawDims(){const e=this.viewBox;return ft(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new yb({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return Le.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Le.applyTransform(t,this.transform);const n=[e[2],e[3]];return Le.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Le.applyInverseTransform(n,this.transform),n}}class eE extends Zf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xb(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function tE(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function jP(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function DP(r,e="document.pdf"){if(typeof r!="string")return e;if(xb(r))return ot('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const s=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},i=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(i.test(a))return s(a);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const d of o)if(i.test(d))return s(d);const c=Array.from(n.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return s(d)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return s(c[0])}return e}class YD{constructor(){le(this,"started",Object.create(null));le(this,"times",[])}time(e){e in this.started&&ot(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ot(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-s}ms
`);return e.join("")}}function vy(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Qi(r){r.preventDefault()}function $n(r){r.preventDefault(),r.stopPropagation()}function YU(r){console.log("Deprecated API usage: "+r)}var Lx;class yx{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,Lx)||j(this,Lx,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,Lx).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,d==="-"?(a+=h,o+=g):d==="+"&&(a-=h,o-=g),new Date(Date.UTC(n,s,i,a,o,c))}}Lx=new WeakMap,L(yx,Lx);function OP(r,{scale:e=1,rotation:t=0}){const{width:n,height:s}=r.attributes.style,i=[0,0,parseInt(n),parseInt(s)];return new yb({viewBox:i,userUnit:1,scale:e,rotation:t})}function n0(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ot(`Not a valid color format: "${r}"`),[0,0,0])}function XU(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,n0(n))}e.remove()}function Un(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform();return[e,t,n,s,i,a]}function To(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform().invertSelf();return[e,t,n,s,i,a]}function _d(r,e,t=!1,n=!0){if(e instanceof yb){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=r,o=es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${i}px`,h=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,g=o?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=g):(a.width=g,a.height=h)}n&&r.setAttribute("data-main-rotation",e.rotation)}class po{constructor(){const{pixelRatio:e}=po;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,i=-1){let a=1/0,o=1/0,c=1/0;n=po.capPixels(n,i),n>0&&(a=Math.sqrt(n/(e*t))),s!==-1&&(o=s/e,c=s/t);const d=Math.min(a,o,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const ES=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class KU{static get isDarkMode(){var e;return ft(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class RP{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),ft(this,"commentForegroundColor",n0(n))}}function LP(r,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return r=Math.round(r*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[r,e,t]}function XD(r,e){const t=r[0]/255,n=r[1]/255,s=r[2]/255,i=Math.max(t,n,s),a=Math.min(t,n,s),o=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const c=i-a;switch(e[1]=o<.5?c/(i+a):c/(2-i-a),i){case t:e[0]=((n-s)/c+(n<s?6:0))*60;break;case n:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-n)/c+4)*60;break}}e[2]=o}function mk(r,e){const t=r[0],n=r[1],s=r[2],i=(1-Math.abs(2*s-1))*n,a=i*(1-Math.abs(t/60%2-1)),o=s-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=i+o,e[2]=o;break;case 2:e[0]=o,e[1]=i+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=i+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=i+o;break;case 5:case 6:e[0]=i+o,e[1]=o,e[2]=a+o;break}}function KD(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function JD(r,e,t){mk(r,t),t.map(KD);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];mk(e,t),t.map(KD);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const QD=new Map;function PP(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=QD.get(t);if(n)return n;const s=new Float32Array(9),i=s.subarray(0,3),a=s.subarray(3,6);XD(r,a);const o=s.subarray(6,9);XD(e,o);const c=o[2]<.5,d=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),JD(a,o,i)<d){let h,g;c?(h=a[2],g=1):(h=0,g=a[2]);const y=.005;for(;g-h>y;){const b=a[2]=(h+g)/2;c===JD(a,o,i)<d?h=b:g=b}a[2]=c?g:h}return mk(a,i),n=Le.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),QD.set(t,n),n}function LM({html:r,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof r=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=r.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const d=a[o];i.append(document.createTextNode(d)),o<c-1&&i.append(document.createElement("br"))}s.append(i)}else RM.render({xfaHtml:r,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),n.append(s)}var Nu,ku,va,wa,Px,Mu,xm,bm,Ix,OC,IP,bs,BP,FP,Yp,wy;const Ul=class Ul{constructor(e){L(this,bs);L(this,Nu,null);L(this,ku,null);L(this,va);L(this,wa,null);L(this,Px,null);L(this,Mu,null);L(this,xm,null);L(this,bm,null);j(this,va,e),m(Ul,Ix)||j(Ul,Ix,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=j(this,Nu,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,va)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Qi,{signal:t}),e.addEventListener("pointerdown",B(Ul,OC,IP),{signal:t}));const n=j(this,wa,document.createElement("div"));n.className="buttons",e.append(n);const s=m(this,va).toolbarPosition;if(s){const{style:i}=e,a=m(this,va)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,Nu)}hide(){var e;m(this,Nu).classList.add("hidden"),(e=m(this,ku))==null||e.hideDropdown()}show(){var e,t;m(this,Nu).classList.remove("hidden"),(e=m(this,Px))==null||e.shown(),(t=m(this,Mu))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,va),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(Ul,Ix)[e]),B(this,bs,Yp).call(this,n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),m(this,wa).append(n)}async addAltText(e){const t=await e.render();B(this,bs,Yp).call(this,t),m(this,wa).append(t,m(this,bs,wy)),j(this,Px,e)}addComment(e,t=null){if(m(this,Mu))return;const n=e.renderForToolbar();if(!n)return;B(this,bs,Yp).call(this,n);const s=j(this,xm,m(this,bs,wy));t?(m(this,wa).insertBefore(n,t),m(this,wa).insertBefore(s,t)):m(this,wa).append(n,s),j(this,Mu,e),e.toolbar=this}addColorPicker(e){if(m(this,ku))return;j(this,ku,e);const t=e.renderButton();B(this,bs,Yp).call(this,t),m(this,wa).append(t,m(this,bs,wy))}async addEditSignatureButton(e){const t=j(this,bm,await e.renderEditButton(m(this,va)));B(this,bs,Yp).call(this,t),m(this,wa).append(t,m(this,bs,wy))}removeButton(e){var t,n;switch(e){case"comment":(t=m(this,Mu))==null||t.removeToolbarCommentButton(),j(this,Mu,null),(n=m(this,xm))==null||n.remove(),j(this,xm,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const s=m(this,wa).querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){m(this,bm)&&(m(this,bm).title=e)}remove(){var e;m(this,Nu).remove(),(e=m(this,ku))==null||e.destroy(),j(this,ku,null)}};Nu=new WeakMap,ku=new WeakMap,va=new WeakMap,wa=new WeakMap,Px=new WeakMap,Mu=new WeakMap,xm=new WeakMap,bm=new WeakMap,Ix=new WeakMap,OC=new WeakSet,IP=function(e){e.stopPropagation()},bs=new WeakSet,BP=function(e){m(this,va)._focusEventsAllowed=!1,$n(e)},FP=function(e){m(this,va)._focusEventsAllowed=!0,$n(e)},Yp=function(e){const t=m(this,va)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",B(this,bs,BP).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",B(this,bs,FP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Qi,{signal:t}),!0)},wy=function(){const e=document.createElement("div");return e.className="divider",e},L(Ul,OC),L(Ul,Ix,null);let gk=Ul;var Bx,Sh,Vl,Pc,zP,HP,yk;class JU{constructor(e){L(this,Pc);L(this,Bx,null);L(this,Sh,null);L(this,Vl);j(this,Vl,e)}show(e,t,n){const[s,i]=B(this,Pc,HP).call(this,t,n),{style:a}=m(this,Sh)||j(this,Sh,B(this,Pc,zP).call(this));e.append(m(this,Sh)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,Sh).remove()}}Bx=new WeakMap,Sh=new WeakMap,Vl=new WeakMap,Pc=new WeakSet,zP=function(){const e=j(this,Sh,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,Vl)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Qi,{signal:t});const n=j(this,Bx,document.createElement("div"));return n.className="buttons",e.append(n),m(this,Vl).hasCommentManager()&&B(this,Pc,yk).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,Vl).commentSelection("floating_button")}),B(this,Pc,yk).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,Vl).highlightSelection("floating_button")}),e},HP=function(e,t){let n=0,s=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const o=i.x+(t?i.width:0);if(a>n){s=o,n=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,n]},yk=function(e,t,n,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const o=m(this,Vl)._signal;o instanceof AbortSignal&&!o.aborted&&(i.addEventListener("contextmenu",Qi,{signal:o}),i.addEventListener("click",s,{signal:o})),m(this,Bx).append(i)};function UP(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var RC;class QU{constructor(){L(this,RC,0)}get id(){return`${px}${_r(this,RC)._++}`}}RC=new WeakMap;var vm,Fx,Cs,wm,Lw;const nj=class nj{constructor(){L(this,wm);L(this,vm,DM());L(this,Fx,0);L(this,Cs,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ft(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:i}=e;return B(this,wm,Lw).call(this,`${t}_${n}_${s}_${i}`,e)}async getFromUrl(e){return B(this,wm,Lw).call(this,e,e)}async getFromBlob(e,t){const n=await t;return B(this,wm,Lw).call(this,e,n)}async getFromId(e){m(this,Cs)||j(this,Cs,new Map);const t=m(this,Cs).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,Cs)||j(this,Cs,new Map);let n=m(this,Cs).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${m(this,vm)}_${_r(this,Fx)._++}`,refCounter:1,isSvg:!1},m(this,Cs).set(e,n),m(this,Cs).set(n.id,n),n}getSvgUrl(e){const t=m(this,Cs).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;m(this,Cs)||j(this,Cs,new Map);const t=m(this,Cs).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,vm)}_`)}};vm=new WeakMap,Fx=new WeakMap,Cs=new WeakMap,wm=new WeakSet,Lw=async function(e,t){m(this,Cs)||j(this,Cs,new Map);let n=m(this,Cs).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,vm)}_${_r(this,Fx)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await t0(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=nj._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((d,h)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,d()},a.onload=async()=>{const g=n.svgUrl=a.result;o.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},o.onerror=a.onerror=h});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){ot(s),n=null}return m(this,Cs).set(e,n),n&&m(this,Cs).set(n.id,n),n};let xk=nj;var ur,_u,zx,Hn,CP;let ZU=(CP=class{constructor(e=128){L(this,ur,[]);L(this,_u,!1);L(this,zx);L(this,Hn,-1);j(this,zx,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),m(this,_u))return;const c={cmd:e,undo:t,post:n,type:i};if(m(this,Hn)===-1){m(this,ur).length>0&&(m(this,ur).length=0),j(this,Hn,0),m(this,ur).push(c);return}if(a&&m(this,ur)[m(this,Hn)].type===i){o&&(c.undo=m(this,ur)[m(this,Hn)].undo),m(this,ur)[m(this,Hn)]=c;return}const d=m(this,Hn)+1;d===m(this,zx)?m(this,ur).splice(0,1):(j(this,Hn,d),d<m(this,ur).length&&m(this,ur).splice(d)),m(this,ur).push(c)}undo(){if(m(this,Hn)===-1)return;j(this,_u,!0);const{undo:e,post:t}=m(this,ur)[m(this,Hn)];e(),t==null||t(),j(this,_u,!1),j(this,Hn,m(this,Hn)-1)}redo(){if(m(this,Hn)<m(this,ur).length-1){j(this,Hn,m(this,Hn)+1),j(this,_u,!0);const{cmd:e,post:t}=m(this,ur)[m(this,Hn)];e(),t==null||t(),j(this,_u,!1)}}hasSomethingToUndo(){return m(this,Hn)!==-1}hasSomethingToRedo(){return m(this,Hn)<m(this,ur).length-1}cleanType(e){if(m(this,Hn)!==-1){for(let t=m(this,Hn);t>=0;t--)if(m(this,ur)[t].type!==e){m(this,ur).splice(t+1,m(this,Hn)-t),j(this,Hn,t);return}m(this,ur).length=0,j(this,Hn,-1)}}destroy(){j(this,ur,null)}},ur=new WeakMap,_u=new WeakMap,zx=new WeakMap,Hn=new WeakMap,CP);var LC,$P;class bb{constructor(e){L(this,LC);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=es.platform;for(const[n,s,i={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(B(this,LC,$P).call(this,t));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(s.bind(e,...a,t)(),i||$n(t))}}LC=new WeakSet,$P=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const PC=class PC{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return XU(e),ft(this,"_colors",e)}convert(e){const t=n0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((i,a)=>i===t[a]))return PC._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Le.makeHexColor(...t):e}};le(PC,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let bk=PC;var Sm,Ni,Cm,Zn,Rr,Em,Sa,Tm,Ca,Es,ju,Du,Am,Ou,Oo,Ea,Ch,Hx,Ux,Nm,$x,Ro,Ru,km,Lu,Lo,IC,Pu,Mm,Vx,Iu,Eh,_m,Bu,qx,Cr,en,ql,Fu,zu,Gx,jm,Wx,Hu,Po,Gl,Yx,Xx,Ta,ke,Pw,vk,VP,qP,Sy,GP,WP,YP,wk,XP,Sk,Ck,KP,Is,Rl,JP,QP,Ek,ZP,Cy,Tk;const lm=class lm{constructor(e,t,n,s,i,a,o,c,d,h,g,y,b,v,w,E){L(this,ke);L(this,Sm,new AbortController);L(this,Ni,null);L(this,Cm,null);L(this,Zn,new Map);L(this,Rr,new Map);L(this,Em,null);L(this,Sa,null);L(this,Tm,null);L(this,Ca,new ZU);L(this,Es,null);L(this,ju,null);L(this,Du,null);L(this,Am,0);L(this,Ou,new Set);L(this,Oo,null);L(this,Ea,null);L(this,Ch,new Set);le(this,"_editorUndoBar",null);L(this,Hx,!1);L(this,Ux,!1);L(this,Nm,!1);L(this,$x,null);L(this,Ro,null);L(this,Ru,null);L(this,km,null);L(this,Lu,!1);L(this,Lo,null);L(this,IC,new QU);L(this,Pu,!1);L(this,Mm,!1);L(this,Vx,!1);L(this,Iu,null);L(this,Eh,null);L(this,_m,null);L(this,Bu,null);L(this,qx,null);L(this,Cr,at.NONE);L(this,en,new Set);L(this,ql,null);L(this,Fu,null);L(this,zu,null);L(this,Gx,null);L(this,jm,null);L(this,Wx,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});L(this,Hu,[0,0]);L(this,Po,null);L(this,Gl,null);L(this,Yx,null);L(this,Xx,null);L(this,Ta,null);const C=this._signal=m(this,Sm).signal;j(this,Gl,e),j(this,Yx,t),j(this,Xx,n),j(this,Em,s),j(this,Es,i),j(this,Fu,a),j(this,jm,c),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:C}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),o._on("setpreference",this.onSetPreference.bind(this),{signal:C}),o._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:C}),window.addEventListener("pointerdown",()=>{j(this,Mm,!0)},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{j(this,Mm,!1)},{capture:!0,signal:C}),B(this,ke,GP).call(this),B(this,ke,KP).call(this),B(this,ke,wk).call(this),j(this,Sa,c.annotationStorage),j(this,$x,c.filterFactory),j(this,zu,d),j(this,km,h||null),j(this,Hx,g),j(this,Ux,y),j(this,Nm,b),j(this,qx,v||null),this.viewParameters={realScale:Dc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=lm.prototype,t=a=>m(a,Gl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ft(this,"_keyboardManager",new bb([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,Gl).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,Gl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,s,i,a,o,c,d;(e=m(this,Ta))==null||e.resolve(),j(this,Ta,null),(t=m(this,Sm))==null||t.abort(),j(this,Sm,null),this._signal=null;for(const h of m(this,Rr).values())h.destroy();m(this,Rr).clear(),m(this,Zn).clear(),m(this,Ch).clear(),(n=m(this,Bu))==null||n.clear(),j(this,Ni,null),m(this,en).clear(),m(this,Ca).destroy(),(s=m(this,Em))==null||s.destroy(),(i=m(this,Es))==null||i.destroy(),(a=m(this,Fu))==null||a.destroy(),(o=m(this,Lo))==null||o.hide(),j(this,Lo,null),(c=m(this,_m))==null||c.destroy(),j(this,_m,null),j(this,Cm,null),m(this,Ro)&&(clearTimeout(m(this,Ro)),j(this,Ro,null)),m(this,Po)&&(clearTimeout(m(this,Po)),j(this,Po,null)),(d=this._editorUndoBar)==null||d.destroy(),j(this,jm,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,qx)}get useNewAltTextFlow(){return m(this,Ux)}get useNewAltTextWhenAddingImage(){return m(this,Nm)}get hcmFilter(){return ft(this,"hcmFilter",m(this,zu)?m(this,$x).addHCMFilter(m(this,zu).foreground,m(this,zu).background):"none")}get direction(){return ft(this,"direction",getComputedStyle(m(this,Gl)).direction)}get _highlightColors(){return ft(this,"_highlightColors",m(this,km)?new Map(m(this,km).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ft(this,"highlightColors",null);const t=new Map,n=!!m(this,zu);for(const[s,i]of e){const a=s.endsWith("_HCM");if(n&&a){t.set(s.replace("_HCM",""),i);continue}!n&&!a&&t.set(s,i)}return ft(this,"highlightColors",t)}get highlightColorNames(){return ft(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),j(this,Du,e)}setMainHighlightColorPicker(e){j(this,_m,e)}editAltText(e,t=!1){var n;(n=m(this,Em))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,Es)}editComment(e,t,n,s){var i;(i=m(this,Es))==null||i.showDialog(this,e,t,n,s)}selectComment(e,t){const n=m(this,Rr).get(e),s=n==null?void 0:n.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=m(this,Es))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=m(this,Es))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=m(this,Es))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var s;(s=m(this,Es))==null||s.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=m(this,Es))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=m(this,Es))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(m(this,Rr).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){var t;(t=m(this,Fu))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,Fu)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":j(this,Nm,t);break}}onPageChanging({pageNumber:e}){j(this,Am,e-1)}focusMainContainer(){m(this,Gl).focus()}findParent(e,t){for(const n of m(this,Rr).values()){const{x:s,y:i,width:a,height:o}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return n}return null}disableUserSelect(e=!1){m(this,Yx).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Ch).add(e)}removeShouldRescale(e){m(this,Ch).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Dc.PDF_TO_CSS_UNITS;for(const n of m(this,Ch))n.onScaleChanging();(t=m(this,Du))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o}=n,c=n.toString(),h=B(this,ke,Pw).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(h);if(!g)return;n.empty();const y=B(this,ke,vk).call(this,h),b=m(this,Cr)===at.NONE,v=()=>{const w=y==null?void 0:y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o,text:c});b&&this.showAllEditors("highlight",!0,!0),t&&(w==null||w.editComment())};if(b){this.switchToMode(at.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!m(this,Sa))return null;const t=`${px}${e}`,n=m(this,Sa).getRawValue(t);return n&&m(this,Sa).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&m(this,Sa)&&!m(this,Sa).has(e.id)&&m(this,Sa).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,Xx);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,Lu)&&(j(this,Lu,!1),B(this,ke,Sy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,en))if(t.div.contains(e)){j(this,Eh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,Eh))return;const[e,t]=m(this,Eh);j(this,Eh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){B(this,ke,wk).call(this),B(this,ke,Sk).call(this)}removeEditListeners(){B(this,ke,XP).call(this),B(this,ke,Ck).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,Ea))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,Ea))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,Ni))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of m(this,en)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of m(this,Ea))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){ot(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of n){const d=await s.deserialize(c);if(!d)return;i.push(d)}const a=()=>{for(const c of i)B(this,ke,Ek).call(this,c);B(this,ke,Tk).call(this,i)},o=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){ot(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,Cr)!==at.NONE&&!this.isEditorHandlingKeyboard&&lm._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,Lu)&&(j(this,Lu,!1),B(this,ke,Sy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(B(this,ke,WP).call(this),B(this,ke,Sk).call(this),B(this,ke,Is).call(this,{isEditing:m(this,Cr)!==at.NONE,isEmpty:B(this,ke,Cy).call(this),hasSomethingToUndo:m(this,Ca).hasSomethingToUndo(),hasSomethingToRedo:m(this,Ca).hasSomethingToRedo(),hasSelectedEditor:!1})):(B(this,ke,YP).call(this),B(this,ke,Ck).call(this),B(this,ke,Is).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,Ea)){j(this,Ea,e);for(const t of m(this,Ea))B(this,ke,Rl).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,IC).id}get currentLayer(){return m(this,Rr).get(m(this,Am))}getLayer(e){return m(this,Rr).get(e)}get currentPageIndex(){return m(this,Am)}addLayer(e){m(this,Rr).set(e.pageIndex,e),m(this,Pu)?e.enable():e.disable()}removeLayer(e){m(this,Rr).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,i=!1){var a,o,c,d,h,g;if(m(this,Cr)!==e&&!(m(this,Ta)&&(await m(this,Ta).promise,!m(this,Ta)))){if(j(this,Ta,Promise.withResolvers()),(a=m(this,Du))==null||a.commitOrRemove(),m(this,Cr)===at.POPUP&&((o=m(this,Es))==null||o.hideSidebar()),(c=m(this,Es))==null||c.destroyPopup(),j(this,Cr,e),e===at.NONE){this.setEditingState(!1),B(this,ke,QP).call(this);for(const y of m(this,Zn).values())y.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),m(this,Ta).resolve();return}for(const y of m(this,Zn).values())y.addStandaloneCommentButton();e===at.SIGNATURE&&await((h=m(this,Fu))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await B(this,ke,JP).call(this),this.unselectAll();for(const y of m(this,Rr).values())y.updateMode(e);if(e===at.POPUP){m(this,Cm)||j(this,Cm,await m(this,jm).getAnnotationsByType(new Set(m(this,Ea).map(v=>v._editorType))));const y=new Set,b=[];for(const v of m(this,Zn).values()){const{annotationElementId:w,hasComment:E,deleted:C}=v;w&&y.add(w),E&&!C&&b.push(v.getData())}for(const v of m(this,Cm)){const{id:w,popupRef:E,contentsObj:C}=v;E&&(C!=null&&C.str)&&!y.has(w)&&!m(this,Ou).has(w)&&b.push(v)}(g=m(this,Es))==null||g.showSidebar(b)}if(!t){n&&this.addNewEditorFromKeyboard(),m(this,Ta).resolve();return}for(const y of m(this,Zn).values())y.uid===t?(this.setSelected(y),i?y.editComment():s?y.enterInEditMode():y.focus()):y.unselect();m(this,Ta).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,Cr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,Ea)){switch(e){case kt.CREATE:this.currentLayer.addNewEditor(t);return;case kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,Gx)||j(this,Gx,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,en))n.updateParams(e,t);else for(const n of m(this,Ea))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of m(this,Zn).values())a.editorType===e&&a.show(t);(((i=m(this,Gx))==null?void 0:i.get(kt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&B(this,ke,Rl).call(this,[[kt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,Vx)!==e){j(this,Vx,e);for(const t of m(this,Rr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of m(this,Zn).values())t.pageIndex===e&&(yield t)}getEditor(e){return m(this,Zn).get(e)}addEditor(e){m(this,Zn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,Ro)&&clearTimeout(m(this,Ro)),j(this,Ro,setTimeout(()=>{this.focusMainContainer(),j(this,Ro,null)},0))),m(this,Zn).delete(e.id),e.annotationElementId&&((t=m(this,Bu))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,Ou).has(e.annotationElementId))&&((n=m(this,Sa))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,Ou).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,Ou).has(e)}removeDeletedAnnotationElement(e){m(this,Ou).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,Ni)!==e&&(j(this,Ni,e),e&&B(this,ke,Rl).call(this,e.propertiesToUpdate))}updateUI(e){m(this,ke,ZP)===e&&B(this,ke,Rl).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){B(this,ke,Rl).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,en).has(e)){m(this,en).delete(e),e.unselect(),B(this,ke,Is).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,en).add(e),e.select(),B(this,ke,Rl).call(this,e.propertiesToUpdate),B(this,ke,Is).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=m(this,Du))==null||t.commitOrRemove();for(const n of m(this,en))n!==e&&n.unselect();m(this,en).clear(),m(this,en).add(e),e.select(),B(this,ke,Rl).call(this,e.propertiesToUpdate),B(this,ke,Is).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,en).has(e)}get firstSelectedEditor(){return m(this,en).values().next().value}unselect(e){e.unselect(),m(this,en).delete(e),B(this,ke,Is).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,en).size!==0}get isEnterHandled(){return m(this,en).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,Ca).undo(),B(this,ke,Is).call(this,{hasSomethingToUndo:m(this,Ca).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:B(this,ke,Cy).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,Ca).redo(),B(this,ke,Is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,Ca).hasSomethingToRedo(),isEmpty:B(this,ke,Cy).call(this)})}addCommands(e){m(this,Ca).add(e),B(this,ke,Is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:B(this,ke,Cy).call(this)})}cleanUndoStack(e){m(this,Ca).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,en)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)B(this,ke,Ek).call(this,a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=m(this,Ni))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,Ni)||this.hasSelection}selectAll(){for(const e of m(this,en))e.commit();B(this,ke,Tk).call(this,m(this,Zn).values())}unselectAll(){var e;if(!(m(this,Ni)&&(m(this,Ni).commitOrRemove(),m(this,Cr)!==at.NONE))&&!((e=m(this,Du))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,en))t.unselect();m(this,en).clear(),B(this,ke,Is).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,Hu)[0]+=e,m(this,Hu)[1]+=t;const[s,i]=m(this,Hu),a=[...m(this,en)],o=1e3;m(this,Po)&&clearTimeout(m(this,Po)),j(this,Po,setTimeout(()=>{j(this,Po,null),m(this,Hu)[0]=m(this,Hu)[1]=0,this.addCommands({cmd:()=>{for(const c of a)m(this,Zn).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of a)m(this,Zn).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),j(this,Oo,new Map);for(const e of m(this,en))m(this,Oo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,Oo))return!1;this.disableUserSelect(!1);const e=m(this,Oo);j(this,Oo,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(s,i,a,o)=>{if(m(this,Zn).has(s.id)){const c=m(this,Rr).get(o);c?s._setParentAndPosition(c,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)n(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)n(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,Oo))for(const n of m(this,Oo).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,en).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,Ni)===e}getActive(){return m(this,Ni)}getMode(){return m(this,Cr)}isEditingMode(){return m(this,Cr)!==at.NONE}get imageManager(){return ft(this,"imageManager",new xk)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(d,h,g,y)=>({x:(h-s)/a,y:1-(d+g-n)/i,width:y/a,height:g/i});break;case"180":o=(d,h,g,y)=>({x:1-(d+g-n)/i,y:1-(h+y-s)/a,width:g/i,height:y/a});break;case"270":o=(d,h,g,y)=>({x:1-(h+y-s)/a,y:(d-n)/i,width:y/a,height:g/i});break;default:o=(d,h,g,y)=>({x:(d-n)/i,y:(h-s)/a,width:g/i,height:y/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const g=t.getRangeAt(d);if(!g.collapsed)for(const{x:y,y:b,width:v,height:w}of g.getClientRects())v===0||w===0||c.push(o(y,b,v,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,Tm)||j(this,Tm,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,Tm))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=m(this,Tm))==null?void 0:s.get(e.data.id);if(!t)return;const n=m(this,Sa).getRawValue(t);n&&(m(this,Cr)===at.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const s=(i=m(this,Bu))==null?void 0:i.get(e);s&&(s.setCanvas(t,n),m(this,Bu).delete(e))}addMissingCanvas(e,t){(m(this,Bu)||j(this,Bu,new Map)).set(e,t)}};Sm=new WeakMap,Ni=new WeakMap,Cm=new WeakMap,Zn=new WeakMap,Rr=new WeakMap,Em=new WeakMap,Sa=new WeakMap,Tm=new WeakMap,Ca=new WeakMap,Es=new WeakMap,ju=new WeakMap,Du=new WeakMap,Am=new WeakMap,Ou=new WeakMap,Oo=new WeakMap,Ea=new WeakMap,Ch=new WeakMap,Hx=new WeakMap,Ux=new WeakMap,Nm=new WeakMap,$x=new WeakMap,Ro=new WeakMap,Ru=new WeakMap,km=new WeakMap,Lu=new WeakMap,Lo=new WeakMap,IC=new WeakMap,Pu=new WeakMap,Mm=new WeakMap,Vx=new WeakMap,Iu=new WeakMap,Eh=new WeakMap,_m=new WeakMap,Bu=new WeakMap,qx=new WeakMap,Cr=new WeakMap,en=new WeakMap,ql=new WeakMap,Fu=new WeakMap,zu=new WeakMap,Gx=new WeakMap,jm=new WeakMap,Wx=new WeakMap,Hu=new WeakMap,Po=new WeakMap,Gl=new WeakMap,Yx=new WeakMap,Xx=new WeakMap,Ta=new WeakMap,ke=new WeakSet,Pw=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},vk=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,Rr).values())if(n.hasTextLayer(e))return n;return null},VP=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=B(this,ke,Pw).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(m(this,Lo)||j(this,Lo,new JU(this)),m(this,Lo).show(n,s,this.direction==="ltr"))},qP=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){m(this,ql)&&((i=m(this,Lo))==null||i.hide(),j(this,ql,null),B(this,ke,Is).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,ql))return;const s=B(this,ke,Pw).call(this,e).closest(".textLayer");if(!s){m(this,ql)&&((a=m(this,Lo))==null||a.hide(),j(this,ql,null),B(this,ke,Is).call(this,{hasSelectedText:!1}));return}if((o=m(this,Lo))==null||o.hide(),j(this,ql,t),B(this,ke,Is).call(this,{hasSelectedText:!0}),!(m(this,Cr)!==at.HIGHLIGHT&&m(this,Cr)!==at.NONE)&&(m(this,Cr)===at.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),j(this,Lu,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=m(this,Cr)===at.HIGHLIGHT?B(this,ke,vk).call(this,s):null;if(c==null||c.toggleDrawing(),m(this,Mm)){const d=new AbortController,h=this.combinedSignal(d),g=y=>{y.type==="pointerup"&&y.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),y.type==="pointerup"&&B(this,ke,Sy).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:h}),window.addEventListener("blur",g,{signal:h})}else c==null||c.toggleDrawing(!0),B(this,ke,Sy).call(this,"main_toolbar")}},Sy=function(e=""){m(this,Cr)===at.HIGHLIGHT?this.highlightSelection(e):m(this,Hx)&&B(this,ke,VP).call(this)},GP=function(){document.addEventListener("selectionchange",B(this,ke,qP).bind(this),{signal:this._signal})},WP=function(){if(m(this,Ru))return;j(this,Ru,new AbortController);const e=this.combinedSignal(m(this,Ru));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},YP=function(){var e;(e=m(this,Ru))==null||e.abort(),j(this,Ru,null)},wk=function(){if(m(this,Iu))return;j(this,Iu,new AbortController);const e=this.combinedSignal(m(this,Iu));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},XP=function(){var e;(e=m(this,Iu))==null||e.abort(),j(this,Iu,null)},Sk=function(){if(m(this,ju))return;j(this,ju,new AbortController);const e=this.combinedSignal(m(this,ju));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ck=function(){var e;(e=m(this,ju))==null||e.abort(),j(this,ju,null)},KP=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Is=function(e){Object.entries(e).some(([n,s])=>m(this,Wx)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,Wx),e)}),m(this,Cr)===at.HIGHLIGHT&&e.hasSelectedEditor===!1&&B(this,ke,Rl).call(this,[[kt.HIGHLIGHT_FREE,!0]]))},Rl=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},JP=async function(){if(!m(this,Pu)){j(this,Pu,!0);const e=[];for(const t of m(this,Rr).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,Zn).values())t.enable()}},QP=function(){if(this.unselectAll(),m(this,Pu)){j(this,Pu,!1);for(const e of m(this,Rr).values())e.disable();for(const e of m(this,Zn).values())e.disable()}},Ek=function(e){const t=m(this,Rr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},ZP=function(){let e=null;for(e of m(this,en));return e},Cy=function(){if(m(this,Zn).size===0)return!0;if(m(this,Zn).size===1)for(const e of m(this,Zn).values())return e.isEmpty();return!1},Tk=function(e){for(const t of m(this,en))t.unselect();m(this,en).clear();for(const t of e)t.isEmpty()||(m(this,en).add(t),t.select());B(this,ke,Is).call(this,{hasSelectedEditor:this.hasSelection})},le(lm,"TRANSLATE_SMALL",1),le(lm,"TRANSLATE_BIG",10);let jd=lm;var qr,Io,Qa,Dm,Bo,ki,Om,Fo,ai,Wl,Th,zo,Uu,fo,Ey,Iw;const Bs=class Bs{constructor(e){L(this,fo);L(this,qr,null);L(this,Io,!1);L(this,Qa,null);L(this,Dm,null);L(this,Bo,null);L(this,ki,null);L(this,Om,!1);L(this,Fo,null);L(this,ai,null);L(this,Wl,null);L(this,Th,null);L(this,zo,!1);j(this,ai,e),j(this,zo,e._uiManager.useNewAltTextFlow),m(Bs,Uu)||j(Bs,Uu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Bs._l10n??(Bs._l10n=e)}async render(){const e=j(this,Qa,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=j(this,Dm,document.createElement("span"));e.append(t),m(this,zo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(Bs,Uu).missing),t.setAttribute("data-l10n-id",m(Bs,Uu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,ai)._uiManager._signal;e.addEventListener("contextmenu",Qi,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),m(this,ai)._uiManager.editAltText(m(this,ai)),m(this,zo)&&m(this,ai)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,fo,Ey)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(j(this,Om,!0),s(i))},{signal:n}),await B(this,fo,Iw).call(this),e}finish(){m(this,Qa)&&(m(this,Qa).focus({focusVisible:m(this,Om)}),j(this,Om,!1))}isEmpty(){return m(this,zo)?m(this,qr)===null:!m(this,qr)&&!m(this,Io)}hasData(){return m(this,zo)?m(this,qr)!==null||!!m(this,Wl):this.isEmpty()}get guessedText(){return m(this,Wl)}async setGuessedText(e){m(this,qr)===null&&(j(this,Wl,e),j(this,Th,await Bs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),B(this,fo,Iw).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,zo)||m(this,qr)){(t=m(this,Fo))==null||t.remove(),j(this,Fo,null);return}if(!m(this,Fo)){const n=j(this,Fo,document.createElement("div"));n.className="noAltTextBadge",m(this,ai).div.append(n)}m(this,Fo).classList.toggle("hidden",!e)}serialize(e){let t=m(this,qr);return!e&&m(this,Wl)===t&&(t=m(this,Th)),{altText:t,decorative:m(this,Io),guessedText:m(this,Wl),textWithDisclaimer:m(this,Th)}}get data(){return{altText:m(this,qr),decorative:m(this,Io)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:i=!1}){n&&(j(this,Wl,n),j(this,Th,s)),!(m(this,qr)===e&&m(this,Io)===t)&&(i||(j(this,qr,e),j(this,Io,t)),B(this,fo,Iw).call(this))}toggle(e=!1){m(this,Qa)&&(!e&&m(this,ki)&&(clearTimeout(m(this,ki)),j(this,ki,null)),m(this,Qa).disabled=!e)}shown(){m(this,ai)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,fo,Ey)}})}destroy(){var e,t;(e=m(this,Qa))==null||e.remove(),j(this,Qa,null),j(this,Dm,null),j(this,Bo,null),(t=m(this,Fo))==null||t.remove(),j(this,Fo,null)}};qr=new WeakMap,Io=new WeakMap,Qa=new WeakMap,Dm=new WeakMap,Bo=new WeakMap,ki=new WeakMap,Om=new WeakMap,Fo=new WeakMap,ai=new WeakMap,Wl=new WeakMap,Th=new WeakMap,zo=new WeakMap,Uu=new WeakMap,fo=new WeakSet,Ey=function(){return m(this,qr)&&"added"||m(this,qr)===null&&this.guessedText&&"review"||"missing"},Iw=async function(){var s,i,a;const e=m(this,Qa);if(!e)return;if(m(this,zo)){if(e.classList.toggle("done",!!m(this,qr)),e.setAttribute("data-l10n-id",m(Bs,Uu)[m(this,fo,Ey)]),(s=m(this,Dm))==null||s.setAttribute("data-l10n-id",m(Bs,Uu)[`${m(this,fo,Ey)}-label`]),!m(this,qr)){(i=m(this,Bo))==null||i.remove();return}}else{if(!m(this,qr)&&!m(this,Io)){e.classList.remove("done"),(a=m(this,Bo))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,Bo);if(!t){j(this,Bo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,ai).id}`;const o=100,c=m(this,ai)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(m(this,ki)),j(this,ki,null)},{once:!0}),e.addEventListener("mouseenter",()=>{j(this,ki,setTimeout(()=>{j(this,ki,null),m(this,Bo).classList.add("show"),m(this,ai)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;m(this,ki)&&(clearTimeout(m(this,ki)),j(this,ki,null)),(d=m(this,Bo))==null||d.classList.remove("show")},{signal:c})}m(this,Io)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,qr)),t.parentNode||e.append(t);const n=m(this,ai).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},L(Bs,Uu,null),le(Bs,"_l10n",null);let TS=Bs;var cs,Aa,Ah,Nn,Kx,Nh,Za,kh,Mh,_h,Jx,Ak;class Xv{constructor(e){L(this,Jx);L(this,cs,null);L(this,Aa,null);L(this,Ah,!1);L(this,Nn,null);L(this,Kx,null);L(this,Nh,null);L(this,Za,null);L(this,kh,null);L(this,Mh,!1);L(this,_h,null);j(this,Nn,e)}renderForToolbar(){const e=j(this,Aa,document.createElement("button"));return e.className="comment",B(this,Jx,Ak).call(this,e,!1)}renderForStandalone(){const e=j(this,cs,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Nn).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(m(this,Nn)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=m(this,Nn).commentButtonColor;s&&(n.backgroundColor=s)}return B(this,Jx,Ak).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=m(this,cs)??m(this,Aa))==null||e.focus()},0)}onUpdatedColor(){if(!m(this,cs))return;const e=m(this,Nn).commentButtonColor;e&&(m(this,cs).style.backgroundColor=e),m(this,Nn)._uiManager.updatePopupColor(m(this,Nn))}get commentButtonWidth(){var e;return(((e=m(this,cs))==null?void 0:e.getBoundingClientRect().width)??0)/m(this,Nn).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(m(this,_h))return m(this,_h);if(!m(this,cs))return null;const{x:e,y:t,height:n}=m(this,cs).getBoundingClientRect(),{x:s,y:i,width:a,height:o}=m(this,Nn).parent.boundingClientRect;return[(e-s)/a,(t+n-i)/o]}set commentPopupPositionInLayer(e){j(this,_h,e)}hasDefaultPopupPosition(){return m(this,_h)===null}removeStandaloneCommentButton(){var e;(e=m(this,cs))==null||e.remove(),j(this,cs,null)}removeToolbarCommentButton(){var e;(e=m(this,Aa))==null||e.remove(),j(this,Aa,null)}setCommentButtonStates({selected:e,hasPopup:t}){m(this,cs)&&(m(this,cs).classList.toggle("selected",e),m(this,cs).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=m(this,Nn).commentButtonPosition;const{width:h,height:g,x:y,y:b}=m(this,Nn);n=y+n*h,s=b+s*g}const i=m(this,Nn).parent.boundingClientRect,{x:a,y:o,width:c,height:d}=i;m(this,Nn)._uiManager.editComment(m(this,Nn),a+n*c,o+s*d,{...e,parentDimensions:i})}finish(){m(this,Aa)&&(m(this,Aa).focus({focusVisible:m(this,Ah)}),j(this,Ah,!1))}isDeleted(){return m(this,Mh)||m(this,Za)===""}isEmpty(){return m(this,Za)===null}hasBeenEdited(){return this.isDeleted()||m(this,Za)!==m(this,Kx)}serialize(){return this.data}get data(){return{text:m(this,Za),richText:m(this,Nh),date:m(this,kh),deleted:this.isDeleted()}}set data(e){if(e!==m(this,Za)&&j(this,Nh,null),e===null){j(this,Za,""),j(this,Mh,!0);return}j(this,Za,e),j(this,kh,new Date),j(this,Mh,!1)}setInitialText(e,t=null){j(this,Kx,e),this.data=e,j(this,kh,null),j(this,Nh,t)}shown(){}destroy(){var e,t;(e=m(this,Aa))==null||e.remove(),j(this,Aa,null),(t=m(this,cs))==null||t.remove(),j(this,cs,null),j(this,Za,""),j(this,Nh,null),j(this,kh,null),j(this,Nn,null),j(this,Ah,!1),j(this,Mh,!1)}}cs=new WeakMap,Aa=new WeakMap,Ah=new WeakMap,Nn=new WeakMap,Kx=new WeakMap,Nh=new WeakMap,Za=new WeakMap,kh=new WeakMap,Mh=new WeakMap,_h=new WeakMap,Jx=new WeakSet,Ak=function(e,t){if(!m(this,Nn)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[m(this,Nn)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=m(this,Nn)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Qi,{signal:n}),t&&(e.addEventListener("focusin",i=>{m(this,Nn)._focusEventsAllowed=!1,$n(i)},{capture:!0,signal:n}),e.addEventListener("focusout",i=>{m(this,Nn)._focusEventsAllowed=!0,$n(i)},{capture:!0,signal:n})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),e===m(this,Aa)?this.edit():m(this,Nn).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(j(this,Ah,!0),s(i))},{signal:n}),e.addEventListener("pointerenter",()=>{m(this,Nn).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{m(this,Nn).toggleComment(!1,!1)},{signal:n}),e};var Rm,jh,Qx,Zx,e1,t1,n1,Yl,Dh,Xl,Oh,Kl,Ld,eI,tI,nI;const rj=class rj{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){L(this,Ld);L(this,Rm);L(this,jh,!1);L(this,Qx,null);L(this,Zx);L(this,e1);L(this,t1);L(this,n1);L(this,Yl,null);L(this,Dh);L(this,Xl,null);L(this,Oh);L(this,Kl,null);j(this,Rm,e),j(this,Qx,n),j(this,Zx,t),j(this,e1,s),j(this,t1,i),j(this,n1,a),j(this,Oh,new AbortController),j(this,Dh,AbortSignal.any([o,m(this,Oh).signal])),e.addEventListener("touchstart",B(this,Ld,eI).bind(this),{passive:!1,signal:m(this,Dh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/po.pixelRatio}destroy(){var e,t;(e=m(this,Oh))==null||e.abort(),j(this,Oh,null),(t=m(this,Yl))==null||t.abort(),j(this,Yl,null)}};Rm=new WeakMap,jh=new WeakMap,Qx=new WeakMap,Zx=new WeakMap,e1=new WeakMap,t1=new WeakMap,n1=new WeakMap,Yl=new WeakMap,Dh=new WeakMap,Xl=new WeakMap,Oh=new WeakMap,Kl=new WeakMap,Ld=new WeakSet,eI=function(e){var s,i,a;if((s=m(this,Zx))!=null&&s.call(this))return;if(e.touches.length===1){if(m(this,Yl))return;const o=j(this,Yl,new AbortController),c=AbortSignal.any([m(this,Dh),o.signal]),d=m(this,Rm),h={capture:!0,signal:c,passive:!1},g=y=>{var b;y.pointerType==="touch"&&((b=m(this,Yl))==null||b.abort(),j(this,Yl,null))};d.addEventListener("pointerdown",y=>{y.pointerType==="touch"&&($n(y),g(y))},h),d.addEventListener("pointerup",g,h),d.addEventListener("pointercancel",g,h);return}if(!m(this,Kl)){j(this,Kl,new AbortController);const o=AbortSignal.any([m(this,Dh),m(this,Kl).signal]),c=m(this,Rm),d={signal:o,capture:!1,passive:!1};c.addEventListener("touchmove",B(this,Ld,tI).bind(this),d);const h=B(this,Ld,nI).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",$n,d),c.addEventListener("pointermove",$n,d),c.addEventListener("pointercancel",$n,d),c.addEventListener("pointerup",$n,d),(i=m(this,e1))==null||i.call(this)}if($n(e),e.touches.length!==2||(a=m(this,Qx))!=null&&a.call(this)){j(this,Xl,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),j(this,Xl,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},tI=function(e){var k;if(!m(this,Xl)||e.touches.length!==2)return;$n(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=n,c=m(this,Xl),{touch0X:d,touch0Y:h,touch1X:g,touch1Y:y}=c,b=g-d,v=y-h,w=a-s,E=o-i,C=Math.hypot(w,E)||1,N=Math.hypot(b,v)||1;if(!m(this,jh)&&Math.abs(N-C)<=rj.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=a,c.touch1Y=o,!m(this,jh)){j(this,jh,!0);return}const A=[(s+a)/2,(i+o)/2];(k=m(this,t1))==null||k.call(this,A,N,C)},nI=function(e){var t;e.touches.length>=2||(m(this,Kl)&&(m(this,Kl).abort(),j(this,Kl,null),(t=m(this,n1))==null||t.call(this)),m(this,Xl)&&($n(e),j(this,Xl,null),j(this,jh,!1)))};let xx=rj;var Rh,eo,Bn,xn,Jl,Lm,$u,r1,us,Lh,Ql,Ho,Vu,s1,Ph,Mi,i1,Ih,Zl,Uo,Pm,Im,Na,Bh,a1,BC,Je,Nk,o1,kk,Bw,rI,sI,Mk,Fw,_k,iI,aI,oI,jk,lI,Dk,cI,uI,dI,Ok,Ty;const ct=class ct{constructor(e){L(this,Je);L(this,Rh,null);L(this,eo,null);L(this,Bn,null);L(this,xn,null);L(this,Jl,null);L(this,Lm,!1);L(this,$u,null);L(this,r1,"");L(this,us,null);L(this,Lh,null);L(this,Ql,null);L(this,Ho,null);L(this,Vu,null);L(this,s1,"");L(this,Ph,!1);L(this,Mi,null);L(this,i1,!1);L(this,Ih,!1);L(this,Zl,!1);L(this,Uo,null);L(this,Pm,0);L(this,Im,0);L(this,Na,null);L(this,Bh,null);le(this,"isSelected",!1);le(this,"_isCopy",!1);le(this,"_editToolbar",null);le(this,"_initialOptions",Object.create(null));le(this,"_initialData",null);le(this,"_isVisible",!0);le(this,"_uiManager",null);le(this,"_focusEventsAllowed",!0);L(this,a1,!1);L(this,BC,ct._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ct.prototype._resizeWithKeyboard,t=jd.TRANSLATE_SMALL,n=jd.TRANSLATE_BIG;return ft(this,"_resizerKeyboardManager",new bb([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ft(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new e$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ct._l10n??(ct._l10n=e),ct._l10nResizer||(ct._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ct._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Cn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,a1)}set _isDraggable(e){var t;j(this,a1,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,BC)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(B(this,Je,Ty).call(this),(t=m(this,Ho))==null||t.remove(),j(this,Ho,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,Ph)?j(this,Ph,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[i,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){B(this,Je,Nk).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,Mi)||j(this,Mi,[this.x,this.y,this.width,this.height]),B(this,Je,Nk).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,Mi)||j(this,Mi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,d]=this.getBaseTranslation();a+=c,o+=d;const{style:h}=n;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,Mi)&&(m(this,Mi)[0]!==this.x||m(this,Mi)[1]!==this.y)}get _hasBeenResized(){return!!m(this,Mi)&&(m(this,Mi)[2]!==this.width||m(this,Mi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=ct,s=n/e,i=n/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:i,y:a,width:o,height:c}=this;if(o*=n,c*=s,i*=n,a*=s,this._mustFixPosition)switch(e){case 0:i=Ms(i,0,n-o),a=Ms(a,0,s-c);break;case 90:i=Ms(i,0,n-c),a=Ms(a,o,s);break;case 180:i=Ms(i,o,n),a=Ms(a,c,s);break;case 270:i=Ms(i,c,n),a=Ms(a,0,s-o);break}this.x=i/=n,this.y=a/=s;const[d,h]=this.getBaseTranslation();i+=d,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return B(n=ct,o1,kk).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return B(n=ct,o1,kk).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,Bn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,Ih))return this._editToolbar;this._editToolbar=new gk(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=m(this,Bn))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,Bn)||(TS.initialize(ct._l10n),j(this,Bn,new TS(this)),m(this,Rh)&&(m(this,Bn).data=m(this,Rh),j(this,Rh,null))),m(this,Bn)}get altTextData(){var e;return(e=m(this,Bn))==null?void 0:e.data}set altTextData(e){m(this,Bn)&&(m(this,Bn).data=e)}get guessedAltText(){var e;return(e=m(this,Bn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,Bn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,Bn))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,Bn)&&!m(this,Bn).isEmpty()}hasAltTextData(){var e;return((e=m(this,Bn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=m(this,xn))==null||e.focusButton()}addCommentButton(){return m(this,xn)||j(this,xn,new Xv(this))}addStandaloneCommentButton(){if(m(this,Jl)){this._uiManager.isEditingMode()&&m(this,Jl).classList.remove("hidden");return}this.hasComment&&(j(this,Jl,m(this,xn).renderForStandalone()),this.div.append(m(this,Jl)))}removeStandaloneCommentButton(){m(this,xn).removeStandaloneCommentButton(),j(this,Jl,null)}hideStandaloneCommentButton(){var e;(e=m(this,Jl))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=m(this,xn);return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){m(this,xn)||j(this,xn,new Xv(this)),m(this,xn).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(m(this,xn)||j(this,xn,new Xv(this)),m(this,xn).setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=m(this,xn))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=m(this,xn))==null?void 0:e.isDeleted()}get hasComment(){return!!m(this,xn)&&!m(this,xn).isEmpty()&&!m(this,xn).isDeleted()}async editComment(e){m(this,xn)||j(this,xn,new Xv(this)),m(this,xn).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){m(this,xn).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,o=a+i+1,c=s-100,d=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,d,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){m(this,xn).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,Lm)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),B(this,Je,Dk).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),UP(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,Bh)||j(this,Bh,new xx({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:B(this,Je,iI).bind(this),onPinching:B(this,Je,aI).bind(this),onPinchEnd:B(this,Je,oI).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=es.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(j(this,Ph,!0),this._isDraggable){B(this,Je,lI).call(this,e);return}B(this,Je,jk).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,Uo)&&clearTimeout(m(this,Uo)),j(this,Uo,setTimeout(()=>{var e;j(this,Uo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,c]=this.pageTranslation,d=e/s,h=t/s,g=this.x*i,y=this.y*a,b=this.width*i,v=this.height*a;switch(n){case 0:return[g+d+o,a-y-h-v+c,g+d+b+o,a-y-h+c];case 90:return[g+h+o,a-y+d+c,g+h+v+o,a-y+d+b+c];case 180:return[g-d-b+o,a-y+h+c,g-d+o,a-y+h+v+c];case 270:return[g-h-v+o,a-y-d-b+c,g-h+o,a-y-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,i,a]=e,o=i-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,o,c];case 90:return[n,t-s,c,o];case 180:return[i,t-s,o,c];case 270:return[i,t-a,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=m(this,xn))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:i,richText:a},uid:o,pageIndex:c,creationDate:d,modificationDate:h}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:n||h,popupRef:!i,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),j(this,Ih,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),j(this,Ih,!1),!0):!1}isInEditMode(){return m(this,Ih)}shouldGetKeyboardEvents(){return m(this,Zl)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&n>0}rebuild(){B(this,Je,Dk).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,j(s,Rh,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[o,c,d,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=c/a,s.width=d/i,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=m(this,Vu))==null||e.abort(),j(this,Vu,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),m(this,Uo)&&(clearTimeout(m(this,Uo)),j(this,Uo,null)),B(this,Je,Ty).call(this),this.removeEditToolbar(),m(this,Na)){for(const n of m(this,Na).values())clearTimeout(n);j(this,Na,null)}this.parent=null,(t=m(this,Bh))==null||t.destroy(),j(this,Bh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(B(this,Je,rI).call(this),m(this,us).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,i,a]=this.getPDFRect();return[ct._round(n+(i-n)*e),ct._round(s+(a-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return m(this,xn).commentPopupPositionInLayer}set commentPopupPosition(e){m(this,xn).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return m(this,xn).hasDefaultPopupPosition()}get commentButtonWidth(){return m(this,xn).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){m(this,xn).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),j(this,Ql,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,us).children;if(!m(this,eo)){j(this,eo,Array.from(t));const a=B(this,Je,cI).bind(this),o=B(this,Je,uI).bind(this),c=this._uiManager._signal;for(const d of m(this,eo)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",o,{signal:c}),d.addEventListener("focus",B(this,Je,dI).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",ct._l10nResizer[h])}}const n=m(this,eo)[0];let s=0;for(const a of t){if(a===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(m(this,eo).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)m(this,us).append(m(this,us).firstChild);else if(i>s)for(let o=0;o<i-s;o++)m(this,us).firstChild.before(m(this,us).lastChild);let a=0;for(const o of t){const d=m(this,eo)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ct._l10nResizer[d])}}B(this,Je,Ok).call(this,0),j(this,Zl,!0),m(this,us).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Zl)&&B(this,Je,_k).call(this,m(this,s1),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){B(this,Je,Ty).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,Bn))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,s,i;this.isSelected&&(this.isSelected=!1,(e=m(this,us))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=m(this,Bn))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,i1)}set isEditing(e){j(this,i1,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,Na)||j(this,Na,new Map);const{action:n}=e;let s=m(this,Na).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),m(this,Na).delete(n),m(this,Na).size===0&&j(this,Na,null)},ct._telemetryTimeout),m(this,Na).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),j(this,Lm,!1)}disable(){this.div&&(this.div.tabIndex=-1),j(this,Lm,!0)}updateFakeAnnotationElement(e){if(!m(this,Ho)&&!this.deleted){j(this,Ho,e.addFakeAnnotation(this));return}if(this.deleted){m(this,Ho).remove(),j(this,Ho,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&m(this,Ho).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Rh=new WeakMap,eo=new WeakMap,Bn=new WeakMap,xn=new WeakMap,Jl=new WeakMap,Lm=new WeakMap,$u=new WeakMap,r1=new WeakMap,us=new WeakMap,Lh=new WeakMap,Ql=new WeakMap,Ho=new WeakMap,Vu=new WeakMap,s1=new WeakMap,Ph=new WeakMap,Mi=new WeakMap,i1=new WeakMap,Ih=new WeakMap,Zl=new WeakMap,Uo=new WeakMap,Pm=new WeakMap,Im=new WeakMap,Na=new WeakMap,Bh=new WeakMap,a1=new WeakMap,BC=new WeakMap,Je=new WeakSet,Nk=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},o1=new WeakSet,kk=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Bw=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},rI=function(){if(m(this,us))return;j(this,us,document.createElement("div")),m(this,us).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");m(this,us).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",B(this,Je,sI).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Qi,{signal:t}),s.tabIndex=-1}this.div.prepend(m(this,us))},sI=function(e,t){var h;t.preventDefault();const{isMac:n}=es.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=m(this,Bn))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,j(this,Lh,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",B(this,Je,_k).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",$n,{passive:!1,signal:a}),window.addEventListener("contextmenu",Qi,{signal:a}),j(this,Ql,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=m(this,Bn))==null||g.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=c,B(this,Je,Fw).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},Mk=function(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Fw=function(){if(!m(this,Ql))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=m(this,Ql);j(this,Ql,null);const i=this.x,a=this.y,o=this.width,c=this.height;i===e&&a===t&&o===n&&c===s||this.addCommands({cmd:B(this,Je,Mk).bind(this,i,a,o,c),undo:B(this,Je,Mk).bind(this,e,t,n,s),mustExec:!0})},_k=function(e,t){const[n,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,c=this.height,d=ct.MIN_SIZE/n,h=ct.MIN_SIZE/s,g=B(this,Je,Bw).call(this,this.rotation),y=(q,Z)=>[g[0]*q+g[2]*Z,g[1]*q+g[3]*Z],b=B(this,Je,Bw).call(this,360-this.rotation),v=(q,Z)=>[b[0]*q+b[2]*Z,b[1]*q+b[3]*Z];let w,E,C=!1,N=!1;switch(e){case"topLeft":C=!0,w=(q,Z)=>[0,0],E=(q,Z)=>[q,Z];break;case"topMiddle":w=(q,Z)=>[q/2,0],E=(q,Z)=>[q/2,Z];break;case"topRight":C=!0,w=(q,Z)=>[q,0],E=(q,Z)=>[0,Z];break;case"middleRight":N=!0,w=(q,Z)=>[q,Z/2],E=(q,Z)=>[0,Z/2];break;case"bottomRight":C=!0,w=(q,Z)=>[q,Z],E=(q,Z)=>[0,0];break;case"bottomMiddle":w=(q,Z)=>[q/2,Z],E=(q,Z)=>[q/2,0];break;case"bottomLeft":C=!0,w=(q,Z)=>[0,Z],E=(q,Z)=>[q,0];break;case"middleLeft":N=!0,w=(q,Z)=>[0,Z/2],E=(q,Z)=>[q,Z/2];break}const A=w(o,c),k=E(o,c);let M=y(...k);const O=ct._round(i+M[0]),P=ct._round(a+M[1]);let F=1,H=1,ee,G;if(t.fromKeyboard)({deltaX:ee,deltaY:G}=t);else{const{screenX:q,screenY:Z}=t,[he,te]=m(this,Lh);[ee,G]=this.screenToPageTranslation(q-he,Z-te),m(this,Lh)[0]=q,m(this,Lh)[1]=Z}if([ee,G]=v(ee/n,G/s),C){const q=Math.hypot(o,c);F=H=Math.max(Math.min(Math.hypot(k[0]-A[0]-ee,k[1]-A[1]-G)/q,1/o,1/c),d/o,h/c)}else N?F=Ms(Math.abs(k[0]-A[0]-ee),d,1)/o:H=Ms(Math.abs(k[1]-A[1]-G),h,1)/c;const J=ct._round(o*F),V=ct._round(c*H);M=y(...E(J,V));const X=O-M[0],K=P-M[1];m(this,Mi)||j(this,Mi,[this.x,this.y,this.width,this.height]),this.width=J,this.height=V,this.x=X,this.y=K,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iI=function(){var e;j(this,Ql,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,Bn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},aI=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const a=B(this,Je,Bw).call(this,this.rotation),o=(O,P)=>[a[0]*O+a[2]*P,a[1]*O+a[3]*P],[c,d]=this.parentDimensions,h=this.x,g=this.y,y=this.width,b=this.height,v=ct.MIN_SIZE/c,w=ct.MIN_SIZE/d;i=Math.max(Math.min(i,1/y,1/b),v/y,w/b);const E=ct._round(y*i),C=ct._round(b*i);if(E===y&&C===b)return;m(this,Mi)||j(this,Mi,[h,g,y,b]);const N=o(y/2,b/2),A=ct._round(h+N[0]),k=ct._round(g+N[1]),M=o(E/2,C/2);this.x=A-M[0],this.y=k-M[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()},oI=function(){var e;(e=m(this,Bn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),B(this,Je,Fw).call(this)},jk=function(e){const{isMac:t}=es.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},lI=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=d=>{s.abort(),j(this,$u,null),j(this,Ph,!1),this._uiManager.endDragSession()||B(this,Je,jk).call(this,d),n&&this._onStopDragging()};t&&(j(this,Pm,e.clientX),j(this,Im,e.clientY),j(this,$u,e.pointerId),j(this,r1,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:g,pointerId:y}=d;if(y!==m(this,$u)){$n(d);return}const[b,v]=this.screenToPageTranslation(h-m(this,Pm),g-m(this,Im));j(this,Pm,h),j(this,Im,g),this._uiManager.dragSelectedEditors(b,v)},a),window.addEventListener("touchmove",$n,a),window.addEventListener("pointerdown",d=>{d.pointerType===m(this,r1)&&(m(this,Bh)||d.isPrimary)&&o(d),$n(d)},a));const c=d=>{if(!m(this,$u)||m(this,$u)===d.pointerId){o(d);return}$n(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Dk=function(){if(m(this,Vu)||!this.div)return;j(this,Vu,new AbortController);const e=this._uiManager.combinedSignal(m(this,Vu));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},cI=function(e){ct._resizerKeyboardManager.exec(this,e)},uI=function(e){var t;m(this,Zl)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,us)&&B(this,Je,Ty).call(this)},dI=function(e){j(this,s1,m(this,Zl)?e:"")},Ok=function(e){if(m(this,eo))for(const t of m(this,eo))t.tabIndex=e},Ty=function(){j(this,Zl,!1),B(this,Je,Ok).call(this,-1),B(this,Je,Fw).call(this)},L(ct,o1),le(ct,"_l10n",null),le(ct,"_l10nResizer",null),le(ct,"_borderLineWidth",-1),le(ct,"_colorManager",new bk),le(ct,"_zIndex",1),le(ct,"_telemetryTimeout",1e3);let kn=ct;class e$ extends kn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZD=3285377520,pa=4294901760,Ao=65535;class hI{constructor(e){this.h1=e?e&4294967295:ZD,this.h2=e?e&4294967295:ZD}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let w=0,E=e.length;w<E;w++){const C=e.charCodeAt(w);C<=255?t[n++]=C:(t[n++]=C>>>8,t[n++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,i=n-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,d=this.h1,h=this.h2;const g=3432918353,y=461845907,b=g&Ao,v=y&Ao;for(let w=0;w<s;w++)w&1?(o=a[w],o=o*g&pa|o*b&Ao,o=o<<15|o>>>17,o=o*y&pa|o*v&Ao,d^=o,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[w],c=c*g&pa|c*b&Ao,c=c<<15|c>>>17,c=c*y&pa|c*v&Ao,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*g&pa|o*b&Ao,o=o<<15|o>>>17,o=o*y&pa|o*v&Ao,s&1?d^=o:h^=o}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&pa|e*36045&Ao,t=t*4283543511&pa|((t<<16|e>>>16)*2950163797&pa)>>>16,e^=t>>>1,e=e*444984403&pa|e*60499&Ao,t=t*3301882366&pa|((t<<16|e>>>16)*3120437893&pa)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Rk=Object.freeze({map:null,hash:"",transfer:void 0});var Fh,zh,ec,ds,FC,fI;class PM{constructor(){L(this,FC);L(this,Fh,!1);L(this,zh,null);L(this,ec,null);L(this,ds,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,ds).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,ds).get(e)}remove(e){const t=m(this,ds).get(e);if(t!==void 0&&(t instanceof kn&&m(this,ec).delete(t.annotationElementId),m(this,ds).delete(e),m(this,ds).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of m(this,ds).values())if(n instanceof kn)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,ds).get(e);let s=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(s=!0,n[i]=a);else s=!0,m(this,ds).set(e,t);s&&B(this,FC,fI).call(this),t instanceof kn&&((m(this,ec)||j(this,ec,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return m(this,ds).has(e)}get size(){return m(this,ds).size}resetModified(){m(this,Fh)&&(j(this,Fh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pI(this)}get serializable(){if(m(this,ds).size===0)return Rk;const e=new Map,t=new hI,n=[],s=Object.create(null);let i=!1;for(const[a,o]of m(this,ds)){const c=o instanceof kn?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Rk}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const i of m(this,ds).values()){if(!(i instanceof kn)){i.popup&&(i.popup.deleted?s+=1:n+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(n+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[d,h]of Object.entries(a)){if(d==="type")continue;let g=c.get(d);g||(g=new Map,c.set(d,g));const y=g.get(h)??0;g.set(h,y+1)}}if((s>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:n}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){j(this,zh,null)}updateEditor(e,t){var s;const n=(s=m(this,ec))==null?void 0:s.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=m(this,ec))==null?void 0:t.get(e))||null}get modifiedIds(){if(m(this,zh))return m(this,zh);const e=[];if(m(this,ec))for(const t of m(this,ec).values())t.serialize()&&e.push(t.annotationElementId);return j(this,zh,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,ds).entries()}}Fh=new WeakMap,zh=new WeakMap,ec=new WeakMap,ds=new WeakMap,FC=new WeakSet,fI=function(){m(this,Fh)||(j(this,Fh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var l1;class pI extends PM{constructor(t){super();L(this,l1);const{map:n,hash:s,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);j(this,l1,{map:a,hash:s,transfer:i})}get print(){Cn("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,l1)}get modifiedIds(){return ft(this,"modifiedIds",{ids:new Set,hash:""})}}l1=new WeakMap;var Bm;class t${constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){L(this,Bm,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,Bm).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,Bm).has(e.loadedName))){if(Dt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,o=new FontFace(s,i,a);this.addNativeFontFace(o);try{await o.load(),m(this,Bm).add(s),n==null||n(e)}catch{ot(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Cn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw ot(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ft(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ft(this,"isSyncFontLoadingSupported",Us||es.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Dt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ft(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,M){return k.charCodeAt(M)<<24|k.charCodeAt(M+1)<<16|k.charCodeAt(M+2)<<8|k.charCodeAt(M+3)&255}function s(k,M,O,P){const F=k.substring(0,M),H=k.substring(M+O);return F+P+H}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let d=0;function h(k,M){if(++d>30){ot("Load test font never loaded."),M();return}if(c.font="30px "+k,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(h.bind(null,k,M))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=s(y,976,g.length,g);const v=16,w=1482184792;let E=n(y,v);for(i=0,a=g.length-3;i<a;i+=4)E=E-w+n(g,i)|0;i<g.length&&(E=E-w+n(g+"XXX",i)|0),y=s(y,v,4,UU(E));const C=`url(data:font/opentype;base64,${btoa(y)});`,N=`@font-face {font-family:"${g}";src:${C}}`;this.insertRule(N);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const k of[e.loadedName,g]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=k,A.append(M)}this._document.body.append(A),h(g,()=>{A.remove(),t.complete()})}}Bm=new WeakMap;var un;class n${constructor(e,t=null,n,s){L(this,un);this.compiledGlyphs=Object.create(null),j(this,un,e),this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_P(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(a){ot(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return m(this,un).black}get bold(){return m(this,un).bold}get disableFontFace(){return m(this,un).disableFontFace??!1}get fontExtraProperties(){return m(this,un).fontExtraProperties??!1}get isInvalidPDFjsFont(){return m(this,un).isInvalidPDFjsFont}get isType3Font(){return m(this,un).isType3Font}get italic(){return m(this,un).italic}get missingFile(){return m(this,un).missingFile}get remeasure(){return m(this,un).remeasure}get vertical(){return m(this,un).vertical}get ascent(){return m(this,un).ascent}get defaultWidth(){return m(this,un).defaultWidth}get descent(){return m(this,un).descent}get bbox(){return m(this,un).bbox}get fontMatrix(){return m(this,un).fontMatrix}get fallbackName(){return m(this,un).fallbackName}get loadedName(){return m(this,un).loadedName}get mimetype(){return m(this,un).mimetype}get name(){return m(this,un).name}get data(){return m(this,un).data}clearData(){m(this,un).clearData()}get cssFontInfo(){return m(this,un).cssFontInfo}get systemFontInfo(){return m(this,un).systemFontInfo}get defaultVMetrics(){return m(this,un).defaultVMetrics}}un=new WeakMap;function r$(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Us)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function s$(r){if(Us&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return gb(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Kv(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Lk=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,i$=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",mI=GU.bind(null,Lk,i$);var tc,zC;class a${constructor(){L(this,tc,new Map);L(this,zC,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,zC).then(()=>{for(const[s]of m(this,tc))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){ot("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}m(this,tc).set(t,s)}removeEventListener(e,t){const n=m(this,tc).get(t);n==null||n(),m(this,tc).delete(t)}terminate(){for(const[,e]of m(this,tc))e==null||e();m(this,tc).clear()}}tc=new WeakMap,zC=new WeakMap;const Jv={DATA:1,ERROR:2},Sr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function eO(){}function si(r){if(r instanceof jc||r instanceof CS||r instanceof GD||r instanceof mx||r instanceof $A)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Cn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new jc(r.message);case"InvalidPDFException":return new CS(r.message);case"PasswordException":return new GD(r.message,r.code);case"ResponseException":return new mx(r.message,r.status,r.missing);case"UnknownErrorException":return new $A(r.message,r.details)}return new $A(r.message,r.toString())}var Fm,Ia,gI,yI,xI,zw;class Ay{constructor(e,t,n){L(this,Ia);L(this,Fm,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",B(this,Ia,gI).bind(this),{signal:m(this,Fm).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:d.desiredSize},s),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:Sr.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Dt(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:Sr.CANCEL,streamId:i,reason:si(d)}),h.promise}},n)}destroy(){var e;(e=m(this,Fm))==null||e.abort(),j(this,Fm,null)}}Fm=new WeakMap,Ia=new WeakSet,gI=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){B(this,Ia,xI).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Jv.DATA)s.resolve(e.data);else if(e.callback===Jv.ERROR)s.reject(si(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:n,targetName:s,callback:Jv.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:n,targetName:s,callback:Jv.ERROR,callbackId:e.callbackId,reason:si(a)})});return}if(e.streamId){B(this,Ia,yI).call(this,e);return}t(e.data)},yI=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(d,h=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=h,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:Sr.ENQUEUE,streamId:t,chunk:d},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Sr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Dt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Sr.ERROR,streamId:t,reason:si(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Sr.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:s,stream:Sr.START_COMPLETE,streamId:t,reason:si(d)})})},xI=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Sr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(si(e.reason));break;case Sr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(si(e.reason));break;case Sr.PULL:if(!o){i.postMessage({sourceName:n,targetName:s,stream:Sr.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||eO).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Sr.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:s,stream:Sr.PULL_COMPLETE,streamId:t,reason:si(d)})});break;case Sr.ENQUEUE:if(Dt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Sr.CLOSE:if(Dt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),B(this,Ia,zw).call(this,a,t);break;case Sr.ERROR:Dt(a,"error should have stream controller"),a.controller.error(si(e.reason)),B(this,Ia,zw).call(this,a,t);break;case Sr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(si(e.reason)),B(this,Ia,zw).call(this,a,t);break;case Sr.CANCEL:if(!o)break;const c=si(e.reason);Promise.try(o.onCancel||eO,c).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Sr.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:s,stream:Sr.CANCEL_COMPLETE,streamId:t,reason:si(d)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},zw=async function(e,t){var n,s,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var c1;class bI{constructor({enableHWA:e=!1}){L(this,c1,!1);j(this,c1,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,c1)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Cn("Abstract method `_createCanvas` called.")}}c1=new WeakMap;class o$ extends bI{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class vI{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Cn("Abstract method `_fetch` called.")}}class tO extends vI{async _fetch(e){const t=await t0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):gb(t)}}class wI{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,i){return"none"}destroy(e=!1){}}var Hh,zm,nc,rc,Ts,Uh,$h,Oe,Ss,Ny,Xp,Hw,Kp,SI,Pk,Jp,ky,My,Ik,_y;class l$ extends wI{constructor({docId:t,ownerDocument:n=globalThis.document}){super();L(this,Oe);L(this,Hh);L(this,zm);L(this,nc);L(this,rc);L(this,Ts);L(this,Uh);L(this,$h,0);j(this,rc,t),j(this,Ts,n)}addFilter(t){if(!t)return"none";let n=m(this,Oe,Ss).get(t);if(n)return n;const[s,i,a]=B(this,Oe,Hw).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(n=m(this,Oe,Ss).get(o),n)return m(this,Oe,Ss).set(t,n),n;const c=`g_${m(this,rc)}_transfer_map_${_r(this,$h)._++}`,d=B(this,Oe,Kp).call(this,c);m(this,Oe,Ss).set(t,d),m(this,Oe,Ss).set(o,d);const h=B(this,Oe,Jp).call(this,c);return B(this,Oe,My).call(this,s,i,a,h),d}addHCMFilter(t,n){var v;const s=`${t}-${n}`,i="base";let a=m(this,Oe,Ny).get(i);if((a==null?void 0:a.key)===s||(a?((v=a.filter)==null||v.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},m(this,Oe,Ny).set(i,a)),!t||!n))return a.url;const o=B(this,Oe,_y).call(this,t);t=Le.makeHexColor(...o);const c=B(this,Oe,_y).call(this,n);if(n=Le.makeHexColor(...c),m(this,Oe,Xp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const d=new Array(256);for(let w=0;w<=255;w++){const E=w/255;d[w]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=d.join(","),g=`g_${m(this,rc)}_hcm_filter`,y=a.filter=B(this,Oe,Jp).call(this,g);B(this,Oe,My).call(this,h,h,h,y),B(this,Oe,Pk).call(this,y);const b=(w,E)=>{const C=o[w]/255,N=c[w]/255,A=new Array(E+1);for(let k=0;k<=E;k++)A[k]=C+k/E*(N-C);return A.join(",")};return B(this,Oe,My).call(this,b(0,5),b(1,5),b(2,5),y),a.url=B(this,Oe,Kp).call(this,g),a.url}addAlphaFilter(t){let n=m(this,Oe,Ss).get(t);if(n)return n;const[s]=B(this,Oe,Hw).call(this,[t]),i=`alpha_${s}`;if(n=m(this,Oe,Ss).get(i),n)return m(this,Oe,Ss).set(t,n),n;const a=`g_${m(this,rc)}_alpha_map_${_r(this,$h)._++}`,o=B(this,Oe,Kp).call(this,a);m(this,Oe,Ss).set(t,o),m(this,Oe,Ss).set(i,o);const c=B(this,Oe,Jp).call(this,a);return B(this,Oe,Ik).call(this,s,c),o}addLuminosityFilter(t){let n=m(this,Oe,Ss).get(t||"luminosity");if(n)return n;let s,i;if(t?([s]=B(this,Oe,Hw).call(this,[t]),i=`luminosity_${s}`):i="luminosity",n=m(this,Oe,Ss).get(i),n)return m(this,Oe,Ss).set(t,n),n;const a=`g_${m(this,rc)}_luminosity_map_${_r(this,$h)._++}`,o=B(this,Oe,Kp).call(this,a);m(this,Oe,Ss).set(t,o),m(this,Oe,Ss).set(i,o);const c=B(this,Oe,Jp).call(this,a);return B(this,Oe,SI).call(this,c),t&&B(this,Oe,Ik).call(this,s,c),o}addHighlightHCMFilter(t,n,s,i,a){var N;const o=`${n}-${s}-${i}-${a}`;let c=m(this,Oe,Ny).get(t);if((c==null?void 0:c.key)===o||(c?((N=c.filter)==null||N.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},m(this,Oe,Ny).set(t,c)),!n||!s))return c.url;const[d,h]=[n,s].map(B(this,Oe,_y).bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[b,v]=[i,a].map(B(this,Oe,_y).bind(this));y<g&&([g,y,b,v]=[y,g,v,b]),m(this,Oe,Xp).style.color="";const w=(A,k,M)=>{const O=new Array(256),P=(y-g)/M,F=A/255,H=(k-A)/(255*M);let ee=0;for(let G=0;G<=M;G++){const J=Math.round(g+G*P),V=F+G*H;for(let X=ee;X<=J;X++)O[X]=V;ee=J+1}for(let G=ee;G<256;G++)O[G]=O[ee-1];return O.join(",")},E=`g_${m(this,rc)}_hcm_${t}_filter`,C=c.filter=B(this,Oe,Jp).call(this,E);return B(this,Oe,Pk).call(this,C),B(this,Oe,My).call(this,w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),C),c.url=B(this,Oe,Kp).call(this,E),c.url}destroy(t=!1){var n,s,i,a;t&&((n=m(this,Uh))!=null&&n.size)||((s=m(this,nc))==null||s.parentNode.parentNode.remove(),j(this,nc,null),(i=m(this,zm))==null||i.clear(),j(this,zm,null),(a=m(this,Uh))==null||a.clear(),j(this,Uh,null),j(this,$h,0))}}Hh=new WeakMap,zm=new WeakMap,nc=new WeakMap,rc=new WeakMap,Ts=new WeakMap,Uh=new WeakMap,$h=new WeakMap,Oe=new WeakSet,Ss=function(){return m(this,zm)||j(this,zm,new Map)},Ny=function(){return m(this,Uh)||j(this,Uh,new Map)},Xp=function(){if(!m(this,nc)){const t=m(this,Ts).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=m(this,Ts).createElementNS(Ol,"svg");s.setAttribute("width",0),s.setAttribute("height",0),j(this,nc,m(this,Ts).createElementNS(Ol,"defs")),t.append(s),s.append(m(this,nc)),m(this,Ts).body.append(t)}return m(this,nc)},Hw=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let y=0;y<256;y++)h[y]=d[y]/255;const g=h.join(",");return[g,g,g]}const[n,s,i]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=n[d]/255,o[d]=s[d]/255,c[d]=i[d]/255;return[a.join(","),o.join(","),c.join(",")]},Kp=function(t){if(m(this,Hh)===void 0){j(this,Hh,"");const n=m(this,Ts).URL;n!==m(this,Ts).baseURI&&(xb(n)?ot('#createUrl: ignore "data:"-URL for performance reasons.'):j(this,Hh,jM(n,"")))}return`url(${m(this,Hh)}#${t})`},SI=function(t){const n=m(this,Ts).createElementNS(Ol,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Pk=function(t){const n=m(this,Ts).createElementNS(Ol,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Jp=function(t){const n=m(this,Ts).createElementNS(Ol,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Oe,Xp).append(n),n},ky=function(t,n,s){const i=m(this,Ts).createElementNS(Ol,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},My=function(t,n,s,i){const a=m(this,Ts).createElementNS(Ol,"feComponentTransfer");i.append(a),B(this,Oe,ky).call(this,a,"feFuncR",t),B(this,Oe,ky).call(this,a,"feFuncG",n),B(this,Oe,ky).call(this,a,"feFuncB",s)},Ik=function(t,n){const s=m(this,Ts).createElementNS(Ol,"feComponentTransfer");n.append(s),B(this,Oe,ky).call(this,s,"feFuncA",t)},_y=function(t){return m(this,Oe,Xp).style.color=t,n0(getComputedStyle(m(this,Oe,Xp)).getPropertyValue("color"))};class CI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Cn("Abstract method `_fetch` called.")}}class nO extends CI{async _fetch(e){const t=await t0(e,"arraybuffer");return new Uint8Array(t)}}class EI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Cn("Abstract method `_fetch` called.")}}class rO extends EI{async _fetch(e){const t=await t0(e,"arraybuffer");return new Uint8Array(t)}}Us&&ot("Please use the `legacy` build in Node.js environments.");async function IM(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class c$ extends wI{}class u$ extends bI{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class d$ extends vI{async _fetch(e){return IM(e)}}class h$ extends CI{async _fetch(e){return IM(e)}}class f$ extends EI{async _fetch(e){return IM(e)}}const Fp="__forcedDependency",{floor:sO,ceil:iO}=Math;function Qv(r,e,t,n,s,i){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],s),r[e*4+3]=Math.max(r[e*4+3],i)}const Bk=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Hm,qu;class p${constructor(e,t){L(this,Hm);L(this,qu);j(this,Hm,e),j(this,qu,t)}get length(){return m(this,Hm).length}isEmpty(e){return m(this,Hm)[e]===Bk}minX(e){return m(this,qu)[e*4+0]/256}minY(e){return m(this,qu)[e*4+1]/256}maxX(e){return(m(this,qu)[e*4+2]+1)/256}maxY(e){return(m(this,qu)[e*4+3]+1)/256}}Hm=new WeakMap,qu=new WeakMap;const Zv=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};var oi,li,Vh,to,qh,sc,tn,dn,ic,ci,u1,Um,Gh,Wh,ac,As,$o,d1,Fk;class m${constructor(e,t,n=!1){L(this,d1);L(this,oi,{__proto__:null});L(this,li,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Fp]:[]});L(this,Vh,new Map);L(this,to,[]);L(this,qh,[]);L(this,sc,[[1,0,0,1,0,0]]);L(this,tn,[-1/0,-1/0,1/0,1/0]);L(this,dn,new Float64Array([1/0,1/0,-1/0,-1/0]));L(this,ic,-1);L(this,ci,new Set);L(this,u1,new Map);L(this,Um,new Map);L(this,Gh);L(this,Wh);L(this,ac);L(this,As);L(this,$o);j(this,Gh,e.width),j(this,Wh,e.height),B(this,d1,Fk).call(this,t),n&&j(this,$o,new Map)}growOperationsCount(e){e>=m(this,As).length&&B(this,d1,Fk).call(this,e,m(this,As))}save(e){return j(this,oi,{__proto__:m(this,oi)}),j(this,li,{__proto__:m(this,li),transform:{__proto__:m(this,li).transform},moveText:{__proto__:m(this,li).moveText},sameLineText:{__proto__:m(this,li).sameLineText},[Fp]:{__proto__:m(this,li)[Fp]}}),j(this,tn,{__proto__:m(this,tn)}),m(this,to).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(m(this,oi));if(t===null)return this;j(this,oi,t),j(this,li,Object.getPrototypeOf(m(this,li))),j(this,tn,Object.getPrototypeOf(m(this,tn)));const n=m(this,to).pop();return n!==void 0&&((s=Zv(m(this,$o),e))==null||s.dependencies.add(n),m(this,As)[e]=m(this,As)[n]),this}recordOpenMarker(e){return m(this,to).push(e),this}getOpenMarker(){return m(this,to).length===0?null:m(this,to).at(-1)}recordCloseMarker(e){var n;const t=m(this,to).pop();return t!==void 0&&((n=Zv(m(this,$o),e))==null||n.dependencies.add(t),m(this,As)[e]=m(this,As)[t]),this}beginMarkedContent(e){return m(this,qh).push(e),this}endMarkedContent(e){var n;const t=m(this,qh).pop();return t!==void 0&&((n=Zv(m(this,$o),e))==null||n.dependencies.add(t),m(this,As)[e]=m(this,As)[t]),this}pushBaseTransform(e){return m(this,sc).push(Le.multiplyByDOMMatrix(m(this,sc).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,sc).length>1&&m(this,sc).pop(),this}recordSimpleData(e,t){return m(this,oi)[e]=t,this}recordIncrementalData(e,t){return m(this,li)[e].push(t),this}resetIncrementalData(e,t){return m(this,li)[e].length=0,this}recordNamedData(e,t){return m(this,Vh).set(e,t),this}recordSimpleDataFromNamed(e,t,n){m(this,oi)[e]=m(this,Vh).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Fp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,oi)&&this.recordFutureForcedDependency(t,m(this,oi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,ci))this.recordFutureForcedDependency(Fp,e);return this}resetBBox(e){return m(this,ic)!==e&&(j(this,ic,e),m(this,dn)[0]=1/0,m(this,dn)[1]=1/0,m(this,dn)[2]=-1/0,m(this,dn)[3]=-1/0),this}recordClipBox(e,t,n,s,i,a){const o=Le.multiplyByDOMMatrix(m(this,sc).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Le.axialAlignedBoundingBox([n,i,s,a],o,c);const d=Le.intersect(m(this,tn),c);return d?(m(this,tn)[0]=d[0],m(this,tn)[1]=d[1],m(this,tn)[2]=d[2],m(this,tn)[3]=d[3]):(m(this,tn)[0]=m(this,tn)[1]=1/0,m(this,tn)[2]=m(this,tn)[3]=-1/0),this}recordBBox(e,t,n,s,i,a){const o=m(this,tn);if(o[0]===1/0)return this;const c=Le.multiplyByDOMMatrix(m(this,sc).at(-1),t.getTransform());if(o[0]===-1/0)return Le.axialAlignedBoundingBox([n,i,s,a],c,m(this,dn)),this;const d=[1/0,1/0,-1/0,-1/0];return Le.axialAlignedBoundingBox([n,i,s,a],c,d),m(this,dn)[0]=Math.min(m(this,dn)[0],Math.max(d[0],o[0])),m(this,dn)[1]=Math.min(m(this,dn)[1],Math.max(d[1],o[1])),m(this,dn)[2]=Math.max(m(this,dn)[2],Math.min(d[2],o[2])),m(this,dn)[3]=Math.max(m(this,dn)[3],Math.min(d[3],o[3])),this}recordCharacterBBox(e,t,n,s=1,i=0,a=0,o){const c=n.bbox;let d,h;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&m(this,Um).get(n),d!==!1&&(h=[0,0,0,0],Le.axialAlignedBoundingBox(c,n.fontMatrix,h),(s!==1||i!==0||a!==0)&&Le.scaleMinMax([s,0,0,-s,i,a],h),d)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!o)return this.recordFullPageBBox(e);const g=o();return c&&h&&d===void 0&&(d=h[0]<=i-g.actualBoundingBoxLeft&&h[2]>=i+g.actualBoundingBoxRight&&h[1]<=a-g.actualBoundingBoxAscent&&h[3]>=a+g.actualBoundingBoxDescent,m(this,Um).set(n,d),d)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,dn)[0]=Math.max(0,m(this,tn)[0]),m(this,dn)[1]=Math.max(0,m(this,tn)[1]),m(this,dn)[2]=Math.min(m(this,Gh),m(this,tn)[2]),m(this,dn)[3]=Math.min(m(this,Wh),m(this,tn)[3]),this}getSimpleIndex(e){return m(this,oi)[e]}recordDependencies(e,t){const n=m(this,ci),s=m(this,oi),i=m(this,li);for(const a of t)a in m(this,oi)?n.add(s[a]):a in i&&i[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return m(this,Vh).has(t)&&m(this,ci).add(m(this,Vh).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Fp]),m(this,$o)){const n=Zv(m(this,$o),e),{dependencies:s}=n;m(this,ci).forEach(s.add,s),m(this,to).forEach(s.add,s),m(this,qh).forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(m(this,ic)===e){const n=sO(m(this,dn)[0]*256/m(this,Gh)),s=sO(m(this,dn)[1]*256/m(this,Wh)),i=iO(m(this,dn)[2]*256/m(this,Gh)),a=iO(m(this,dn)[3]*256/m(this,Wh));Qv(m(this,ac),e,n,s,i,a);for(const o of m(this,ci))o!==e&&Qv(m(this,ac),o,n,s,i,a);for(const o of m(this,to))o!==e&&Qv(m(this,ac),o,n,s,i,a);for(const o of m(this,qh))o!==e&&Qv(m(this,ac),o,n,s,i,a);t||(m(this,ci).clear(),j(this,ic,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(m(this,ci));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return m(this,ic)===e&&(j(this,ic,-1),m(this,tn)[0]=Math.max(m(this,tn)[0],m(this,dn)[0]),m(this,tn)[1]=Math.max(m(this,tn)[1],m(this,dn)[1]),m(this,tn)[2]=Math.min(m(this,tn)[2],m(this,dn)[2]),m(this,tn)[3]=Math.min(m(this,tn)[3],m(this,dn)[3]),t||m(this,ci).clear()),this}_takePendingDependencies(){const e=m(this,ci);return j(this,ci,new Set),e}_extractOperation(e){const t=m(this,u1).get(e);return m(this,u1).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,ci).add(t)}take(){return m(this,Um).clear(),new p$(m(this,As),m(this,ac))}takeDebugMetadata(){return m(this,$o)}}oi=new WeakMap,li=new WeakMap,Vh=new WeakMap,to=new WeakMap,qh=new WeakMap,sc=new WeakMap,tn=new WeakMap,dn=new WeakMap,ic=new WeakMap,ci=new WeakMap,u1=new WeakMap,Um=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,ac=new WeakMap,As=new WeakMap,$o=new WeakMap,d1=new WeakSet,Fk=function(e,t){const n=new ArrayBuffer(e*4);j(this,ac,new Uint8ClampedArray(n)),j(this,As,new Uint32Array(n)),t&&t.length>0?(m(this,As).set(t),m(this,As).fill(Bk,t.length)):m(this,As).fill(Bk)};var bn,er,no,$m,Vm;const sj=class sj{constructor(e,t,n){L(this,bn);L(this,er);L(this,no);L(this,$m,0);L(this,Vm,0);if(e instanceof sj&&m(e,no)===!!n)return e;j(this,bn,e),j(this,er,t),j(this,no,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return _r(this,Vm)._++,m(this,bn).save(m(this,er)),this}restore(e){return m(this,Vm)>0&&(m(this,bn).restore(m(this,er)),_r(this,Vm)._--),this}recordOpenMarker(e){return _r(this,$m)._++,this}getOpenMarker(){return m(this,$m)>0?m(this,er):m(this,bn).getOpenMarker()}recordCloseMarker(e){return _r(this,$m)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,bn).pushBaseTransform(e),this}popBaseTransform(){return m(this,bn).popBaseTransform(),this}recordSimpleData(e,t){return m(this,bn).recordSimpleData(e,m(this,er)),this}recordIncrementalData(e,t){return m(this,bn).recordIncrementalData(e,m(this,er)),this}resetIncrementalData(e,t){return m(this,bn).resetIncrementalData(e,m(this,er)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return m(this,bn).recordSimpleDataFromNamed(e,t,m(this,er)),this}recordFutureForcedDependency(e,t){return m(this,bn).recordFutureForcedDependency(e,m(this,er)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,bn).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,bn).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,no)||m(this,bn).resetBBox(m(this,er)),this}recordClipBox(e,t,n,s,i,a){return m(this,no)||m(this,bn).recordClipBox(m(this,er),t,n,s,i,a),this}recordBBox(e,t,n,s,i,a){return m(this,no)||m(this,bn).recordBBox(m(this,er),t,n,s,i,a),this}recordCharacterBBox(e,t,n,s,i,a,o){return m(this,no)||m(this,bn).recordCharacterBBox(m(this,er),t,n,s,i,a,o),this}recordFullPageBBox(e){return m(this,no)||m(this,bn).recordFullPageBBox(m(this,er)),this}getSimpleIndex(e){return m(this,bn).getSimpleIndex(e)}recordDependencies(e,t){return m(this,bn).recordDependencies(m(this,er),t),this}recordNamedDependency(e,t){return m(this,bn).recordNamedDependency(m(this,er),t),this}recordOperation(e){return m(this,bn).recordOperation(m(this,er),!0),this}recordShowTextOperation(e){return m(this,bn).recordShowTextOperation(m(this,er),!0),this}bboxToClipBoxDropOperation(e){return m(this,no)||m(this,bn).bboxToClipBoxDropOperation(m(this,er),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};bn=new WeakMap,er=new WeakMap,no=new WeakMap,$m=new WeakMap,Vm=new WeakMap;let AS=sj;const ma={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ms={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function zk(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),r.clip(s)}class BM{isModifyingCurrentTransform(){return!1}getPattern(){Cn("Abstract method `getPattern` called.")}}class g$ extends BM{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let i;if(s===ms.STROKE||s===ms.FILL){const a=t.current.getClippedPathBoundingBox(s,Un(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",o,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=Le.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),zk(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else zk(e,this._bbox),i=this._createGradient(e);return i}}function GA(r,e,t,n,s,i,a,o){const c=e.coords,d=e.colors,h=r.data,g=r.width*4;let y;c[t+1]>c[n+1]&&(y=t,t=n,n=y,y=i,i=a,a=y),c[n+1]>c[s+1]&&(y=n,n=s,s=y,y=a,a=o,o=y),c[t+1]>c[n+1]&&(y=t,t=n,n=y,y=i,i=a,a=y);const b=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,w=(c[n]+e.offsetX)*e.scaleX,E=(c[n+1]+e.offsetY)*e.scaleY,C=(c[s]+e.offsetX)*e.scaleX,N=(c[s+1]+e.offsetY)*e.scaleY;if(v>=N)return;const A=d[i],k=d[i+1],M=d[i+2],O=d[a],P=d[a+1],F=d[a+2],H=d[o],ee=d[o+1],G=d[o+2],J=Math.round(v),V=Math.round(N);let X,K,q,Z,he,te,pe,W;for(let ne=J;ne<=V;ne++){if(ne<E){const Me=ne<v?0:(v-ne)/(v-E);X=b-(b-w)*Me,K=A-(A-O)*Me,q=k-(k-P)*Me,Z=M-(M-F)*Me}else{let Me;ne>N?Me=1:E===N?Me=0:Me=(E-ne)/(E-N),X=w-(w-C)*Me,K=O-(O-H)*Me,q=P-(P-ee)*Me,Z=F-(F-G)*Me}let me;ne<v?me=0:ne>N?me=1:me=(v-ne)/(v-N),he=b-(b-C)*me,te=A-(A-H)*me,pe=k-(k-ee)*me,W=M-(M-G)*me;const we=Math.round(Math.min(X,he)),Ne=Math.round(Math.max(X,he));let je=g*ne+we*4;for(let Me=we;Me<=Ne;Me++)me=(X-Me)/(X-he),me<0?me=0:me>1&&(me=1),h[je++]=K-(K-te)*me|0,h[je++]=q-(q-pe)*me|0,h[je++]=Z-(Z-W)*me|0,h[je++]=255}}function y$(r,e,t){const n=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(n.length/o)-1,d=o-1;for(i=0;i<c;i++){let h=i*o;for(let g=0;g<d;g++,h++)GA(r,t,n[h],n[h+1],n[h+o],s[h],s[h+1],s[h+o]),GA(r,t,n[h+o+1],n[h+1],n[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)GA(r,t,n[i],n[i+1],n[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class x$ extends BM{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,g=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),b=d/g,v=h/y,w={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/b,scaleY:1/v},E=g+4,C=y+4,N=n.getCanvas("mesh",E,C),A=N.context,k=A.createImageData(g,y);if(t){const O=k.data;for(let P=0,F=O.length;P<F;P+=4)O[P]=t[0],O[P+1]=t[1],O[P+2]=t[2],O[P+3]=255}for(const O of this._figures)y$(k,O,w);return A.putImageData(k,2,2),{canvas:N.canvas,offsetX:o-2*b,offsetY:c-2*v,scaleX:b,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){zk(e,this._bbox);const i=new Float32Array(2);if(s===ms.SHADING)Le.singularValueDecompose2dScale(Un(e),i);else if(this.matrix){Le.singularValueDecompose2dScale(this.matrix,i);const[o,c]=i;Le.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=o,i[1]*=c}else Le.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===ms.SHADING?null:this._background,t.cachedCanvases);return s!==ms.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class b$ extends BM{getPattern(){return"hotpink"}}function v$(r){switch(r[0]){case"RadialAxial":return new g$(r);case"Mesh":return new x$(r);case"Dummy":return new b$}throw new Error(`Unknown IR type: ${r[0]}`)}const aO={COLORED:1,UNCOLORED:2},HC=class HC{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){var te,pe;const{bbox:n,operatorList:s,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),ZC("TilingType: "+a);const g=n[0],y=n[1],b=n[2],v=n[3],w=b-g,E=v-y,C=new Float32Array(2);Le.singularValueDecompose2dScale(this.matrix,C);const[N,A]=C;Le.singularValueDecompose2dScale(this.baseTransform,C);const k=N*C[0],M=A*C[1];let O=w,P=E,F=!1,H=!1;const ee=Math.ceil(d*k),G=Math.ceil(h*M),J=Math.ceil(w*k),V=Math.ceil(E*M);ee>=J?O=d:F=!0,G>=V?P=h:H=!0;const X=this.getSizeAndScale(O,this.ctx.canvas.width,k),K=this.getSizeAndScale(P,this.ctx.canvas.height,M),q=e.cachedCanvases.getCanvas("pattern",X.size,K.size),Z=q.context,he=c.createCanvasGraphics(Z,t);if(he.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(he,i,o),Z.translate(-X.scale*g,-K.scale*y),he.transform(0,X.scale,0,0,K.scale,0,0),Z.save(),(te=he.dependencyTracker)==null||te.save(),this.clipBbox(he,g,y,b,v),he.baseTransform=Un(he.ctx),he.executeOperatorList(s),he.endDrawing(),(pe=he.dependencyTracker)==null||pe.restore(),Z.restore(),F||H){const W=q.canvas;F&&(O=d),H&&(P=h);const ne=this.getSizeAndScale(O,this.ctx.canvas.width,k),me=this.getSizeAndScale(P,this.ctx.canvas.height,M),we=ne.size,Ne=me.size,je=e.cachedCanvases.getCanvas("pattern-workaround",we,Ne),Me=je.context,He=F?Math.floor(w/d):0,Ye=H?Math.floor(E/h):0;for(let Qe=0;Qe<=He;Qe++)for(let Ht=0;Ht<=Ye;Ht++)Me.drawImage(W,we*Qe,Ne*Ht,we,Ne,0,0,we,Ne);return{canvas:je.canvas,scaleX:ne.scale,scaleY:me.scale,offsetX:g,offsetY:y}}return{canvas:q.canvas,scaleX:X.scale,scaleY:K.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,n){const s=Math.max(HC.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=s?i=s:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,s,i){const a=s-t,o=i-n;e.ctx.rect(t,n,a,o),Le.axialAlignedBoundingBox([t,n,s,i],Un(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,i=e.current;switch(t){case aO.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=o;break;case aO.UNCOLORED:s.fillStyle=s.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new HU(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,i){let a=n;s!==ms.SHADING&&(a=Le.transform(a,t.baseTransform),this.matrix&&(a=Le.transform(a,this.matrix)));const o=this.createPatternCanvas(t,i);let c=new DOMMatrix(a);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const d=e.createPattern(o.canvas,"repeat");return d.setTransform(c),d}};le(HC,"MAX_PATTERN_SIZE",3e3);let Hk=HC;function w$({src:r,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=es.isLittleEndian?4278190080:255,[c,d]=a?[i,o]:[o,i],h=n>>3,g=n&7,y=r.length;t=new Uint32Array(t.buffer);let b=0;for(let v=0;v<s;v++){for(const E=e+h;e<E;e++){const C=e<y?r[e]:255;t[b++]=C&128?d:c,t[b++]=C&64?d:c,t[b++]=C&32?d:c,t[b++]=C&16?d:c,t[b++]=C&8?d:c,t[b++]=C&4?d:c,t[b++]=C&2?d:c,t[b++]=C&1?d:c}if(g===0)continue;const w=e<y?r[e++]:255;for(let E=0;E<g;E++)t[b++]=w&1<<7-E?d:c}return{srcPos:e,destPos:b}}const oO=16,lO=100,S$=15,cO=10,fi=16,WA=new DOMMatrix,Gi=new Float32Array(2),im=new Float32Array([1/0,1/0,-1/0,-1/0]);function C$(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,s,i,a,o){e.transform(t,n,s,i,a,o),this.__originalTransform(t,n,s,i,a,o)},r.setTransform=function(t,n,s,i,a,o){e.setTransform(t,n,s,i,a,o),this.__originalSetTransform(t,n,s,i,a,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,s,i,a,o){e.bezierCurveTo(t,n,s,i,a,o),this.__originalBezierCurveTo(t,n,s,i,a,o)},r.rect=function(t,n,s,i){e.rect(t,n,s,i),this.__originalRect(t,n,s,i)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class E${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ew(r,e,t,n,s,i,a,o,c,d){const[h,g,y,b,v,w]=Un(r);if(g===0&&y===0){const N=a*h+v,A=Math.round(N),k=o*b+w,M=Math.round(k),O=(a+c)*h+v,P=Math.abs(Math.round(O)-A)||1,F=(o+d)*b+w,H=Math.abs(Math.round(F)-M)||1;return r.setTransform(Math.sign(h),0,0,Math.sign(b),A,M),r.drawImage(e,t,n,s,i,0,0,P,H),r.setTransform(h,g,y,b,v,w),[P,H]}if(h===0&&b===0){const N=o*y+v,A=Math.round(N),k=a*g+w,M=Math.round(k),O=(o+d)*y+v,P=Math.abs(Math.round(O)-A)||1,F=(a+c)*g+w,H=Math.abs(Math.round(F)-M)||1;return r.setTransform(0,Math.sign(g),Math.sign(y),0,A,M),r.drawImage(e,t,n,s,i,0,0,H,P),r.setTransform(h,g,y,b,v,w),[H,P]}r.drawImage(e,t,n,s,i,a,o,c,d);const E=Math.hypot(h,g),C=Math.hypot(y,b);return[E*c,C*d]}class uO{constructor(e,t,n){le(this,"alphaIsShape",!1);le(this,"fontSize",0);le(this,"fontSizeScale",1);le(this,"textMatrix",null);le(this,"textMatrixScale",1);le(this,"fontMatrix",fk);le(this,"leading",0);le(this,"x",0);le(this,"y",0);le(this,"lineX",0);le(this,"lineY",0);le(this,"charSpacing",0);le(this,"wordSpacing",0);le(this,"textHScale",1);le(this,"textRenderingMode",ls.FILL);le(this,"textRise",0);le(this,"fillColor","#000000");le(this,"strokeColor","#000000");le(this,"patternFill",!1);le(this,"patternStroke",!1);le(this,"fillAlpha",1);le(this,"strokeAlpha",1);le(this,"lineWidth",1);le(this,"activeSMask",null);le(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=im.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ms.FILL,t=null){const n=this.minMax.slice();if(e===ms.STROKE){t||Cn("Stroke bounding box must include transform."),Le.singularValueDecompose2dScale(t,Gi);const s=Gi[0]*this.lineWidth/2,i=Gi[1]*this.lineWidth/2;n[0]-=s,n[1]-=i,n[2]+=s,n[3]+=i}return n}updateClipFromPath(){const e=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(im,0)}getClippedPathBoundingBox(e=ms.FILL,t=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function dO(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%fi,i=(t-s)/fi,a=s===0?i:i+1,o=r.createImageData(n,fi);let c=0,d;const h=e.data,g=o.data;let y,b,v,w;if(e.kind===Yy.GRAYSCALE_1BPP){const E=h.byteLength,C=new Uint32Array(g.buffer,0,g.byteLength>>2),N=C.length,A=n+7>>3,k=4294967295,M=es.isLittleEndian?4278190080:255;for(y=0;y<a;y++){for(v=y<i?fi:s,d=0,b=0;b<v;b++){const O=E-c;let P=0;const F=O>A?n:O*8-7,H=F&-8;let ee=0,G=0;for(;P<H;P+=8)G=h[c++],C[d++]=G&128?k:M,C[d++]=G&64?k:M,C[d++]=G&32?k:M,C[d++]=G&16?k:M,C[d++]=G&8?k:M,C[d++]=G&4?k:M,C[d++]=G&2?k:M,C[d++]=G&1?k:M;for(;P<F;P++)ee===0&&(G=h[c++],ee=128),C[d++]=G&ee?k:M,ee>>=1}for(;d<N;)C[d++]=0;r.putImageData(o,0,y*fi)}}else if(e.kind===Yy.RGBA_32BPP){for(b=0,w=n*fi*4,y=0;y<i;y++)g.set(h.subarray(c,c+w)),c+=w,r.putImageData(o,0,b),b+=fi;y<a&&(w=n*s*4,g.set(h.subarray(c,c+w)),r.putImageData(o,0,b))}else if(e.kind===Yy.RGB_24BPP)for(v=fi,w=n*v,y=0;y<a;y++){for(y>=i&&(v=s,w=n*v),d=0,b=w;b--;)g[d++]=h[c++],g[d++]=h[c++],g[d++]=h[c++],g[d++]=255;r.putImageData(o,0,y*fi)}else throw new Error(`bad image kind: ${e.kind}`)}function hO(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%fi,i=(t-s)/fi,a=s===0?i:i+1,o=r.createImageData(n,fi);let c=0;const d=e.data,h=o.data;for(let g=0;g<a;g++){const y=g<i?fi:s;({srcPos:c}=w$({src:d,srcPos:c,dest:h,width:n,height:y,nonBlackColor:0})),r.putImageData(o,0,g*fi)}}function iy(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function tw(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function fO(r,e){if(e)return!0;Le.singularValueDecompose2dScale(r,Gi);const t=Math.fround(po.pixelRatio*Dc.PDF_TO_CSS_UNITS);return Gi[0]<=t&&Gi[1]<=t}const T$=["butt","round","square"],A$=["miter","round","bevel"],N$={},pO={};var mo,Uk,$k,Vk;const ij=class ij{constructor(e,t,n,s,i,{optionalContentConfig:a,markedContentStack:o=null},c,d,h){L(this,mo);this.ctx=e,this.current=new uO(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new E$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,n=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Un(this.compositeCtx))}this.ctx.save(),tw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Un(this.ctx)}executeOperatorList(e,t,n,s,i){var C;const a=e.argsArray,o=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const h=d-c>cO&&typeof n=="function",g=h?Date.now()+S$:0;let y=0;const b=this.commonObjs,v=this.objs;let w,E;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(!i||i(c))if(w=o[c],E=a[c]??null,w!==Vg.dependency)E===null?this[w](c):this[w](c,...E);else for(const N of E){(C=this.dependencyTracker)==null||C.recordNamedData(N,c);const A=N.startsWith("g_")?b:v;if(!A.has(N))return A.get(N,n),c}if(c++,c===d)return c;if(h&&++y>cO){if(Date.now()>g)return n(),c;y=0}}}endDrawing(){B(this,mo,Uk).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),B(this,mo,$k).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,c=s,d="prescale1",h,g;for(;i>2&&o>1||a>2&&c>1;){let y=o,b=c;i>2&&o>1&&(y=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/y),a>2&&c>1&&(b=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/b),h=this.cachedCanvases.getCanvas(d,y,b),g=h.context,g.clearRect(0,0,y,b),g.drawImage(e,0,0,o,c,0,0,y,b),e=h.canvas,o=y,c=b,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e,t){var ee,G;const n=this.ctx,{width:s,height:i}=t,a=this.current.fillColor,o=this.current.patternFill,c=Un(n);let d,h,g,y;if((t.bitmap||t.data)&&t.count>1){const J=t.bitmap||t.data.buffer;h=JSON.stringify(o?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(J),d||(d=new Map,this._cachedBitmapsMap.set(J,d));const V=d.get(h);if(V&&!o){const X=Math.round(Math.min(c[0],c[2])+c[4]),K=Math.round(Math.min(c[1],c[3])+c[5]);return(ee=this.dependencyTracker)==null||ee.recordDependencies(e,ma.transformAndFill),{canvas:V,offsetX:X,offsetY:K}}g=V}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,i),hO(y.context,t));let b=Le.transform(c,[1/s,0,0,-1/i,0,0]);b=Le.transform(b,[1,0,0,1,0,-i]);const v=im.slice();Le.axialAlignedBoundingBox([0,0,s,i],b,v);const[w,E,C,N]=v,A=Math.round(C-w)||1,k=Math.round(N-E)||1,M=this.cachedCanvases.getCanvas("fillCanvas",A,k),O=M.context,P=w,F=E;O.translate(-P,-F),O.transform(...b),g||(g=this._scaleImage(y.canvas,To(O)),g=g.img,d&&o&&d.set(h,g)),O.imageSmoothingEnabled=fO(Un(O),t.interpolate),ew(O,g,0,0,g.width,g.height,0,0,s,i),O.globalCompositeOperation="source-in";const H=Le.transform(To(O),[1,0,0,1,-P,-F]);return O.fillStyle=o?a.getPattern(n,this,H,ms.FILL,e):a,O.fillRect(0,0,s,i),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,M.canvas)),(G=this.dependencyTracker)==null||G.recordDependencies(e,ma.transformAndFill),{canvas:M.canvas,offsetX:Math.round(P),offsetY:Math.round(F)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=T$[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=A$[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,s,i,a,o;for(const[c,d]of t)switch(c){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),iy(this.suspendedCtx,a),C$(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),iy(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const i=s[0],a=s[1],o=s[2]-i,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,n,o,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,i,a,o,c,d,h,g){let y=e.canvas,b=c-h,v=d-g;if(a)if(b<0||v<0||b+n>y.width||v+s>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,s),C=E.context;C.drawImage(y,-b,-v),C.globalCompositeOperation="destination-atop",C.fillStyle=a,C.fillRect(0,0,n,s),C.globalCompositeOperation="source-over",y=E.canvas,b=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,v,n,s),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(b,v,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const w=new Path2D;w.rect(c,d,n,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(y,b,v,n,s,c,d,n,s),t.restore()}save(e){var n;this.inSMaskMode&&iy(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&iy(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,i,a,o){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[i]=n;if(!s){i||(i=n[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===Vg.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const a=n[0]=new Path2D;for(let o=0,c=i.length;o<c;)switch(i[o++]){case Yv.moveTo:a.moveTo(i[o++],i[o++]);break;case Yv.lineTo:a.lineTo(i[o++],i[o++]);break;case Yv.curveTo:a.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Yv.closePath:a.closePath();break;default:ot(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=a}Le.axialAlignedBoundingBox(s,Un(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const o=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,To(s),ms.STROKE,e),o){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,ma.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ms.STROKE,Un(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,h,g;const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const y=i.isModifyingCurrentTransform()?s.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),s.save(),s.fillStyle=i.getPattern(s,this,To(s),ms.FILL,e),y){const b=new Path2D;b.addPath(t,s.getTransform().invertSelf().multiplySelf(y)),t=b}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,ma.fill),o&&(s.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ma.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=N$}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=pO}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=n.getTransform().invertSelf();for(const{transform:a,x:o,y:c,fontSize:d,path:h}of t)h&&s.addPath(h,new DOMMatrix(a).preMultiplySelf(i).translate(o,c).scale(d,-d));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,y;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||fk,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ot("Invalid font matrix for font "+t),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=((y=s.systemFontInfo)==null?void 0:y.css)||`"${a}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let h=n;n<oO?h=oO:n>lO&&(h=lO),this.current.fontSizeScale=n/h,this.ctx.font=`${d} ${c} ${h}px ${o}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,s,i,a){var C,N,A,k;const o=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,y=h&ls.FILL_STROKE_MASK,b=!!(h&ls.ADD_TO_PATH_FLAG),v=c.patternFill&&!d.missingFile,w=c.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||b||v||w)&&!d.missingFile&&(E=d.getPathGenerator(this.commonObjs,t)),E&&(d.disableFontFace||v||w)){o.save(),o.translate(n,s),o.scale(g,-g),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,o,d);let M;if(y===ls.FILL||y===ls.FILL_STROKE)if(i){M=o.getTransform(),o.setTransform(...i);const O=B(this,mo,Vk).call(this,E,M,i);o.fill(O)}else o.fill(E);if(y===ls.STROKE||y===ls.FILL_STROKE)if(a){M||(M=o.getTransform()),o.setTransform(...a);const{a:O,b:P,c:F,d:H}=M,ee=Le.inverseTransform(a),G=Le.transform([O,P,F,H,0,0],ee);Le.singularValueDecompose2dScale(G,Gi),o.lineWidth*=Math.max(Gi[0],Gi[1])/g,o.stroke(B(this,mo,Vk).call(this,E,M,a))}else o.lineWidth/=g,o.stroke(E);o.restore()}else(y===ls.FILL||y===ls.FILL_STROKE)&&(o.fillText(t,n,s),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,o,d,g,n,s,()=>o.measureText(t))),(y===ls.STROKE||y===ls.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,o,d,g,n,s,()=>o.measureText(t)).recordDependencies(e,ma.stroke)),o.strokeText(t,n,s));b&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Un(o),x:n,y:s,fontSize:g,path:E}),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,o,d,g,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return ft(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var F,H,ee,G;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ma.showText).resetBBox(e),this.current.textRenderingMode&ls.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e);return}const i=n.fontSize;if(i===0){(H=this.dependencyTracker)==null||H.recordOperation(e);return}const a=this.ctx,o=n.fontSizeScale,c=n.charSpacing,d=n.wordSpacing,h=n.fontDirection,g=n.textHScale*h,y=t.length,b=s.vertical,v=b?1:-1,w=s.defaultVMetrics,E=i*n.fontMatrix[0],C=n.textRenderingMode===ls.FILL&&!s.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),h>0?a.scale(g,-1):a.scale(g,1);let N,A;if(n.patternFill){a.save();const J=n.fillColor.getPattern(a,this,To(a),ms.FILL,e);N=Un(a),a.restore(),a.fillStyle=J}if(n.patternStroke){a.save();const J=n.strokeColor.getPattern(a,this,To(a),ms.STROKE,e);A=Un(a),a.restore(),a.strokeStyle=J}let k=n.lineWidth;const M=n.textMatrixScale;if(M===0||k===0){const J=n.textRenderingMode&ls.FILL_STROKE_MASK;(J===ls.STROKE||J===ls.FILL_STROKE)&&(k=this.getSinglePixelWidth())}else k/=M;if(o!==1&&(a.scale(o,o),k/=o),a.lineWidth=k,s.isInvalidPDFjsFont){const J=[];let V=0;for(const K of t)J.push(K.unicode),V+=K.width;const X=J.join("");if(a.fillText(X,0,0),this.dependencyTracker!==null){const K=a.measureText(X);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=V*E*g,a.restore(),this.compose();return}let O=0,P;for(P=0;P<y;++P){const J=t[P];if(typeof J=="number"){O+=v*J*i/1e3;continue}let V=!1;const X=(J.isSpace?d:0)+c,K=J.fontChar,q=J.accent;let Z,he,te=J.width;if(b){const ne=J.vmetric||w,me=-(J.vmetric?ne[1]:te*.5)*E,we=ne[2]*E;te=ne?-ne[0]:te,Z=me/o,he=(O+we)/o}else Z=O/o,he=0;let pe;if(s.remeasure&&te>0){pe=a.measureText(K);const ne=pe.width*1e3/i*o;if(te<ne&&this.isFontSubpixelAAEnabled){const me=te/ne;V=!0,a.save(),a.scale(me,1),Z/=me}else te!==ne&&(Z+=(te-ne)/2e3*i/o)}if(this.contentVisible&&(J.isInFont||s.missingFile)){if(C&&!q)a.fillText(K,Z,he),(ee=this.dependencyTracker)==null||ee.recordCharacterBBox(e,a,pe?{bbox:null}:s,i/o,Z,he,()=>pe??a.measureText(K));else if(this.paintChar(e,K,Z,he,N,A),q){const ne=Z+i*q.offset.x/o,me=he-i*q.offset.y/o;this.paintChar(e,q.fontChar,ne,me,N,A)}}const W=b?te*E-X*h:te*E+X*h;O+=W,V&&a.restore()}b?n.y-=O:n.x+=O*g,a.restore(),this.compose(),(G=this.dependencyTracker)==null||G.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,i=s.font,a=s.fontSize,o=s.fontDirection,c=i.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,g=s.textHScale*o,y=s.fontMatrix||fk,b=t.length,v=s.textRenderingMode===ls.INVISIBLE;let w,E,C,N;if(v||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(g,o);const A=this.dependencyTracker;for(this.dependencyTracker=A?new AS(A,e):null,w=0;w<b;++w){if(E=t[w],typeof E=="number"){N=c*E*a/1e3,this.ctx.translate(N,0),s.x+=N*g;continue}const k=(E.isSpace?h:0)+d,M=i.charProcOperatorList[E.operatorListId];M?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...y),this.executeOperatorList(M),this.restore()):ot(`Type3 character "${E.operatorListId}" is not available.`);const O=[E.width,0];Le.applyTransform(O,y),C=O[0]*a+k,n.translate(C,0),s.x+=C*g}n.restore(),A&&(this.dependencyTracker=A)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,i,a,o){var d;const c=new Path2D;c.rect(s,i,a-s,o-i),this.ctx.clip(c),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,s,a,i,o).recordClipBox(e,this.ctx,s,a,i,o),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||Un(this.ctx),i={createCanvasGraphics:(a,o)=>new ij(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new AS(this.dependencyTracker,o,!0):null)};n=new Hk(t,this.ctx,i,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=v$(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,To(n),ms.SHADING,e);const i=To(n);if(i){const{width:o,height:c}=n.canvas,d=im.slice();Le.axialAlignedBoundingBox([0,0,o,c],i,d);const[h,g,y,b]=d;this.ctx.fillRect(h,g,y-h,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ma.transform).recordDependencies(e,ma.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Cn("Should not call beginInlineImage")}beginImageData(){Cn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Un(this.ctx),n)){Le.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,o,c]=n,d=new Path2D;d.rect(i,a,o-i,c-a),this.ctx.clip(d),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,i,o,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||ZC("TODO: Support non-isolated groups."),t.knockout&&ot("Knockout groups not supported.");const s=Un(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=im.slice();Le.axialAlignedBoundingBox(t.bbox,Un(n),i);const a=[0,0,n.canvas.width,n.canvas.height];i=Le.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),c=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-o,1),h=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,h]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,h),b=y.context;b.translate(-o,-c),b.transform(...s);let v=new Path2D;const[w,E,C,N]=t.bbox;if(v.rect(w,E,C-w,N-E),t.matrix){const k=new Path2D;k.addPath(v,new DOMMatrix(t.matrix)),v=k}b.clip(v),t.smask&&this.smaskStack.push({canvas:y.canvas,context:b,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,c),n.save()),iy(n,b),this.ctx=b,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Un(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=im.slice();Le.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,s,i,a){if(B(this,mo,Uk).call(this),tw(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],c=n[3]-n[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=c,Le.singularValueDecompose2dScale(Un(this.ctx),Gi);const{viewportScale:d}=this,h=Math.ceil(o*this.outputScaleX*d),g=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(Gi[0],0,0,-Gi[1],0,c*Gi[1]),tw(this.ctx)}else{tw(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],o,c),this.ctx.clip(d)}}this.current=new uO(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),B(this,mo,$k).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,i.offsetX,i.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,i=0,a,o){var g,y,b;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=Un(c);c.transform(n,s,i,a,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let v=0,w=o.length;v<w;v+=2){const E=Le.transform(d,[n,s,i,a,o[v],o[v+1]]);c.drawImage(h.canvas,E[4],E[5]),(y=this.dependencyTracker)==null||y.recordBBox(e,this.ctx,E[4],E[4]+h.canvas.width,E[5],E[5]+h.canvas.height)}c.restore(),this.compose(),(b=this.dependencyTracker)==null||b.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,c;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,ma.transformAndFill);for(const d of t){const{data:h,width:g,height:y,transform:b}=d,v=this.cachedCanvases.getCanvas("maskCanvas",g,y),w=v.context;w.save();const E=this.getObject(e,h,d);hO(w,E),w.globalCompositeOperation="source-in",w.fillStyle=i?s.getPattern(w,this,To(n),ms.FILL,e):s,w.fillRect(0,0,g,y),w.restore(),n.save(),n.transform(...b),n.scale(1,-1),ew(n,v.canvas,0,0,g,y,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,g,0,y),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){ot("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){ot("Dependent image isn't ready yet");return}const o=a.width,c=a.height,d=[];for(let h=0,g=i.length;h<g;h+=2)d.push({transform:[n,0,0,s,i[h],i[h+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/n,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,s).context;dO(g,t),o=this.applyTransferMapsToCanvas(g)}const c=this._scaleImage(o,To(i));i.imageSmoothingEnabled=fO(Un(i),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,i,0,n,-s,0).recordDependencies(e,ma.imageXObject).recordOperation(e),ew(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,o,c;if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const d=t.width,h=t.height,y=this.cachedCanvases.getCanvas("inlineImage",d,h).context;dO(y,t),i=this.applyTransferMapsToCanvas(y)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const d of n)s.save(),s.transform(...d.transform),s.scale(1,-1),ew(s,i,d.x,d.y,d.w,d.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ma.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,o;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===pO?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Un(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:i}=this.ctx.getTransform();let a,o;if(n===0&&s===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/d;else{const h=c*e,g=d*e;a=h<1?1/h:1,o=g<1?1/g:1}}else{const c=Math.abs(t*i-n*s),d=Math.hypot(t,n),h=Math.hypot(s,i);if(e===0)a=h/c,o=d/c;else{const g=e*c;a=h>g?h/g:1,o=d>g?d/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){n.lineWidth=(s||1)*i,n.stroke(e);return}const o=n.getLineDash();t&&n.save(),n.scale(i,a),WA.a=1/i,WA.d=1/a;const c=new Path2D;if(c.addPath(e,WA),o.length>0){const d=Math.max(i,a);n.setLineDash(o.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=s||1,n.stroke(c),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};mo=new WeakSet,Uk=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$k=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Vk=function(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s};let hm=ij;for(const r in Vg)hm.prototype[r]!==void 0&&(hm.prototype[Vg[r]]=hm.prototype[r]);var qm,Gm,h1,Wm,Uw;const cm=class cm{constructor(e){L(this,Wm);L(this,qm);L(this,Gm);L(this,h1);j(this,qm,e),j(this,Gm,new DataView(m(this,qm))),j(this,h1,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const d of cm.strings){const h=t.encode(e[d]);n[d]=h,s+=4+h.length}const i=new ArrayBuffer(s),a=new Uint8Array(i),o=new DataView(i);let c=0;for(const d of cm.strings){const h=n[d],g=h.length;o.setUint32(c,g),a.set(h,c+4),c+=4+g}return Dt(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return B(this,Wm,Uw).call(this,0)}get fontWeight(){return B(this,Wm,Uw).call(this,1)}get italicAngle(){return B(this,Wm,Uw).call(this,2)}};qm=new WeakMap,Gm=new WeakMap,h1=new WeakMap,Wm=new WeakSet,Uw=function(e){Dt(e<cm.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=m(this,Gm).getUint32(t)+4;const n=m(this,Gm).getUint32(t);return m(this,h1).decode(new Uint8Array(m(this,qm),t+4,n))},le(cm,"strings",["fontFamily","fontWeight","italicAngle"]);let NS=cm;var Gu,Vo,Yh,Xh,jy;const um=class um{constructor(e){L(this,Xh);L(this,Gu);L(this,Vo);L(this,Yh);j(this,Gu,e),j(this,Vo,new DataView(m(this,Gu))),j(this,Yh,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const y of um.strings){const b=t.encode(e[y]);n[y]=b,s+=4+b.length}s+=4;let i,a,o=1+s;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+i.length+4+a.length);const c=new ArrayBuffer(o),d=new Uint8Array(c),h=new DataView(c);let g=0;h.setUint8(g++,e.guessFallback?1:0),h.setUint32(g,0),g+=4,s=0;for(const y of um.strings){const b=n[y],v=b.length;s+=4+v,h.setUint32(g,v),d.set(b,g+4),g+=4+v}return h.setUint32(g-s-4,s),e.style&&(h.setUint32(g,i.length),d.set(i,g+4),g+=4+i.length,h.setUint32(g,a.length),d.set(a,g+4),g+=4+a.length),Dt(g<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(g)}get guessFallback(){return m(this,Vo).getUint8(0)!==0}get css(){return B(this,Xh,jy).call(this,0)}get loadedName(){return B(this,Xh,jy).call(this,1)}get baseFontName(){return B(this,Xh,jy).call(this,2)}get src(){return B(this,Xh,jy).call(this,3)}get style(){let e=1;e+=4+m(this,Vo).getUint32(e);const t=m(this,Vo).getUint32(e),n=m(this,Yh).decode(new Uint8Array(m(this,Gu),e+4,t));e+=4+t;const s=m(this,Vo).getUint32(e),i=m(this,Yh).decode(new Uint8Array(m(this,Gu),e+4,s));return{style:n,weight:i}}};Gu=new WeakMap,Vo=new WeakMap,Yh=new WeakMap,Xh=new WeakSet,jy=function(e){Dt(e<um.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=m(this,Vo).getUint32(t)+4;const n=m(this,Vo).getUint32(t);return m(this,Yh).decode(new Uint8Array(m(this,Gu),t+4,n))},le(um,"strings",["css","loadedName","baseFontName","src"]);let kS=um;var Ym,Xm,Km,Jm,_i,qo,f1,hn,rr,Wa,$w,Dy;const dt=class dt{constructor({data:e,extra:t}){L(this,rr);L(this,qo);L(this,f1);L(this,hn);j(this,qo,e),j(this,f1,new TextDecoder),j(this,hn,new DataView(m(this,qo))),t&&Object.assign(this,t)}get black(){return B(this,rr,Wa).call(this,0)}get bold(){return B(this,rr,Wa).call(this,1)}get disableFontFace(){return B(this,rr,Wa).call(this,2)}get fontExtraProperties(){return B(this,rr,Wa).call(this,3)}get isInvalidPDFjsFont(){return B(this,rr,Wa).call(this,4)}get isType3Font(){return B(this,rr,Wa).call(this,5)}get italic(){return B(this,rr,Wa).call(this,6)}get missingFile(){return B(this,rr,Wa).call(this,7)}get remeasure(){return B(this,rr,Wa).call(this,8)}get vertical(){return B(this,rr,Wa).call(this,9)}get ascent(){return B(this,rr,$w).call(this,0)}get defaultWidth(){return B(this,rr,$w).call(this,1)}get descent(){return B(this,rr,$w).call(this,2)}get bbox(){let e=m(dt,Xm);if(m(this,hn).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(m(this,hn).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=m(dt,Km);if(m(this,hn).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(m(this,hn).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=m(dt,Jm);if(m(this,hn).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(m(this,hn).getInt16(e,!0)),e+=2;return n}get fallbackName(){return B(this,rr,Dy).call(this,0)}get loadedName(){return B(this,rr,Dy).call(this,1)}get mimetype(){return B(this,rr,Dy).call(this,2)}get name(){return B(this,rr,Dy).call(this,3)}get data(){let e=m(dt,_i);const t=m(this,hn).getUint32(e);e+=4+t;const n=m(this,hn).getUint32(e);e+=4+n;const s=m(this,hn).getUint32(e);e+=4+s;const i=m(this,hn).getUint32(e);if(i!==0)return new Uint8Array(m(this,qo),e+4,i)}clearData(){let e=m(dt,_i);const t=m(this,hn).getUint32(e);e+=4+t;const n=m(this,hn).getUint32(e);e+=4+n;const s=m(this,hn).getUint32(e);e+=4+s;const i=m(this,hn).getUint32(e);new Uint8Array(m(this,qo),e+4,i).fill(0),m(this,hn).setUint32(e,0)}get cssFontInfo(){let e=m(dt,_i);const t=m(this,hn).getUint32(e);e+=4+t;const n=m(this,hn).getUint32(e);e+=4+n;const s=m(this,hn).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(m(this,qo),e+4,s)),new NS(i.buffer)}get systemFontInfo(){let e=m(dt,_i);const t=m(this,hn).getUint32(e);e+=4+t;const n=m(this,hn).getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(m(this,qo),e+4,n)),new kS(s.buffer)}static write(e){const t=e.systemFontInfo?kS.write(e.systemFontInfo):null,n=e.cssFontInfo?NS.write(e.cssFontInfo):null,s=new TextEncoder,i={};let a=0;for(const w of dt.strings)i[w]=s.encode(e[w]),a+=4+i[w].length;const o=m(dt,_i)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(o),d=new Uint8Array(c),h=new DataView(c);let g=0;const y=dt.bools.length;let b=0,v=0;for(let w=0;w<y;w++){const E=e[dt.bools[w]];b|=(E===void 0?0:E?2:1)<<v,v+=2,(v===8||w===y-1)&&(h.setUint8(g++,b),b=0,v=0)}Dt(g===m(dt,Ym),"FontInfo.write: Boolean properties offset mismatch");for(const w of dt.numbers)h.setFloat64(g,e[w]),g+=8;if(Dt(g===m(dt,Xm),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(g++,4);for(const w of e.bbox)h.setInt16(g,w,!0),g+=2}else h.setUint8(g++,0),g+=8;if(Dt(g===m(dt,Km),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(g++,6);for(const w of e.fontMatrix)h.setFloat64(g,w,!0),g+=8}else h.setUint8(g++,0),g+=48;if(Dt(g===m(dt,Jm),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(g++,1);for(const w of e.defaultVMetrics)h.setInt16(g,w,!0),g+=2}else h.setUint8(g++,0),g+=6;Dt(g===m(dt,_i),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(m(dt,_i),0),g+=4;for(const w of dt.strings){const E=i[w],C=E.length;h.setUint32(g,C),d.set(E,g+4),g+=4+C}if(h.setUint32(m(dt,_i),g-m(dt,_i)-4),!t)h.setUint32(g,0),g+=4;else{const w=t.byteLength;h.setUint32(g,w),Dt(g+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),g+4),g+=4+w}if(!n)h.setUint32(g,0),g+=4;else{const w=n.byteLength;h.setUint32(g,w),Dt(g+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),g+4),g+=4+w}return e.data===void 0?(h.setUint32(g,0),g+=4):(h.setUint32(g,e.data.length),d.set(e.data,g+4),g+=4+e.data.length),Dt(g<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(g)}};Ym=new WeakMap,Xm=new WeakMap,Km=new WeakMap,Jm=new WeakMap,_i=new WeakMap,qo=new WeakMap,f1=new WeakMap,hn=new WeakMap,rr=new WeakSet,Wa=function(e){Dt(e<dt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=m(this,hn).getUint8(t)>>n&3;return s===0?void 0:s===2},$w=function(e){return Dt(e<dt.numbers.length,"Invalid number index"),m(this,hn).getFloat64(m(dt,Ym)+e*8)},Dy=function(e){Dt(e<dt.strings.length,"Invalid string index");let t=m(dt,_i)+4;for(let i=0;i<e;i++)t+=m(this,hn).getUint32(t)+4;const n=m(this,hn).getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(m(this,qo),t+4,n)),m(this,f1).decode(s)},le(dt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),le(dt,"numbers",["ascent","defaultWidth","descent"]),le(dt,"strings",["fallbackName","loadedName","mimetype","name"]),L(dt,Ym,Math.ceil(dt.bools.length*2/8)),L(dt,Xm,m(dt,Ym)+dt.numbers.length*8),L(dt,Km,m(dt,Xm)+1+8),L(dt,Jm,m(dt,Km)+1+48),L(dt,_i,m(dt,Jm)+1+6);let qk=dt;var p1,m1;class Da{static get workerPort(){return m(this,p1)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");j(this,p1,e)}static get workerSrc(){return m(this,m1)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");j(this,m1,e)}}p1=new WeakMap,m1=new WeakMap,L(Da,p1,null),L(Da,m1,"");var Qm,g1;class k${constructor({parsedData:e,rawData:t}){L(this,Qm);L(this,g1);j(this,Qm,e),j(this,g1,t)}getRaw(){return m(this,g1)}get(e){return m(this,Qm).get(e)??null}[Symbol.iterator](){return m(this,Qm).entries()}}Qm=new WeakMap,g1=new WeakMap;const Qp=Symbol("INTERNAL");var y1,x1,b1,Zm;class M${constructor(e,{name:t,intent:n,usage:s,rbGroups:i}){L(this,y1,!1);L(this,x1,!1);L(this,b1,!1);L(this,Zm,!0);j(this,y1,!!(e&Vi.DISPLAY)),j(this,x1,!!(e&Vi.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=i}get visible(){if(m(this,b1))return m(this,Zm);if(!m(this,Zm))return!1;const{print:e,view:t}=this.usage;return m(this,y1)?(t==null?void 0:t.viewState)!=="OFF":m(this,x1)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Qp&&Cn("Internal method `_setVisible` called."),j(this,b1,n),j(this,Zm,t)}}y1=new WeakMap,x1=new WeakMap,b1=new WeakMap,Zm=new WeakMap;var Wu,fn,eg,tg,v1,Gk;class _${constructor(e,t=Vi.DISPLAY){L(this,v1);L(this,Wu,null);L(this,fn,new Map);L(this,eg,null);L(this,tg,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,j(this,tg,e.order);for(const n of e.groups)m(this,fn).set(n.id,new M$(t,n));if(e.baseState==="OFF")for(const n of m(this,fn).values())n._setVisible(Qp,!1);for(const n of e.on)m(this,fn).get(n)._setVisible(Qp,!0);for(const n of e.off)m(this,fn).get(n)._setVisible(Qp,!1);j(this,eg,this.getHash())}}isVisible(e){if(m(this,fn).size===0)return!0;if(!e)return ZC("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,fn).has(e.id)?m(this,fn).get(e.id).visible:(ot(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return B(this,v1,Gk).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,fn).has(t))return ot(`Optional content group not found: ${t}`),!0;if(m(this,fn).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,fn).has(t))return ot(`Optional content group not found: ${t}`),!0;if(!m(this,fn).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,fn).has(t))return ot(`Optional content group not found: ${t}`),!0;if(!m(this,fn).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,fn).has(t))return ot(`Optional content group not found: ${t}`),!0;if(m(this,fn).get(t).visible)return!1}return!0}return ot(`Unknown optional content policy ${e.policy}.`),!0}return ot(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const s=m(this,fn).get(e);if(!s){ot(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=m(this,fn).get(o))==null||i._setVisible(Qp,!1,!0));s._setVisible(Qp,!!t,!0),j(this,Wu,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const i=m(this,fn).get(s);if(i)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}j(this,Wu,null)}get hasInitialVisibility(){return m(this,eg)===null||this.getHash()===m(this,eg)}getOrder(){return m(this,fn).size?m(this,tg)?m(this,tg).slice():[...m(this,fn).keys()]:null}getGroup(e){return m(this,fn).get(e)||null}getHash(){if(m(this,Wu)!==null)return m(this,Wu);const e=new hI;for(const[t,n]of m(this,fn))e.update(`${t}:${n.visible}`);return j(this,Wu,e.hexdigest())}[Symbol.iterator](){return m(this,fn).entries()}}Wu=new WeakMap,fn=new WeakMap,eg=new WeakMap,tg=new WeakMap,v1=new WeakSet,Gk=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=B(this,v1,Gk).call(this,i);else if(m(this,fn).has(i))a=m(this,fn).get(i).visible;else return ot(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class j${constructor(e,{disableRange:t=!1,disableStream:n=!1}){Dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Dt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new D$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new O$(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class D${constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=tE(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O${constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function R$(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=a(r),t){const h=d(t);return i(h)}if(t=n("filename","i").exec(r),t){t=t[1];let h=o(t);return h=d(h),i(h)}function n(h,g){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(h,g){if(h){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(h,{fatal:!0}),b=gb(g);g=y.decode(b),e=!1}catch{}}return g}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const g=[];let y;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(h))!==null;){let[,w,E,C]=y;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[E,C]}const v=[];for(let w=0;w<g.length&&w in g;++w){let[E,C]=g[w];C=o(C),E&&(C=unescape(C),w===0&&(C=c(C))),v.push(C)}return v.join("")}function o(h){if(h.startsWith('"')){const g=h.slice(1).split('\\"');for(let y=0;y<g.length;++y){const b=g[y].indexOf('"');b!==-1&&(g[y]=g[y].slice(0,b),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}h=g.join('"')}return h}function c(h){const g=h.indexOf("'");if(g===-1)return h;const y=h.slice(0,g),v=h.slice(g+1).replace(/^[^']*'/,"");return s(y,v)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,b,v){if(b==="q"||b==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),s(y,v);try{v=atob(v)}catch{}return s(y,v)})}return""}function TI(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function nE(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function AI({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(r.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function NI(r){const e=r.get("Content-Disposition");if(e){let t=R$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(tE(t))return t}return null}function vb(r,e){return new mx(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function kI(r){return r===200||r===206}function MI(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function _I(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ot(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class L${constructor(e){le(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=TI(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new I$(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class P${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,MI(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=nE(i.url),!kI(i.status))throw vb(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:c}=AI({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=NI(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new jc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_I(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class I${constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const a=s.url;fetch(a,MI(i,this._withCredentials,this._abortController)).then(o=>{const c=nE(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!kI(o.status))throw vb(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:_I(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const YA=200,XA=206;function B$(r){const e=r.response;return typeof e!="string"?e:gb(e).buffer}class F${constructor({url:e,httpHeaders:t,withCredentials:n}){le(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=TI(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=XA):s.expectedStatus=YA,t.responseType="arraybuffer",Dt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const i=s.status||YA;if(!(i===YA&&n.expectedStatus===XA)&&i!==n.expectedStatus){n.onError(s.status);return}const o=B$(s);if(i===XA){const c=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?n.onDone({begin:parseInt(d[1],10),chunk:o}):(ot('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class z${constructor(e){this._source=e,this._manager=new F$(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new H$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new U$(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class H${constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=nE(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...d]=o.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=AI({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=NI(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=vb(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U${constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=nE((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=vb(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $$=/^[a-z][a-z0-9\-+.]+:/i;function V$(r){if($$.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class q${constructor(e){this.source=e,this.url=V$(e.url),Dt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new G$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new W$(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class G${constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=vb(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new jc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class W${constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ay=Symbol("INITIAL_DATA");var ji,w1,Wk;class jI{constructor(){L(this,w1);L(this,ji,Object.create(null))}get(e,t=null){if(t){const s=B(this,w1,Wk).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=m(this,ji)[e];if(!n||n.data===ay)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,ji)[e];return!!t&&t.data!==ay}delete(e){const t=m(this,ji)[e];return!t||t.data===ay?!1:(delete m(this,ji)[e],!0)}resolve(e,t=null){const n=B(this,w1,Wk).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,ji)){const{data:n}=m(this,ji)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}j(this,ji,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,ji)){const{data:t}=m(this,ji)[e];t!==ay&&(yield[e,t])}}}ji=new WeakMap,w1=new WeakSet,Wk=function(e){var t;return(t=m(this,ji))[e]||(t[e]={...Promise.withResolvers(),data:ay})};const Y$=1e5,mO=30;var EP,Yu,ui,S1,C1,Kh,oc,E1,T1,Jh,ng,rg,Xu,sg,A1,ig,Qh,N1,k1,nr,ag,Zh,M1,Ku,og,Ic,DI,OI,Yk,Ji,Vw,Xk,RI,LI;let bx=(nr=class{constructor({textContentSource:e,container:t,viewport:n}){L(this,Ic);L(this,Yu,Promise.withResolvers());L(this,ui,null);L(this,S1,!1);L(this,C1,!!((EP=globalThis.FontInspector)!=null&&EP.enabled));L(this,Kh,null);L(this,oc,null);L(this,E1,0);L(this,T1,0);L(this,Jh,null);L(this,ng,null);L(this,rg,0);L(this,Xu,0);L(this,sg,Object.create(null));L(this,A1,[]);L(this,ig,null);L(this,Qh,[]);L(this,N1,new WeakMap);L(this,k1,null);var c;if(e instanceof ReadableStream)j(this,ig,e);else if(typeof e=="object")j(this,ig,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');j(this,ui,j(this,ng,t)),j(this,Xu,n.scale*po.pixelRatio),j(this,rg,n.rotation),j(this,oc,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=n.rawDims;j(this,k1,[1,0,0,-1,-a,o+i]),j(this,T1,s),j(this,E1,i),B(c=nr,Ji,RI).call(c),_d(t,n),m(this,Yu).promise.finally(()=>{m(nr,og).delete(this),j(this,oc,null),j(this,sg,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=es.platform;return ft(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,Jh).read().then(({value:t,done:n})=>{if(n){m(this,Yu).resolve();return}m(this,Kh)??j(this,Kh,t.lang),Object.assign(m(this,sg),t.styles),B(this,Ic,DI).call(this,t.items),e()},m(this,Yu).reject)};return j(this,Jh,m(this,ig).getReader()),m(nr,og).add(this),e(),m(this,Yu).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*po.pixelRatio,s=e.rotation;if(s!==m(this,rg)&&(t==null||t(),j(this,rg,s),_d(m(this,ng),{rotation:s})),n!==m(this,Xu)){t==null||t(),j(this,Xu,n);const a={div:null,properties:null,ctx:B(i=nr,Ji,Vw).call(i,m(this,Kh))};for(const o of m(this,Qh))a.properties=m(this,N1).get(o),a.div=o,B(this,Ic,Yk).call(this,a)}}cancel(){var t;const e=new jc("TextLayer task cancelled.");(t=m(this,Jh))==null||t.cancel(e).catch(()=>{}),j(this,Jh,null),m(this,Yu).reject(e)}get textDivs(){return m(this,Qh)}get textContentItemsStr(){return m(this,A1)}static cleanup(){if(!(m(this,og).size>0)){m(this,ag).clear();for(const{canvas:e}of m(this,Zh).values())e.remove();m(this,Zh).clear()}}},Yu=new WeakMap,ui=new WeakMap,S1=new WeakMap,C1=new WeakMap,Kh=new WeakMap,oc=new WeakMap,E1=new WeakMap,T1=new WeakMap,Jh=new WeakMap,ng=new WeakMap,rg=new WeakMap,Xu=new WeakMap,sg=new WeakMap,A1=new WeakMap,ig=new WeakMap,Qh=new WeakMap,N1=new WeakMap,k1=new WeakMap,ag=new WeakMap,Zh=new WeakMap,M1=new WeakMap,Ku=new WeakMap,og=new WeakMap,Ic=new WeakSet,DI=function(e){var s,i;if(m(this,S1))return;(i=m(this,oc)).ctx??(i.ctx=B(s=nr,Ji,Vw).call(s,m(this,Kh)));const t=m(this,Qh),n=m(this,A1);for(const a of e){if(t.length>Y$){ot("Ignoring additional textDivs for performance reasons."),j(this,S1,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=m(this,ui);j(this,ui,document.createElement("span")),m(this,ui).classList.add("markedContent"),a.id&&m(this,ui).setAttribute("id",`${a.id}`),o.append(m(this,ui))}else a.type==="endMarkedContent"&&j(this,ui,m(this,ui).parentNode);continue}n.push(a.str),B(this,Ic,OI).call(this,a)}},OI=function(e){var w;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,Qh).push(t);const s=Le.transform(m(this,k1),e.transform);let i=Math.atan2(s[1],s[0]);const a=m(this,sg)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=m(this,C1)&&a.fontSubstitution||a.fontFamily;o=nr.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),d=c*B(w=nr,Ji,LI).call(w,o,a,m(this,Kh));let h,g;i===0?(h=s[4],g=s[5]-d):(h=s[4]+d*Math.sin(i),g=s[5]-d*Math.cos(i));const y="calc(var(--total-scale-factor) *",b=t.style;m(this,ui)===m(this,ng)?(b.left=`${(100*h/m(this,T1)).toFixed(2)}%`,b.top=`${(100*g/m(this,E1)).toFixed(2)}%`):(b.left=`${y}${h.toFixed(2)}px)`,b.top=`${y}${g.toFixed(2)}px)`),b.fontSize=`${y}${(m(nr,Ku)*c).toFixed(2)}px)`,b.fontFamily=o,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,C1)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),C=Math.abs(e.transform[3]);E!==C&&Math.max(E,C)/Math.min(E,C)>1.5&&(v=!0)}if(v&&(n.canvasWidth=a.vertical?e.height:e.width),m(this,N1).set(t,n),m(this,oc).div=t,m(this,oc).properties=n,B(this,Ic,Yk).call(this,m(this,oc)),n.hasText&&m(this,ui).append(t),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),m(this,ui).append(E)}},Yk=function(e){var o;const{div:t,properties:n,ctx:s}=e,{style:i}=t;let a="";if(m(nr,Ku)>1&&(a=`scale(${1/m(nr,Ku)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=n;B(o=nr,Ji,Xk).call(o,s,h*m(this,Xu),c);const{width:g}=s.measureText(t.textContent);g>0&&(a=`scaleX(${d*m(this,Xu)/g}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Ji=new WeakSet,Vw=function(e=null){let t=m(this,Zh).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,Zh).set(e,t),m(this,M1).set(t,{size:0,family:""})}return t},Xk=function(e,t,n){const s=m(this,M1).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},RI=function(){if(m(this,Ku)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),j(this,Ku,e.getBoundingClientRect().height),e.remove()},LI=function(e,t,n){const s=m(this,ag).get(e);if(s)return s;const i=B(this,Ji,Vw).call(this,n);i.canvas.width=i.canvas.height=mO,B(this,Ji,Xk).call(this,i,mO,e);const a=i.measureText(""),o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return o?d=o/(o+c):(es.platform.isFirefox&&ot("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),m(this,ag).set(e,d),d},L(nr,Ji),L(nr,ag,new Map),L(nr,Zh,new Map),L(nr,M1,new WeakMap),L(nr,Ku,null),L(nr,og,new Set),nr);const X$=100;function FM(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Kk,{docId:t}=e,n=r.url?r$(r.url):null,s=r.data?s$(r.data):null,i=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,c=r.range instanceof zM?r.range:null,d=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let h=r.worker instanceof qg?r.worker:null;const g=r.verbosity,y=typeof r.docBaseUrl=="string"&&!xb(r.docBaseUrl)?r.docBaseUrl:null,b=Kv(r.cMapUrl),v=r.cMapPacked!==!1,w=r.CMapReaderFactory||(Us?d$:tO),E=Kv(r.iccUrl),C=Kv(r.standardFontDataUrl),N=r.StandardFontDataFactory||(Us?h$:nO),A=Kv(r.wasmUrl),k=r.WasmFactory||(Us?f$:rO),M=r.stopAtErrors!==!0,O=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,P=r.isEvalSupported!==!1,F=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Us,H=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Us&&(es.platform.isFirefox||!globalThis.chrome),ee=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,G=typeof r.disableFontFace=="boolean"?r.disableFontFace:Us,J=r.fontExtraProperties===!0,V=r.enableXfa===!0,X=r.ownerDocument||globalThis.document,K=r.disableRange===!0,q=r.disableStream===!0,Z=r.disableAutoFetch===!0,he=r.pdfBug===!0,te=r.CanvasFactory||(Us?u$:o$),pe=r.FilterFactory||(Us?c$:l$),W=r.enableHWA===!0,ne=r.useWasm!==!1,me=c?c.length:r.length??NaN,we=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Us&&!G,Ne=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(w===tO&&N===nO&&k===rO&&b&&C&&A&&vy(b,document.baseURI)&&vy(C,document.baseURI)&&vy(A,document.baseURI)),je=null;BU(g);const Me={canvasFactory:new te({ownerDocument:X,enableHWA:W}),filterFactory:new pe({docId:t,ownerDocument:X}),cMapReaderFactory:Ne?null:new w({baseUrl:b,isCompressed:v}),standardFontDataFactory:Ne?null:new N({baseUrl:C}),wasmFactory:Ne?null:new k({baseUrl:A})};h||(h=qg.create({verbosity:g,port:Da.workerPort}),e._worker=h);const He={docId:t,apiVersion:"5.4.296",data:s,password:o,disableAutoFetch:Z,rangeChunkSize:d,length:me,docBaseUrl:y,enableXfa:V,evaluatorOptions:{maxImageSize:O,disableFontFace:G,ignoreErrors:M,isEvalSupported:P,isOffscreenCanvasSupported:F,isImageDecoderSupported:H,canvasMaxAreaInBytes:ee,fontExtraProperties:J,useSystemFonts:we,useWasm:ne,useWorkerFetch:Ne,cMapUrl:b,iccUrl:E,standardFontDataUrl:C,wasmUrl:A}},Ye={ownerDocument:X,pdfBug:he,styleElement:je,loadingParams:{disableAutoFetch:Z,enableXfa:V}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Qe=h.messageHandler.sendWithPromise("GetDocRequest",He,s?[s.buffer]:null);let Ht;if(c)Ht=new j$(c,{disableRange:K,disableStream:q});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const En=vy(n)?L$:Us?q$:z$;Ht=new En({url:n,length:me,httpHeaders:i,withCredentials:a,rangeChunkSize:d,disableRange:K,disableStream:q})}return Qe.then(En=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ge=new Ay(t,En,h.port),Ze=new Q$(Ge,e,Ht,Ye,Me,W);e._transport=Ze,Ge.send("Ready",null)})}).catch(e._capability.reject),e}var UC;const $C=class $C{constructor(){le(this,"_capability",Promise.withResolvers());le(this,"_transport",null);le(this,"_worker",null);le(this,"docId",`d${_r($C,UC)._++}`);le(this,"destroyed",!1);le(this,"onPassword",null);le(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};UC=new WeakMap,L($C,UC,0);let Kk=$C;var ef,_1,j1,D1,O1,TP;let zM=(TP=class{constructor(e,t,n=!1,s=null){L(this,ef,Promise.withResolvers());L(this,_1,[]);L(this,j1,[]);L(this,D1,[]);L(this,O1,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){m(this,O1).push(e)}addProgressListener(e){m(this,D1).push(e)}addProgressiveReadListener(e){m(this,j1).push(e)}addProgressiveDoneListener(e){m(this,_1).push(e)}onDataRange(e,t){for(const n of m(this,O1))n(e,t)}onDataProgress(e,t){m(this,ef).promise.then(()=>{for(const n of m(this,D1))n(e,t)})}onDataProgressiveRead(e){m(this,ef).promise.then(()=>{for(const t of m(this,j1))t(e)})}onDataProgressiveDone(){m(this,ef).promise.then(()=>{for(const e of m(this,_1))e()})}transportReady(){m(this,ef).resolve()}requestDataRange(e,t){Cn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},ef=new WeakMap,_1=new WeakMap,j1=new WeakMap,D1=new WeakMap,O1=new WeakMap,TP);class K${constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ft(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lc,tf,Oy;class J${constructor(e,t,n,s=!1){L(this,tf);L(this,lc,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new YD:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new jI,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}={}){return new yb({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ft(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:i=nl.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:b=!1,operationsFilter:v=null}){var H,ee,G;(H=this._stats)==null||H.time("Overall");const w=this._transport.getRenderingIntent(s,i,g,y),{renderingIntent:E,cacheKey:C}=w;j(this,lc,!1),c||(c=this._transport.getOptionalContentConfig(E));let N=this._intentStates.get(C);N||(N=Object.create(null),this._intentStates.set(C,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const A=!!(E&Vi.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ee=this._stats)==null||ee.time("Page Request"),this._pumpOperatorList(w));const k=!!(this._pdfBug&&((G=globalThis.StepperManager)!=null&&G.enabled)),M=!this.recordedBBoxes&&(b||k),O=J=>{var V,X;if(N.renderTasks.delete(P),M){const K=(V=P.gfx)==null?void 0:V.dependencyTracker.take();K&&(P.stepper&&P.stepper.setOperatorBBoxes(K,P.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=K))}A&&j(this,lc,!0),B(this,tf,Oy).call(this),J?(P.capability.reject(J),this._abortOperatorList({intentState:N,reason:J instanceof Error?J:new Error(J)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(X=globalThis.Stats)!=null&&X.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Jk({callback:O,params:{canvas:t,canvasContext:e,dependencyTracker:M?new m$(t,N.operatorList.length,k):null,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:v});(N.renderTasks||(N.renderTasks=new Set)).add(P);const F=P.task;return Promise.all([N.displayReadyCapability.promise,c]).then(([J,V])=>{var X;if(this.destroyed){O();return}if((X=this._stats)==null||X.time("Rendering"),!(V.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:J,optionalContentConfig:V}),P.operatorListChanged()}).catch(O),F}getOperatorList({intent:e="display",annotationMode:t=nl.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var d;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>gx.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function i(){a.read().then(function({value:c,done:d}){if(d){n(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),j(this,lc,!1),Promise.all(e)}cleanup(e=!1){j(this,lc,!0);const t=B(this,tf,Oy).call(this);return e&&t&&this._stats&&(this._stats=new YD),t}_startRenderPage(e,t){var s,i;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&B(this,tf,Oy).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:i,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:g,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),h())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();B(this,tf,Oy).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof eE){let s=X$;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new jc(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}lc=new WeakMap,tf=new WeakSet,Oy=function(){if(!m(this,lc)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),j(this,lc,!1),!0};var Ju,ro,cc,nf,VC,rf,sf,qs,qw,PI,II,Ry,lg,Gw;const In=class In{constructor({name:e=null,port:t=null,verbosity:n=FU()}={}){L(this,qs);L(this,Ju,Promise.withResolvers());L(this,ro,null);L(this,cc,null);L(this,nf,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(In,sf).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(In,sf).set(t,this),B(this,qs,PI).call(this,t)}else B(this,qs,II).call(this)}get promise(){return m(this,Ju).promise}get port(){return m(this,cc)}get messageHandler(){return m(this,ro)}destroy(){var e,t;this.destroyed=!0,(e=m(this,nf))==null||e.terminate(),j(this,nf,null),m(In,sf).delete(m(this,cc)),j(this,cc,null),(t=m(this,ro))==null||t.destroy(),j(this,ro,null)}static create(e){const t=m(this,sf).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new In(e)}static get workerSrc(){if(Da.workerSrc)return Da.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ft(this,"_setupFakeWorkerGlobal",(async()=>m(this,lg,Gw)?m(this,lg,Gw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ju=new WeakMap,ro=new WeakMap,cc=new WeakMap,nf=new WeakMap,VC=new WeakMap,rf=new WeakMap,sf=new WeakMap,qs=new WeakSet,qw=function(){m(this,Ju).resolve(),m(this,ro).send("configure",{verbosity:this.verbosity})},PI=function(e){j(this,cc,e),j(this,ro,new Ay("main","worker",e)),m(this,ro).on("ready",()=>{}),B(this,qs,qw).call(this)},II=function(){if(m(In,rf)||m(In,lg,Gw)){B(this,qs,Ry).call(this);return}let{workerSrc:e}=In;try{In._isSameOrigin(window.location,e)||(e=In._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ay("main","worker",t),s=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,Ju).reject(new Error("Worker was destroyed")):B(this,qs,Ry).call(this)},i=new AbortController;t.addEventListener("error",()=>{m(this,nf)||s()},{signal:i.signal}),n.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}j(this,ro,n),j(this,cc,t),j(this,nf,t),B(this,qs,qw).call(this)}),n.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{B(this,qs,Ry).call(this)}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{ZC("The worker has been disabled.")}B(this,qs,Ry).call(this)},Ry=function(){m(In,rf)||(ot("Setting up fake worker."),j(In,rf,!0)),In._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,Ju).reject(new Error("Worker was destroyed"));return}const t=new a$;j(this,cc,t);const n=`fake${_r(In,VC)._++}`,s=new Ay(n+"_worker",n,t);e.setup(s,t),j(this,ro,new Ay(n,n+"_worker",t)),B(this,qs,qw).call(this)}).catch(e=>{m(this,Ju).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},lg=new WeakSet,Gw=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},L(In,lg),L(In,VC,0),L(In,rf,!1),L(In,sf,new WeakMap),Us&&(j(In,rf,!0),Da.workerSrc||(Da.workerSrc="./pdf.worker.mjs")),In._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},In._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},In.fromPort=e=>{if(YU("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return In.create(e)};let qg=In;var uc,Go,cg,ug,dc,af,Ly;class Q${constructor(e,t,n,s,i,a){L(this,af);L(this,uc,new Map);L(this,Go,new Map);L(this,cg,new Map);L(this,ug,new Map);L(this,dc,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new jI,this.fontLoader=new t$({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return ft(this,"annotationStorage",new PM)}getRenderingIntent(e,t=nl.ENABLE,n=null,s=!1,i=!1){let a=Vi.DISPLAY,o=Rk;switch(e){case"any":a=Vi.ANY;break;case"display":break;case"print":a=Vi.PRINT;break;default:ot(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Vi.PRINT&&n instanceof pI?n:this.annotationStorage;switch(t){case nl.DISABLE:a+=Vi.ANNOTATIONS_DISABLE;break;case nl.ENABLE:break;case nl.ENABLE_FORMS:a+=Vi.ANNOTATIONS_FORMS;break;case nl.ENABLE_STORAGE:a+=Vi.ANNOTATIONS_STORAGE,o=c.serializable;break;default:ot(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Vi.IS_EDITING),i&&(a+=Vi.OPLIST);const{ids:d,hash:h}=c.modifiedIds,g=[a,o.hash,h];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:o,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,dc))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of m(this,Go).values())e.push(s._destroy());m(this,Go).clear(),m(this,cg).clear(),m(this,ug).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),m(this,uc).clear(),this.filterFactory.destroy(),bx.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new jc("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Dt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(n,s)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Dt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new K$(n,this))}),e.on("DocException",n=>{t._capability.reject(si(n))}),e.on("PasswordRequest",n=>{j(this,dc,Promise.withResolvers());try{if(!t.onPassword)throw si(n);const s=i=>{i instanceof Error?m(this,dc).reject(i):m(this,dc).resolve({password:i})};t.onPassword(s,n.code)}catch(s){m(this,dc).reject(s)}return m(this,dc).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,Go).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in i){const g=i.error;ot(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const o=new qk(i),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new n$(o,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:h}=i;Dt(h,"The imageRef must be defined.");for(const g of m(this,Go).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===h)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,i,a])=>{var c;if(this.destroyed)return;const o=m(this,Go).get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&ot("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,cg).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&m(this,ug).set(i.refStr,e);const a=new J$(t,i,this,this._params.pdfBug);return m(this,Go).set(t,a),a});return m(this,cg).set(t,s),s}getPageIndex(e){return Lk(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return B(this,af,Ly).call(this,"GetFieldObjects")}hasJSActions(){return B(this,af,Ly).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return B(this,af,Ly).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return B(this,af,Ly).call(this,"GetOptionalContentConfig").then(t=>new _$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,uc).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new k$(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return m(this,uc).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,Go).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,uc).clear(),this.filterFactory.destroy(!0),bx.cleanup()}}cachedPageNumber(e){if(!Lk(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,ug).get(t)??null}}uc=new WeakMap,Go=new WeakMap,cg=new WeakMap,ug=new WeakMap,dc=new WeakMap,af=new WeakSet,Ly=function(e,t=null){const n=m(this,uc).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return m(this,uc).set(e,s),s};var Qu;class Z${constructor(e){L(this,Qu,null);le(this,"onContinue",null);le(this,"onError",null);j(this,Qu,e)}get promise(){return m(this,Qu).capability.promise}cancel(e=0){m(this,Qu).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,Qu).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,Qu);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Qu=new WeakMap;var Zu,of;const gh=class gh{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:b=!1,operationsFilter:v=null}){L(this,Zu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Z$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(m(gh,of).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(gh,of).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:i,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new hm(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,s,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,Zu)&&(window.cancelAnimationFrame(m(this,Zu)),j(this,Zu,null)),m(gh,of).delete(this._canvas),e||(e=new eE(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?j(this,Zu,window.requestAnimationFrame(()=>{j(this,Zu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(gh,of).delete(this._canvas),this.callback())))}};Zu=new WeakMap,of=new WeakMap,L(gh,of,new WeakSet);let Jk=gh;const BI="5.4.296",FI="f56dc8601";var Di,lf,dg,Lr,R1,hg,hc,L1,ed,so,P1,pn,Qk,Zk,e3,ch,zI,gu;const ii=class ii{constructor({editor:e=null,uiManager:t=null}){L(this,pn);L(this,Di,null);L(this,lf,null);L(this,dg);L(this,Lr,null);L(this,R1,!1);L(this,hg,!1);L(this,hc,null);L(this,L1);L(this,ed,null);L(this,so,null);var n,s;e?(j(this,hg,!1),j(this,hc,e)):j(this,hg,!0),j(this,so,(e==null?void 0:e._uiManager)||t),j(this,L1,m(this,so)._eventBus),j(this,dg,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((s=m(this,so))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),m(ii,P1)||j(ii,P1,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ft(this,"_keyboardManager",new bb([[["Escape","mac+Escape"],ii.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ii.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ii.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ii.prototype._moveToPrevious],[["Home","mac+Home"],ii.prototype._moveToBeginning],[["End","mac+End"],ii.prototype._moveToEnd]]))}renderButton(){const e=j(this,Di,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,hc)&&(e.ariaControls=`${m(this,hc).id}_colorpicker_dropdown`);const t=m(this,so)._signal;e.addEventListener("click",B(this,pn,ch).bind(this),{signal:t}),e.addEventListener("keydown",B(this,pn,e3).bind(this),{signal:t});const n=j(this,lf,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,dg),e.append(n),e}renderMainDropdown(){const e=j(this,Lr,B(this,pn,Qk).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,Di)){B(this,pn,ch).call(this,e);return}const t=e.target.getAttribute("data-color");t&&B(this,pn,Zk).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,pn,gu)){B(this,pn,ch).call(this,e);return}if(e.target===m(this,Di)){(t=m(this,Lr).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,Lr))==null?void 0:t.firstChild)||e.target===m(this,Di)){m(this,pn,gu)&&this._hideDropdownFromKeyboard();return}m(this,pn,gu)||B(this,pn,ch).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,pn,gu)){B(this,pn,ch).call(this,e);return}(t=m(this,Lr).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,pn,gu)){B(this,pn,ch).call(this,e);return}(t=m(this,Lr).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,Lr))==null||e.classList.add("hidden"),m(this,Di).ariaExpanded="false",(t=m(this,ed))==null||t.abort(),j(this,ed,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,hg)){if(!m(this,pn,gu)){(e=m(this,hc))==null||e.unselect();return}this.hideDropdown(),m(this,Di).focus({preventScroll:!0,focusVisible:m(this,R1)})}}updateColor(e){if(m(this,lf)&&(m(this,lf).style.backgroundColor=e),!m(this,Lr))return;const t=m(this,so).highlightColors.values();for(const n of m(this,Lr).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,Di))==null||e.remove(),j(this,Di,null),j(this,lf,null),(t=m(this,Lr))==null||t.remove(),j(this,Lr,null)}};Di=new WeakMap,lf=new WeakMap,dg=new WeakMap,Lr=new WeakMap,R1=new WeakMap,hg=new WeakMap,hc=new WeakMap,L1=new WeakMap,ed=new WeakMap,so=new WeakMap,P1=new WeakMap,pn=new WeakSet,Qk=function(){const e=document.createElement("div"),t=m(this,so)._signal;e.addEventListener("contextmenu",Qi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,hc)&&(e.id=`${m(this,hc).id}_colorpicker_dropdown`);for(const[n,s]of m(this,so).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=n,i.setAttribute("data-l10n-id",m(ii,P1)[n]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===m(this,dg),i.addEventListener("click",B(this,pn,Zk).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",B(this,pn,e3).bind(this),{signal:t}),e},Zk=function(e,t){t.stopPropagation(),m(this,L1).dispatch("switchannotationeditorparams",{source:this,type:kt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},e3=function(e){ii._keyboardManager.exec(this,e)},ch=function(e){if(m(this,pn,gu)){this.hideDropdown();return}if(j(this,R1,e.detail===0),m(this,ed)||(j(this,ed,new AbortController),window.addEventListener("pointerdown",B(this,pn,zI).bind(this),{signal:m(this,so).combinedSignal(m(this,ed))})),m(this,Di).ariaExpanded="true",m(this,Lr)){m(this,Lr).classList.remove("hidden");return}const t=j(this,Lr,B(this,pn,Qk).call(this));m(this,Di).append(t)},zI=function(e){var t;(t=m(this,Lr))!=null&&t.contains(e.target)||this.hideDropdown()},gu=function(){return m(this,Lr)&&!m(this,Lr).classList.contains("hidden")},L(ii,P1,null);let vx=ii;var Wo,I1,fg,B1;const yh=class yh{constructor(e){L(this,Wo,null);L(this,I1,null);L(this,fg,null);j(this,I1,e),j(this,fg,e._uiManager),m(yh,B1)||j(yh,B1,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,Wo))return m(this,Wo);const{editorType:e,colorType:t,colorValue:n}=m(this,I1),s=j(this,Wo,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",m(yh,B1)[e]),s.addEventListener("input",()=>{m(this,fg).updateParams(t,s.value)},{signal:m(this,fg)._signal}),s}update(e){m(this,Wo)&&(m(this,Wo).value=e)}destroy(){var e;(e=m(this,Wo))==null||e.remove(),j(this,Wo,null)}hideDropdown(){}};Wo=new WeakMap,I1=new WeakMap,fg=new WeakMap,B1=new WeakMap,L(yh,B1,null);let MS=yh;function gO(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function oy(r){return Math.max(0,Math.min(255,255*r))}class yO{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=oy(e),[e,e,e]}static G_HTML([e]){const t=gO(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(oy)}static RGB_HTML(e){return`#${e.map(gO).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[oy(1-Math.min(1,e+s)),oy(1-Math.min(1,n+s)),oy(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,i=1-t,a=1-n,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class eV{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Cn("Abstract method `_createSVG` called.")}}class wx extends eV{_createSVG(e){return document.createElementNS(Ol,e)}}const tV=9,$f=new WeakSet,nV=new Date().getTimezoneOffset()*60*1e3;class xO{static create(e){switch(e.data.annotationType){case cr.LINK:return new HM(e);case cr.TEXT:return new sV(e);case cr.WIDGET:switch(e.data.fieldType){case"Tx":return new iV(e);case"Btn":return e.data.radioButton?new $I(e):e.data.checkBox?new oV(e):new lV(e);case"Ch":return new cV(e);case"Sig":return new aV(e)}return new ep(e);case cr.POPUP:return new n3(e);case cr.FREETEXT:return new YI(e);case cr.LINE:return new dV(e);case cr.SQUARE:return new hV(e);case cr.CIRCLE:return new fV(e);case cr.POLYLINE:return new XI(e);case cr.CARET:return new mV(e);case cr.INK:return new UM(e);case cr.POLYGON:return new pV(e);case cr.HIGHLIGHT:return new KI(e);case cr.UNDERLINE:return new gV(e);case cr.SQUIGGLY:return new yV(e);case cr.STRIKEOUT:return new xV(e);case cr.STAMP:return new JI(e);case cr.FILEATTACHMENT:return new bV(e);default:return new Gn(e)}}}var cf,pg,ka,F1,t3;const aj=class aj{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){L(this,F1);L(this,cf,null);L(this,pg,!1);L(this,ka,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return aj._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>a?(a=t[c+1],i=t[c+2]):t[c+1]===a&&(i=Math.max(i,t[c+2]));return[i,a]}if((n==null?void 0:n.length)>=1){for(const c of n)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>a?(a=c[d+1],i=c[d]):c[d+1]===a&&(i=Math.max(i,c[d]));if(i!==1/0)return[i,a]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-a)/s,e}get commentText(){var t,n,s;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${px}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${px}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=m(this,ka))==null?void 0:e.popup)||this.popup)==null||t.remove(),j(this,ka,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(m(this,cf)||j(this,cf,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&B(this,F1,t3).call(this,t);let s=((i=m(this,ka))==null?void 0:i.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=m(this,ka).popup),s&&(s.updateEdited(e),n!=null&&n.deleted&&(s.remove(),j(this,ka,null),this.popup=null))}resetEdited(){var e;m(this,cf)&&(B(this,F1,t3).call(this,m(this,cf).rect),(e=m(this,ka))==null||e.popup.resetEdited(),j(this,cf,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof ep)&&!(this instanceof HM)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof n3){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,i),i}const{width:o,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const N=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;a.borderRadius=N}else if(this instanceof $I){const N=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=N}switch(t.borderStyle.style){case Wp.SOLID:a.borderStyle="solid";break;case Wp.DASHED:a.borderStyle="dashed";break;case Wp.BEVELED:ot("Unimplemented border style: beveled");break;case Wp.INSET:ot("Unimplemented border style: inset");break;case Wp.UNDERLINE:a.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(j(this,pg,!0),a.borderColor=Le.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):a.borderWidth=0}const d=Le.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:g,pageX:y,pageY:b}=s.rawDims;a.left=`${100*(d[0]-y)/h}%`,a.top=`${100*(d[1]-b)/g}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*o/h}%`,a.height=`${100*c/g}%`):this.setRotation(v,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[n]=yO[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:yO[`${a}_rgb`](o)})};return ft(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||n[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,i]of Object.entries(t)){const a=n[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,i]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,C,N]=e.subarray(2,6);if(s===w&&i===E&&t===C&&n===N)return}const{style:a}=this.container;let o;if(m(this,pg)){const{borderColor:w,borderWidth:E}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-t,d=i-n,{svgFactory:h}=this,g=h.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=h.createElement("defs");g.append(y);const b=h.createElement("clipPath"),v=`clippath_${this.data.id}`;b.setAttribute("id",v),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let w=2,E=e.length;w<E;w+=8){const C=e[w],N=e[w+1],A=e[w+2],k=e[w+3],M=h.createElement("rect"),O=(A-t)/c,P=(i-N)/d,F=(C-A)/c,H=(N-k)/d;M.setAttribute("x",O),M.setAttribute("y",P),M.setAttribute("width",F),M.setAttribute("height",H),b.append(M),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${P}" width="${F}" height="${H}"/>`)}m(this,pg)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(g),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate);const i=j(this,ka,new n3({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(m(this,ka)||this.popup||this.data.popupRef)}get extraPopupElement(){return m(this,ka)}render(){Cn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const c=typeof o=="string"?o:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!$f.has(d)){ot(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:d})}return n}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&$f.has(s)&&n.push({id:a,exportValue:i,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};cf=new WeakMap,pg=new WeakMap,ka=new WeakMap,F1=new WeakSet,t3=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)};let Gn=aj;class rV extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Yi,uh,HI,UI;class HM extends Gn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});L(this,Yi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(B(this,Yi,HI).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(B(this,Yi,UI).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&B(this,Yi,uh).call(this),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),B(this,Yi,uh).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),B(this,Yi,uh).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),B(this,Yi,uh).call(this),!this._fieldObjects){ot('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var g;s==null||s();const{fields:i,refs:a,include:o}=n,c=[];if(i.length!==0||a.length!==0){const y=new Set(a);for(const b of i){const v=this._fieldObjects[b]||[];for(const{id:w}of v)y.add(w)}for(const b of Object.values(this._fieldObjects))for(const v of b)y.has(v.id)===o&&c.push(v)}else for(const y of Object.values(this._fieldObjects))c.push(...y);const d=this.annotationStorage,h=[];for(const y of c){const{id:b}=y;switch(h.push(b),y.type){case"text":{const w=y.defaultValue||"";d.setValue(b,{value:w});break}case"checkbox":case"radiobutton":{const w=y.defaultValue===y.exportValues;d.setValue(b,{value:w});break}case"combobox":case"listbox":{const w=y.defaultValue||"";d.setValue(b,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${b}"]`);if(v){if(!$f.has(v)){ot(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Yi=new WeakSet,uh=function(){this.container.setAttribute("data-internal-link","")},HI=function(t,n,s="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,i),!1},B(this,Yi,uh).call(this)},UI=function(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),B(this,Yi,uh).call(this)};class sV extends Gn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ep extends Gn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return es.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,i){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,n,s){var i,a,o;for(const[c,d]of n)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,s),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Le.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||tV,i=e.style;let a;const o=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(d/(UA*s))||1,g=d/h;a=Math.min(s,c(g/UA))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(d/UA))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=Le.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class iV extends ep{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[s]:n})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let d=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$f.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:y,timeStep:b}=this.data,v=!!y&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",E=>{e.setValue(t,{value:E.target.value}),this.setPropertyOnSiblings(n,"value",E.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",E=>{const C=this.data.defaultFieldValue??"";n.value=h.userValue=C,h.formattedValue=null});let w=E=>{const{formattedValue:C}=h;C!=null&&(E.target.value=C),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",C=>{var A;if(h.focused)return;const{target:N}=C;if(v&&(N.type=y,b&&(N.step=b)),h.userValue){const k=h.userValue;if(v)if(y==="time"){const M=new Date(k),O=[M.getHours(),M.getMinutes(),M.getSeconds()];N.value=O.map(P=>P.toString().padStart(2,"0")).join(":")}else N.value=new Date(k-nV).toISOString().split(y==="date"?"T":".",1)[0];else N.value=k}h.lastCommittedValue=N.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const N={value(A){h.userValue=A.detail.value??"",v||e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:k}=A.detail;h.formattedValue=k,k!=null&&A.target!==document.activeElement&&(A.target.value=k);const M={formattedValue:k};v&&(M.value=k),e.setValue(t,M)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var P;const{charLimit:k}=A.detail,{target:M}=A;if(k===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",k);let O=h.userValue;!O||O.length<=k||(O=O.slice(0,k),M.value=h.userValue=O,e.setValue(t,{value:O}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(N,C)}),n.addEventListener("keydown",C=>{var k;h.commitKey=1;let N=-1;if(C.key==="Escape"?N=0:C.key==="Enter"&&!this.data.multiLine?N=2:C.key==="Tab"&&(h.commitKey=3),N===-1)return;const{value:A}=C.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:N,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const E=w;w=null,n.addEventListener("blur",C=>{var k,M;if(!h.focused||!C.relatedTarget)return;(k=this.data.actions)!=null&&k.Blur||(h.focused=!1);const{target:N}=C;let{value:A}=N;if(v){if(A&&y==="time"){const O=A.split(":").map(P=>parseInt(P,10));A=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),N.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();N.type="text"}h.userValue=A,h.lastCommittedValue!==A&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),E(C)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",C=>{var H;h.lastCommittedValue=null;const{data:N,target:A}=C,{value:k,selectionStart:M,selectionEnd:O}=A;let P=M,F=O;switch(C.inputType){case"deleteWordBackward":{const ee=k.substring(0,M).match(/\w*[^\w]*$/);ee&&(P-=ee[0].length);break}case"deleteWordForward":{const ee=k.substring(M).match(/^[^\w]*\w*/);ee&&(F+=ee[0].length);break}case"deleteContentBackward":M===O&&(P-=1);break;case"deleteContentForward":M===O&&(F+=1);break}C.preventDefault(),(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,change:N||"",willCommit:!1,selStart:P,selEnd:F}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class aV extends ep{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class oV extends ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return $f.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const d of this._getElementsByName(o,n)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $I extends ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if($f.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const d of this._getElementsByName(o,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const c={value:d=>{const h=a===d.detail.value;for(const g of this._getElementsByName(d.target.name)){const y=h&&g.id===n;g.domElement&&(g.domElement.checked=y),e.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class lV extends HM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class cV extends ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");$f.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const g=this.data.defaultFieldValue;for(const y of s.options)y.selected=y.value===g});for(const h of this.data.options){const g=document.createElement("option");g.textContent=h.displayValue,g.value=h.exportValue,n.value.includes(h.exportValue)&&(g.setAttribute("selected",!0),i=!1),s.append(g)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const g=h?"value":"textContent",{options:y,multiple:b}=s;return b?Array.prototype.filter.call(y,v=>v.selected).map(v=>v[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let c=o(!1);const d=h=>{const g=h.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const g={value(y){a==null||a();const b=y.detail.value,v=new Set(Array.isArray(b)?b:[b]);for(const w of s.options)w.selected=v.has(w.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(y){s.multiple=!0},remove(y){const b=s.options,v=y.detail.remove;b[v].selected=!1,s.remove(v),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:o(!0),items:d(y)}),c=o(!1)},clear(y){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(y){const{index:b,displayValue:v,exportValue:w}=y.detail.insert,E=s.children[b],C=document.createElement("option");C.textContent=v,C.value=w,E?E.before(C):s.append(C),e.setValue(t,{value:o(!0),items:d(y)}),c=o(!1)},items(y){const{items:b}=y.detail;for(;s.length!==0;)s.remove(0);for(const v of b){const{displayValue:w,exportValue:E}=v,C=document.createElement("option");C.textContent=w,C.value=E,s.append(C)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:d(y)}),c=o(!1)},indices(y){const b=new Set(y.detail.indices);for(const v of y.target.options)v.selected=b.has(v.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,h)}),s.addEventListener("input",h=>{var b;const g=o(!0),y=o(!1);e.setValue(t,{value:g}),h.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var z1,r3;class n3 extends Gn{constructor(t){const{data:n,elements:s,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&Gn._hasPopupData(n)});L(this,z1);if(this.elements=s,a&&Gn._hasPopupData(n)){const o=this.popup=B(this,z1,r3).call(this);for(const c of s)c.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=B(this,z1,r3).call(this),s=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${OM}${i}`).join(",")),this.container}}z1=new WeakSet,r3=function(){return new uV({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Oi,td,qC,GC,mg,gg,tr,Yo,nd,uf,yg,xg,Xo,Ri,fc,pc,Gr,mc,rd,H1,gc,bg,df,sd,Ns,id,mt,Ww,s3,i3,a3,Yw,o3,VI,qI,GI,WI,Xw,Kw,l3;class uV{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:c,rect:d,parentRect:h,open:g,commentManager:y=null}){L(this,mt);L(this,Oi,null);L(this,td,B(this,mt,GI).bind(this));L(this,qC,B(this,mt,l3).bind(this));L(this,GC,B(this,mt,Kw).bind(this));L(this,mg,B(this,mt,Xw).bind(this));L(this,gg,null);L(this,tr,null);L(this,Yo,null);L(this,nd,null);L(this,uf,null);L(this,yg,null);L(this,xg,null);L(this,Xo,!1);L(this,Ri,null);L(this,fc,null);L(this,pc,null);L(this,Gr,null);L(this,mc,null);L(this,rd,null);L(this,H1,null);L(this,gc,null);L(this,bg,null);L(this,df,null);L(this,sd,!1);L(this,Ns,null);L(this,id,null);j(this,tr,e),j(this,bg,s),j(this,Yo,a),j(this,gc,o),j(this,yg,c),j(this,gg,t),j(this,H1,d),j(this,xg,h),j(this,uf,n),j(this,Oi,y),j(this,Ns,n[0]),j(this,nd,yx.toDateObject(i)),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),y?this.renderCommentButton():(B(this,mt,Ww).call(this),m(this,tr).hidden=!0,g&&B(this,mt,Xw).call(this))}renderCommentButton(){if(m(this,Gr)||(m(this,mc)||B(this,mt,s3).call(this),!m(this,mc)))return;const{signal:e}=j(this,fc,new AbortController),t=!!m(this,Ns).extraPopupElement,n=()=>{m(this,Oi).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{m(this,Oi).toggleCommentPopup(this,!1,!0,!t)},i=()=>{m(this,Oi).toggleCommentPopup(this,!1,!1)};if(t){j(this,Gr,m(this,Ns).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",m(this,td),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=j(this,Gr,document.createElement("button"));a.className="annotationCommentButton";const o=m(this,Ns).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),B(this,mt,a3).call(this),B(this,mt,i3).call(this),a.addEventListener("keydown",m(this,td),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=m(this,Ns).commentData;return e?m(this,yg)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=m(this,Gr))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:i}=m(this,Ns).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:i}}get elementBeforePopup(){return m(this,Gr)}get comment(){return m(this,id)||j(this,id,m(this,Ns).commentText),m(this,id)}set comment(e){e!==this.comment&&(m(this,Ns).commentText=j(this,id,e))}get parentBoundingClientRect(){return m(this,Ns).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){m(this,Gr)&&(m(this,Gr).classList.toggle("selected",e),m(this,Gr).ariaExpanded=t)}setSelectedCommentButton(e){m(this,Gr).classList.toggle("selected",e)}get commentPopupPosition(){if(m(this,rd))return m(this,rd);const{x:e,y:t,height:n}=m(this,Gr).getBoundingClientRect(),{x:s,y:i,width:a,height:o}=m(this,Ns).layer.getBoundingClientRect();return[(e-s)/a,(t+n-i)/o]}set commentPopupPosition(e){j(this,rd,e)}hasDefaultPopupPosition(){return m(this,rd)===null}get commentButtonPosition(){return m(this,mc)}get commentButtonWidth(){return m(this,Gr).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=m(this,rd)||this.commentButtonPosition.map(d=>d/100),s=this.parentBoundingClientRect,{x:i,y:a,width:o,height:c}=s;m(this,Oi).showDialog(null,this,i+t*o,a+n*c,{...e,parentDimensions:s})}render(){var n,s;if(m(this,Ri))return;const e=j(this,Ri,document.createElement("div"));if(e.className="popup",m(this,gg)){const i=e.style.outlineColor=Le.makeHexColor(...m(this,gg));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=m(this,bg))!=null&&n.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=m(this,bg)}if(e.append(t),m(this,nd)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,nd).valueOf()})),i.dateTime=m(this,nd).toISOString(),t.append(i)}LM({html:m(this,mt,Yw)||m(this,Yo).str,dir:(s=m(this,Yo))==null?void 0:s.dir,className:"popupContent"},e),m(this,tr).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var s;if(m(this,Oi)){n?(this.remove(),j(this,id,null)):t&&(t.deleted?this.remove():(B(this,mt,a3).call(this),j(this,id,t.text))),e&&(j(this,mc,null),B(this,mt,s3).call(this),B(this,mt,i3).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}B(this,mt,Ww).call(this),m(this,df)||j(this,df,{contentsObj:m(this,Yo),richText:m(this,gc)}),e&&j(this,pc,null),t&&t.text&&(j(this,gc,B(this,mt,qI).call(this,t.text)),j(this,nd,yx.toDateObject(t.date)),j(this,Yo,null)),(s=m(this,Ri))==null||s.remove(),j(this,Ri,null)}resetEdited(){var e;m(this,df)&&({contentsObj:_r(this,Yo)._,richText:_r(this,gc)._}=m(this,df),j(this,df,null),(e=m(this,Ri))==null||e.remove(),j(this,Ri,null),j(this,pc,null))}remove(){var e,t,n;if((e=m(this,fc))==null||e.abort(),j(this,fc,null),(t=m(this,Ri))==null||t.remove(),j(this,Ri,null),j(this,sd,!1),j(this,Xo,!1),(n=m(this,Gr))==null||n.remove(),j(this,Gr,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){j(this,sd,this.isVisible),m(this,sd)&&(m(this,tr).hidden=!0)}maybeShow(){m(this,Oi)||(B(this,mt,Ww).call(this),m(this,sd)&&(m(this,Ri)||B(this,mt,Kw).call(this),j(this,sd,!1),m(this,tr).hidden=!1))}get isVisible(){return m(this,Oi)?!1:m(this,tr).hidden===!1}}Oi=new WeakMap,td=new WeakMap,qC=new WeakMap,GC=new WeakMap,mg=new WeakMap,gg=new WeakMap,tr=new WeakMap,Yo=new WeakMap,nd=new WeakMap,uf=new WeakMap,yg=new WeakMap,xg=new WeakMap,Xo=new WeakMap,Ri=new WeakMap,fc=new WeakMap,pc=new WeakMap,Gr=new WeakMap,mc=new WeakMap,rd=new WeakMap,H1=new WeakMap,gc=new WeakMap,bg=new WeakMap,df=new WeakMap,sd=new WeakMap,Ns=new WeakMap,id=new WeakMap,mt=new WeakSet,Ww=function(){var t;if(m(this,fc))return;j(this,fc,new AbortController);const{signal:e}=m(this,fc);for(const n of this.trigger)n.addEventListener("click",m(this,mg),{signal:e}),n.addEventListener("pointerenter",m(this,GC),{signal:e}),n.addEventListener("pointerleave",m(this,qC),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,uf))(t=n.container)==null||t.addEventListener("keydown",m(this,td),{signal:e})},s3=function(){const e=m(this,uf).find(t=>t.hasCommentButton);e&&j(this,mc,e._normalizePoint(e.commentButtonPosition))},i3=function(){if(m(this,Ns).extraPopupElement&&!m(this,Ns).editor)return;this.renderCommentButton();const[e,t]=m(this,mc),{style:n}=m(this,Gr);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},a3=function(){m(this,Ns).extraPopupElement||(this.renderCommentButton(),m(this,Gr).style.backgroundColor=this.commentButtonColor||"")},Yw=function(){const e=m(this,gc),t=m(this,Yo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,gc).html||null},o3=function(){var e,t,n;return((n=(t=(e=m(this,mt,Yw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},VI=function(){var e,t,n;return((n=(t=(e=m(this,mt,Yw))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},qI=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:m(this,mt,VI),fontSize:m(this,mt,o3)?`calc(${m(this,mt,o3)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return n},GI=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,Xo))&&B(this,mt,Xw).call(this)},WI=function(){if(m(this,pc)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:i}}}=m(this,yg);let a=!!m(this,xg),o=a?m(this,xg):m(this,H1);for(const v of m(this,uf))if(!o||Le.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}const c=Le.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,g=c[0]+h,y=c[1];j(this,pc,[100*(g-s)/t,100*(y-i)/n]);const{style:b}=m(this,tr);b.left=`${m(this,pc)[0]}%`,b.top=`${m(this,pc)[1]}%`},Xw=function(){if(m(this,Oi)){m(this,Oi).toggleCommentPopup(this,!1);return}j(this,Xo,!m(this,Xo)),m(this,Xo)?(B(this,mt,Kw).call(this),m(this,tr).addEventListener("click",m(this,mg)),m(this,tr).addEventListener("keydown",m(this,td))):(B(this,mt,l3).call(this),m(this,tr).removeEventListener("click",m(this,mg)),m(this,tr).removeEventListener("keydown",m(this,td)))},Kw=function(){m(this,Ri)||this.render(),this.isVisible?m(this,Xo)&&m(this,tr).classList.add("focused"):(B(this,mt,WI).call(this),m(this,tr).hidden=!1,m(this,tr).style.zIndex=parseInt(m(this,tr).style.zIndex)+1e3)},l3=function(){m(this,tr).classList.remove("focused"),!(m(this,Xo)||!this.isVisible)&&(m(this,tr).hidden=!0,m(this,tr).style.zIndex=parseInt(m(this,tr).style.zIndex)-1e3)};class YI extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=at.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var U1;class dV extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,U1,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),a=j(this,U1,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,U1)}addHighlightArea(){this.container.classList.add("highlightArea")}}U1=new WeakMap;var $1;class hV extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,$1,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=j(this,$1,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,$1)}addHighlightArea(){this.container.classList.add("highlightArea")}}$1=new WeakMap;var V1;class fV extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,V1,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=j(this,V1,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",s/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,V1)}addHighlightArea(){this.container.classList.add("highlightArea")}}V1=new WeakMap;var q1;class XI extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,q1,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!n)return this.container;const c=this.svgFactory.create(a,o,!0);let d=[];for(let g=0,y=n.length;g<y;g+=2){const b=n[g]-t[0],v=t[3]-n[g+1];d.push(`${b},${v}`)}d=d.join(" ");const h=j(this,q1,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,q1)}addHighlightArea(){this.container.classList.add("highlightArea")}}q1=new WeakMap;class pV extends XI{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mV extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var G1,hf,W1,c3;class UM extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,W1);L(this,G1,null);L(this,hf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?at.HIGHLIGHT:at.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:c,height:d}=B(this,W1,c3).call(this,n,t),h=this.svgFactory.create(c,d,!0),g=j(this,G1,this.svgFactory.createElement("svg:g"));h.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",o);for(let y=0,b=s.length;y<b;y++){const v=this.svgFactory.createElement(this.svgElementName);m(this,hf).push(v),v.setAttribute("points",s[y].join(",")),g.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:i}=t,a=m(this,G1);if(n>=0&&a.setAttribute("stroke-width",n||1),s)for(let o=0,c=m(this,hf).length;o<c;o++)m(this,hf)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:d}=B(this,W1,c3).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return m(this,hf)}addHighlightArea(){this.container.classList.add("highlightArea")}}G1=new WeakMap,hf=new WeakMap,W1=new WeakSet,c3=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class KI extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=at.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class gV extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class yV extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class xV extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class JI extends Gn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=at.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Y1,X1,u3;class bV extends Gn{constructor(t){var s;super(t,{isRenderable:!0});L(this,X1);L(this,Y1,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",B(this,X1,u3).bind(this)),j(this,Y1,s);const{isMac:i}=es.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&B(this,X1,u3).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return m(this,Y1)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y1=new WeakMap,X1=new WeakSet,u3=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var vg,ff,wg,ad,K1,pf,Pd,d3,h3,Sg;let $M=(Sg=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o,commentManager:c,linkService:d,annotationStorage:h}){L(this,Pd);L(this,vg,null);L(this,ff,null);L(this,wg,null);L(this,ad,new Map);L(this,K1,null);L(this,pf,null);this.div=e,j(this,vg,t),j(this,ff,n),j(this,K1,o||null),j(this,pf,d||null),j(this,wg,h||new PM),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return m(this,ad).size>0}async render(e){var a,o,c;const{annotations:t}=e,n=this.div;_d(n,this.viewport);const s=new Map,i={data:null,layer:n,linkService:m(this,pf),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new wx,annotationStorage:m(this,wg),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===cr.POPUP;if(h){const b=s.get(d.id);if(!b)continue;i.elements=b}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;i.data=d;const g=xO.create(i);if(!g.isRenderable)continue;if(!h&&d.popupRef){const b=s.get(d.popupRef);b?b.push(g):s.set(d.popupRef,[g])}const y=g.render();d.hidden&&(y.style.visibility="hidden"),await B(this,Pd,d3).call(this,y,d.id,i.elements),(o=(a=g.extraPopupElement)==null?void 0:a.popup)==null||o.renderCommentButton(),g._isEditable&&(m(this,ad).set(g.data.id,g),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(g))}B(this,Pd,h3).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:m(this,pf),svgFactory:new wx,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Sg._defaultBorderStyle),t.data=n;const s=xO.create(t);if(!s.isRenderable)continue;const i=s.render();await B(this,Pd,d3).call(this,i,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,_d(t,{rotation:e.rotation}),B(this,Pd,h3).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,ad).values())}getEditableAnnotation(e){return m(this,ad).get(e)}addFakeAnnotation(e){var o;const{div:t}=this,{id:n,rotation:s}=e,i=new rV({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:m(this,pf),annotationStorage:m(this,wg)}),a=i.render();return t.append(a),(o=m(this,vg))==null||o.moveElementInDOM(t,a,a,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return ft(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Wp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},vg=new WeakMap,ff=new WeakMap,wg=new WeakMap,ad=new WeakMap,K1=new WeakMap,pf=new WeakMap,Pd=new WeakSet,d3=async function(e,t,n){var o,c;const s=e.firstChild||e,i=s.id=`${OM}${t}`,a=await((o=m(this,K1))==null?void 0:o.getAriaAttributes(i));if(a)for(const[d,h]of a)s.setAttribute(d,h);n?n.at(-1).container.after(e):(this.div.append(e),(c=m(this,vg))==null||c.moveElementInDOM(this.div,e,s,!1))},h3=function(){var t;if(!m(this,ff))return;const e=this.div;for(const[n,s]of m(this,ff)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=m(this,ad).get(n);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}m(this,ff).clear()},Sg);const nw=/\r\n?|\n/g;var Li,J1,mf,Pi,Tr,QI,ZI,e8,Jw,_c,Qw,Zw,t8,p3,n8;const Dn=class Dn extends kn{constructor(t){super({...t,name:"freeTextEditor"});L(this,Tr);L(this,Li,"");L(this,J1,`${this.id}-editor`);L(this,mf,null);L(this,Pi);le(this,"_colorPicker",null);this.color=t.color||Dn._defaultColor||kn._defaultLineColor,j(this,Pi,t.fontSize||Dn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Dn.prototype,n=a=>a.isEmpty(),s=jd.TRANSLATE_SMALL,i=jd.TRANSLATE_BIG;return ft(this,"_keyboardManager",new bb([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){kn.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case kt.FREETEXT_SIZE:Dn._defaultFontSize=n;break;case kt.FREETEXT_COLOR:Dn._defaultColor=n;break}}updateParams(t,n){switch(t){case kt.FREETEXT_SIZE:B(this,Tr,QI).call(this,n);break;case kt.FREETEXT_COLOR:B(this,Tr,ZI).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[kt.FREETEXT_SIZE,Dn._defaultFontSize],[kt.FREETEXT_COLOR,Dn._defaultColor||kn._defaultLineColor]]}get propertiesToUpdate(){return[[kt.FREETEXT_SIZE,m(this,Pi)],[kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new MS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return kt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Dn._internalPadding*t,-(Dn._internalPadding+m(this,Pi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),j(this,mf,new AbortController);const t=this._uiManager.combinedSignal(m(this,mf));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,J1)),this._isDraggable=!0,(t=m(this,mf))==null||t.abort(),j(this,mf,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,Li),n=j(this,Li,B(this,Tr,e8).call(this).trimEnd());if(t===n)return;const s=i=>{if(j(this,Li,i),!i){this.remove();return}B(this,Tr,Zw).call(this),this._uiManager.rebuild(this),B(this,Tr,Jw).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),B(this,Tr,Jw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Dn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,J1)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${m(this,Pi)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,g]=this.pageDimensions,[y,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(o[0]-y)/h,w=n+this.height-(o[1]-b)/g;break;case 90:v=t+(o[0]-y)/h,w=n-(o[1]-b)/g,[c,d]=[d,-c];break;case 180:v=t-this.width+(o[0]-y)/h,w=n-(o[1]-b)/g,[c,d]=[-c,-d];break;case 270:v=t+(o[0]-y-this.height*g)/h,w=n+(o[1]-b-this.width*h)/g,[c,d]=[-d,c];break}this.setAt(v*i,w*a,c,d)}else this._moveAfterPaste(t,n);B(this,Tr,Zw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,w,E;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=B(v=Dn,_c,p3).call(v,n.getData("text")||"").replaceAll(nw,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=o,h=[],g=[];if(c.nodeType===Node.TEXT_NODE){const C=c.parentElement;if(g.push(c.nodeValue.slice(d).replaceAll(nw,"")),C!==this.editorDiv){let N=h;for(const A of this.editorDiv.childNodes){if(A===C){N=g;continue}N.push(B(w=Dn,_c,Qw).call(w,A))}}h.push(c.nodeValue.slice(0,d).replaceAll(nw,""))}else if(c===this.editorDiv){let C=h,N=0;for(const A of this.editorDiv.childNodes)N++===d&&(C=g),C.push(B(E=Dn,_c,Qw).call(E,A))}j(this,Li,`${h.join(`
`)}${i}${g.join(`
`)}`),B(this,Tr,Zw).call(this);const y=new Range;let b=Math.sumPrecise(h.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const N=C.nodeValue.length;if(b<=N){y.setStart(C,b),y.setEnd(C,b);break}b-=N}a.removeAllRanges(),a.addRange(y)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Dn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){var o;let i=null;if(t instanceof YI){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:g,id:y,popupRef:b,richText:v,contentsObj:w,creationDate:E,modificationDate:C},textContent:N,textPosition:A,parent:{page:{pageNumber:k}}}=t;if(!N||N.length===0)return null;i=t={annotationType:at.FREETEXT,color:Array.from(d),fontSize:c,value:N.join(`
`),position:A,pageIndex:k-1,rect:h.slice(0),rotation:g,annotationElementId:y,id:y,deleted:!1,popupRef:b,comment:(w==null?void 0:w.str)||null,richText:v,creationDate:E,modificationDate:C}}const a=await super.deserialize(t,n,s);return j(a,Pi,t.fontSize),a.color=Le.makeHexColor(...t.color),j(a,Li,B(o=Dn,_c,p3).call(o,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=kn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:m(this,Pi),value:B(this,Tr,t8).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!B(this,Tr,n8).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${m(this,Pi)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const i of m(this,Li).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:m(this,Li)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Li=new WeakMap,J1=new WeakMap,mf=new WeakMap,Pi=new WeakMap,Tr=new WeakSet,QI=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-m(this,Pi))*this.parentScale),j(this,Pi,i),B(this,Tr,Jw).call(this)},s=m(this,Pi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ZI=function(t){const n=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},e8=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(B(s=Dn,_c,Qw).call(s,i)),n=i);return t.join(`
`)},Jw=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},_c=new WeakSet,Qw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(nw,"")},Zw=function(){if(this.editorDiv.replaceChildren(),!!m(this,Li))for(const t of m(this,Li).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},t8=function(){return m(this,Li).replaceAll(" "," ")},p3=function(t){return t.replaceAll(" "," ")},n8=function(t){const{value:n,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==a},L(Dn,_c),le(Dn,"_freeTextDefaultContent",""),le(Dn,"_internalPadding",0),le(Dn,"_defaultColor",null),le(Dn,"_defaultFontSize",10),le(Dn,"_type","freetext"),le(Dn,"_editorType",at.FREETEXT);let f3=Dn;class Re{toSVGPath(){Cn("Abstract method `toSVGPath` must be implemented.")}get box(){Cn("Abstract getter `box` must be implemented.")}serialize(e,t){Cn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*s,a[o+1]=n+e[o+1]*i;return a}static _rescaleAndSwap(e,t,n,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*s,a[o+1]=n+e[o]*i;return a}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=n+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,i){switch(i){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,i,a){return[(e+5*n)/6,(t+5*s)/6,(5*n+i)/6,(5*s+a)/6,(n+i)/2,(s+a)/2]}}le(Re,"PRECISION",1e-4);var Ii,io,Cg,Eg,Ko,vt,gf,yf,Q1,Z1,Tg,Ag,od,eb,WC,YC,Ir,Py,r8,s8,i8,a8,o8,l8;const $l=class $l{constructor({x:e,y:t},n,s,i,a,o=0){L(this,Ir);L(this,Ii);L(this,io,[]);L(this,Cg);L(this,Eg);L(this,Ko,[]);L(this,vt,new Float32Array(18));L(this,gf);L(this,yf);L(this,Q1);L(this,Z1);L(this,Tg);L(this,Ag);L(this,od,[]);j(this,Ii,n),j(this,Ag,i*s),j(this,Eg,a),m(this,vt).set([NaN,NaN,NaN,NaN,e,t],6),j(this,Cg,o),j(this,Z1,m($l,eb)*s),j(this,Q1,m($l,YC)*s),j(this,Tg,s),m(this,od).push(e,t)}isEmpty(){return isNaN(m(this,vt)[8])}add({x:e,y:t}){var H;j(this,gf,e),j(this,yf,t);const[n,s,i,a]=m(this,Ii);let[o,c,d,h]=m(this,vt).subarray(8,12);const g=e-d,y=t-h,b=Math.hypot(g,y);if(b<m(this,Q1))return!1;const v=b-m(this,Z1),w=v/b,E=w*g,C=w*y;let N=o,A=c;o=d,c=h,d+=E,h+=C,(H=m(this,od))==null||H.push(e,t);const k=-C/v,M=E/v,O=k*m(this,Ag),P=M*m(this,Ag);return m(this,vt).set(m(this,vt).subarray(2,8),0),m(this,vt).set([d+O,h+P],4),m(this,vt).set(m(this,vt).subarray(14,18),12),m(this,vt).set([d-O,h-P],16),isNaN(m(this,vt)[6])?(m(this,Ko).length===0&&(m(this,vt).set([o+O,c+P],2),m(this,Ko).push(NaN,NaN,NaN,NaN,(o+O-n)/i,(c+P-s)/a),m(this,vt).set([o-O,c-P],14),m(this,io).push(NaN,NaN,NaN,NaN,(o-O-n)/i,(c-P-s)/a)),m(this,vt).set([N,A,o,c,d,h],6),!this.isEmpty()):(m(this,vt).set([N,A,o,c,d,h],6),Math.abs(Math.atan2(A-c,N-o)-Math.atan2(C,E))<Math.PI/2?([o,c,d,h]=m(this,vt).subarray(2,6),m(this,Ko).push(NaN,NaN,NaN,NaN,((o+d)/2-n)/i,((c+h)/2-s)/a),[o,c,N,A]=m(this,vt).subarray(14,18),m(this,io).push(NaN,NaN,NaN,NaN,((N+o)/2-n)/i,((A+c)/2-s)/a),!0):([N,A,o,c,d,h]=m(this,vt).subarray(0,6),m(this,Ko).push(((N+5*o)/6-n)/i,((A+5*c)/6-s)/a,((5*o+d)/6-n)/i,((5*c+h)/6-s)/a,((o+d)/2-n)/i,((c+h)/2-s)/a),[d,h,o,c,N,A]=m(this,vt).subarray(12,18),m(this,io).push(((N+5*o)/6-n)/i,((A+5*c)/6-s)/a,((5*o+d)/6-n)/i,((5*c+h)/6-s)/a,((o+d)/2-n)/i,((c+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Ko),t=m(this,io);if(isNaN(m(this,vt)[6])&&!this.isEmpty())return B(this,Ir,r8).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);B(this,Ir,i8).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return B(this,Ir,s8).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,i,a){return new c8(e,t,n,s,i,a)}getOutlines(){var g;const e=m(this,Ko),t=m(this,io),n=m(this,vt),[s,i,a,o]=m(this,Ii),c=new Float32Array((((g=m(this,od))==null?void 0:g.length)??0)+2);for(let y=0,b=c.length-2;y<b;y+=2)c[y]=(m(this,od)[y]-s)/a,c[y+1]=(m(this,od)[y+1]-i)/o;if(c[c.length-2]=(m(this,gf)-s)/a,c[c.length-1]=(m(this,yf)-i)/o,isNaN(n[6])&&!this.isEmpty())return B(this,Ir,a8).call(this,c);const d=new Float32Array(m(this,Ko).length+24+m(this,io).length);let h=e.length;for(let y=0;y<h;y+=2){if(isNaN(e[y])){d[y]=d[y+1]=NaN;continue}d[y]=e[y],d[y+1]=e[y+1]}h=B(this,Ir,l8).call(this,d,h);for(let y=t.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(t[y+b])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[y+b],d[h+1]=t[y+b+1],h+=2}return B(this,Ir,o8).call(this,d,h),this.newFreeDrawOutline(d,c,m(this,Ii),m(this,Tg),m(this,Cg),m(this,Eg))}};Ii=new WeakMap,io=new WeakMap,Cg=new WeakMap,Eg=new WeakMap,Ko=new WeakMap,vt=new WeakMap,gf=new WeakMap,yf=new WeakMap,Q1=new WeakMap,Z1=new WeakMap,Tg=new WeakMap,Ag=new WeakMap,od=new WeakMap,eb=new WeakMap,WC=new WeakMap,YC=new WeakMap,Ir=new WeakSet,Py=function(){const e=m(this,vt).subarray(4,6),t=m(this,vt).subarray(16,18),[n,s,i,a]=m(this,Ii);return[(m(this,gf)+(e[0]-t[0])/2-n)/i,(m(this,yf)+(e[1]-t[1])/2-s)/a,(m(this,gf)+(t[0]-e[0])/2-n)/i,(m(this,yf)+(t[1]-e[1])/2-s)/a]},r8=function(){const[e,t,n,s]=m(this,Ii),[i,a,o,c]=B(this,Ir,Py).call(this);return`M${(m(this,vt)[2]-e)/n} ${(m(this,vt)[3]-t)/s} L${(m(this,vt)[4]-e)/n} ${(m(this,vt)[5]-t)/s} L${i} ${a} L${o} ${c} L${(m(this,vt)[16]-e)/n} ${(m(this,vt)[17]-t)/s} L${(m(this,vt)[14]-e)/n} ${(m(this,vt)[15]-t)/s} Z`},s8=function(e){const t=m(this,io);e.push(`L${t[4]} ${t[5]} Z`)},i8=function(e){const[t,n,s,i]=m(this,Ii),a=m(this,vt).subarray(4,6),o=m(this,vt).subarray(16,18),[c,d,h,g]=B(this,Ir,Py).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-n)/i} L${c} ${d} L${h} ${g} L${(o[0]-t)/s} ${(o[1]-n)/i}`)},a8=function(e){const t=m(this,vt),[n,s,i,a]=m(this,Ii),[o,c,d,h]=B(this,Ir,Py).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(g,e,m(this,Ii),m(this,Tg),m(this,Cg),m(this,Eg))},o8=function(e,t){const n=m(this,io);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},l8=function(e,t){const n=m(this,vt).subarray(4,6),s=m(this,vt).subarray(16,18),[i,a,o,c]=m(this,Ii),[d,h,g,y]=B(this,Ir,Py).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/o,(n[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/c],t),t+=24},L($l,eb,8),L($l,WC,2),L($l,YC,m($l,eb)+m($l,WC));let _S=$l;var Ng,xf,yc,tb,Bi,nb,dr,XC,u8;class c8 extends Re{constructor(t,n,s,i,a,o){super();L(this,XC);L(this,Ng);L(this,xf,new Float32Array(4));L(this,yc);L(this,tb);L(this,Bi);L(this,nb);L(this,dr);j(this,dr,t),j(this,Bi,n),j(this,Ng,s),j(this,nb,i),j(this,yc,a),j(this,tb,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],B(this,XC,u8).call(this,o);const[c,d,h,g]=m(this,xf);for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-c)/h,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=n.length;y<b;y+=2)n[y]=(n[y]-c)/h,n[y+1]=(n[y+1]-d)/g}toSVGPath(){const t=[`M${m(this,dr)[4]} ${m(this,dr)[5]}`];for(let n=6,s=m(this,dr).length;n<s;n+=6){if(isNaN(m(this,dr)[n])){t.push(`L${m(this,dr)[n+4]} ${m(this,dr)[n+5]}`);continue}t.push(`C${m(this,dr)[n]} ${m(this,dr)[n+1]} ${m(this,dr)[n+2]} ${m(this,dr)[n+3]} ${m(this,dr)[n+4]} ${m(this,dr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,i],a){const o=s-t,c=i-n;let d,h;switch(a){case 0:d=Re._rescale(m(this,dr),t,i,o,-c),h=Re._rescale(m(this,Bi),t,i,o,-c);break;case 90:d=Re._rescaleAndSwap(m(this,dr),t,n,o,c),h=Re._rescaleAndSwap(m(this,Bi),t,n,o,c);break;case 180:d=Re._rescale(m(this,dr),s,n,-o,c),h=Re._rescale(m(this,Bi),s,n,-o,c);break;case 270:d=Re._rescaleAndSwap(m(this,dr),s,i,-o,-c),h=Re._rescaleAndSwap(m(this,Bi),s,i,-o,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return m(this,xf)}newOutliner(t,n,s,i,a,o=0){return new _S(t,n,s,i,a,o)}getNewOutline(t,n){const[s,i,a,o]=m(this,xf),[c,d,h,g]=m(this,Ng),y=a*h,b=o*g,v=s*h+c,w=i*g+d,E=this.newOutliner({x:m(this,Bi)[0]*y+v,y:m(this,Bi)[1]*b+w},m(this,Ng),m(this,nb),t,m(this,tb),n??m(this,yc));for(let C=2;C<m(this,Bi).length;C+=2)E.add({x:m(this,Bi)[C]*y+v,y:m(this,Bi)[C+1]*b+w});return E.getOutlines()}}Ng=new WeakMap,xf=new WeakMap,yc=new WeakMap,tb=new WeakMap,Bi=new WeakMap,nb=new WeakMap,dr=new WeakMap,XC=new WeakSet,u8=function(t){const n=m(this,dr);let s=n[4],i=n[5];const a=[s,i,s,i];let o=s,c=i,d=s,h=i;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let v=6,w=n.length;v<w;v+=6){const E=n[v+4],C=n[v+5];isNaN(n[v])?(Le.pointBoundingBox(E,C,a),c>C?(o=E,c=C):c===C&&(o=g(o,E)),h<C?(d=E,h=C):h===C&&(d=g(d,E))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,Le.bezierBoundingBox(s,i,...n.slice(v,v+6),y),Le.rectBoundingBox(y[0],y[1],y[2],y[3],a),c>y[1]?(o=y[0],c=y[1]):c===y[1]&&(o=g(o,y[0])),h<y[3]?(d=y[2],h=y[3]):h===y[3]&&(d=g(d,y[2]))),s=E,i=C}const b=m(this,xf);b[0]=a[0]-m(this,yc),b[1]=a[1]-m(this,yc),b[2]=a[2]-a[0]+2*m(this,yc),b[3]=a[3]-a[1]+2*m(this,yc),this.firstPoint=[o,c],this.lastPoint=[d,h]};var rb,sb,ib,ld,ao,Gs,d8,eS,h8,f8,g3;class m3{constructor(e,t=0,n=0,s=!0){L(this,Gs);L(this,rb);L(this,sb);L(this,ib);L(this,ld,[]);L(this,ao,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:E,width:C,height:N}of e){const A=Math.floor((w-t)/a)*a,k=Math.ceil((w+C+t)/a)*a,M=Math.floor((E-t)/a)*a,O=Math.ceil((E+N+t)/a)*a,P=[A,M,O,!0],F=[k,M,O,!1];m(this,ld).push(P,F),Le.rectBoundingBox(A,M,k,O,i)}const o=i[2]-i[0]+2*n,c=i[3]-i[1]+2*n,d=i[0]-n,h=i[1]-n;let g=s?-1/0:1/0,y=1/0;const b=m(this,ld).at(s?-1:-2),v=[b[0],b[2]];for(const w of m(this,ld)){const[E,C,N,A]=w;!A&&s?C<y?(y=C,g=E):C===y&&(g=Math.max(g,E)):A&&!s&&(C<y?(y=C,g=E):C===y&&(g=Math.min(g,E))),w[0]=(E-d)/o,w[1]=(C-h)/c,w[2]=(N-h)/c}j(this,rb,new Float32Array([d,h,o,c])),j(this,sb,[g,y]),j(this,ib,v)}getOutlines(){m(this,ld).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,ld))t[3]?(e.push(...B(this,Gs,g3).call(this,t)),B(this,Gs,h8).call(this,t)):(B(this,Gs,f8).call(this,t),e.push(...B(this,Gs,g3).call(this,t)));return B(this,Gs,d8).call(this,e)}}rb=new WeakMap,sb=new WeakMap,ib=new WeakMap,ld=new WeakMap,ao=new WeakMap,Gs=new WeakSet,d8=function(e){const t=[],n=new Set;for(const a of e){const[o,c,d]=a;t.push([o,c,a],[o,d,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),n.add(c),n.add(d)}const s=[];let i;for(;n.size>0;){const a=n.values().next().value;let[o,c,d,h,g]=a;n.delete(a);let y=o,b=c;for(i=[o,d],s.push(i);;){let v;if(n.has(h))v=h;else if(n.has(g))v=g;else break;n.delete(v),[o,c,d,h,g]=v,y!==o&&(i.push(y,b,o,b===c?c:d),y=o),b=b===c?d:c}i.push(y,b)}return new vV(s,m(this,rb),m(this,sb),m(this,ib))},eS=function(e){const t=m(this,ao);let n=0,s=t.length-1;for(;n<=s;){const i=n+s>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:s=i-1}return s+1},h8=function([,e,t]){const n=B(this,Gs,eS).call(this,e);m(this,ao).splice(n,0,[e,t])},f8=function([,e,t]){const n=B(this,Gs,eS).call(this,e);for(let s=n;s<m(this,ao).length;s++){const[i,a]=m(this,ao)[s];if(i!==e)break;if(i===e&&a===t){m(this,ao).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[i,a]=m(this,ao)[s];if(i!==e)break;if(i===e&&a===t){m(this,ao).splice(s,1);return}}},g3=function(e){const[t,n,s]=e,i=[[t,n,s]],a=B(this,Gs,eS).call(this,s);for(let o=0;o<a;o++){const[c,d]=m(this,ao)[o];for(let h=0,g=i.length;h<g;h++){const[,y,b]=i[h];if(!(d<=y||b<=c)){if(y>=c){if(b>d)i[h][1]=d;else{if(g===1)return[];i.splice(h,1),h--,g--}continue}i[h][2]=c,b>d&&i.push([t,d,b])}}}return i};var ab,kg;class vV extends Re{constructor(t,n,s,i){super();L(this,ab);L(this,kg);j(this,kg,t),j(this,ab,n),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const n of m(this,kg)){let[s,i]=n;t.push(`M${s} ${i}`);for(let a=2;a<n.length;a+=2){const o=n[a],c=n[a+1];o===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,n,s,i],a){const o=[],c=s-t,d=i-n;for(const h of m(this,kg)){const g=new Array(h.length);for(let y=0;y<h.length;y+=2)g[y]=t+h[y]*c,g[y+1]=i-h[y+1]*d;o.push(g)}return o}get box(){return m(this,ab)}get classNamesForOutlining(){return["highlightOutline"]}}ab=new WeakMap,kg=new WeakMap;class y3 extends _S{newFreeDrawOutline(e,t,n,s,i,a){return new wV(e,t,n,s,i,a)}}class wV extends c8{newOutliner(e,t,n,s,i,a=0){return new y3(e,t,n,s,i,a)}}var Mg,ob,xc,bf,lb,di,cb,ub,vf,Fi,zi,hs,_g,jg,ks,Dg,Ma,db,pt,x3,tS,p8,m8,g8,b3,dh,Ra,Zp,y8,nS,rS,x8,b8,v8,w8,S8;const $t=class $t extends kn{constructor(t){super({...t,name:"highlightEditor"});L(this,pt);L(this,Mg,null);L(this,ob,0);L(this,xc);L(this,bf,null);L(this,lb,null);L(this,di,null);L(this,cb,null);L(this,ub,0);L(this,vf,null);L(this,Fi,null);L(this,zi,null);L(this,hs,!1);L(this,_g,null);L(this,jg,null);L(this,ks,null);L(this,Dg,"");L(this,Ma);L(this,db,"");this.color=t.color||$t._defaultColor,j(this,Ma,t.thickness||$t._defaultThickness),this.opacity=t.opacity||$t._defaultOpacity,j(this,xc,t.boxes||null),j(this,db,t.methodOfCreation||""),j(this,Dg,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(j(this,hs,!0),B(this,pt,tS).call(this,t),B(this,pt,dh).call(this)):m(this,xc)&&(j(this,Mg,t.anchorNode),j(this,ob,t.anchorOffset),j(this,cb,t.focusNode),j(this,ub,t.focusOffset),B(this,pt,x3).call(this),B(this,pt,dh).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=$t.prototype;return ft(this,"_keyboardManager",new bb([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,hs)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,Ma),methodOfCreation:m(this,db)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;kn.initialize(t,n),$t._defaultColor||($t._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case kt.HIGHLIGHT_COLOR:$t._defaultColor=n;break;case kt.HIGHLIGHT_THICKNESS:$t._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,jg)}get commentButtonPosition(){return m(this,_g)}updateParams(t,n){switch(t){case kt.HIGHLIGHT_COLOR:B(this,pt,p8).call(this,n);break;case kt.HIGHLIGHT_THICKNESS:B(this,pt,m8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,$t._defaultColor],[kt.HIGHLIGHT_THICKNESS,$t._defaultThickness]]}get propertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,this.color||$t._defaultColor],[kt.HIGHLIGHT_THICKNESS,m(this,Ma)||$t._defaultThickness],[kt.HIGHLIGHT_FREE,m(this,hs)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(m(this,zi),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=m(this,lb))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",j(this,lb,new vx({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(B(this,pt,rS).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,B(this,pt,rS).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){B(this,pt,b3).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(B(this,pt,dh).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?B(this,pt,b3).call(this):t&&(B(this,pt,dh).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,o;const{drawLayer:n}=this.parent;let s;m(this,hs)?(t=(t-this.rotation+360)%360,s=B(i=$t,Ra,Zp).call(i,m(this,Fi).box,t)):s=B(a=$t,Ra,Zp).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,zi),{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(m(this,ks),{bbox:B(o=$t,Ra,Zp).call(o,m(this,di).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,Dg)&&(t.setAttribute("aria-label",m(this,Dg)),t.setAttribute("role","mark")),m(this,hs)?t.classList.add("free"):this.div.addEventListener("keydown",B(this,pt,y8).bind(this),{signal:this._uiManager._signal});const n=j(this,vf,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,bf),this.setDims(this.width,this.height),UP(this,m(this,vf),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,ks),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,ks),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:B(this,pt,nS).call(this,!0);break;case 1:case 3:B(this,pt,nS).call(this,!1);break}}select(){var t;super.select(),m(this,ks)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,ks),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,ks)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,ks),{rootClass:{selected:!1}}),m(this,hs)||B(this,pt,nS).call(this,!1))}get _mustFixPosition(){return!m(this,hs)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,zi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,ks),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:s,x:i,y:a}){const{x:o,y:c,width:d,height:h}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=v=>{g.abort(),B(this,Ra,w8).call(this,t,v)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",$n,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Qi,{signal:y}),s.addEventListener("pointermove",B(this,Ra,v8).bind(this,t),{signal:y}),this._freeHighlight=new y3({x:i,y:a},[o,c,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,s){var w,E,C,N;let i=null;if(t instanceof KI){const{data:{quadPoints:A,rect:k,rotation:M,id:O,color:P,opacity:F,popupRef:H,richText:ee,contentsObj:G,creationDate:J,modificationDate:V},parent:{page:{pageNumber:X}}}=t;i=t={annotationType:at.HIGHLIGHT,color:Array.from(P),opacity:F,quadPoints:A,boxes:null,pageIndex:X-1,rect:k.slice(0),rotation:M,annotationElementId:O,id:O,deleted:!1,popupRef:H,richText:ee,comment:(G==null?void 0:G.str)||null,creationDate:J,modificationDate:V}}else if(t instanceof UM){const{data:{inkLists:A,rect:k,rotation:M,id:O,color:P,borderStyle:{rawWidth:F},popupRef:H,richText:ee,contentsObj:G,creationDate:J,modificationDate:V},parent:{page:{pageNumber:X}}}=t;i=t={annotationType:at.HIGHLIGHT,color:Array.from(P),thickness:F,inkLists:A,boxes:null,pageIndex:X-1,rect:k.slice(0),rotation:M,annotationElementId:O,id:O,deleted:!1,popupRef:H,richText:ee,comment:(G==null?void 0:G.str)||null,creationDate:J,modificationDate:V}}const{color:a,quadPoints:o,inkLists:c,opacity:d}=t,h=await super.deserialize(t,n,s);h.color=Le.makeHexColor(...a),h.opacity=d||1,c&&j(h,Ma,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[g,y]=h.pageDimensions,[b,v]=h.pageTranslation;if(o){const A=j(h,xc,[]);for(let k=0;k<o.length;k+=8)A.push({x:(o[k]-b)/g,y:1-(o[k+1]-v)/y,width:(o[k+2]-o[k])/g,height:(o[k+1]-o[k+5])/y});B(w=h,pt,x3).call(w),B(E=h,pt,dh).call(E),h.rotate(h.rotation)}else if(c){j(h,hs,!0);const A=c[0],k={x:A[0]-b,y:y-(A[1]-v)},M=new y3(k,[0,0,g,y],1,m(h,Ma)/2,!0,.001);for(let F=0,H=A.length;F<H;F+=2)k.x=A[F]-b,k.y=y-(A[F+1]-v),M.add(k);const{id:O,clipPathId:P}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:M.toSVGPath()}},!0,!0);B(C=h,pt,tS).call(C,{highlightOutlines:M.getOutlines(),highlightId:O,clipPathId:P}),B(N=h,pt,dh).call(N),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=kn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:m(this,Ma),quadPoints:B(this,pt,x8).call(this),outlines:B(this,pt,b8).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!B(this,pt,S8).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Mg=new WeakMap,ob=new WeakMap,xc=new WeakMap,bf=new WeakMap,lb=new WeakMap,di=new WeakMap,cb=new WeakMap,ub=new WeakMap,vf=new WeakMap,Fi=new WeakMap,zi=new WeakMap,hs=new WeakMap,_g=new WeakMap,jg=new WeakMap,ks=new WeakMap,Dg=new WeakMap,Ma=new WeakMap,db=new WeakMap,pt=new WeakSet,x3=function(){const t=new m3(m(this,xc),.001);j(this,Fi,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,Fi).box;const n=new m3(m(this,xc),.0025,.001,this._uiManager.direction==="ltr");j(this,di,n.getOutlines());const{firstPoint:s}=m(this,Fi);j(this,_g,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=m(this,di);j(this,jg,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},tS=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var y,b;if(j(this,Fi,t),j(this,di,t.getNewOutline(m(this,Ma)/2+1.5,.0025)),n>=0)j(this,zi,n),j(this,bf,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),j(this,ks,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,di).box,path:{d:m(this,di).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,zi),{bbox:B(y=$t,Ra,Zp).call(y,m(this,Fi).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,ks),{bbox:B(b=$t,Ra,Zp).call(b,m(this,di).box,v),path:{d:m(this,di).toSVGPath()}})}const[a,o,c,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=d;break;case 90:{const[v,w]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*w/v,this.height=d*v/w;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=d;break;case 270:{const[v,w]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*w/v,this.height=d*v/w;break}}const{firstPoint:h}=t;j(this,_g,[(h[0]-a)/c,(h[1]-o)/d]);const{lastPoint:g}=m(this,di);j(this,jg,[(g[0]-a)/c,(g[1]-o)/d])},p8=function(t){const n=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,t,$t._defaultOpacity),undo:n.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},m8=function(t){const n=m(this,Ma),s=i=>{j(this,Ma,i),B(this,pt,g8).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},g8=function(t){m(this,hs)&&(B(this,pt,tS).call(this,{highlightOutlines:m(this,Fi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},b3=function(){m(this,zi)===null||!this.parent||(this.parent.drawLayer.remove(m(this,zi)),j(this,zi,null),this.parent.drawLayer.remove(m(this,ks)),j(this,ks,null))},dh=function(t=this.parent){m(this,zi)===null&&({id:_r(this,zi)._,clipPathId:_r(this,bf)._}=t.drawLayer.draw({bbox:m(this,Fi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:m(this,hs)},path:{d:m(this,Fi).toSVGPath()}},!1,!0),j(this,ks,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,hs)},bbox:m(this,di).box,path:{d:m(this,di).toSVGPath()}},m(this,hs))),m(this,vf)&&(m(this,vf).style.clipPath=m(this,bf)))},Ra=new WeakSet,Zp=function([t,n,s,i],a){switch(a){case 90:return[1-n-i,t,i,s];case 180:return[1-t-s,1-n-i,s,i];case 270:return[n,1-t-s,i,s]}return[t,n,s,i]},y8=function(t){$t._keyboardManager.exec(this,t)},nS=function(t){if(!m(this,Mg))return;const n=window.getSelection();t?n.setPosition(m(this,Mg),m(this,ob)):n.setPosition(m(this,cb),m(this,ub))},rS=function(){return m(this,hs)?this.rotation:0},x8=function(){if(m(this,hs))return null;const[t,n]=this.pageDimensions,[s,i]=this.pageTranslation,a=m(this,xc),o=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:g,height:y}of a){const b=d*t+s,v=(1-h)*n+i;o[c]=o[c+4]=b,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=b+g*t,o[c+5]=o[c+7]=v-y*n,c+=8}return o},b8=function(t){return m(this,Fi).serialize(t,B(this,pt,rS).call(this))},v8=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},w8=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},S8=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==n[i])},L($t,Ra),le($t,"_defaultColor",null),le($t,"_defaultOpacity",1),le($t,"_defaultThickness",12),le($t,"_type","highlight"),le($t,"_editorType",at.HIGHLIGHT),le($t,"_freeHighlightId",-1),le($t,"_freeHighlight",null),le($t,"_freeHighlightClipId","");let jS=$t;var wf;class C8{constructor(){L(this,wf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,wf)[e]=t}toSVGProperties(){const e=m(this,wf);return j(this,wf,Object.create(null)),{root:e}}reset(){j(this,wf,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Cn("Not implemented")}}wf=new WeakMap;var Hi,Og,Wr,Sf,Cf,cd,ud,dd,Ef,Rt,v3,w3,S3,Iy,E8,sS,By,em;const Ie=class Ie extends kn{constructor(t){super(t);L(this,Rt);L(this,Hi,null);L(this,Og);le(this,"_colorPicker",null);le(this,"_drawId",null);j(this,Og,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(B(this,Rt,v3).call(this,t),B(this,Rt,Iy).call(this))}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(n))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Cn("Not implemented")}static get typesMap(){Cn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(m(Ie,Wr).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,n[i]]);return t}_updateProperty(t,n,s){const i=this._drawingOptions,a=i[n],o=c=>{var h;i.updateProperty(n,c);const d=m(this,Hi).updateProperty(n,c);d&&B(this,Rt,By).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(m(this,Hi).getPathResizingSVGProperties(B(this,Rt,sS).call(this)),{bbox:B(this,Rt,em).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(m(this,Hi).getPathResizedSVGProperties(B(this,Rt,sS).call(this)),{bbox:B(this,Rt,em).call(this)}))}_onTranslating(t,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:B(this,Rt,em).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(m(this,Hi).getPathTranslatedSVGProperties(B(this,Rt,sS).call(this),this.parentDimensions),{bbox:B(this,Rt,em).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,Og)&&(j(this,Og,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){B(this,Rt,S3).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(B(this,Rt,Iy).call(this),B(this,Rt,By).call(this,m(this,Hi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),B(this,Rt,S3).call(this)):t&&(this._uiManager.addShouldRescale(this),B(this,Rt,Iy).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties({bbox:B(this,Rt,em).call(this)},m(this,Hi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&B(this,Rt,By).call(this,m(this,Hi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,i,a){Cn("Not implemented")}static startDrawing(t,n,s,i){var E;const{target:a,offsetX:o,offsetY:c,pointerId:d,pointerType:h}=i;if(m(Ie,ud)&&m(Ie,ud)!==h)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=a.getBoundingClientRect(),v=j(Ie,Sf,new AbortController),w=t.combinedSignal(v);if(m(Ie,cd)||j(Ie,cd,d),m(Ie,ud)??j(Ie,ud,h),window.addEventListener("pointerup",C=>{var N;m(Ie,cd)===C.pointerId?this._endDraw(C):(N=m(Ie,dd))==null||N.delete(C.pointerId)},{signal:w}),window.addEventListener("pointercancel",C=>{var N;m(Ie,cd)===C.pointerId?this._currentParent.endDrawingSession():(N=m(Ie,dd))==null||N.delete(C.pointerId)},{signal:w}),window.addEventListener("pointerdown",C=>{m(Ie,ud)===C.pointerType&&((m(Ie,dd)||j(Ie,dd,new Set)).add(C.pointerId),m(Ie,Wr).isCancellable()&&(m(Ie,Wr).removeLastElement(),m(Ie,Wr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Qi,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",C=>{C.timeStamp===m(Ie,Ef)&&$n(C)},{signal:w}),t.toggleDrawing(),(E=n._editorUndoBar)==null||E.hide(),m(Ie,Wr)){t.drawLayer.updateProperties(this._currentDrawId,m(Ie,Wr).startNew(o,c,y,b,g));return}n.updateUIForDefaultProperties(this),j(Ie,Wr,this.createDrawerInstance(o,c,y,b,g)),j(Ie,Cf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(Ie,Cf).toSVGProperties(),m(Ie,Wr).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(j(Ie,Ef,-1),!m(Ie,Wr))return;const{offsetX:n,offsetY:s,pointerId:i}=t;if(m(Ie,cd)===i){if(((a=m(Ie,dd))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(Ie,Wr).add(n,s)),j(Ie,Ef,t.timeStamp),$n(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,j(Ie,Wr,null),j(Ie,Cf,null),j(Ie,ud,null),j(Ie,Ef,NaN)),m(Ie,Sf)&&(m(Ie,Sf).abort(),j(Ie,Sf,null),j(Ie,cd,NaN),j(Ie,dd,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(Ie,Wr).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=m(Ie,Wr),i=this._currentDrawId,a=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(kt.DRAW_STEP),!m(Ie,Wr).isEmpty()){const{pageDimensions:[s,i],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(Ie,Wr).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:m(Ie,Cf),mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,i,a,o){Cn("Not implemented")}static async deserialize(t,n,s){var g,y;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=n.viewport,d=this.deserializeDraw(o,c,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,n,s);return h.createDrawingOptions(t),B(g=h,Rt,v3).call(g,{drawOutlines:d}),B(y=h,Rt,Iy).call(y),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,s]=this.pageTranslation,[i,a]=this.pageDimensions;return m(this,Hi).serialize([n,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Hi=new WeakMap,Og=new WeakMap,Wr=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,cd=new WeakMap,ud=new WeakMap,dd=new WeakMap,Ef=new WeakMap,Rt=new WeakSet,v3=function({drawOutlines:t,drawId:n,drawingOptions:s}){j(this,Hi,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=B(this,Rt,w3).call(this,t,this.parent),B(this,Rt,By).call(this,t.box)},w3=function(t,n){const{id:s}=n.drawLayer.draw(Ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},S3=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Iy=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=B(this,Rt,w3).call(this,m(this,Hi),t)}},E8=function([t,n,s,i]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[n,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-n,s,i];case 270:return[1-n,t,s*(o/a),i*(a/o)];default:return[t,n,s,i]}},sS=function(){const{x:t,y:n,width:s,height:i,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-n,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-n,s,i];case 270:return[n,1-t,s*(a/o),i*(o/a)];default:return[t,n,s,i]}},By=function(t){[this.x,this.y,this.width,this.height]=B(this,Rt,E8).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},em=function(){const{x:t,y:n,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[c,d]}=this;switch((a*4+o)/90){case 1:return[1-n-i,t,i,s];case 2:return[1-t-s,1-n-i,s,i];case 3:return[n,1-t-s,i,s];case 4:return[t,n-s*(c/d),i*(d/c),s*(c/d)];case 5:return[1-n,t,s*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-n,i*(d/c),s*(c/d)];case 7:return[n-s*(c/d),1-t-i*(d/c),s*(c/d),i*(d/c)];case 8:return[t-s,n-i,s,i];case 9:return[1-n,t-s,i,s];case 10:return[1-t,1-n,s,i];case 11:return[n-i,1-t,i,s];case 12:return[t-i*(d/c),n,i*(d/c),s*(c/d)];case 13:return[1-n-s*(c/d),t-i*(d/c),s*(c/d),i*(d/c)];case 14:return[1-t,1-n-s*(c/d),i*(d/c),s*(c/d)];case 15:return[n,1-t,s*(c/d),i*(d/c)];default:return[t,n,s,i]}},le(Ie,"_currentDrawId",-1),le(Ie,"_currentParent",null),L(Ie,Wr,null),L(Ie,Sf,null),L(Ie,Cf,null),L(Ie,cd,NaN),L(Ie,ud,null),L(Ie,dd,null),L(Ie,Ef,NaN),le(Ie,"_INNER_MARGIN",3);let DS=Ie;var Jo,Yr,Xr,Tf,Rg,Fs,fs,_a,Af,Nf,kf,Lg,iS;class SV{constructor(e,t,n,s,i,a){L(this,Lg);L(this,Jo,new Float64Array(6));L(this,Yr);L(this,Xr);L(this,Tf);L(this,Rg);L(this,Fs);L(this,fs,"");L(this,_a,0);L(this,Af,new wb);L(this,Nf);L(this,kf);j(this,Nf,n),j(this,kf,s),j(this,Tf,i),j(this,Rg,a),[e,t]=B(this,Lg,iS).call(this,e,t);const o=j(this,Yr,[NaN,NaN,NaN,NaN,e,t]);j(this,Fs,[e,t]),j(this,Xr,[{line:o,points:m(this,Fs)}]),m(this,Jo).set(o,0)}updateProperty(e,t){e==="stroke-width"&&j(this,Rg,t)}isEmpty(){return!m(this,Xr)||m(this,Xr).length===0}isCancellable(){return m(this,Fs).length<=10}add(e,t){[e,t]=B(this,Lg,iS).call(this,e,t);const[n,s,i,a]=m(this,Jo).subarray(2,6),o=e-i,c=t-a;return Math.hypot(m(this,Nf)*o,m(this,kf)*c)<=2?null:(m(this,Fs).push(e,t),isNaN(n)?(m(this,Jo).set([i,a,e,t],2),m(this,Yr).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Jo)[0])&&m(this,Yr).splice(6,6),m(this,Jo).set([n,s,i,a,e,t],0),m(this,Yr).push(...Re.createBezierPoints(n,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,Fs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,i){j(this,Nf,n),j(this,kf,s),j(this,Tf,i),[e,t]=B(this,Lg,iS).call(this,e,t);const a=j(this,Yr,[NaN,NaN,NaN,NaN,e,t]);j(this,Fs,[e,t]);const o=m(this,Xr).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),m(this,Xr).push({line:a,points:m(this,Fs)}),m(this,Jo).set(a,0),j(this,_a,0),this.toSVGPath(),null}getLastElement(){return m(this,Xr).at(-1)}setLastElement(e){return m(this,Xr)?(m(this,Xr).push(e),j(this,Yr,e.line),j(this,Fs,e.points),j(this,_a,0),{path:{d:this.toSVGPath()}}):m(this,Af).setLastElement(e)}removeLastElement(){if(!m(this,Xr))return m(this,Af).removeLastElement();m(this,Xr).pop(),j(this,fs,"");for(let e=0,t=m(this,Xr).length;e<t;e++){const{line:n,points:s}=m(this,Xr)[e];j(this,Yr,n),j(this,Fs,s),j(this,_a,0),this.toSVGPath()}return{path:{d:m(this,fs)}}}toSVGPath(){const e=Re.svgRound(m(this,Yr)[4]),t=Re.svgRound(m(this,Yr)[5]);if(m(this,Fs).length===2)return j(this,fs,`${m(this,fs)} M ${e} ${t} Z`),m(this,fs);if(m(this,Fs).length<=6){const s=m(this,fs).lastIndexOf("M");j(this,fs,`${m(this,fs).slice(0,s)} M ${e} ${t}`),j(this,_a,6)}if(m(this,Fs).length===4){const s=Re.svgRound(m(this,Yr)[10]),i=Re.svgRound(m(this,Yr)[11]);return j(this,fs,`${m(this,fs)} L ${s} ${i}`),j(this,_a,12),m(this,fs)}const n=[];m(this,_a)===0&&(n.push(`M ${e} ${t}`),j(this,_a,6));for(let s=m(this,_a),i=m(this,Yr).length;s<i;s+=6){const[a,o,c,d,h,g]=m(this,Yr).slice(s,s+6).map(Re.svgRound);n.push(`C${a} ${o} ${c} ${d} ${h} ${g}`)}return j(this,fs,m(this,fs)+n.join(" ")),j(this,_a,m(this,Yr).length),m(this,fs)}getOutlines(e,t,n,s){const i=m(this,Xr).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),m(this,Af).build(m(this,Xr),e,t,n,m(this,Tf),m(this,Rg),s),j(this,Jo,null),j(this,Yr,null),j(this,Xr,null),j(this,fs,null),m(this,Af)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Jo=new WeakMap,Yr=new WeakMap,Xr=new WeakMap,Tf=new WeakMap,Rg=new WeakMap,Fs=new WeakMap,fs=new WeakMap,_a=new WeakMap,Af=new WeakMap,Nf=new WeakMap,kf=new WeakMap,Lg=new WeakSet,iS=function(e,t){return Re._normalizePoint(e,t,m(this,Nf),m(this,kf),m(this,Tf))};var zs,hb,fb,Ui,Qo,Zo,Pg,Ig,Mf,gs,Ll,T8,A8,N8;class wb extends Re{constructor(){super(...arguments);L(this,gs);L(this,zs);L(this,hb,0);L(this,fb);L(this,Ui);L(this,Qo);L(this,Zo);L(this,Pg);L(this,Ig);L(this,Mf)}build(t,n,s,i,a,o,c){j(this,Qo,n),j(this,Zo,s),j(this,Pg,i),j(this,Ig,a),j(this,Mf,o),j(this,fb,c??0),j(this,Ui,t),B(this,gs,A8).call(this)}get thickness(){return m(this,Mf)}setLastElement(t){return m(this,Ui).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,Ui).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,Ui)){if(t.push(`M${Re.svgRound(n[4])} ${Re.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Re.svgRound(n[10])} ${Re.svgRound(n[11])}`);continue}for(let s=6,i=n.length;s<i;s+=6){const[a,o,c,d,h,g]=n.subarray(s,s+6).map(Re.svgRound);t.push(`C${a} ${o} ${c} ${d} ${h} ${g}`)}}return t.join("")}serialize([t,n,s,i],a){const o=[],c=[],[d,h,g,y]=B(this,gs,T8).call(this);let b,v,w,E,C,N,A,k,M;switch(m(this,Ig)){case 0:M=Re._rescale,b=t,v=n+i,w=s,E=-i,C=t+d*s,N=n+(1-h-y)*i,A=t+(d+g)*s,k=n+(1-h)*i;break;case 90:M=Re._rescaleAndSwap,b=t,v=n,w=s,E=i,C=t+h*s,N=n+d*i,A=t+(h+y)*s,k=n+(d+g)*i;break;case 180:M=Re._rescale,b=t+s,v=n,w=-s,E=i,C=t+(1-d-g)*s,N=n+h*i,A=t+(1-d)*s,k=n+(h+y)*i;break;case 270:M=Re._rescaleAndSwap,b=t+s,v=n+i,w=-s,E=-i,C=t+(1-h-y)*s,N=n+(1-d-g)*i,A=t+(1-h)*s,k=n+(1-d)*i;break}for(const{line:O,points:P}of m(this,Ui))o.push(M(O,b,v,w,E,a?new Array(O.length):null)),c.push(M(P,b,v,w,E,a?new Array(P.length):null));return{lines:o,points:c,rect:[C,N,A,k]}}static deserialize(t,n,s,i,a,{paths:{lines:o,points:c},rotation:d,thickness:h}){const g=[];let y,b,v,w,E;switch(d){case 0:E=Re._rescale,y=-t/s,b=n/i+1,v=1/s,w=-1/i;break;case 90:E=Re._rescaleAndSwap,y=-n/i,b=-t/s,v=1/i,w=1/s;break;case 180:E=Re._rescale,y=t/s+1,b=-n/i,v=-1/s,w=1/i;break;case 270:E=Re._rescaleAndSwap,y=n/i+1,b=t/s+1,v=-1/i,w=-1/s;break}if(!o){o=[];for(const N of c){const A=N.length;if(A===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(A===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const k=new Float32Array(3*(A-2));o.push(k);let[M,O,P,F]=N.subarray(0,4);k.set([NaN,NaN,NaN,NaN,M,O],0);for(let H=4;H<A;H+=2){const ee=N[H],G=N[H+1];k.set(Re.createBezierPoints(M,O,P,F,ee,G),(H-2)*3),[M,O,P,F]=[P,F,ee,G]}}}for(let N=0,A=o.length;N<A;N++)g.push({line:E(o[N].map(k=>k??NaN),y,b,v,w),points:E(c[N].map(k=>k??NaN),y,b,v,w)});const C=new this.prototype.constructor;return C.build(g,s,i,1,d,h,a),C}get box(){return m(this,zs)}updateProperty(t,n){return t==="stroke-width"?B(this,gs,N8).call(this,n):null}updateParentDimensions([t,n],s){const[i,a]=B(this,gs,Ll).call(this);j(this,Qo,t),j(this,Zo,n),j(this,Pg,s);const[o,c]=B(this,gs,Ll).call(this),d=o-i,h=c-a,g=m(this,zs);return g[0]-=d,g[1]-=h,g[2]+=2*d,g[3]+=2*h,g}updateRotation(t){return j(this,hb,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,zs).map(Re.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,zs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,zs);let s=0,i=0,a=0,o=0,c=0,d=0;switch(m(this,hb)){case 90:i=n/t,a=-t/n,c=t;break;case 180:s=-1,o=-1,c=t,d=n;break;case 270:i=-n/t,a=t/n,d=n;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${Re.svgRound(c)} ${Re.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,i]){const[a,o]=B(this,gs,Ll).call(this),[c,d,h,g]=m(this,zs);if(Math.abs(h-a)<=Re.PRECISION||Math.abs(g-o)<=Re.PRECISION){const E=t+s/2-(c+h/2),C=n+i/2-(d+g/2);return{path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:`${this.rotationTransform} translate(${E} ${C})`}}}const y=(s-2*a)/(h-2*a),b=(i-2*o)/(g-2*o),v=h/s,w=g/i;return{path:{"transform-origin":`${Re.svgRound(c)} ${Re.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${Re.svgRound(a)} ${Re.svgRound(o)}) scale(${y} ${b}) translate(${Re.svgRound(-a)} ${Re.svgRound(-o)})`}}}getPathResizedSVGProperties([t,n,s,i]){const[a,o]=B(this,gs,Ll).call(this),c=m(this,zs),[d,h,g,y]=c;if(c[0]=t,c[1]=n,c[2]=s,c[3]=i,Math.abs(g-a)<=Re.PRECISION||Math.abs(y-o)<=Re.PRECISION){const C=t+s/2-(d+g/2),N=n+i/2-(h+y/2);for(const{line:A,points:k}of m(this,Ui))Re._translate(A,C,N,A),Re._translate(k,C,N,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*a)/(g-2*a),v=(i-2*o)/(y-2*o),w=-b*(d+a)+t+a,E=-v*(h+o)+n+o;if(b!==1||v!==1||w!==0||E!==0)for(const{line:C,points:N}of m(this,Ui))Re._rescale(C,w,E,b,v,C),Re._rescale(N,w,E,b,v,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[i,a]=s,o=m(this,zs),c=t-o[0],d=n-o[1];if(m(this,Qo)===i&&m(this,Zo)===a)for(const{line:h,points:g}of m(this,Ui))Re._translate(h,c,d,h),Re._translate(g,c,d,g);else{const h=m(this,Qo)/i,g=m(this,Zo)/a;j(this,Qo,i),j(this,Zo,a);for(const{line:y,points:b}of m(this,Ui))Re._rescale(y,c,d,h,g,y),Re._rescale(b,c,d,h,g,b);o[2]*=h,o[3]*=g}return o[0]=t,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,zs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(t[0])} ${Re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}zs=new WeakMap,hb=new WeakMap,fb=new WeakMap,Ui=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Pg=new WeakMap,Ig=new WeakMap,Mf=new WeakMap,gs=new WeakSet,Ll=function(t=m(this,Mf)){const n=m(this,fb)+t/2*m(this,Pg);return m(this,Ig)%180===0?[n/m(this,Qo),n/m(this,Zo)]:[n/m(this,Zo),n/m(this,Qo)]},T8=function(){const[t,n,s,i]=m(this,zs),[a,o]=B(this,gs,Ll).call(this,0);return[t+a,n+o,s-2*a,i-2*o]},A8=function(){const t=j(this,zs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of m(this,Ui)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)Le.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],o=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,g,y,b,v,w]=i.subarray(c,c+6);Le.bezierBoundingBox(a,o,h,g,y,b,v,w,t),a=v,o=w}}const[n,s]=B(this,gs,Ll).call(this);t[0]=Ms(t[0]-n,0,1),t[1]=Ms(t[1]-s,0,1),t[2]=Ms(t[2]+n,0,1),t[3]=Ms(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},N8=function(t){const[n,s]=B(this,gs,Ll).call(this);j(this,Mf,t);const[i,a]=B(this,gs,Ll).call(this),[o,c]=[i-n,a-s],d=m(this,zs);return d[0]-=o,d[1]-=c,d[2]+=2*o,d[3]+=2*c,d};class rE extends C8{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:kn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new rE(this._viewParameters);return e.updateAll(this),e}}var KC,k8;const dm=class dm extends DS{constructor(t){super({...t,name:"inkEditor"});L(this,KC);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){kn.initialize(t,n),this._defaultDrawingOptions=new rE(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ft(this,"typesMap",new Map([[kt.INK_THICKNESS,"stroke-width"],[kt.INK_COLOR,"stroke"],[kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,i,a){return new SV(t,n,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,i,a,o){return wb.deserialize(t,n,s,i,a,o)}static async deserialize(t,n,s){let i=null;if(t instanceof UM){const{data:{inkLists:o,rect:c,rotation:d,id:h,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:E,creationDate:C,modificationDate:N},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:at.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:o},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:v,richText:w,comment:(E==null?void 0:E.str)||null,creationDate:C,modificationDate:N}}const a=await super.deserialize(t,n,s);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new MS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=dm.getDefaultDrawingOptions({stroke:Le.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":o}}=this,c=Object.assign(super.serialize(t),{color:kn._colorManager.convert(i),opacity:a,thickness:o,paths:{lines:n,points:s}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!B(this,KC,k8).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};KC=new WeakSet,k8=function(t){const{color:n,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==n[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},le(dm,"_type","ink"),le(dm,"_editorType",at.INK),le(dm,"_defaultDrawingOptions",null);let C3=dm;class E3 extends wb{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const rw=8,ly=3;var _f,Xt,T3,oo,M8,_8,A3,aS,j8,D8,O8,N3,k3,R8;class rl{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},i,a,o,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const g=200,y=h.font=`${n} ${s} ${g}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:v,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:N,width:A}=h.measureText(e),k=1.5,M=Math.ceil(Math.max(Math.abs(b)+Math.abs(v)||0,A)*k),O=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||g,Math.abs(C)+Math.abs(N)||g)*k);d=new OffscreenCanvas(M,O),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=y,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,M,O),h.fillStyle="black",h.fillText(e,M*(k-1)/2,O*(3-k)/2);const P=B(this,Xt,N3).call(this,h.getImageData(0,0,M,O).data),F=B(this,Xt,O8).call(this,P),H=B(this,Xt,k3).call(this,F),ee=B(this,Xt,A3).call(this,P,M,O,H);return this.processDrawnLines({lines:{curves:ee,width:M,height:O},pageWidth:i,pageHeight:a,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,i){const[a,o,c]=B(this,Xt,R8).call(this,e),[d,h]=B(this,Xt,D8).call(this,a,o,c,Math.hypot(o,c)*m(this,_f).sigmaSFactor,m(this,_f).sigmaR,m(this,_f).kernelSize),g=B(this,Xt,k3).call(this,h),y=B(this,Xt,A3).call(this,d,o,c,g);return this.processDrawnLines({lines:{curves:y,width:o,height:c},pageWidth:t,pageHeight:n,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:i,mustSmooth:a,areContours:o}){s%180!==0&&([t,n]=[n,t]);const{curves:c,width:d,height:h}=e,g=e.thickness??0,y=[],b=Math.min(t/d,n/h),v=b/t,w=b/n,E=[];for(const{points:N}of c){const A=a?B(this,Xt,j8).call(this,N):N;if(!A)continue;E.push(A);const k=A.length,M=new Float32Array(k),O=new Float32Array(3*(k===2?2:k-2));if(y.push({line:O,points:M}),k===2){M[0]=A[0]*v,M[1]=A[1]*w,O.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[P,F,H,ee]=A;P*=v,F*=w,H*=v,ee*=w,M.set([P,F,H,ee],0),O.set([NaN,NaN,NaN,NaN,P,F],0);for(let G=4;G<k;G+=2){const J=M[G]=A[G]*v,V=M[G+1]=A[G+1]*w;O.set(Re.createBezierPoints(P,F,H,ee,J,V),(G-2)*3),[P,F,H,ee]=[H,ee,J,V]}}if(y.length===0)return null;const C=o?new E3:new wb;return C.build(y,t,n,1,s,o?0:g,i),{outline:C,newCurves:E,areContours:o,thickness:g,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:i}){let a=1/0,o=-1/0,c=0;for(const A of e){c+=A.length;for(let k=2,M=A.length;k<M;k++){const O=A[k]-A[k-2];a=Math.min(a,O),o=Math.max(o,O)}}let d;a>=-128&&o<=127?d=Int8Array:a>=-32768&&o<=32767?d=Int16Array:d=Int32Array;const h=e.length,g=rw+ly*h,y=new Uint32Array(g);let b=0;y[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=s,y[b++]=i,y[b++]=t?0:1,y[b++]=Math.max(0,Math.floor(n??0)),y[b++]=h,y[b++]=d.BYTES_PER_ELEMENT;for(const A of e)y[b++]=A.length-2,y[b++]=A[0],y[b++]=A[1];const v=new CompressionStream("deflate-raw"),w=v.writable.getWriter();await w.ready,w.write(y);const E=d.prototype.constructor;for(const A of e){const k=new E(A.length-2);for(let M=2,O=A.length;M<O;M++)k[M-2]=A[M]-A[M-2];w.write(k)}w.close();const C=await new Response(v.readable).arrayBuffer(),N=new Uint8Array(C);return _P(N)}static async decompressSignature(e){try{const t=WU(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(const A of n)a||(a=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),a.set(A,o),o+=A.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],g=c[3],y=c[4]===0,b=c[5],v=c[6],w=c[7],E=[],C=(rw+ly*v)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(w){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(a.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(a.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(a.buffer,C);break}o=0;for(let A=0;A<v;A++){const k=c[ly*A+rw],M=new Float32Array(k+2);E.push(M);for(let O=0;O<ly-1;O++)M[O]=c[ly*A+rw+O+1];for(let O=0;O<k;O++)M[O+2]=M[O]+N[o++]}return{areContours:y,thickness:b,outlines:E,width:h,height:g}}catch(t){return ot(`decompressSignature: ${t}`),null}}}_f=new WeakMap,Xt=new WeakSet,T3=function(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s},oo=new WeakMap,M8=function(e,t,n,s,i,a,o){const c=B(this,Xt,T3).call(this,n,s,i,a);for(let d=0;d<8;d++){const h=(-d+c-o+16)%8,g=m(this,oo)[2*h],y=m(this,oo)[2*h+1];if(e[(n+g)*t+(s+y)]!==0)return h}return-1},_8=function(e,t,n,s,i,a,o){const c=B(this,Xt,T3).call(this,n,s,i,a);for(let d=0;d<8;d++){const h=(d+c+o+16)%8,g=m(this,oo)[2*h],y=m(this,oo)[2*h+1];if(e[(n+g)*t+(s+y)]!==0)return h}return-1},A3=function(e,t,n,s){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=s?1:0;for(let h=1;h<n-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*n-1-h]=0;let o=1,c;const d=[];for(let h=1;h<n-1;h++){c=1;for(let g=1;g<t-1;g++){const y=h*t+g,b=a[y];if(b===0)continue;let v=h,w=g;if(b===1&&a[y-1]===0)o+=1,w-=1;else if(b>=1&&a[y+1]===0)o+=1,w+=1,b>1&&(c=b);else{b!==1&&(c=Math.abs(b));continue}const E=[g,h],C=w===g+1,N={isHole:C,points:E,id:o,parent:0};d.push(N);let A;for(const G of d)if(G.id===c){A=G;break}A?A.isHole?N.parent=C?A.parent:c:N.parent=C?c:A.parent:N.parent=C?c:0;const k=B(this,Xt,M8).call(this,a,t,h,g,v,w,0);if(k===-1){a[y]=-o,a[y]!==1&&(c=Math.abs(a[y]));continue}let M=m(this,oo)[2*k],O=m(this,oo)[2*k+1];const P=h+M,F=g+O;v=P,w=F;let H=h,ee=g;for(;;){const G=B(this,Xt,_8).call(this,a,t,H,ee,v,w,1);M=m(this,oo)[2*G],O=m(this,oo)[2*G+1];const J=H+M,V=ee+O;E.push(V,J);const X=H*t+ee;if(a[X+1]===0?a[X]=-o:a[X]===1&&(a[X]=o),J===h&&V===g&&H===P&&ee===F){a[y]!==1&&(c=Math.abs(a[y]));break}else v=H,w=ee,H=J,ee=V}}}return d},aS=function(e,t,n,s){if(n-t<=4){for(let P=t;P<n-2;P+=2)s.push(e[P],e[P+1]);return}const i=e[t],a=e[t+1],o=e[n-4]-i,c=e[n-3]-a,d=Math.hypot(o,c),h=o/d,g=c/d,y=h*a-g*i,b=c/o,v=1/d,w=Math.atan(b),E=Math.cos(w),C=Math.sin(w),N=v*(Math.abs(E)+Math.abs(C)),A=v*(1-N+N**2),k=Math.max(Math.atan(Math.abs(C+E)*A),Math.atan(Math.abs(C-E)*A));let M=0,O=t;for(let P=t+2;P<n-2;P+=2){const F=Math.abs(y-h*e[P+1]+g*e[P]);F>M&&(O=P,M=F)}M>(d*k)**2?(B(this,Xt,aS).call(this,e,t,O+2,s),B(this,Xt,aS).call(this,e,O,n,s)):s.push(i,a)},j8=function(e){const t=[],n=e.length;return B(this,Xt,aS).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},D8=function(e,t,n,s,i,a){const o=new Float32Array(a**2),c=-2*s**2,d=a>>1;for(let w=0;w<a;w++){const E=(w-d)**2;for(let C=0;C<a;C++)o[w*a+C]=Math.exp((E+(C-d)**2)/c)}const h=new Float32Array(256),g=-2*i**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/g);const y=e.length,b=new Uint8Array(y),v=new Uint32Array(256);for(let w=0;w<n;w++)for(let E=0;E<t;E++){const C=w*t+E,N=e[C];let A=0,k=0;for(let O=0;O<a;O++){const P=w+O-d;if(!(P<0||P>=n))for(let F=0;F<a;F++){const H=E+F-d;if(H<0||H>=t)continue;const ee=e[P*t+H],G=o[O*a+F]*h[Math.abs(ee-N)];A+=ee*G,k+=G}}const M=b[C]=Math.round(A/k);v[M]++}return[b,v]},O8=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},N3=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let o=0,c=n.length;o<c;o++){const d=n[o]=e[o<<2];s=Math.max(s,d),i=Math.min(i,d)}const a=255/(s-i);for(let o=0,c=n.length;o<c;o++)n[o]=(n[o]-i)*a;return n},k3=function(e){let t,n=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let a=i,o=i;for(t=i;t<256;t++){const c=e[t];c>n&&(t-a>s&&(s=t-a,o=t-1),n=c,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},R8=function(e){const t=e,{width:n,height:s}=e,{maxDim:i}=m(this,_f);let a=n,o=s;if(n>i||s>i){let y=n,b=s,v=Math.log2(Math.max(n,s)/i);const w=Math.floor(v);v=v===w?w-1:w;for(let C=0;C<v;C++){a=Math.ceil(y/2),o=Math.ceil(b/2);const N=new OffscreenCanvas(a,o);N.getContext("2d").drawImage(e,0,0,y,b,0,0,a,o),y=a,b=o,e!==t&&e.close(),e=N.transferToImageBitmap()}const E=Math.min(i/a,i/o);a=Math.round(a*E),o=Math.round(o*E)}const d=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,o),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=d.getImageData(0,0,a,o).data;return[B(this,Xt,N3).call(this,h),a,o]},L(rl,Xt),L(rl,_f,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),L(rl,oo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class VM extends C8{constructor(){super(),super.updateProperties({fill:kn._defaultLineColor,"stroke-width":0})}clone(){const e=new VM;return e.updateAll(this),e}}class qM extends rE{constructor(e){super(e),super.updateProperties({stroke:kn._defaultLineColor,"stroke-width":1})}clone(){const e=new qM(this._viewParameters);return e.updateAll(this),e}}var hd,el,fd,jf;const Ai=class Ai extends DS{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});L(this,hd,!1);L(this,el,null);L(this,fd,null);L(this,jf,null);this._willKeepAspectRatio=!0,j(this,fd,t.signatureData||null),j(this,el,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){kn.initialize(t,n),this._defaultDrawingOptions=new VM,this._defaultDrawnSignatureOptions=new qM(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return ft(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,el)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,fd)){const{lines:i,mustSmooth:a,areContours:o,description:c,uuid:d,heightInPage:h}=m(this,fd),{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,v=rl.processDrawnLines({lines:i,pageWidth:g,pageHeight:y,rotation:b,innerMargin:Ai._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,el)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){j(this,jf,t),this.addEditToolbar()}getUuid(){return m(this,jf)}get description(){return m(this,el)}set description(t){j(this,el,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:i,height:a}=m(this,fd),o=Math.max(i,a),c=rl.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,i){const{x:a,y:o}=this,{outline:c}=j(this,fd,t);j(this,hd,c instanceof E3),this.description=s;let d;m(this,hd)?d=Ai.getDefaultDrawingOptions():(d=Ai._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let g=n/h;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:i}=this.parent.viewport;return rl.process(t,n,s,i,Ai._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return rl.extractContoursFromText(t,n,s,i,a,Ai._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:i}=this.parent.viewport;return rl.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:i,innerMargin:Ai._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ai.getDefaultDrawingOptions():(this._drawingOptions=Ai._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:m(this,hd),color:[0,0,0],thickness:m(this,hd)?0:i});return this.addComment(a),t?(a.paths={lines:n,points:s},a.uuid=m(this,jf),a.isCopy=!0):a.lines=n,m(this,el)&&(a.accessibilityData={type:"Figure",alt:m(this,el)}),a}static deserializeDraw(t,n,s,i,a,o){return o.areContours?E3.deserialize(t,n,s,i,a,o):wb.deserialize(t,n,s,i,a,o)}static async deserialize(t,n,s){var a;const i=await super.deserialize(t,n,s);return j(i,hd,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",j(i,jf,t.uuid),i}};hd=new WeakMap,el=new WeakMap,fd=new WeakMap,jf=new WeakMap,le(Ai,"_type","signature"),le(Ai,"_editorType",at.SIGNATURE),le(Ai,"_defaultDrawingOptions",null);let M3=Ai;var Fn,Kr,pd,bc,md,Bg,vc,Df,tl,$i,Fg,Lt,Fy,zy,oS,lS,cS,j3,uS,L8;class _3 extends kn{constructor(t){super({...t,name:"stampEditor"});L(this,Lt);L(this,Fn,null);L(this,Kr,null);L(this,pd,null);L(this,bc,null);L(this,md,null);L(this,Bg,"");L(this,vc,null);L(this,Df,!1);L(this,tl,null);L(this,$i,!1);L(this,Fg,!1);j(this,bc,t.bitmapUrl),j(this,md,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){kn.initialize(t,n)}static isHandlingMimeForPasting(t){return ES.includes(t)}static paste(t,n){n.pasteEditor({mode:at.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;m(this,Kr)&&(j(this,Fn,null),this._uiManager.imageManager.deleteId(m(this,Kr)),(t=m(this,vc))==null||t.remove(),j(this,vc,null),m(this,tl)&&(clearTimeout(m(this,tl)),j(this,tl,null))),super.remove()}rebuild(){if(!this.parent){m(this,Kr)&&B(this,Lt,oS).call(this);return}super.rebuild(),this.div!==null&&(m(this,Kr)&&m(this,vc)===null&&B(this,Lt,oS).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,pd)||m(this,Fn)||m(this,bc)||m(this,md)||m(this,Kr)||m(this,Df))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,Df)||(m(this,Fn)?B(this,Lt,lS).call(this):B(this,Lt,oS).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(j(this,Kr,s),i&&j(this,Fn,i),j(this,Df,!1),B(this,Lt,lS).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,tl)!==null&&clearTimeout(m(this,tl)),j(this,tl,setTimeout(()=>{j(this,tl,null),B(this,Lt,j3).call(this)},200))}copyCanvas(t,n,s=!1){t||(t=224);const{width:i,height:a}=m(this,Fn),o=new po;let c=m(this,Fn),d=i,h=a,g=null;if(n){if(i>n||a>n){const P=Math.min(n/i,n/a);d=Math.floor(i*P),h=Math.floor(a*P)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*o.sx),v=g.height=Math.ceil(h*o.sy);m(this,$i)||(c=B(this,Lt,cS).call(this,b,v));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let E="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":KU.isDarkMode&&(E="#8f8f9d",C="#42414d");const N=15,A=N*o.sx,k=N*o.sy,M=new OffscreenCanvas(A*2,k*2),O=M.getContext("2d");O.fillStyle=E,O.fillRect(0,0,A*2,k*2),O.fillStyle=C,O.fillRect(0,0,A,k),O.fillRect(A,k,A,k),w.fillStyle=w.createPattern(M,"repeat"),w.fillRect(0,0,b,v),w.drawImage(c,0,0,c.width,c.height,0,0,b,v)}let y=null;if(s){let b,v;if(o.symmetric&&c.width<t&&c.height<t)b=c.width,v=c.height;else if(c=m(this,Fn),i>t||a>t){const C=Math.min(t/i,t/a);b=Math.floor(i*C),v=Math.floor(a*C),m(this,$i)||(c=B(this,Lt,cS).call(this,b,v))}const E=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});E.drawImage(c,0,0,c.width,c.height,0,0,b,v),y={width:b,height:v,data:E.getImageData(0,0,b,v).data}}return{canvas:g,width:d,height:h,imageData:y}}static async deserialize(t,n,s){var E;let i=null,a=!1;if(t instanceof JI){const{data:{rect:C,rotation:N,id:A,structParent:k,popupRef:M,richText:O,contentsObj:P,creationDate:F,modificationDate:H},container:ee,parent:{page:{pageNumber:G}},canvas:J}=t;let V,X;J?(delete t.canvas,{id:V,bitmap:X}=s.imageManager.getFromCanvas(ee.id,J),J.remove()):(a=!0,t._hasNoCanvas=!0);const K=((E=await n._structTree.getAriaAttributes(`${OM}${A}`))==null?void 0:E.get("aria-label"))||"";i=t={annotationType:at.STAMP,bitmapId:V,bitmap:X,pageIndex:G-1,rect:C.slice(0),rotation:N,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:k,popupRef:M,richText:O,comment:(P==null?void 0:P.str)||null,creationDate:F,modificationDate:H}}const o=await super.deserialize(t,n,s),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:g,isSvg:y,accessibilityData:b}=t;a?(s.addMissingCanvas(t.id,o),j(o,Df,!0)):g&&s.imageManager.isValidId(g)?(j(o,Kr,g),d&&j(o,Fn,d)):j(o,bc,h),j(o,$i,y);const[v,w]=o.pageDimensions;return o.width=(c[2]-c[0])/v,o.height=(c[3]-c[1])/w,b&&(o.altTextData=b),o._initialData=i,t.comment&&o.setCommentData(t),j(o,Fg,!!i),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:m(this,Kr),isSvg:m(this,$i)});if(this.addComment(s),t)return s.bitmapUrl=B(this,Lt,uS).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=B(this,Lt,L8).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const o=m(this,$i)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(m(this,Kr)))n.stamps.set(m(this,Kr),{area:o,serialized:s}),s.bitmap=B(this,Lt,uS).call(this,!1);else if(m(this,$i)){const c=n.stamps.get(m(this,Kr));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=B(this,Lt,uS).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Fn=new WeakMap,Kr=new WeakMap,pd=new WeakMap,bc=new WeakMap,md=new WeakMap,Bg=new WeakMap,vc=new WeakMap,Df=new WeakMap,tl=new WeakMap,$i=new WeakMap,Fg=new WeakMap,Lt=new WeakSet,Fy=function(t,n=!1){if(!t){this.remove();return}j(this,Fn,t.bitmap),n||(j(this,Kr,t.id),j(this,$i,t.isSvg)),t.file&&j(this,Bg,t.file.name),B(this,Lt,lS).call(this)},zy=function(){if(j(this,pd,null),this._uiManager.enableWaiting(!1),!!m(this,vc)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,Fn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,Fn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},oS=function(){if(m(this,Kr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,Kr)).then(s=>B(this,Lt,Fy).call(this,s,!0)).finally(()=>B(this,Lt,zy).call(this));return}if(m(this,bc)){const s=m(this,bc);j(this,bc,null),this._uiManager.enableWaiting(!0),j(this,pd,this._uiManager.imageManager.getFromUrl(s).then(i=>B(this,Lt,Fy).call(this,i)).finally(()=>B(this,Lt,zy).call(this)));return}if(m(this,md)){const s=m(this,md);j(this,md,null),this._uiManager.enableWaiting(!0),j(this,pd,this._uiManager.imageManager.getFromFile(s).then(i=>B(this,Lt,Fy).call(this,i)).finally(()=>B(this,Lt,zy).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ES.join(",");const n=this._uiManager._signal;j(this,pd,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),B(this,Lt,Fy).call(this,i)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>B(this,Lt,zy).call(this))),t.click()},lS=function(){var d;const{div:t}=this;let{width:n,height:s}=m(this,Fn);const[i,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*i,s=this.height*a;else if(n>o*i||s>o*a){const h=Math.min(o*i/n,o*a/s);n*=h,s*=h}this._uiManager.enableWaiting(!1);const c=j(this,vc,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/i,this.height=s/a,this.setDims(),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),B(this,Lt,j3).call(this),m(this,Fg)||(this.parent.addUndoableEditor(this),j(this,Fg,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,Bg)&&this.div.setAttribute("aria-description",m(this,Bg)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},cS=function(t,n){const{width:s,height:i}=m(this,Fn);let a=s,o=i,c=m(this,Fn);for(;a>2*t||o>2*n;){const d=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const g=new OffscreenCanvas(a,o);g.getContext("2d").drawImage(c,0,0,d,h,0,0,a,o),c=g.transferToImageBitmap()}return c},j3=function(){const[t,n]=this.parentDimensions,{width:s,height:i}=this,a=new po,o=Math.ceil(s*t*a.sx),c=Math.ceil(i*n*a.sy),d=m(this,vc);if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const h=m(this,$i)?m(this,Fn):B(this,Lt,cS).call(this,o,c),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(h,0,0,h.width,h.height,0,0,o,c)},uS=function(t){if(t){if(m(this,$i)){const i=this._uiManager.imageManager.getSvgUrl(m(this,Kr));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,Fn),n.getContext("2d").drawImage(m(this,Fn),0,0),n.toDataURL()}if(m(this,$i)){const[n,s]=this.pageDimensions,i=Math.round(this.width*n*Dc.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Dc.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(m(this,Fn),0,0,m(this,Fn).width,m(this,Fn).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(m(this,Fn))},L8=function(t){var o;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===n,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},le(_3,"_type","stamp"),le(_3,"_editorType",at.STAMP);var Of,zg,gd,yd,wc,hi,xd,Hg,Ug,lo,Sc,Jr,Cc,bd,$g,ze,vd,wn,D3,P8,No,O3,R3,dS;const Ka=class Ka{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:c,viewport:d,l10n:h}){L(this,wn);L(this,Of);L(this,zg,!1);L(this,gd,null);L(this,yd,null);L(this,wc,null);L(this,hi,new Map);L(this,xd,!1);L(this,Hg,!1);L(this,Ug,!1);L(this,lo,null);L(this,Sc,null);L(this,Jr,null);L(this,Cc,null);L(this,bd,null);L(this,$g,-1);L(this,ze);const g=[...m(Ka,vd).values()];if(!Ka._initialized){Ka._initialized=!0;for(const y of g)y.initialize(h,e)}e.registerEditorTypes(g),j(this,ze,e),this.pageIndex=t,this.div=n,j(this,Of,i),j(this,gd,a),this.viewport=d,j(this,Jr,c),this.drawLayer=o,this._structTree=s,m(this,ze).addLayer(this)}get isEmpty(){return m(this,hi).size===0}get isInvisible(){return this.isEmpty&&m(this,ze).getMode()===at.NONE}updateToolbar(e){m(this,ze).updateToolbar(e)}updateMode(e=m(this,ze).getMode()){switch(B(this,wn,dS).call(this),e){case at.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case at.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case at.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===at.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of m(Ka,vd).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,Jr))==null?void 0:t.div)}setEditingState(e){m(this,ze).setEditingState(e)}addCommands(e){m(this,ze).addCommands(e)}cleanUndoStack(e){m(this,ze).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,gd))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;j(this,Ug,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=m(this,bd))==null||n.abort(),j(this,bd,null);const e=new Set;for(const s of m(this,wn,D3))s.enableEditing(),s.show(!0),s.annotationElementId&&(m(this,ze).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=m(this,gd);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),m(this,ze).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}j(this,Ug,!1),m(this,ze)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(j(this,Hg,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),m(this,Jr)&&!m(this,bd)){j(this,bd,new AbortController);const s=m(this,ze).combinedSignal(m(this,bd));m(this,Jr).div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:c,timeStamp:d}=i,h=m(this,$g);if(d-h>500){j(this,$g,d);return}j(this,$g,-1);const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(o,c);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const v=new RegExp(`^${px}[0-9]+$`);for(const E of y)if(v.test(E.id)){b=E.id;break}if(!b)return;const w=m(this,hi).get(b);(w==null?void 0:w.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),w.dblclick(i))},{signal:s,capture:!0})}const e=m(this,gd);if(e){const s=new Map,i=new Map;for(const o of m(this,wn,D3)){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);(n=this.getEditableAnnotation(o.annotationElementId))==null||n.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:c}=o.data;if(m(this,ze).isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let d=i.get(c);if(d){d.resetAnnotationElement(o),d.show(!1),o.show();continue}d=s.get(c),d&&(m(this,ze).addChangedExistingAnnotation(d),d.renderAnnotationElement(o)&&d.show(!1)),o.show()}}B(this,wn,dS).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of m(Ka,vd).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),j(this,Hg,!1)}getEditableAnnotation(e){var t;return((t=m(this,gd))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,ze).getActive()!==e&&m(this,ze).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,Jr))!=null&&e.div&&!m(this,Cc)){j(this,Cc,new AbortController);const t=m(this,ze).combinedSignal(m(this,Cc));m(this,Jr).div.addEventListener("pointerdown",B(this,wn,P8).bind(this),{signal:t}),m(this,Jr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,Jr))!=null&&e.div&&m(this,Cc)&&(m(this,Cc).abort(),j(this,Cc,null),m(this,Jr).div.classList.remove("highlighting"))}enableClick(){if(m(this,yd))return;j(this,yd,new AbortController);const e=m(this,ze).combinedSignal(m(this,yd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,yd))==null||e.abort(),j(this,yd,null)}attach(e){m(this,hi).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,ze).isDeletedAnnotationElement(t)&&m(this,ze).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,hi).delete(e.id),(t=m(this,Of))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,Hg)&&e.annotationElementId&&m(this,ze).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,ze).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,ze).addDeletedAnnotationElement(e.annotationElementId),kn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,ze).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,Ug)),m(this,ze).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,wc)&&(e._focusEventsAllowed=!1,j(this,wc,setTimeout(()=>{j(this,wc,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,ze)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Of))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of m(this,hi).values())if(t.uid===e)return t;return null}getNextId(){return m(this,ze).getId()}combinedSignal(e){return m(this,ze).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,wn,No))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,ze).updateMode(e.mode);const{offsetX:n,offsetY:s}=B(this,wn,R3).call(this),i=this.getNextId(),a=B(this,wn,O3).call(this,{parent:this,id:i,x:n,y:s,uiManager:m(this,ze),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=m(Ka,vd).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,ze)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),i=B(this,wn,O3).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:m(this,ze),isCentered:t,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(B(this,wn,R3).call(this),!0,e)}setSelected(e){m(this,ze).setSelected(e)}toggleSelected(e){m(this,ze).toggleSelected(e)}unselect(e){m(this,ze).unselect(e)}pointerup(e){var s;const{isMac:t}=es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,xd)||(j(this,xd,!1),(s=m(this,wn,No))!=null&&s.isDrawer&&m(this,wn,No).supportMultipleDrawings))return;if(!m(this,zg)){j(this,zg,!0);return}const n=m(this,ze).getMode();if(n===at.STAMP||n===at.SIGNATURE){m(this,ze).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(m(this,ze).getMode()===at.HIGHLIGHT&&this.enableTextSelection(),m(this,xd)){j(this,xd,!1);return}const{isMac:t}=es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(j(this,xd,!0),(s=m(this,wn,No))!=null&&s.isDrawer){this.startDrawingSession(e);return}const n=m(this,ze).getActive();j(this,zg,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,lo)){m(this,wn,No).startDrawing(this,m(this,ze),!1,e);return}m(this,ze).setCurrentDrawingSession(this),j(this,lo,new AbortController);const t=m(this,ze).combinedSignal(m(this,lo));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(j(this,Sc,null),this.commitOrRemove())},{signal:t}),m(this,wn,No).startDrawing(this,m(this,ze),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&j(this,Sc,t);return}m(this,Sc)&&setTimeout(()=>{var t;(t=m(this,Sc))==null||t.focus(),j(this,Sc,null)},0)}endDrawingSession(e=!1){return m(this,lo)?(m(this,ze).setCurrentDrawingSession(null),m(this,lo).abort(),j(this,lo,null),j(this,Sc,null),m(this,wn,No).endDrawing(e)):null}findNewParent(e,t,n){const s=m(this,ze).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return m(this,lo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,lo)&&m(this,wn,No).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,ze).getActive())==null?void 0:e.parent)===this&&(m(this,ze).commitOrRemove(),m(this,ze).setActiveEditor(null)),m(this,wc)&&(clearTimeout(m(this,wc)),j(this,wc,null));for(const n of m(this,hi).values())(t=m(this,Of))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,hi).clear(),m(this,ze).removeLayer(this)}render({viewport:e}){this.viewport=e,_d(this.div,e);for(const t of m(this,ze).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,ze).commitOrRemove(),B(this,wn,dS).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,_d(this.div,{rotation:n}),t!==n)for(const s of m(this,hi).values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,ze).viewParameters.realScale}};Of=new WeakMap,zg=new WeakMap,gd=new WeakMap,yd=new WeakMap,wc=new WeakMap,hi=new WeakMap,xd=new WeakMap,Hg=new WeakMap,Ug=new WeakMap,lo=new WeakMap,Sc=new WeakMap,Jr=new WeakMap,Cc=new WeakMap,bd=new WeakMap,$g=new WeakMap,ze=new WeakMap,vd=new WeakMap,wn=new WeakSet,D3=function(){return m(this,hi).size!==0?m(this,hi).values():m(this,ze).getEditors(this.pageIndex)},P8=function(e){m(this,ze).unselectAll();const{target:t}=e;if(t===m(this,Jr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,Jr).div.contains(t)){const{isMac:n}=es.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,ze).showAllEditors("highlight",!0,!0),m(this,Jr).div.classList.add("free"),this.toggleDrawing(),jS.startHighlighting(this,m(this,ze).direction==="ltr",{target:m(this,Jr).div,x:e.x,y:e.y}),m(this,Jr).div.addEventListener("pointerup",()=>{m(this,Jr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,ze)._signal}),e.preventDefault()}},No=function(){return m(Ka,vd).get(m(this,ze).getMode())},O3=function(e){const t=m(this,wn,No);return t?new t.prototype.constructor(e):null},R3=function(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),d=(i+o)/2-e,h=(a+c)/2-t,[g,y]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:g,offsetY:y}},dS=function(){for(const e of m(this,hi).values())e.isEmpty()&&e.remove()},le(Ka,"_initialized",!1),L(Ka,vd,new Map([f3,C3,_3,jS,M3].map(e=>[e._editorType,e])));let OS=Ka;var co,Hs,Rf,pb,JC,I8,ul,L3,B8,P3;const Or=class Or{constructor({pageIndex:e}){L(this,ul);L(this,co,null);L(this,Hs,new Map);L(this,Rf,new Map);this.pageIndex=e}setParent(e){if(!m(this,co)){j(this,co,e);return}if(m(this,co)!==e){if(m(this,Hs).size>0)for(const t of m(this,Hs).values())t.remove(),e.append(t);j(this,co,e)}}static get _svgFactory(){return ft(this,"_svgFactory",new wx)}draw(e,t=!1,n=!1){const s=_r(Or,pb)._++,i=B(this,ul,L3).call(this),a=Or._svgFactory.createElement("defs");i.append(a);const o=Or._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,Rf).set(s,o);const d=n?B(this,ul,B8).call(this,a,c):null,h=Or._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),m(this,Hs).set(s,i),{id:s,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=_r(Or,pb)._++,s=B(this,ul,L3).call(this),i=Or._svgFactory.createElement("defs");s.append(i);const a=Or._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const g=Or._svgFactory.createElement("mask");i.append(g),c=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",c),g.setAttribute("maskUnits","objectBoundingBox");const y=Or._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=Or._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${o}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=Or._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${o}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return s.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),m(this,Hs).set(n,s),n}finalizeDraw(e,t){m(this,Rf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:n,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?m(this,Hs).get(e):e;if(o){if(n&&B(this,ul,P3).call(this,o,n),s&&B(c=Or,JC,I8).call(c,o,s),i){const{classList:d}=o;for(const[h,g]of Object.entries(i))d.toggle(h,g)}if(a){const h=o.firstChild.firstChild;B(this,ul,P3).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const n=m(this,Hs).get(e);n&&(m(t,co).append(n),m(this,Hs).delete(e),m(t,Hs).set(e,n))}remove(e){m(this,Rf).delete(e),m(this,co)!==null&&(m(this,Hs).get(e).remove(),m(this,Hs).delete(e))}destroy(){j(this,co,null);for(const e of m(this,Hs).values())e.remove();m(this,Hs).clear(),m(this,Rf).clear()}};co=new WeakMap,Hs=new WeakMap,Rf=new WeakMap,pb=new WeakMap,JC=new WeakSet,I8=function(e,[t,n,s,i]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},ul=new WeakSet,L3=function(){const e=Or._svgFactory.create(1,1,!0);return m(this,co).append(e),e.setAttribute("aria-hidden",!0),e},B8=function(e,t){const n=Or._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Or._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},P3=function(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)},L(Or,JC),L(Or,pb,0);let RS=Or;globalThis._pdfjsTestingUtils={HighlightOutliner:m3};globalThis.pdfjsLib={AbortException:jc,AnnotationEditorLayer:OS,AnnotationEditorParamsType:kt,AnnotationEditorType:at,AnnotationEditorUIManager:jd,AnnotationLayer:$M,AnnotationMode:nl,AnnotationType:cr,applyOpacity:LP,build:FI,ColorPicker:vx,createValidAbsoluteUrl:_M,CSSConstants:RP,DOMSVGFactory:wx,DrawLayer:RS,FeatureTest:es,fetchData:t0,findContrastColor:PP,getDocument:FM,getFilenameFromUrl:jP,getPdfFilenameFromUrl:DP,getRGB:n0,getUuid:DM,getXfaPageViewport:OP,GlobalWorkerOptions:Da,ImageKind:Yy,InvalidPDFException:CS,isDataScheme:xb,isPdfFile:tE,isValidExplicitDest:mI,MathClamp:Ms,noContextMenu:Qi,normalizeUnicode:MP,OPS:Vg,OutputScale:po,PasswordResponses:NP,PDFDataRangeTransport:zM,PDFDateString:yx,PDFWorker:qg,PermissionFlag:AP,PixelsPerInch:Dc,RenderingCancelledException:eE,renderRichText:LM,ResponseException:mx,setLayerDimensions:_d,shadow:ft,SignatureExtractor:rl,stopEvent:$n,SupportedImageMimeTypes:ES,TextLayer:bx,TouchManager:xx,updateUrlHash:jM,Util:Le,VerbosityLevel:mb,version:BI,XfaLayer:RM};const CV=Object.freeze(Object.defineProperty({__proto__:null,AbortException:jc,AnnotationEditorLayer:OS,AnnotationEditorParamsType:kt,AnnotationEditorType:at,AnnotationEditorUIManager:jd,AnnotationLayer:$M,AnnotationMode:nl,AnnotationType:cr,CSSConstants:RP,ColorPicker:vx,DOMSVGFactory:wx,DrawLayer:RS,FeatureTest:es,GlobalWorkerOptions:Da,ImageKind:Yy,InvalidPDFException:CS,MathClamp:Ms,OPS:Vg,OutputScale:po,PDFDataRangeTransport:zM,PDFDateString:yx,PDFWorker:qg,PasswordResponses:NP,PermissionFlag:AP,PixelsPerInch:Dc,RenderingCancelledException:eE,ResponseException:mx,SignatureExtractor:rl,SupportedImageMimeTypes:ES,TextLayer:bx,TouchManager:xx,Util:Le,VerbosityLevel:mb,XfaLayer:RM,applyOpacity:LP,build:FI,createValidAbsoluteUrl:_M,fetchData:t0,findContrastColor:PP,getDocument:FM,getFilenameFromUrl:jP,getPdfFilenameFromUrl:DP,getRGB:n0,getUuid:DM,getXfaPageViewport:OP,isDataScheme:xb,isPdfFile:tE,isValidExplicitDest:mI,noContextMenu:Qi,normalizeUnicode:MP,renderRichText:LM,setLayerDimensions:_d,shadow:ft,stopEvent:$n,updateUrlHash:jM,version:BI},Symbol.toStringTag,{value:"Module"}));var KA={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO;function EV(){if(bO)return it;bO=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function b(W){return W===null||typeof W!="object"?null:(W=y&&W[y]||W["@@iterator"],typeof W=="function"?W:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function C(W,ne,me){this.props=W,this.context=ne,this.refs=E,this.updater=me||v}C.prototype.isReactComponent={},C.prototype.setState=function(W,ne){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ne,"setState")},C.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function N(){}N.prototype=C.prototype;function A(W,ne,me){this.props=W,this.context=ne,this.refs=E,this.updater=me||v}var k=A.prototype=new N;k.constructor=A,w(k,C.prototype),k.isPureReactComponent=!0;var M=Array.isArray;function O(){}var P={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function H(W,ne,me){var we=me.ref;return{$$typeof:r,type:W,key:ne,ref:we!==void 0?we:null,props:me}}function ee(W,ne){return H(W.type,ne,W.props)}function G(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function J(W){var ne={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(me){return ne[me]})}var V=/\/+/g;function X(W,ne){return typeof W=="object"&&W!==null&&W.key!=null?J(""+W.key):ne.toString(36)}function K(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(O,O):(W.status="pending",W.then(function(ne){W.status==="pending"&&(W.status="fulfilled",W.value=ne)},function(ne){W.status==="pending"&&(W.status="rejected",W.reason=ne)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function q(W,ne,me,we,Ne){var je=typeof W;(je==="undefined"||je==="boolean")&&(W=null);var Me=!1;if(W===null)Me=!0;else switch(je){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(W.$$typeof){case r:case e:Me=!0;break;case h:return Me=W._init,q(Me(W._payload),ne,me,we,Ne)}}if(Me)return Ne=Ne(W),Me=we===""?"."+X(W,0):we,M(Ne)?(me="",Me!=null&&(me=Me.replace(V,"$&/")+"/"),q(Ne,ne,me,"",function(Qe){return Qe})):Ne!=null&&(G(Ne)&&(Ne=ee(Ne,me+(Ne.key==null||W&&W.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+Me)),ne.push(Ne)),1;Me=0;var He=we===""?".":we+":";if(M(W))for(var Ye=0;Ye<W.length;Ye++)we=W[Ye],je=He+X(we,Ye),Me+=q(we,ne,me,je,Ne);else if(Ye=b(W),typeof Ye=="function")for(W=Ye.call(W),Ye=0;!(we=W.next()).done;)we=we.value,je=He+X(we,Ye++),Me+=q(we,ne,me,je,Ne);else if(je==="object"){if(typeof W.then=="function")return q(K(W),ne,me,we,Ne);throw ne=String(W),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(W,ne,me){if(W==null)return W;var we=[],Ne=0;return q(W,we,"","",function(je){return ne.call(me,je,Ne++)}),we}function he(W){if(W._status===-1){var ne=W._result;ne=ne(),ne.then(function(me){(W._status===0||W._status===-1)&&(W._status=1,W._result=me)},function(me){(W._status===0||W._status===-1)&&(W._status=2,W._result=me)}),W._status===-1&&(W._status=0,W._result=ne)}if(W._status===1)return W._result.default;throw W._result}var te=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},pe={map:Z,forEach:function(W,ne,me){Z(W,function(){ne.apply(this,arguments)},me)},count:function(W){var ne=0;return Z(W,function(){ne++}),ne},toArray:function(W){return Z(W,function(ne){return ne})||[]},only:function(W){if(!G(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return it.Activity=g,it.Children=pe,it.Component=C,it.Fragment=t,it.Profiler=s,it.PureComponent=A,it.StrictMode=n,it.Suspense=c,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,it.__COMPILER_RUNTIME={__proto__:null,c:function(W){return P.H.useMemoCache(W)}},it.cache=function(W){return function(){return W.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(W,ne,me){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var we=w({},W.props),Ne=W.key;if(ne!=null)for(je in ne.key!==void 0&&(Ne=""+ne.key),ne)!F.call(ne,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ne.ref===void 0||(we[je]=ne[je]);var je=arguments.length-2;if(je===1)we.children=me;else if(1<je){for(var Me=Array(je),He=0;He<je;He++)Me[He]=arguments[He+2];we.children=Me}return H(W.type,Ne,we)},it.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:i,_context:W},W},it.createElement=function(W,ne,me){var we,Ne={},je=null;if(ne!=null)for(we in ne.key!==void 0&&(je=""+ne.key),ne)F.call(ne,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Ne[we]=ne[we]);var Me=arguments.length-2;if(Me===1)Ne.children=me;else if(1<Me){for(var He=Array(Me),Ye=0;Ye<Me;Ye++)He[Ye]=arguments[Ye+2];Ne.children=He}if(W&&W.defaultProps)for(we in Me=W.defaultProps,Me)Ne[we]===void 0&&(Ne[we]=Me[we]);return H(W,je,Ne)},it.createRef=function(){return{current:null}},it.forwardRef=function(W){return{$$typeof:o,render:W}},it.isValidElement=G,it.lazy=function(W){return{$$typeof:h,_payload:{_status:-1,_result:W},_init:he}},it.memo=function(W,ne){return{$$typeof:d,type:W,compare:ne===void 0?null:ne}},it.startTransition=function(W){var ne=P.T,me={};P.T=me;try{var we=W(),Ne=P.S;Ne!==null&&Ne(me,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(O,te)}catch(je){te(je)}finally{ne!==null&&me.types!==null&&(ne.types=me.types),P.T=ne}},it.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},it.use=function(W){return P.H.use(W)},it.useActionState=function(W,ne,me){return P.H.useActionState(W,ne,me)},it.useCallback=function(W,ne){return P.H.useCallback(W,ne)},it.useContext=function(W){return P.H.useContext(W)},it.useDebugValue=function(){},it.useDeferredValue=function(W,ne){return P.H.useDeferredValue(W,ne)},it.useEffect=function(W,ne){return P.H.useEffect(W,ne)},it.useEffectEvent=function(W){return P.H.useEffectEvent(W)},it.useId=function(){return P.H.useId()},it.useImperativeHandle=function(W,ne,me){return P.H.useImperativeHandle(W,ne,me)},it.useInsertionEffect=function(W,ne){return P.H.useInsertionEffect(W,ne)},it.useLayoutEffect=function(W,ne){return P.H.useLayoutEffect(W,ne)},it.useMemo=function(W,ne){return P.H.useMemo(W,ne)},it.useOptimistic=function(W,ne){return P.H.useOptimistic(W,ne)},it.useReducer=function(W,ne,me){return P.H.useReducer(W,ne,me)},it.useRef=function(W){return P.H.useRef(W)},it.useState=function(W){return P.H.useState(W)},it.useSyncExternalStore=function(W,ne,me){return P.H.useSyncExternalStore(W,ne,me)},it.useTransition=function(){return P.H.useTransition()},it.version="19.2.3",it}var vO;function tp(){return vO||(vO=1,KA.exports=EV()),KA.exports}var I=tp();const Wt=Qf(I);function F8(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=F8(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function sE(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=F8(r))&&(n&&(n+=" "),n+=e);return n}var wO=Object.prototype.hasOwnProperty;function SO(r,e,t){for(t of r.keys())if(fm(t,e))return t}function fm(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&fm(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=SO(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=SO(e,s),!s)||!fm(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(wO.call(r,t)&&++n&&!wO.call(e,t)||!(t in e)||!fm(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}function Sb(r){let e=!1;return{promise:new Promise((n,s)=>{r.then(i=>!e&&n(i)).catch(i=>!e&&s(i))}),cancel(){e=!0}}}const TV=["onCopy","onCut","onPaste"],AV=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],NV=["onFocus","onBlur"],kV=["onInput","onInvalid","onReset","onSubmit"],MV=["onLoad","onError"],_V=["onKeyDown","onKeyPress","onKeyUp"],jV=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DV=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],OV=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],RV=["onSelect"],LV=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],PV=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],IV=["onScroll"],BV=["onWheel"],FV=["onAnimationStart","onAnimationEnd","onAnimationIteration"],zV=["onTransitionEnd"],HV=["onToggle"],UV=["onChange"],$V=[...TV,...AV,...NV,...kV,...MV,..._V,...jV,...DV,...OV,...RV,...LV,...PV,...IV,...BV,...FV,...zV,...UV,...HV];function z8(r,e){const t={};for(const n of $V){const s=r[n];s&&(e?t[n]=(i=>s(i,e(n))):t[n]=s)}return t}var VV="Invariant failed";function vn(r,e){if(!r)throw new Error(VV)}var JA,CO;function qV(){if(CO)return JA;CO=1;var r=function(){};return JA=r,JA}var GV=qV();const js=Qf(GV),H8=I.createContext(null),WV="noopener noreferrer nofollow";class YV{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return vn(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){vn(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||WV,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{vn(this.pdfDocument),vn(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{vn(Array.isArray(t));const n=t[0];new Promise(s=>{vn(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(i=>{s(i)}).catch(()=>{vn(!1)}):typeof n=="number"?s(n):vn(!1)}).then(s=>{const i=s+1;vn(this.pdfViewer),vn(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}goToPage(e){const t=e-1;vn(this.pdfViewer),vn(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function pm({children:r,type:e}){return f.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const EO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function XV(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function Gg(){return I.useReducer(XV,{value:void 0,error:void 0})}const iE=typeof window<"u",U8=iE&&window.location.protocol==="file:";function KV(r){return typeof r<"u"}function oh(r){return KV(r)&&r!==null}function JV(r){return typeof r=="string"}function QV(r){return r instanceof ArrayBuffer}function ZV(r){return vn(iE),r instanceof Blob}function I3(r){return JV(r)&&/^data:/.test(r)}function TO(r){vn(I3(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function eq(){return iE&&window.devicePixelRatio||1}const $8="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function AO(){js(!U8,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${$8}`)}function tq(){js(!U8,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${$8}`)}function Vf(r){r!=null&&r.cancel&&r.cancel()}function B3(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function nq(r){return r.name==="RenderingCancelledException"}function rq(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}const{PDFDataRangeTransport:sq}=CV,iq=(r,e)=>{switch(e){case EO.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case EO.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function NO(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const aq=I.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:i,file:a,inputRef:o,imageResourcesPath:c,loading:d="Loading PDF…",noData:h="No PDF file specified.",onItemClick:g,onLoadError:y,onLoadProgress:b,onLoadSuccess:v,onPassword:w=iq,onSourceError:E,onSourceSuccess:C,options:N,renderMode:A,rotate:k,scale:M,...O},P){const[F,H]=Gg(),{value:ee,error:G}=F,[J,V]=Gg(),{value:X,error:K}=J,q=I.useRef(new YV),Z=I.useRef([]),he=I.useRef(void 0),te=I.useRef(void 0);a&&a!==he.current&&NO(a)&&(js(!fm(a,he.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),he.current=a),N&&N!==te.current&&(js(!fm(N,te.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),te.current=N);const pe=I.useRef({scrollPageIntoView:Ge=>{const{dest:Ze,pageNumber:Mt,pageIndex:Te=Mt-1}=Ge;if(g){g({dest:Ze,pageIndex:Te,pageNumber:Mt});return}const Be=Z.current[Te];if(Be){Be.scrollIntoView();return}js(!1,`An internal link leading to page ${Mt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});I.useImperativeHandle(P,()=>({linkService:q,pages:Z,viewer:pe}),[]);function W(){C&&C()}function ne(){G&&(js(!1,G.toString()),E&&E(G))}function me(){H({type:"RESET"})}I.useEffect(me,[a,H]);const we=I.useCallback(async()=>{if(!a)return null;if(typeof a=="string")return I3(a)?{data:TO(a)}:(AO(),{url:a});if(a instanceof sq)return{range:a};if(QV(a))return{data:a};if(iE&&ZV(a))return{data:await rq(a)};if(vn(typeof a=="object"),vn(NO(a)),"url"in a&&typeof a.url=="string"){if(I3(a.url)){const{url:Ge,...Ze}=a;return{data:TO(Ge),...Ze}}AO()}return a},[a]);I.useEffect(()=>{const Ge=Sb(we());return Ge.promise.then(Ze=>{H({type:"RESOLVE",value:Ze})}).catch(Ze=>{H({type:"REJECT",error:Ze})}),()=>{Vf(Ge)}},[we,H]),I.useEffect(()=>{if(!(typeof ee>"u")){if(ee===!1){ne();return}W()}},[ee]);function Ne(){X&&(v&&v(X),Z.current=new Array(X.numPages),q.current.setDocument(X))}function je(){K&&(js(!1,K.toString()),y&&y(K))}I.useEffect(function(){V({type:"RESET"})},[V,ee]),I.useEffect(function(){if(!ee)return;const Ze=N?{...ee,...N}:ee,Mt=FM(Ze);b&&(Mt.onProgress=b),w&&(Mt.onPassword=w);const Te=Mt,Be=Te.promise.then(et=>{V({type:"RESOLVE",value:et})}).catch(et=>{Te.destroyed||V({type:"REJECT",error:et})});return()=>{Be.finally(()=>Te.destroy())}},[N,V,ee]),I.useEffect(()=>{if(!(typeof X>"u")){if(X===!1){je();return}Ne()}},[X]),I.useEffect(function(){q.current.setViewer(pe.current),q.current.setExternalLinkRel(s),q.current.setExternalLinkTarget(i)},[s,i]);const Me=I.useCallback((Ge,Ze)=>{Z.current[Ge]=Ze},[]),He=I.useCallback(Ge=>{delete Z.current[Ge]},[]),Ye=I.useMemo(()=>({imageResourcesPath:c,linkService:q.current,onItemClick:g,pdf:X,registerPage:Me,renderMode:A,rotate:k,scale:M,unregisterPage:He}),[c,g,X,Me,A,k,M,He]),Qe=I.useMemo(()=>z8(O,()=>X),[O,X]);function Ht(){function Ge(Mt){return!!(Mt!=null&&Mt.pdf)}if(!Ge(Ye))throw new Error("pdf is undefined");const Ze=typeof e=="function"?e(Ye):e;return f.jsx(H8.Provider,{value:Ye,children:Ze})}function En(){return a?X==null?f.jsx(pm,{type:"loading",children:typeof d=="function"?d():d}):X===!1?f.jsx(pm,{type:"error",children:typeof n=="function"?n():n}):Ht():f.jsx(pm,{type:"no-data",children:typeof h=="function"?h():h})}return f.jsx("div",{className:sE("react-pdf__Document",t),ref:o,...Qe,children:En()})});function V8(){return I.useContext(H8)}function q8(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(i){for(var a=0,o=t;a<o.length;a++){var c=o[a];typeof c=="function"?c(i):c&&(c.current=i)}}}const G8=I.createContext(null);function aE(){return I.useContext(G8)}function oq(){const r=V8(),e=aE();vn(e);const t={...r,...e},{imageResourcesPath:n,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:c,page:d,pdf:h,renderForms:g,rotate:y,scale:b=1}=t;vn(h),vn(d),vn(s);const[v,w]=Gg(),{value:E,error:C}=v,N=I.useRef(null);js(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){E&&a&&a(E)}function k(){C&&(js(!1,C.toString()),i&&i(C))}I.useEffect(function(){w({type:"RESET"})},[w,d]),I.useEffect(function(){if(!d)return;const H=Sb(d.getAnnotations()),ee=H;return H.promise.then(G=>{w({type:"RESOLVE",value:G})}).catch(G=>{w({type:"REJECT",error:G})}),()=>{Vf(ee)}},[w,d]),I.useEffect(()=>{if(E!==void 0){if(E===!1){k();return}A()}},[E]);function M(){c&&c()}function O(F){js(!1,`${F}`),o&&o(F)}const P=I.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);return I.useEffect(function(){if(!h||!d||!s||!E)return;const{current:H}=N;if(!H)return;const ee=P.clone({dontFlip:!0}),G={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:H,l10n:null,linkService:s,page:d,structTreeLayer:null,viewport:ee},J={annotations:E,annotationStorage:h.annotationStorage,div:H,imageResourcesPath:n,linkService:s,page:d,renderForms:g,viewport:ee};H.innerHTML="";try{new $M(G).render(J),M()}catch(V){O(V)}return()=>{}},[E,n,s,d,h,g,P]),f.jsx("div",{className:sE("react-pdf__Page__annotations","annotationLayer"),ref:N})}const W8={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},lq=/^H(\d+)$/;function cq(r){return r in W8}function oE(r){return"children"in r}function Y8(r){return oE(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function uq(r){const e={};if(oE(r)){const{role:t}=r,n=t.match(lq);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(cq(t)){const s=W8[t];s&&(e.role=s)}}return e}function X8(r){const e={};if(oE(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),Y8(r)){const[t]=r.children;if(t){const n=X8(t);return{...e,...n}}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function dq(r){return r?{...uq(r),...X8(r)}:null}function K8({className:r,node:e}){const t=I.useMemo(()=>dq(e),[e]),n=I.useMemo(()=>!oE(e)||Y8(e)?null:e.children.map((s,i)=>f.jsx(K8,{node:s},i)),[e]);return f.jsx("span",{className:r,...t,children:n})}function hq(){const r=aE();vn(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[n,s]=Gg(),{value:i,error:a}=n,{customTextRenderer:o,page:c}=r;function d(){i&&t&&t(i)}function h(){a&&(js(!1,a.toString()),e&&e(a))}return I.useEffect(function(){s({type:"RESET"})},[s,c]),I.useEffect(function(){if(o||!c)return;const y=Sb(c.getStructTree()),b=y;return y.promise.then(v=>{s({type:"RESOLVE",value:v})}).catch(v=>{s({type:"REJECT",error:v})}),()=>Vf(b)},[o,c,s]),I.useEffect(()=>{if(i!==void 0){if(i===!1){h();return}d()}},[i]),i?f.jsx(K8,{className:"react-pdf__Page__structTree structTree",node:i}):null}const kO=nl;function fq(r){const e=aE();vn(e);const t={...e,...r},{_className:n,canvasBackground:s,devicePixelRatio:i=eq(),onRenderError:a,onRenderSuccess:o,page:c,renderForms:d,renderTextLayer:h,rotate:g,scale:y}=t,{canvasRef:b}=r;vn(c);const v=I.useRef(null);function w(){c&&o&&o(B3(c,y))}function E(k){nq(k)||(js(!1,k.toString()),a&&a(k))}const C=I.useMemo(()=>c.getViewport({scale:y*i,rotation:g}),[i,c,g,y]),N=I.useMemo(()=>c.getViewport({scale:y,rotation:g}),[c,g,y]);I.useEffect(function(){if(!c)return;c.cleanup();const{current:M}=v;if(!M)return;M.width=C.width,M.height=C.height,M.style.width=`${Math.floor(N.width)}px`,M.style.height=`${Math.floor(N.height)}px`,M.style.visibility="hidden";const O={annotationMode:d?kO.ENABLE_FORMS:kO.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:C};s&&(O.background=s);const P=c.render(O),F=P;return P.promise.then(()=>{M.style.visibility="",w()}).catch(E),()=>Vf(F)},[s,c,d,C,N]);const A=I.useCallback(()=>{const{current:k}=v;k&&(k.width=0,k.height=0)},[]);return I.useEffect(()=>A,[A]),f.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:q8(b,v),style:{display:"block",userSelect:"none"},children:h?f.jsx(hq,{}):null})}function pq(r){return"str"in r}function mq(){const r=aE();vn(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:a,pageIndex:o,pageNumber:c,rotate:d,scale:h}=r;vn(a);const[g,y]=Gg(),{value:b,error:v}=g,w=I.useRef(null);js(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){b&&n&&n(b)}function C(){v&&(js(!1,v.toString()),t&&t(v))}I.useEffect(function(){y({type:"RESET"})},[a,y]),I.useEffect(function(){if(!a)return;const F=Sb(a.getTextContent()),H=F;return F.promise.then(ee=>{y({type:"RESOLVE",value:ee})}).catch(ee=>{y({type:"REJECT",error:ee})}),()=>Vf(H)},[a,y]),I.useEffect(()=>{if(b!==void 0){if(b===!1){C();return}E()}},[b]);const N=I.useCallback(()=>{i&&i()},[i]),A=I.useCallback(P=>{js(!1,P.toString()),s&&s(P)},[s]);function k(){const P=w.current;P&&P.classList.add("selecting")}function M(){const P=w.current;P&&P.classList.remove("selecting")}const O=I.useMemo(()=>a.getViewport({scale:h,rotation:d}),[a,d,h]);return I.useLayoutEffect(function(){if(!a||!b)return;const{current:F}=w;if(!F)return;F.innerHTML="";const H=a.streamTextContent({includeMarkedContent:!0}),ee={container:F,textContentSource:H,viewport:O},G=new bx(ee),J=G;return G.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",F.append(V);const X=F.querySelectorAll('[role="presentation"]');if(e){let K=0;b.items.forEach((q,Z)=>{if(!pq(q))return;const he=X[K];if(!he)return;const te=e({pageIndex:o,pageNumber:c,itemIndex:Z,...q});he.innerHTML=te,K+=q.str&&q.hasEOL?2:1})}N()}).catch(A),()=>Vf(J)},[e,A,N,a,o,c,b,O]),f.jsx("div",{className:sE("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:k,ref:w})}const MO=1;function gq(r){const t={...V8(),...r},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:a,children:o,className:c,customRenderer:d,customTextRenderer:h,devicePixelRatio:g,error:y="Failed to load the page.",height:b,inputRef:v,loading:w="Loading page…",noData:E="No page specified.",onGetAnnotationsError:C,onGetAnnotationsSuccess:N,onGetStructTreeError:A,onGetStructTreeSuccess:k,onGetTextError:M,onGetTextSuccess:O,onLoadError:P,onLoadSuccess:F,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:ee,onRenderError:G,onRenderSuccess:J,onRenderTextLayerError:V,onRenderTextLayerSuccess:X,pageIndex:K,pageNumber:q,pdf:Z,registerPage:he,renderAnnotationLayer:te=!0,renderForms:pe=!1,renderMode:W="canvas",renderTextLayer:ne=!0,rotate:me,scale:we=MO,unregisterPage:Ne,width:je,...Me}=t,[He,Ye]=Gg(),{value:Qe,error:Ht}=He,En=I.useRef(null);vn(Z);const Ge=oh(q)?q-1:K??null,Ze=q??(oh(K)?K+1:null),Mt=me??(Qe?Qe.rotate:null),Te=I.useMemo(()=>{if(!Qe)return null;let z=1;const _=we??MO;if(je||b){const D=Qe.getViewport({scale:1,rotation:Mt});je?z=je/D.width:b&&(z=b/D.height)}return _*z},[b,Qe,Mt,we,je]);I.useEffect(function(){return()=>{oh(Ge)&&s&&Ne&&Ne(Ge)}},[s,Z,Ge,Ne]);function Be(){if(F){if(!Qe||!Te)return;F(B3(Qe,Te))}if(s&&he){if(!oh(Ge)||!En.current)return;he(Ge,En.current)}}function et(){Ht&&(js(!1,Ht.toString()),P&&P(Ht))}I.useEffect(function(){Ye({type:"RESET"})},[Ye,Z,Ge]),I.useEffect(function(){if(!Z||!Ze)return;const _=Sb(Z.getPage(Ze)),D=_;return _.promise.then(Y=>{Ye({type:"RESOLVE",value:Y})}).catch(Y=>{Ye({type:"REJECT",error:Y})}),()=>Vf(D)},[Ye,Z,Ze]),I.useEffect(()=>{if(Qe!==void 0){if(Qe===!1){et();return}Be()}},[Qe,Te]);const mn=I.useMemo(()=>oh(Ge)&&Ze&&oh(Mt)&&oh(Te)?{_className:n,canvasBackground:i,customTextRenderer:h,devicePixelRatio:g,onGetAnnotationsError:C,onGetAnnotationsSuccess:N,onGetStructTreeError:A,onGetStructTreeSuccess:k,onGetTextError:M,onGetTextSuccess:O,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:ee,onRenderError:G,onRenderSuccess:J,onRenderTextLayerError:V,onRenderTextLayerSuccess:X,page:Qe,pageIndex:Ge,pageNumber:Ze,renderForms:pe,renderTextLayer:ne,rotate:Mt,scale:Te}:null,[n,i,h,g,C,N,A,k,M,O,H,ee,G,J,V,X,Qe,Ge,Ze,pe,ne,Mt,Te]),ar=I.useMemo(()=>z8(Me,()=>Qe&&(Te?B3(Qe,Te):void 0)),[Me,Qe,Te]),gn=`${Ge}@${Te}/${Mt}`;function an(){switch(W){case"custom":return vn(d),f.jsx(d,{},`${gn}_custom`);case"none":return null;case"canvas":default:return f.jsx(fq,{canvasRef:a},`${gn}_canvas`)}}function gi(){return ne?f.jsx(mq,{},`${gn}_text`):null}function Tn(){return te?f.jsx(oq,{},`${gn}_annotations`):null}function Nr(){function z(D){return!!(D!=null&&D.page)}if(!z(mn))throw new Error("page is undefined");const _=typeof o=="function"?o(mn):o;return f.jsxs(G8.Provider,{value:mn,children:[an(),gi(),Tn(),_]})}function Ks(){return Ze?Z===null||Qe===void 0||Qe===null?f.jsx(pm,{type:"loading",children:typeof w=="function"?w():w}):Z===!1||Qe===!1?f.jsx(pm,{type:"error",children:typeof y=="function"?y():y}):Nr():f.jsx(pm,{type:"no-data",children:typeof E=="function"?E():E})}return f.jsx("div",{className:sE(n,c),"data-page-number":Ze,ref:q8(v,En),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Te}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ar,children:Ks()})}tq();Da.workerSrc="pdf.worker.mjs";var QA={exports:{}},cy={},ZA={exports:{}},e2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function yq(){return _O||(_O=1,(function(r){function e(q,Z){var he=q.length;q.push(Z);e:for(;0<he;){var te=he-1>>>1,pe=q[te];if(0<s(pe,Z))q[te]=Z,q[he]=pe,he=te;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var Z=q[0],he=q.pop();if(he!==Z){q[0]=he;e:for(var te=0,pe=q.length,W=pe>>>1;te<W;){var ne=2*(te+1)-1,me=q[ne],we=ne+1,Ne=q[we];if(0>s(me,he))we<pe&&0>s(Ne,me)?(q[te]=Ne,q[we]=he,te=we):(q[te]=me,q[ne]=he,te=ne);else if(we<pe&&0>s(Ne,he))q[te]=Ne,q[we]=he,te=we;else break e}}return Z}function s(q,Z){var he=q.sortIndex-Z.sortIndex;return he!==0?he:q.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var c=[],d=[],h=1,g=null,y=3,b=!1,v=!1,w=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(q){for(var Z=t(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=q)n(d),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(d)}}function M(q){if(w=!1,k(q),!v)if(t(c)!==null)v=!0,O||(O=!0,J());else{var Z=t(d);Z!==null&&K(M,Z.startTime-q)}}var O=!1,P=-1,F=5,H=-1;function ee(){return E?!0:!(r.unstable_now()-H<F)}function G(){if(E=!1,O){var q=r.unstable_now();H=q;var Z=!0;try{e:{v=!1,w&&(w=!1,N(P),P=-1),b=!0;var he=y;try{t:{for(k(q),g=t(c);g!==null&&!(g.expirationTime>q&&ee());){var te=g.callback;if(typeof te=="function"){g.callback=null,y=g.priorityLevel;var pe=te(g.expirationTime<=q);if(q=r.unstable_now(),typeof pe=="function"){g.callback=pe,k(q),Z=!0;break t}g===t(c)&&n(c),k(q)}else n(c);g=t(c)}if(g!==null)Z=!0;else{var W=t(d);W!==null&&K(M,W.startTime-q),Z=!1}}break e}finally{g=null,y=he,b=!1}Z=void 0}}finally{Z?J():O=!1}}}var J;if(typeof A=="function")J=function(){A(G)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=G,J=function(){X.postMessage(null)}}else J=function(){C(G,0)};function K(q,Z){P=C(function(){q(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(q){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var he=y;y=Z;try{return q()}finally{y=he}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var he=y;y=q;try{return Z()}finally{y=he}},r.unstable_scheduleCallback=function(q,Z,he){var te=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?te+he:te):he=te,q){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=he+pe,q={id:h++,callback:Z,priorityLevel:q,startTime:he,expirationTime:pe,sortIndex:-1},he>te?(q.sortIndex=he,e(d,q),t(c)===null&&q===t(d)&&(w?(N(P),P=-1):w=!0,K(M,he-te))):(q.sortIndex=pe,e(c,q),v||b||(v=!0,O||(O=!0,J()))),q},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(q){var Z=y;return function(){var he=y;y=Z;try{return q.apply(this,arguments)}finally{y=he}}}})(e2)),e2}var jO;function xq(){return jO||(jO=1,ZA.exports=yq()),ZA.exports}var t2={exports:{}},ws={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function bq(){if(DO)return ws;DO=1;var r=tp();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:c,containerInfo:d,implementation:h}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ws.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ws.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(c,d,null,h)},ws.flushSync=function(c){var d=a.T,h=n.p;try{if(a.T=null,n.p=2,c)return c()}finally{a.T=d,n.p=h,n.d.f()}},ws.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},ws.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},ws.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,g=o(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):h==="script"&&n.d.X(c,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ws.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=o(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},ws.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=o(h,d.crossOrigin);n.d.L(c,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ws.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=o(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},ws.requestFormReset=function(c){n.d.r(c)},ws.unstable_batchedUpdates=function(c,d){return c(d)},ws.useFormState=function(c,d,h){return a.H.useFormState(c,d,h)},ws.useFormStatus=function(){return a.H.useHostTransitionStatus()},ws.version="19.2.3",ws}var OO;function J8(){if(OO)return t2.exports;OO=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),t2.exports=bq(),t2.exports}var RO;function vq(){if(RO)return cy;RO=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=xq(),e=tp(),t=J8();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function a(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(i(l)!==l)throw Error(n(188))}function d(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var p=l,x=u;;){var S=p.return;if(S===null)break;var T=S.alternate;if(T===null){if(x=S.return,x!==null){p=x;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===p)return c(S),l;if(T===x)return c(S),u;T=T.sibling}throw Error(n(188))}if(p.return!==x.return)p=S,x=T;else{for(var R=!1,U=S.child;U;){if(U===p){R=!0,p=S,x=T;break}if(U===x){R=!0,x=S,p=T;break}U=U.sibling}if(!R){for(U=T.child;U;){if(U===p){R=!0,p=T,x=S;break}if(U===x){R=!0,x=T,p=S;break}U=U.sibling}if(!R)throw Error(n(189))}}if(p.alternate!==x)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function J(l){return l===null||typeof l!="object"?null:(l=G&&l[G]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function X(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList";case H:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case v:return"Portal";case A:return l.displayName||"Context";case N:return(l._context.displayName||"Context")+".Consumer";case k:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return u=l.displayName||null,u!==null?u:X(l.type)||"Memo";case F:u=l._payload,l=l._init;try{return X(l(u))}catch{}}return null}var K=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},te=[],pe=-1;function W(l){return{current:l}}function ne(l){0>pe||(l.current=te[pe],te[pe]=null,pe--)}function me(l,u){pe++,te[pe]=l.current,l.current=u}var we=W(null),Ne=W(null),je=W(null),Me=W(null);function He(l,u){switch(me(je,u),me(Ne,l),me(we,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?lD(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=lD(u),l=cD(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(we),me(we,l)}function Ye(){ne(we),ne(Ne),ne(je)}function Qe(l){l.memoizedState!==null&&me(Me,l);var u=we.current,p=cD(u,l.type);u!==p&&(me(Ne,l),me(we,p))}function Ht(l){Ne.current===l&&(ne(we),ne(Ne)),Me.current===l&&(ne(Me),Z0._currentValue=he)}var En,Ge;function Ze(l){if(En===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);En=u&&u[1]||"",Ge=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+En+l+Ge}var Mt=!1;function Te(l,u){if(!l||Mt)return"";Mt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(u){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(ge){var fe=ge}Reflect.construct(l,[],ve)}else{try{ve.call()}catch(ge){fe=ge}l.call(ve.prototype)}}else{try{throw Error()}catch(ge){fe=ge}(ve=l())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(ge){if(ge&&fe&&typeof ge.stack=="string")return[ge.stack,fe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=x.DetermineComponentFrameRoot(),R=T[0],U=T[1];if(R&&U){var Q=R.split(`
`),ue=U.split(`
`);for(S=x=0;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;for(;S<ue.length&&!ue[S].includes("DetermineComponentFrameRoot");)S++;if(x===Q.length||S===ue.length)for(x=Q.length-1,S=ue.length-1;1<=x&&0<=S&&Q[x]!==ue[S];)S--;for(;1<=x&&0<=S;x--,S--)if(Q[x]!==ue[S]){if(x!==1||S!==1)do if(x--,S--,0>S||Q[x]!==ue[S]){var ye=`
`+Q[x].replace(" at new "," at ");return l.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",l.displayName)),ye}while(1<=x&&0<=S);break}}}finally{Mt=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ze(p):""}function Be(l,u){switch(l.tag){case 26:case 27:case 5:return Ze(l.type);case 16:return Ze("Lazy");case 13:return l.child!==u&&u!==null?Ze("Suspense Fallback"):Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 15:return Te(l.type,!1);case 11:return Te(l.type.render,!1);case 1:return Te(l.type,!0);case 31:return Ze("Activity");default:return""}}function et(l){try{var u="",p=null;do u+=Be(l,p),p=l,l=l.return;while(l);return u}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var mn=Object.prototype.hasOwnProperty,ar=r.unstable_scheduleCallback,gn=r.unstable_cancelCallback,an=r.unstable_shouldYield,gi=r.unstable_requestPaint,Tn=r.unstable_now,Nr=r.unstable_getCurrentPriorityLevel,Ks=r.unstable_ImmediatePriority,z=r.unstable_UserBlockingPriority,_=r.unstable_NormalPriority,D=r.unstable_LowPriority,Y=r.unstable_IdlePriority,se=r.log,oe=r.unstable_setDisableYieldValue,xe=null,$e=null;function wt(l){if(typeof se=="function"&&oe(l),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(xe,l)}catch{}}var lt=Math.clz32?Math.clz32:ap,Gt=Math.log,_t=Math.LN2;function ap(l){return l>>>=0,l===0?32:31-(Gt(l)/_t|0)|0}var gr=256,hl=262144,yi=4194304;function Ce(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function rt(l,u,p){var x=l.pendingLanes;if(x===0)return 0;var S=0,T=l.suspendedLanes,R=l.pingedLanes;l=l.warmLanes;var U=x&134217727;return U!==0?(x=U&~T,x!==0?S=Ce(x):(R&=U,R!==0?S=Ce(R):p||(p=U&~l,p!==0&&(S=Ce(p))))):(U=x&~T,U!==0?S=Ce(U):R!==0?S=Ce(R):p||(p=x&~l,p!==0&&(S=Ce(p)))),S===0?0:u!==0&&u!==S&&(u&T)===0&&(T=S&-S,p=u&-u,T>=p||T===32&&(p&4194048)!==0)?u:S}function Pt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Rs(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var l=yi;return yi<<=1,(yi&62914560)===0&&(yi=4194304),l}function Ls(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function na(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Ln(l,u,p,x,S,T){var R=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var U=l.entanglements,Q=l.expirationTimes,ue=l.hiddenUpdates;for(p=R&~p;0<p;){var ye=31-lt(p),ve=1<<ye;U[ye]=0,Q[ye]=-1;var fe=ue[ye];if(fe!==null)for(ue[ye]=null,ye=0;ye<fe.length;ye++){var ge=fe[ye];ge!==null&&(ge.lane&=-536870913)}p&=~ve}x!==0&&Js(l,x,0),T!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=T&~(R&~u))}function Js(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var x=31-lt(u);l.entangledLanes|=u,l.entanglements[x]=l.entanglements[x]|1073741824|p&261930}function Fc(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var x=31-lt(p),S=1<<x;S&u|l[x]&u&&(l[x]|=u),p&=~S}}function Ob(l,u){var p=u&-u;return p=(p&42)!==0?1:op(p),(p&(l.suspendedLanes|u))!==0?0:p}function op(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function d0(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Rb(){var l=Z.p;return l!==0?l:(l=window.event,l===void 0?32:DD(l.type))}function h0(l,u){var p=Z.p;try{return Z.p=l,u()}finally{Z.p=p}}var xo=Math.random().toString(36).slice(2),kr="__reactFiber$"+xo,vs="__reactProps$"+xo,zc="__reactContainer$"+xo,f0="__reactEvents$"+xo,jE="__reactListeners$"+xo,DE="__reactHandles$"+xo,p0="__reactResources$"+xo,$d="__reactMarker$"+xo;function m0(l){delete l[kr],delete l[vs],delete l[f0],delete l[jE],delete l[DE]}function zr(l){var u=l[kr];if(u)return u;for(var p=l.parentNode;p;){if(u=p[zc]||p[kr]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=gD(l);l!==null;){if(p=l[kr])return p;l=gD(l)}return u}l=p,p=l.parentNode}return null}function bo(l){if(l=l[kr]||l[zc]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Vd(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Hc(l){var u=l[p0];return u||(u=l[p0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Yn(l){l[$d]=!0}var Lb=new Set,Pb={};function Hr(l,u){Ur(l,u),Ur(l+"Capture",u)}function Ur(l,u){for(Pb[l]=u,l=0;l<u.length;l++)Lb.add(u[l])}var OE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ib={},Bb={};function RE(l){return mn.call(Bb,l)?!0:mn.call(Ib,l)?!1:OE.test(l)?Bb[l]=!0:(Ib[l]=!0,!1)}function $(l,u,p){if(RE(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var x=u.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function ae(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function Se(l,u,p,x){if(x===null)l.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+x)}}function de(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function _e(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Xe(l,u,p){var x=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var S=x.get,T=x.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return S.call(this)},set:function(R){p=""+R,T.call(this,R)}}),Object.defineProperty(l,u,{enumerable:x.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function st(l){if(!l._valueTracker){var u=_e(l)?"checked":"value";l._valueTracker=Xe(l,u,""+l[u])}}function gt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),x="";return l&&(x=_e(l)?l.checked?"true":"false":l.value),l=x,l!==p?(u.setValue(l),!0):!1}function Tt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var An=/[\n"\\]/g;function yt(l){return l.replace(An,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Mn(l,u,p,x,S,T,R,U){l.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?l.type=R:l.removeAttribute("type"),u!=null?R==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+de(u)):l.value!==""+de(u)&&(l.value=""+de(u)):R!=="submit"&&R!=="reset"||l.removeAttribute("value"),u!=null?$r(l,R,de(u)):p!=null?$r(l,R,de(p)):x!=null&&l.removeAttribute("value"),S==null&&T!=null&&(l.defaultChecked=!!T),S!=null&&(l.checked=S&&typeof S!="function"&&typeof S!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.name=""+de(U):l.removeAttribute("name")}function Xn(l,u,p,x,S,T,R,U){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),u!=null||p!=null){if(!(T!=="submit"&&T!=="reset"||u!=null)){st(l);return}p=p!=null?""+de(p):"",u=u!=null?""+de(u):p,U||u===l.value||(l.value=u),l.defaultValue=u}x=x??S,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=U?l.checked:!!x,l.defaultChecked=!!x,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(l.name=R),st(l)}function $r(l,u,p){u==="number"&&Tt(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function xi(l,u,p,x){if(l=l.options,u){u={};for(var S=0;S<p.length;S++)u["$"+p[S]]=!0;for(p=0;p<l.length;p++)S=u.hasOwnProperty("$"+l[p].value),l[p].selected!==S&&(l[p].selected=S),S&&x&&(l[p].defaultSelected=!0)}else{for(p=""+de(p),u=null,S=0;S<l.length;S++){if(l[S].value===p){l[S].selected=!0,x&&(l[S].defaultSelected=!0);return}u!==null||l[S].disabled||(u=l[S])}u!==null&&(u.selected=!0)}}function za(l,u,p){if(u!=null&&(u=""+de(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+de(p):""}function Ha(l,u,p,x){if(u==null){if(x!=null){if(p!=null)throw Error(n(92));if(K(x)){if(1<x.length)throw Error(n(93));x=x[0]}p=x}p==null&&(p=""),u=p}p=de(u),l.defaultValue=p,x=l.textContent,x===p&&x!==""&&x!==null&&(l.value=x),st(l)}function It(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ua(l,u,p){var x=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?x?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":x?l.setProperty(u,p):typeof p!="number"||p===0||Uc.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function vo(l,u,p){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,p!=null){for(var x in p)!p.hasOwnProperty(x)||u!=null&&u.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var S in u)x=u[S],u.hasOwnProperty(S)&&p[S]!==x&&Ua(l,S,x)}else for(var T in u)u.hasOwnProperty(T)&&Ua(l,T,u[T])}function yr(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ra=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(l){return $a.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ia(){}var LE=null;function PE(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var lp=null,cp=null;function oj(l){var u=bo(l);if(u&&(l=u.stateNode)){var p=l[vs]||null;e:switch(l=u.stateNode,u.type){case"input":if(Mn(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+yt(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var x=p[u];if(x!==l&&x.form===l.form){var S=x[vs]||null;if(!S)throw Error(n(90));Mn(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<p.length;u++)x=p[u],x.form===l.form&&gt(x)}break e;case"textarea":za(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&xi(l,!!p.multiple,u,!1)}}}var IE=!1;function lj(l,u,p){if(IE)return l(u,p);IE=!0;try{var x=l(u);return x}finally{if(IE=!1,(lp!==null||cp!==null)&&(Tv(),lp&&(u=lp,l=cp,cp=lp=null,oj(u),l)))for(u=0;u<l.length;u++)oj(l[u])}}function g0(l,u){var p=l.stateNode;if(p===null)return null;var x=p[vs]||null;if(x===null)return null;p=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BE=!1;if(fl)try{var y0={};Object.defineProperty(y0,"passive",{get:function(){BE=!0}}),window.addEventListener("test",y0,y0),window.removeEventListener("test",y0,y0)}catch{BE=!1}var $c=null,FE=null,Fb=null;function cj(){if(Fb)return Fb;var l,u=FE,p=u.length,x,S="value"in $c?$c.value:$c.textContent,T=S.length;for(l=0;l<p&&u[l]===S[l];l++);var R=p-l;for(x=1;x<=R&&u[p-x]===S[T-x];x++);return Fb=S.slice(l,1<x?1-x:void 0)}function zb(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Hb(){return!0}function uj(){return!1}function Qs(l){function u(p,x,S,T,R){this._reactName=p,this._targetInst=S,this.type=x,this.nativeEvent=T,this.target=R,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(p=l[U],this[U]=p?p(T):T[U]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Hb:uj,this.isPropagationStopped=uj,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Hb)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Hb)},persist:function(){},isPersistent:Hb}),u}var qd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ub=Qs(qd),x0=g({},qd,{view:0,detail:0}),Tz=Qs(x0),zE,HE,b0,$b=g({},x0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$E,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==b0&&(b0&&l.type==="mousemove"?(zE=l.screenX-b0.screenX,HE=l.screenY-b0.screenY):HE=zE=0,b0=l),zE)},movementY:function(l){return"movementY"in l?l.movementY:HE}}),dj=Qs($b),Az=g({},$b,{dataTransfer:0}),Nz=Qs(Az),kz=g({},x0,{relatedTarget:0}),UE=Qs(kz),Mz=g({},qd,{animationName:0,elapsedTime:0,pseudoElement:0}),_z=Qs(Mz),jz=g({},qd,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Dz=Qs(jz),Oz=g({},qd,{data:0}),hj=Qs(Oz),Rz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iz(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Pz[l])?!!u[l]:!1}function $E(){return Iz}var Bz=g({},x0,{key:function(l){if(l.key){var u=Rz[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=zb(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Lz[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$E,charCode:function(l){return l.type==="keypress"?zb(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?zb(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fz=Qs(Bz),zz=g({},$b,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fj=Qs(zz),Hz=g({},x0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$E}),Uz=Qs(Hz),$z=g({},qd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vz=Qs($z),qz=g({},$b,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Gz=Qs(qz),Wz=g({},qd,{newState:0,oldState:0}),Yz=Qs(Wz),Xz=[9,13,27,32],VE=fl&&"CompositionEvent"in window,v0=null;fl&&"documentMode"in document&&(v0=document.documentMode);var Kz=fl&&"TextEvent"in window&&!v0,pj=fl&&(!VE||v0&&8<v0&&11>=v0),mj=" ",gj=!1;function yj(l,u){switch(l){case"keyup":return Xz.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xj(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var up=!1;function Jz(l,u){switch(l){case"compositionend":return xj(u);case"keypress":return u.which!==32?null:(gj=!0,mj);case"textInput":return l=u.data,l===mj&&gj?null:l;default:return null}}function Qz(l,u){if(up)return l==="compositionend"||!VE&&yj(l,u)?(l=cj(),Fb=FE=$c=null,up=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return pj&&u.locale!=="ko"?null:u.data;default:return null}}var Zz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bj(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Zz[l.type]:u==="textarea"}function vj(l,u,p,x){lp?cp?cp.push(x):cp=[x]:lp=x,u=Dv(u,"onChange"),0<u.length&&(p=new Ub("onChange","change",null,p,x),l.push({event:p,listeners:u}))}var w0=null,S0=null;function eH(l){nD(l,0)}function Vb(l){var u=Vd(l);if(gt(u))return l}function wj(l,u){if(l==="change")return u}var Sj=!1;if(fl){var qE;if(fl){var GE="oninput"in document;if(!GE){var Cj=document.createElement("div");Cj.setAttribute("oninput","return;"),GE=typeof Cj.oninput=="function"}qE=GE}else qE=!1;Sj=qE&&(!document.documentMode||9<document.documentMode)}function Ej(){w0&&(w0.detachEvent("onpropertychange",Tj),S0=w0=null)}function Tj(l){if(l.propertyName==="value"&&Vb(S0)){var u=[];vj(u,S0,l,PE(l)),lj(eH,u)}}function tH(l,u,p){l==="focusin"?(Ej(),w0=u,S0=p,w0.attachEvent("onpropertychange",Tj)):l==="focusout"&&Ej()}function nH(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Vb(S0)}function rH(l,u){if(l==="click")return Vb(u)}function sH(l,u){if(l==="input"||l==="change")return Vb(u)}function iH(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var bi=typeof Object.is=="function"?Object.is:iH;function C0(l,u){if(bi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),x=Object.keys(u);if(p.length!==x.length)return!1;for(x=0;x<p.length;x++){var S=p[x];if(!mn.call(u,S)||!bi(l[S],u[S]))return!1}return!0}function Aj(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Nj(l,u){var p=Aj(l);l=0;for(var x;p;){if(p.nodeType===3){if(x=l+p.textContent.length,l<=u&&x>=u)return{node:p,offset:u-l};l=x}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Aj(p)}}function kj(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?kj(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Mj(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Tt(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=Tt(l.document)}return u}function WE(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var aH=fl&&"documentMode"in document&&11>=document.documentMode,dp=null,YE=null,E0=null,XE=!1;function _j(l,u,p){var x=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;XE||dp==null||dp!==Tt(x)||(x=dp,"selectionStart"in x&&WE(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),E0&&C0(E0,x)||(E0=x,x=Dv(YE,"onSelect"),0<x.length&&(u=new Ub("onSelect","select",null,u,p),l.push({event:u,listeners:x}),u.target=dp)))}function Gd(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var hp={animationend:Gd("Animation","AnimationEnd"),animationiteration:Gd("Animation","AnimationIteration"),animationstart:Gd("Animation","AnimationStart"),transitionrun:Gd("Transition","TransitionRun"),transitionstart:Gd("Transition","TransitionStart"),transitioncancel:Gd("Transition","TransitionCancel"),transitionend:Gd("Transition","TransitionEnd")},KE={},jj={};fl&&(jj=document.createElement("div").style,"AnimationEvent"in window||(delete hp.animationend.animation,delete hp.animationiteration.animation,delete hp.animationstart.animation),"TransitionEvent"in window||delete hp.transitionend.transition);function Wd(l){if(KE[l])return KE[l];if(!hp[l])return l;var u=hp[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in jj)return KE[l]=u[p];return l}var Dj=Wd("animationend"),Oj=Wd("animationiteration"),Rj=Wd("animationstart"),oH=Wd("transitionrun"),lH=Wd("transitionstart"),cH=Wd("transitioncancel"),Lj=Wd("transitionend"),Pj=new Map,JE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");JE.push("scrollEnd");function Va(l,u){Pj.set(l,u),Hr(u,[l])}var qb=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},aa=[],fp=0,QE=0;function Gb(){for(var l=fp,u=QE=fp=0;u<l;){var p=aa[u];aa[u++]=null;var x=aa[u];aa[u++]=null;var S=aa[u];aa[u++]=null;var T=aa[u];if(aa[u++]=null,x!==null&&S!==null){var R=x.pending;R===null?S.next=S:(S.next=R.next,R.next=S),x.pending=S}T!==0&&Ij(p,S,T)}}function Wb(l,u,p,x){aa[fp++]=l,aa[fp++]=u,aa[fp++]=p,aa[fp++]=x,QE|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function ZE(l,u,p,x){return Wb(l,u,p,x),Yb(l)}function Yd(l,u){return Wb(l,null,null,u),Yb(l)}function Ij(l,u,p){l.lanes|=p;var x=l.alternate;x!==null&&(x.lanes|=p);for(var S=!1,T=l.return;T!==null;)T.childLanes|=p,x=T.alternate,x!==null&&(x.childLanes|=p),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(S=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,S&&u!==null&&(S=31-lt(p),l=T.hiddenUpdates,x=l[S],x===null?l[S]=[u]:x.push(u),u.lane=p|536870912),T):null}function Yb(l){if(50<G0)throw G0=0,lA=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var pp={};function uH(l,u,p,x){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vi(l,u,p,x){return new uH(l,u,p,x)}function eT(l){return l=l.prototype,!(!l||!l.isReactComponent)}function pl(l,u){var p=l.alternate;return p===null?(p=vi(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function Bj(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Xb(l,u,p,x,S,T){var R=0;if(x=l,typeof l=="function")eT(l)&&(R=1);else if(typeof l=="string")R=mU(l,p,we.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case H:return l=vi(31,p,u,S),l.elementType=H,l.lanes=T,l;case w:return Xd(p.children,S,T,u);case E:R=8,S|=24;break;case C:return l=vi(12,p,u,S|2),l.elementType=C,l.lanes=T,l;case M:return l=vi(13,p,u,S),l.elementType=M,l.lanes=T,l;case O:return l=vi(19,p,u,S),l.elementType=O,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case A:R=10;break e;case N:R=9;break e;case k:R=11;break e;case P:R=14;break e;case F:R=16,x=null;break e}R=29,p=Error(n(130,l===null?"null":typeof l,"")),x=null}return u=vi(R,p,u,S),u.elementType=l,u.type=x,u.lanes=T,u}function Xd(l,u,p,x){return l=vi(7,l,x,u),l.lanes=p,l}function tT(l,u,p){return l=vi(6,l,null,u),l.lanes=p,l}function Fj(l){var u=vi(18,null,null,0);return u.stateNode=l,u}function nT(l,u,p){return u=vi(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var zj=new WeakMap;function oa(l,u){if(typeof l=="object"&&l!==null){var p=zj.get(l);return p!==void 0?p:(u={value:l,source:u,stack:et(u)},zj.set(l,u),u)}return{value:l,source:u,stack:et(u)}}var mp=[],gp=0,Kb=null,T0=0,la=[],ca=0,Vc=null,wo=1,So="";function ml(l,u){mp[gp++]=T0,mp[gp++]=Kb,Kb=l,T0=u}function Hj(l,u,p){la[ca++]=wo,la[ca++]=So,la[ca++]=Vc,Vc=l;var x=wo;l=So;var S=32-lt(x)-1;x&=~(1<<S),p+=1;var T=32-lt(u)+S;if(30<T){var R=S-S%5;T=(x&(1<<R)-1).toString(32),x>>=R,S-=R,wo=1<<32-lt(u)+S|p<<S|x,So=T+l}else wo=1<<T|p<<S|x,So=l}function rT(l){l.return!==null&&(ml(l,1),Hj(l,1,0))}function sT(l){for(;l===Kb;)Kb=mp[--gp],mp[gp]=null,T0=mp[--gp],mp[gp]=null;for(;l===Vc;)Vc=la[--ca],la[ca]=null,So=la[--ca],la[ca]=null,wo=la[--ca],la[ca]=null}function Uj(l,u){la[ca++]=wo,la[ca++]=So,la[ca++]=Vc,wo=u.id,So=u.overflow,Vc=l}var rs=null,_n=null,jt=!1,qc=null,ua=!1,iT=Error(n(519));function Gc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw A0(oa(u,l)),iT}function $j(l){var u=l.stateNode,p=l.type,x=l.memoizedProps;switch(u[kr]=l,u[vs]=x,p){case"dialog":Ct("cancel",u),Ct("close",u);break;case"iframe":case"object":case"embed":Ct("load",u);break;case"video":case"audio":for(p=0;p<Y0.length;p++)Ct(Y0[p],u);break;case"source":Ct("error",u);break;case"img":case"image":case"link":Ct("error",u),Ct("load",u);break;case"details":Ct("toggle",u);break;case"input":Ct("invalid",u),Xn(u,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":Ct("invalid",u);break;case"textarea":Ct("invalid",u),Ha(u,x.value,x.defaultValue,x.children)}p=x.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||x.suppressHydrationWarning===!0||aD(u.textContent,p)?(x.popover!=null&&(Ct("beforetoggle",u),Ct("toggle",u)),x.onScroll!=null&&Ct("scroll",u),x.onScrollEnd!=null&&Ct("scrollend",u),x.onClick!=null&&(u.onclick=ia),u=!0):u=!1,u||Gc(l,!0)}function Vj(l){for(rs=l.return;rs;)switch(rs.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:rs=rs.return}}function yp(l){if(l!==rs)return!1;if(!jt)return Vj(l),jt=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||CA(l.type,l.memoizedProps)),p=!p),p&&_n&&Gc(l),Vj(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));_n=mD(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));_n=mD(l)}else u===27?(u=_n,au(l.type)?(l=kA,kA=null,_n=l):_n=u):_n=rs?ha(l.stateNode.nextSibling):null;return!0}function Kd(){_n=rs=null,jt=!1}function aT(){var l=qc;return l!==null&&(ni===null?ni=l:ni.push.apply(ni,l),qc=null),l}function A0(l){qc===null?qc=[l]:qc.push(l)}var oT=W(null),Jd=null,gl=null;function Wc(l,u,p){me(oT,u._currentValue),u._currentValue=p}function yl(l){l._currentValue=oT.current,ne(oT)}function lT(l,u,p){for(;l!==null;){var x=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),l===p)break;l=l.return}}function cT(l,u,p,x){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var T=S.dependencies;if(T!==null){var R=S.child;T=T.firstContext;e:for(;T!==null;){var U=T;T=S;for(var Q=0;Q<u.length;Q++)if(U.context===u[Q]){T.lanes|=p,U=T.alternate,U!==null&&(U.lanes|=p),lT(T.return,p,l),x||(R=null);break e}T=U.next}}else if(S.tag===18){if(R=S.return,R===null)throw Error(n(341));R.lanes|=p,T=R.alternate,T!==null&&(T.lanes|=p),lT(R,p,l),R=null}else R=S.child;if(R!==null)R.return=S;else for(R=S;R!==null;){if(R===l){R=null;break}if(S=R.sibling,S!==null){S.return=R.return,R=S;break}R=R.return}S=R}}function xp(l,u,p,x){l=null;for(var S=u,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var R=S.alternate;if(R===null)throw Error(n(387));if(R=R.memoizedProps,R!==null){var U=S.type;bi(S.pendingProps.value,R.value)||(l!==null?l.push(U):l=[U])}}else if(S===Me.current){if(R=S.alternate,R===null)throw Error(n(387));R.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Z0):l=[Z0])}S=S.return}l!==null&&cT(u,l,p,x),u.flags|=262144}function Jb(l){for(l=l.firstContext;l!==null;){if(!bi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Qd(l){Jd=l,gl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ss(l){return qj(Jd,l)}function Qb(l,u){return Jd===null&&Qd(l),qj(l,u)}function qj(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},gl===null){if(l===null)throw Error(n(308));gl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else gl=gl.next=u;return p}var dH=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,x){l.push(x)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},hH=r.unstable_scheduleCallback,fH=r.unstable_NormalPriority,xr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uT(){return{controller:new dH,data:new Map,refCount:0}}function N0(l){l.refCount--,l.refCount===0&&hH(fH,function(){l.controller.abort()})}var k0=null,dT=0,bp=0,vp=null;function pH(l,u){if(k0===null){var p=k0=[];dT=0,bp=pA(),vp={status:"pending",value:void 0,then:function(x){p.push(x)}}}return dT++,u.then(Gj,Gj),u}function Gj(){if(--dT===0&&k0!==null){vp!==null&&(vp.status="fulfilled");var l=k0;k0=null,bp=0,vp=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function mH(l,u){var p=[],x={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){x.status="fulfilled",x.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(x.status="rejected",x.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),x}var Wj=q.S;q.S=function(l,u){_4=Tn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&pH(l,u),Wj!==null&&Wj(l,u)};var Zd=W(null);function hT(){var l=Zd.current;return l!==null?l:yn.pooledCache}function Zb(l,u){u===null?me(Zd,Zd.current):me(Zd,u.pool)}function Yj(){var l=hT();return l===null?null:{parent:xr._currentValue,pool:l}}var wp=Error(n(460)),fT=Error(n(474)),ev=Error(n(542)),tv={then:function(){}};function Xj(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Kj(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(ia,ia),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Qj(l),l;default:if(typeof u.status=="string")u.then(ia,ia);else{if(l=yn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(x){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=x}},function(x){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=x}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,Qj(l),l}throw th=u,wp}}function eh(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(th=p,wp):p}}var th=null;function Jj(){if(th===null)throw Error(n(459));var l=th;return th=null,l}function Qj(l){if(l===wp||l===ev)throw Error(n(483))}var Sp=null,M0=0;function nv(l){var u=M0;return M0+=1,Sp===null&&(Sp=[]),Kj(Sp,l,u)}function _0(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function rv(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Zj(l){function u(ie,re){if(l){var ce=ie.deletions;ce===null?(ie.deletions=[re],ie.flags|=16):ce.push(re)}}function p(ie,re){if(!l)return null;for(;re!==null;)u(ie,re),re=re.sibling;return null}function x(ie){for(var re=new Map;ie!==null;)ie.key!==null?re.set(ie.key,ie):re.set(ie.index,ie),ie=ie.sibling;return re}function S(ie,re){return ie=pl(ie,re),ie.index=0,ie.sibling=null,ie}function T(ie,re,ce){return ie.index=ce,l?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<re?(ie.flags|=67108866,re):ce):(ie.flags|=67108866,re)):(ie.flags|=1048576,re)}function R(ie){return l&&ie.alternate===null&&(ie.flags|=67108866),ie}function U(ie,re,ce,be){return re===null||re.tag!==6?(re=tT(ce,ie.mode,be),re.return=ie,re):(re=S(re,ce),re.return=ie,re)}function Q(ie,re,ce,be){var Ve=ce.type;return Ve===w?ye(ie,re,ce.props.children,be,ce.key):re!==null&&(re.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===F&&eh(Ve)===re.type)?(re=S(re,ce.props),_0(re,ce),re.return=ie,re):(re=Xb(ce.type,ce.key,ce.props,null,ie.mode,be),_0(re,ce),re.return=ie,re)}function ue(ie,re,ce,be){return re===null||re.tag!==4||re.stateNode.containerInfo!==ce.containerInfo||re.stateNode.implementation!==ce.implementation?(re=nT(ce,ie.mode,be),re.return=ie,re):(re=S(re,ce.children||[]),re.return=ie,re)}function ye(ie,re,ce,be,Ve){return re===null||re.tag!==7?(re=Xd(ce,ie.mode,be,Ve),re.return=ie,re):(re=S(re,ce),re.return=ie,re)}function ve(ie,re,ce){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=tT(""+re,ie.mode,ce),re.return=ie,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return ce=Xb(re.type,re.key,re.props,null,ie.mode,ce),_0(ce,re),ce.return=ie,ce;case v:return re=nT(re,ie.mode,ce),re.return=ie,re;case F:return re=eh(re),ve(ie,re,ce)}if(K(re)||J(re))return re=Xd(re,ie.mode,ce,null),re.return=ie,re;if(typeof re.then=="function")return ve(ie,nv(re),ce);if(re.$$typeof===A)return ve(ie,Qb(ie,re),ce);rv(ie,re)}return null}function fe(ie,re,ce,be){var Ve=re!==null?re.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ve!==null?null:U(ie,re,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return ce.key===Ve?Q(ie,re,ce,be):null;case v:return ce.key===Ve?ue(ie,re,ce,be):null;case F:return ce=eh(ce),fe(ie,re,ce,be)}if(K(ce)||J(ce))return Ve!==null?null:ye(ie,re,ce,be,null);if(typeof ce.then=="function")return fe(ie,re,nv(ce),be);if(ce.$$typeof===A)return fe(ie,re,Qb(ie,ce),be);rv(ie,ce)}return null}function ge(ie,re,ce,be,Ve){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ie=ie.get(ce)||null,U(re,ie,""+be,Ve);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case b:return ie=ie.get(be.key===null?ce:be.key)||null,Q(re,ie,be,Ve);case v:return ie=ie.get(be.key===null?ce:be.key)||null,ue(re,ie,be,Ve);case F:return be=eh(be),ge(ie,re,ce,be,Ve)}if(K(be)||J(be))return ie=ie.get(ce)||null,ye(re,ie,be,Ve,null);if(typeof be.then=="function")return ge(ie,re,ce,nv(be),Ve);if(be.$$typeof===A)return ge(ie,re,ce,Qb(re,be),Ve);rv(re,be)}return null}function Pe(ie,re,ce,be){for(var Ve=null,Bt=null,Fe=re,ht=re=0,Nt=null;Fe!==null&&ht<ce.length;ht++){Fe.index>ht?(Nt=Fe,Fe=null):Nt=Fe.sibling;var Ft=fe(ie,Fe,ce[ht],be);if(Ft===null){Fe===null&&(Fe=Nt);break}l&&Fe&&Ft.alternate===null&&u(ie,Fe),re=T(Ft,re,ht),Bt===null?Ve=Ft:Bt.sibling=Ft,Bt=Ft,Fe=Nt}if(ht===ce.length)return p(ie,Fe),jt&&ml(ie,ht),Ve;if(Fe===null){for(;ht<ce.length;ht++)Fe=ve(ie,ce[ht],be),Fe!==null&&(re=T(Fe,re,ht),Bt===null?Ve=Fe:Bt.sibling=Fe,Bt=Fe);return jt&&ml(ie,ht),Ve}for(Fe=x(Fe);ht<ce.length;ht++)Nt=ge(Fe,ie,ht,ce[ht],be),Nt!==null&&(l&&Nt.alternate!==null&&Fe.delete(Nt.key===null?ht:Nt.key),re=T(Nt,re,ht),Bt===null?Ve=Nt:Bt.sibling=Nt,Bt=Nt);return l&&Fe.forEach(function(du){return u(ie,du)}),jt&&ml(ie,ht),Ve}function Ke(ie,re,ce,be){if(ce==null)throw Error(n(151));for(var Ve=null,Bt=null,Fe=re,ht=re=0,Nt=null,Ft=ce.next();Fe!==null&&!Ft.done;ht++,Ft=ce.next()){Fe.index>ht?(Nt=Fe,Fe=null):Nt=Fe.sibling;var du=fe(ie,Fe,Ft.value,be);if(du===null){Fe===null&&(Fe=Nt);break}l&&Fe&&du.alternate===null&&u(ie,Fe),re=T(du,re,ht),Bt===null?Ve=du:Bt.sibling=du,Bt=du,Fe=Nt}if(Ft.done)return p(ie,Fe),jt&&ml(ie,ht),Ve;if(Fe===null){for(;!Ft.done;ht++,Ft=ce.next())Ft=ve(ie,Ft.value,be),Ft!==null&&(re=T(Ft,re,ht),Bt===null?Ve=Ft:Bt.sibling=Ft,Bt=Ft);return jt&&ml(ie,ht),Ve}for(Fe=x(Fe);!Ft.done;ht++,Ft=ce.next())Ft=ge(Fe,ie,ht,Ft.value,be),Ft!==null&&(l&&Ft.alternate!==null&&Fe.delete(Ft.key===null?ht:Ft.key),re=T(Ft,re,ht),Bt===null?Ve=Ft:Bt.sibling=Ft,Bt=Ft);return l&&Fe.forEach(function(AU){return u(ie,AU)}),jt&&ml(ie,ht),Ve}function cn(ie,re,ce,be){if(typeof ce=="object"&&ce!==null&&ce.type===w&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:e:{for(var Ve=ce.key;re!==null;){if(re.key===Ve){if(Ve=ce.type,Ve===w){if(re.tag===7){p(ie,re.sibling),be=S(re,ce.props.children),be.return=ie,ie=be;break e}}else if(re.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===F&&eh(Ve)===re.type){p(ie,re.sibling),be=S(re,ce.props),_0(be,ce),be.return=ie,ie=be;break e}p(ie,re);break}else u(ie,re);re=re.sibling}ce.type===w?(be=Xd(ce.props.children,ie.mode,be,ce.key),be.return=ie,ie=be):(be=Xb(ce.type,ce.key,ce.props,null,ie.mode,be),_0(be,ce),be.return=ie,ie=be)}return R(ie);case v:e:{for(Ve=ce.key;re!==null;){if(re.key===Ve)if(re.tag===4&&re.stateNode.containerInfo===ce.containerInfo&&re.stateNode.implementation===ce.implementation){p(ie,re.sibling),be=S(re,ce.children||[]),be.return=ie,ie=be;break e}else{p(ie,re);break}else u(ie,re);re=re.sibling}be=nT(ce,ie.mode,be),be.return=ie,ie=be}return R(ie);case F:return ce=eh(ce),cn(ie,re,ce,be)}if(K(ce))return Pe(ie,re,ce,be);if(J(ce)){if(Ve=J(ce),typeof Ve!="function")throw Error(n(150));return ce=Ve.call(ce),Ke(ie,re,ce,be)}if(typeof ce.then=="function")return cn(ie,re,nv(ce),be);if(ce.$$typeof===A)return cn(ie,re,Qb(ie,ce),be);rv(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,re!==null&&re.tag===6?(p(ie,re.sibling),be=S(re,ce),be.return=ie,ie=be):(p(ie,re),be=tT(ce,ie.mode,be),be.return=ie,ie=be),R(ie)):p(ie,re)}return function(ie,re,ce,be){try{M0=0;var Ve=cn(ie,re,ce,be);return Sp=null,Ve}catch(Fe){if(Fe===wp||Fe===ev)throw Fe;var Bt=vi(29,Fe,null,ie.mode);return Bt.lanes=be,Bt.return=ie,Bt}finally{}}}var nh=Zj(!0),e5=Zj(!1),Yc=!1;function pT(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mT(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Xc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Kc(l,u,p){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(Ut&2)!==0){var S=x.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),x.pending=u,u=Yb(l),Ij(l,null,p),u}return Wb(l,x,u,p),Yb(l)}function j0(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var x=u.lanes;x&=l.pendingLanes,p|=x,u.lanes=p,Fc(l,p)}}function gT(l,u){var p=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,p===x)){var S=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var R={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};T===null?S=T=R:T=T.next=R,p=p.next}while(p!==null);T===null?S=T=u:T=T.next=u}else S=T=u;p={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:x.shared,callbacks:x.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var yT=!1;function D0(){if(yT){var l=vp;if(l!==null)throw l}}function O0(l,u,p,x){yT=!1;var S=l.updateQueue;Yc=!1;var T=S.firstBaseUpdate,R=S.lastBaseUpdate,U=S.shared.pending;if(U!==null){S.shared.pending=null;var Q=U,ue=Q.next;Q.next=null,R===null?T=ue:R.next=ue,R=Q;var ye=l.alternate;ye!==null&&(ye=ye.updateQueue,U=ye.lastBaseUpdate,U!==R&&(U===null?ye.firstBaseUpdate=ue:U.next=ue,ye.lastBaseUpdate=Q))}if(T!==null){var ve=S.baseState;R=0,ye=ue=Q=null,U=T;do{var fe=U.lane&-536870913,ge=fe!==U.lane;if(ge?(At&fe)===fe:(x&fe)===fe){fe!==0&&fe===bp&&(yT=!0),ye!==null&&(ye=ye.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Pe=l,Ke=U;fe=u;var cn=p;switch(Ke.tag){case 1:if(Pe=Ke.payload,typeof Pe=="function"){ve=Pe.call(cn,ve,fe);break e}ve=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ke.payload,fe=typeof Pe=="function"?Pe.call(cn,ve,fe):Pe,fe==null)break e;ve=g({},ve,fe);break e;case 2:Yc=!0}}fe=U.callback,fe!==null&&(l.flags|=64,ge&&(l.flags|=8192),ge=S.callbacks,ge===null?S.callbacks=[fe]:ge.push(fe))}else ge={lane:fe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ye===null?(ue=ye=ge,Q=ve):ye=ye.next=ge,R|=fe;if(U=U.next,U===null){if(U=S.shared.pending,U===null)break;ge=U,U=ge.next,ge.next=null,S.lastBaseUpdate=ge,S.shared.pending=null}}while(!0);ye===null&&(Q=ve),S.baseState=Q,S.firstBaseUpdate=ue,S.lastBaseUpdate=ye,T===null&&(S.shared.lanes=0),tu|=R,l.lanes=R,l.memoizedState=ve}}function t5(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function n5(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)t5(p[l],u)}var Cp=W(null),sv=W(0);function r5(l,u){l=Al,me(sv,l),me(Cp,u),Al=l|u.baseLanes}function xT(){me(sv,Al),me(Cp,Cp.current)}function bT(){Al=sv.current,ne(Cp),ne(sv)}var wi=W(null),da=null;function Jc(l){var u=l.alternate;me(or,or.current&1),me(wi,l),da===null&&(u===null||Cp.current!==null||u.memoizedState!==null)&&(da=l)}function vT(l){me(or,or.current),me(wi,l),da===null&&(da=l)}function s5(l){l.tag===22?(me(or,or.current),me(wi,l),da===null&&(da=l)):Qc()}function Qc(){me(or,or.current),me(wi,wi.current)}function Si(l){ne(wi),da===l&&(da=null),ne(or)}var or=W(0);function iv(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||AA(p)||NA(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var xl=0,ut=null,on=null,br=null,av=!1,Ep=!1,rh=!1,ov=0,R0=0,Tp=null,gH=0;function Kn(){throw Error(n(321))}function wT(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!bi(l[p],u[p]))return!1;return!0}function ST(l,u,p,x,S,T){return xl=T,ut=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,q.H=l===null||l.memoizedState===null?H5:IT,rh=!1,T=p(x,S),rh=!1,Ep&&(T=a5(u,p,x,S)),i5(l),T}function i5(l){q.H=I0;var u=on!==null&&on.next!==null;if(xl=0,br=on=ut=null,av=!1,R0=0,Tp=null,u)throw Error(n(300));l===null||vr||(l=l.dependencies,l!==null&&Jb(l)&&(vr=!0))}function a5(l,u,p,x){ut=l;var S=0;do{if(Ep&&(Tp=null),R0=0,Ep=!1,25<=S)throw Error(n(301));if(S+=1,br=on=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}q.H=U5,T=u(p,x)}while(Ep);return T}function yH(){var l=q.H,u=l.useState()[0];return u=typeof u.then=="function"?L0(u):u,l=l.useState()[0],(on!==null?on.memoizedState:null)!==l&&(ut.flags|=1024),u}function CT(){var l=ov!==0;return ov=0,l}function ET(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function TT(l){if(av){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}av=!1}xl=0,br=on=ut=null,Ep=!1,R0=ov=0,Tp=null}function Ps(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?ut.memoizedState=br=l:br=br.next=l,br}function lr(){if(on===null){var l=ut.alternate;l=l!==null?l.memoizedState:null}else l=on.next;var u=br===null?ut.memoizedState:br.next;if(u!==null)br=u,on=l;else{if(l===null)throw ut.alternate===null?Error(n(467)):Error(n(310));on=l,l={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},br===null?ut.memoizedState=br=l:br=br.next=l}return br}function lv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function L0(l){var u=R0;return R0+=1,Tp===null&&(Tp=[]),l=Kj(Tp,l,u),u=ut,(br===null?u.memoizedState:br.next)===null&&(u=u.alternate,q.H=u===null||u.memoizedState===null?H5:IT),l}function cv(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return L0(l);if(l.$$typeof===A)return ss(l)}throw Error(n(438,String(l)))}function AT(l){var u=null,p=ut.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var x=ut.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(u={data:x.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=lv(),ut.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),x=0;x<l;x++)p[x]=ee;return u.index++,p}function bl(l,u){return typeof u=="function"?u(l):u}function uv(l){var u=lr();return NT(u,on,l)}function NT(l,u,p){var x=l.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=p;var S=l.baseQueue,T=x.pending;if(T!==null){if(S!==null){var R=S.next;S.next=T.next,T.next=R}u.baseQueue=S=T,x.pending=null}if(T=l.baseState,S===null)l.memoizedState=T;else{u=S.next;var U=R=null,Q=null,ue=u,ye=!1;do{var ve=ue.lane&-536870913;if(ve!==ue.lane?(At&ve)===ve:(xl&ve)===ve){var fe=ue.revertLane;if(fe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),ve===bp&&(ye=!0);else if((xl&fe)===fe){ue=ue.next,fe===bp&&(ye=!0);continue}else ve={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(U=Q=ve,R=T):Q=Q.next=ve,ut.lanes|=fe,tu|=fe;ve=ue.action,rh&&p(T,ve),T=ue.hasEagerState?ue.eagerState:p(T,ve)}else fe={lane:ve,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Q===null?(U=Q=fe,R=T):Q=Q.next=fe,ut.lanes|=ve,tu|=ve;ue=ue.next}while(ue!==null&&ue!==u);if(Q===null?R=T:Q.next=U,!bi(T,l.memoizedState)&&(vr=!0,ye&&(p=vp,p!==null)))throw p;l.memoizedState=T,l.baseState=R,l.baseQueue=Q,x.lastRenderedState=T}return S===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function kT(l){var u=lr(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var x=p.dispatch,S=p.pending,T=u.memoizedState;if(S!==null){p.pending=null;var R=S=S.next;do T=l(T,R.action),R=R.next;while(R!==S);bi(T,u.memoizedState)||(vr=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),p.lastRenderedState=T}return[T,x]}function o5(l,u,p){var x=ut,S=lr(),T=jt;if(T){if(p===void 0)throw Error(n(407));p=p()}else p=u();var R=!bi((on||S).memoizedState,p);if(R&&(S.memoizedState=p,vr=!0),S=S.queue,jT(u5.bind(null,x,S,l),[l]),S.getSnapshot!==u||R||br!==null&&br.memoizedState.tag&1){if(x.flags|=2048,Ap(9,{destroy:void 0},c5.bind(null,x,S,p,u),null),yn===null)throw Error(n(349));T||(xl&127)!==0||l5(x,u,p)}return p}function l5(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=ut.updateQueue,u===null?(u=lv(),ut.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function c5(l,u,p,x){u.value=p,u.getSnapshot=x,d5(u)&&h5(l)}function u5(l,u,p){return p(function(){d5(u)&&h5(l)})}function d5(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!bi(l,p)}catch{return!0}}function h5(l){var u=Yd(l,2);u!==null&&ri(u,l,2)}function MT(l){var u=Ps();if(typeof l=="function"){var p=l;if(l=p(),rh){wt(!0);try{p()}finally{wt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:l},u}function f5(l,u,p,x){return l.baseState=p,NT(l,on,typeof x=="function"?x:bl)}function xH(l,u,p,x,S){if(fv(l))throw Error(n(485));if(l=u.action,l!==null){var T={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){T.listeners.push(R)}};q.T!==null?p(!0):T.isTransition=!1,x(T),p=u.pending,p===null?(T.next=u.pending=T,p5(u,T)):(T.next=p.next,u.pending=p.next=T)}}function p5(l,u){var p=u.action,x=u.payload,S=l.state;if(u.isTransition){var T=q.T,R={};q.T=R;try{var U=p(S,x),Q=q.S;Q!==null&&Q(R,U),m5(l,u,U)}catch(ue){_T(l,u,ue)}finally{T!==null&&R.types!==null&&(T.types=R.types),q.T=T}}else try{T=p(S,x),m5(l,u,T)}catch(ue){_T(l,u,ue)}}function m5(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(x){g5(l,u,x)},function(x){return _T(l,u,x)}):g5(l,u,p)}function g5(l,u,p){u.status="fulfilled",u.value=p,y5(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,p5(l,p)))}function _T(l,u,p){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do u.status="rejected",u.reason=p,y5(u),u=u.next;while(u!==x)}l.action=null}function y5(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function x5(l,u){return u}function b5(l,u){if(jt){var p=yn.formState;if(p!==null){e:{var x=ut;if(jt){if(_n){t:{for(var S=_n,T=ua;S.nodeType!==8;){if(!T){S=null;break t}if(S=ha(S.nextSibling),S===null){S=null;break t}}T=S.data,S=T==="F!"||T==="F"?S:null}if(S){_n=ha(S.nextSibling),x=S.data==="F!";break e}}Gc(x)}x=!1}x&&(u=p[0])}}return p=Ps(),p.memoizedState=p.baseState=u,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x5,lastRenderedState:u},p.queue=x,p=B5.bind(null,ut,x),x.dispatch=p,x=MT(!1),T=PT.bind(null,ut,!1,x.queue),x=Ps(),S={state:u,dispatch:null,action:l,pending:null},x.queue=S,p=xH.bind(null,ut,S,T,p),S.dispatch=p,x.memoizedState=l,[u,p,!1]}function v5(l){var u=lr();return w5(u,on,l)}function w5(l,u,p){if(u=NT(l,u,x5)[0],l=uv(bl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var x=L0(u)}catch(R){throw R===wp?ev:R}else x=u;u=lr();var S=u.queue,T=S.dispatch;return p!==u.memoizedState&&(ut.flags|=2048,Ap(9,{destroy:void 0},bH.bind(null,S,p),null)),[x,T,l]}function bH(l,u){l.action=u}function S5(l){var u=lr(),p=on;if(p!==null)return w5(u,p,l);lr(),u=u.memoizedState,p=lr();var x=p.queue.dispatch;return p.memoizedState=l,[u,x,!1]}function Ap(l,u,p,x){return l={tag:l,create:p,deps:x,inst:u,next:null},u=ut.updateQueue,u===null&&(u=lv(),ut.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(x=p.next,p.next=l,l.next=x,u.lastEffect=l),l}function C5(){return lr().memoizedState}function dv(l,u,p,x){var S=Ps();ut.flags|=l,S.memoizedState=Ap(1|u,{destroy:void 0},p,x===void 0?null:x)}function hv(l,u,p,x){var S=lr();x=x===void 0?null:x;var T=S.memoizedState.inst;on!==null&&x!==null&&wT(x,on.memoizedState.deps)?S.memoizedState=Ap(u,T,p,x):(ut.flags|=l,S.memoizedState=Ap(1|u,T,p,x))}function E5(l,u){dv(8390656,8,l,u)}function jT(l,u){hv(2048,8,l,u)}function vH(l){ut.flags|=4;var u=ut.updateQueue;if(u===null)u=lv(),ut.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function T5(l){var u=lr().memoizedState;return vH({ref:u,nextImpl:l}),function(){if((Ut&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function A5(l,u){return hv(4,2,l,u)}function N5(l,u){return hv(4,4,l,u)}function k5(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function M5(l,u,p){p=p!=null?p.concat([l]):null,hv(4,4,k5.bind(null,u,l),p)}function DT(){}function _5(l,u){var p=lr();u=u===void 0?null:u;var x=p.memoizedState;return u!==null&&wT(u,x[1])?x[0]:(p.memoizedState=[l,u],l)}function j5(l,u){var p=lr();u=u===void 0?null:u;var x=p.memoizedState;if(u!==null&&wT(u,x[1]))return x[0];if(x=l(),rh){wt(!0);try{l()}finally{wt(!1)}}return p.memoizedState=[x,u],x}function OT(l,u,p){return p===void 0||(xl&1073741824)!==0&&(At&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=D4(),ut.lanes|=l,tu|=l,p)}function D5(l,u,p,x){return bi(p,u)?p:Cp.current!==null?(l=OT(l,p,x),bi(l,u)||(vr=!0),l):(xl&42)===0||(xl&1073741824)!==0&&(At&261930)===0?(vr=!0,l.memoizedState=p):(l=D4(),ut.lanes|=l,tu|=l,u)}function O5(l,u,p,x,S){var T=Z.p;Z.p=T!==0&&8>T?T:8;var R=q.T,U={};q.T=U,PT(l,!1,u,p);try{var Q=S(),ue=q.S;if(ue!==null&&ue(U,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ye=mH(Q,x);P0(l,u,ye,Ti(l))}else P0(l,u,x,Ti(l))}catch(ve){P0(l,u,{then:function(){},status:"rejected",reason:ve},Ti())}finally{Z.p=T,R!==null&&U.types!==null&&(R.types=U.types),q.T=R}}function wH(){}function RT(l,u,p,x){if(l.tag!==5)throw Error(n(476));var S=R5(l).queue;O5(l,S,u,he,p===null?wH:function(){return L5(l),p(x)})}function R5(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:he},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function L5(l){var u=R5(l);u.next===null&&(u=l.alternate.memoizedState),P0(l,u.next.queue,{},Ti())}function LT(){return ss(Z0)}function P5(){return lr().memoizedState}function I5(){return lr().memoizedState}function SH(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=Ti();l=Xc(p);var x=Kc(u,l,p);x!==null&&(ri(x,u,p),j0(x,u,p)),u={cache:uT()},l.payload=u;return}u=u.return}}function CH(l,u,p){var x=Ti();p={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},fv(l)?F5(u,p):(p=ZE(l,u,p,x),p!==null&&(ri(p,l,x),z5(p,u,x)))}function B5(l,u,p){var x=Ti();P0(l,u,p,x)}function P0(l,u,p,x){var S={lane:x,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(fv(l))F5(u,S);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var R=u.lastRenderedState,U=T(R,p);if(S.hasEagerState=!0,S.eagerState=U,bi(U,R))return Wb(l,u,S,0),yn===null&&Gb(),!1}catch{}finally{}if(p=ZE(l,u,S,x),p!==null)return ri(p,l,x),z5(p,u,x),!0}return!1}function PT(l,u,p,x){if(x={lane:2,revertLane:pA(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},fv(l)){if(u)throw Error(n(479))}else u=ZE(l,p,x,2),u!==null&&ri(u,l,2)}function fv(l){var u=l.alternate;return l===ut||u!==null&&u===ut}function F5(l,u){Ep=av=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function z5(l,u,p){if((p&4194048)!==0){var x=u.lanes;x&=l.pendingLanes,p|=x,u.lanes=p,Fc(l,p)}}var I0={readContext:ss,use:cv,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn};I0.useEffectEvent=Kn;var H5={readContext:ss,use:cv,useCallback:function(l,u){return Ps().memoizedState=[l,u===void 0?null:u],l},useContext:ss,useEffect:E5,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,dv(4194308,4,k5.bind(null,u,l),p)},useLayoutEffect:function(l,u){return dv(4194308,4,l,u)},useInsertionEffect:function(l,u){dv(4,2,l,u)},useMemo:function(l,u){var p=Ps();u=u===void 0?null:u;var x=l();if(rh){wt(!0);try{l()}finally{wt(!1)}}return p.memoizedState=[x,u],x},useReducer:function(l,u,p){var x=Ps();if(p!==void 0){var S=p(u);if(rh){wt(!0);try{p(u)}finally{wt(!1)}}}else S=u;return x.memoizedState=x.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},x.queue=l,l=l.dispatch=CH.bind(null,ut,l),[x.memoizedState,l]},useRef:function(l){var u=Ps();return l={current:l},u.memoizedState=l},useState:function(l){l=MT(l);var u=l.queue,p=B5.bind(null,ut,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:DT,useDeferredValue:function(l,u){var p=Ps();return OT(p,l,u)},useTransition:function(){var l=MT(!1);return l=O5.bind(null,ut,l.queue,!0,!1),Ps().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var x=ut,S=Ps();if(jt){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),yn===null)throw Error(n(349));(At&127)!==0||l5(x,u,p)}S.memoizedState=p;var T={value:p,getSnapshot:u};return S.queue=T,E5(u5.bind(null,x,T,l),[l]),x.flags|=2048,Ap(9,{destroy:void 0},c5.bind(null,x,T,p,u),null),p},useId:function(){var l=Ps(),u=yn.identifierPrefix;if(jt){var p=So,x=wo;p=(x&~(1<<32-lt(x)-1)).toString(32)+p,u="_"+u+"R_"+p,p=ov++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=gH++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:LT,useFormState:b5,useActionState:b5,useOptimistic:function(l){var u=Ps();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=PT.bind(null,ut,!0,p),p.dispatch=u,[l,u]},useMemoCache:AT,useCacheRefresh:function(){return Ps().memoizedState=SH.bind(null,ut)},useEffectEvent:function(l){var u=Ps(),p={impl:l};return u.memoizedState=p,function(){if((Ut&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},IT={readContext:ss,use:cv,useCallback:_5,useContext:ss,useEffect:jT,useImperativeHandle:M5,useInsertionEffect:A5,useLayoutEffect:N5,useMemo:j5,useReducer:uv,useRef:C5,useState:function(){return uv(bl)},useDebugValue:DT,useDeferredValue:function(l,u){var p=lr();return D5(p,on.memoizedState,l,u)},useTransition:function(){var l=uv(bl)[0],u=lr().memoizedState;return[typeof l=="boolean"?l:L0(l),u]},useSyncExternalStore:o5,useId:P5,useHostTransitionStatus:LT,useFormState:v5,useActionState:v5,useOptimistic:function(l,u){var p=lr();return f5(p,on,l,u)},useMemoCache:AT,useCacheRefresh:I5};IT.useEffectEvent=T5;var U5={readContext:ss,use:cv,useCallback:_5,useContext:ss,useEffect:jT,useImperativeHandle:M5,useInsertionEffect:A5,useLayoutEffect:N5,useMemo:j5,useReducer:kT,useRef:C5,useState:function(){return kT(bl)},useDebugValue:DT,useDeferredValue:function(l,u){var p=lr();return on===null?OT(p,l,u):D5(p,on.memoizedState,l,u)},useTransition:function(){var l=kT(bl)[0],u=lr().memoizedState;return[typeof l=="boolean"?l:L0(l),u]},useSyncExternalStore:o5,useId:P5,useHostTransitionStatus:LT,useFormState:S5,useActionState:S5,useOptimistic:function(l,u){var p=lr();return on!==null?f5(p,on,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:AT,useCacheRefresh:I5};U5.useEffectEvent=T5;function BT(l,u,p,x){u=l.memoizedState,p=p(x,u),p=p==null?u:g({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var FT={enqueueSetState:function(l,u,p){l=l._reactInternals;var x=Ti(),S=Xc(x);S.payload=u,p!=null&&(S.callback=p),u=Kc(l,S,x),u!==null&&(ri(u,l,x),j0(u,l,x))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var x=Ti(),S=Xc(x);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=Kc(l,S,x),u!==null&&(ri(u,l,x),j0(u,l,x))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=Ti(),x=Xc(p);x.tag=2,u!=null&&(x.callback=u),u=Kc(l,x,p),u!==null&&(ri(u,l,p),j0(u,l,p))}};function $5(l,u,p,x,S,T,R){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,T,R):u.prototype&&u.prototype.isPureReactComponent?!C0(p,x)||!C0(S,T):!0}function V5(l,u,p,x){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,x),u.state!==l&&FT.enqueueReplaceState(u,u.state,null)}function sh(l,u){var p=u;if("ref"in u){p={};for(var x in u)x!=="ref"&&(p[x]=u[x])}if(l=l.defaultProps){p===u&&(p=g({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function q5(l){qb(l)}function G5(l){console.error(l)}function W5(l){qb(l)}function pv(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(x){setTimeout(function(){throw x})}}function Y5(l,u,p){try{var x=l.onCaughtError;x(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function zT(l,u,p){return p=Xc(p),p.tag=3,p.payload={element:null},p.callback=function(){pv(l,u)},p}function X5(l){return l=Xc(l),l.tag=3,l}function K5(l,u,p,x){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var T=x.value;l.payload=function(){return S(T)},l.callback=function(){Y5(u,p,x)}}var R=p.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(l.callback=function(){Y5(u,p,x),typeof S!="function"&&(nu===null?nu=new Set([this]):nu.add(this));var U=x.stack;this.componentDidCatch(x.value,{componentStack:U!==null?U:""})})}function EH(l,u,p,x,S){if(p.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(u=p.alternate,u!==null&&xp(u,p,S,!0),p=wi.current,p!==null){switch(p.tag){case 31:case 13:return da===null?Av():p.alternate===null&&Jn===0&&(Jn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,x===tv?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([x]):u.add(x),dA(l,x,S)),!1;case 22:return p.flags|=65536,x===tv?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([x])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([x]):p.add(x)),dA(l,x,S)),!1}throw Error(n(435,p.tag))}return dA(l,x,S),Av(),!1}if(jt)return u=wi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,x!==iT&&(l=Error(n(422),{cause:x}),A0(oa(l,p)))):(x!==iT&&(u=Error(n(423),{cause:x}),A0(oa(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,x=oa(x,p),S=zT(l.stateNode,x,S),gT(l,S),Jn!==4&&(Jn=2)),!1;var T=Error(n(520),{cause:x});if(T=oa(T,p),q0===null?q0=[T]:q0.push(T),Jn!==4&&(Jn=2),u===null)return!0;x=oa(x,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=zT(p.stateNode,x,l),gT(p,l),!1;case 1:if(u=p.type,T=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(nu===null||!nu.has(T))))return p.flags|=65536,S&=-S,p.lanes|=S,S=X5(S),K5(S,l,p,x),gT(p,S),!1}p=p.return}while(p!==null);return!1}var HT=Error(n(461)),vr=!1;function is(l,u,p,x){u.child=l===null?e5(u,null,p,x):nh(u,l.child,p,x)}function J5(l,u,p,x,S){p=p.render;var T=u.ref;if("ref"in x){var R={};for(var U in x)U!=="ref"&&(R[U]=x[U])}else R=x;return Qd(u),x=ST(l,u,p,R,T,S),U=CT(),l!==null&&!vr?(ET(l,u,S),vl(l,u,S)):(jt&&U&&rT(u),u.flags|=1,is(l,u,x,S),u.child)}function Q5(l,u,p,x,S){if(l===null){var T=p.type;return typeof T=="function"&&!eT(T)&&T.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=T,Z5(l,u,T,x,S)):(l=Xb(p.type,null,x,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(T=l.child,!XT(l,S)){var R=T.memoizedProps;if(p=p.compare,p=p!==null?p:C0,p(R,x)&&l.ref===u.ref)return vl(l,u,S)}return u.flags|=1,l=pl(T,x),l.ref=u.ref,l.return=u,u.child=l}function Z5(l,u,p,x,S){if(l!==null){var T=l.memoizedProps;if(C0(T,x)&&l.ref===u.ref)if(vr=!1,u.pendingProps=x=T,XT(l,S))(l.flags&131072)!==0&&(vr=!0);else return u.lanes=l.lanes,vl(l,u,S)}return UT(l,u,p,x,S)}function e4(l,u,p,x){var S=x.children,T=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((u.flags&128)!==0){if(T=T!==null?T.baseLanes|p:p,l!==null){for(x=u.child=l.child,S=0;x!==null;)S=S|x.lanes|x.childLanes,x=x.sibling;x=S&~T}else x=0,u.child=null;return t4(l,u,T,p,x)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Zb(u,T!==null?T.cachePool:null),T!==null?r5(u,T):xT(),s5(u);else return x=u.lanes=536870912,t4(l,u,T!==null?T.baseLanes|p:p,p,x)}else T!==null?(Zb(u,T.cachePool),r5(u,T),Qc(),u.memoizedState=null):(l!==null&&Zb(u,null),xT(),Qc());return is(l,u,S,p),u.child}function B0(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function t4(l,u,p,x,S){var T=hT();return T=T===null?null:{parent:xr._currentValue,pool:T},u.memoizedState={baseLanes:p,cachePool:T},l!==null&&Zb(u,null),xT(),s5(u),l!==null&&xp(l,u,x,!0),u.childLanes=S,null}function mv(l,u){return u=yv({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function n4(l,u,p){return nh(u,l.child,null,p),l=mv(u,u.pendingProps),l.flags|=2,Si(u),u.memoizedState=null,l}function TH(l,u,p){var x=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(jt){if(x.mode==="hidden")return l=mv(u,x),u.lanes=536870912,B0(null,l);if(vT(u),(l=_n)?(l=pD(l,ua),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Vc!==null?{id:wo,overflow:So}:null,retryLane:536870912,hydrationErrors:null},p=Fj(l),p.return=u,u.child=p,rs=u,_n=null)):l=null,l===null)throw Gc(u);return u.lanes=536870912,null}return mv(u,x)}var T=l.memoizedState;if(T!==null){var R=T.dehydrated;if(vT(u),S)if(u.flags&256)u.flags&=-257,u=n4(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(vr||xp(l,u,p,!1),S=(p&l.childLanes)!==0,vr||S){if(x=yn,x!==null&&(R=Ob(x,p),R!==0&&R!==T.retryLane))throw T.retryLane=R,Yd(l,R),ri(x,l,R),HT;Av(),u=n4(l,u,p)}else l=T.treeContext,_n=ha(R.nextSibling),rs=u,jt=!0,qc=null,ua=!1,l!==null&&Uj(u,l),u=mv(u,x),u.flags|=4096;return u}return l=pl(l.child,{mode:x.mode,children:x.children}),l.ref=u.ref,u.child=l,l.return=u,l}function gv(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function UT(l,u,p,x,S){return Qd(u),p=ST(l,u,p,x,void 0,S),x=CT(),l!==null&&!vr?(ET(l,u,S),vl(l,u,S)):(jt&&x&&rT(u),u.flags|=1,is(l,u,p,S),u.child)}function r4(l,u,p,x,S,T){return Qd(u),u.updateQueue=null,p=a5(u,x,p,S),i5(l),x=CT(),l!==null&&!vr?(ET(l,u,T),vl(l,u,T)):(jt&&x&&rT(u),u.flags|=1,is(l,u,p,T),u.child)}function s4(l,u,p,x,S){if(Qd(u),u.stateNode===null){var T=pp,R=p.contextType;typeof R=="object"&&R!==null&&(T=ss(R)),T=new p(x,T),u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=FT,u.stateNode=T,T._reactInternals=u,T=u.stateNode,T.props=x,T.state=u.memoizedState,T.refs={},pT(u),R=p.contextType,T.context=typeof R=="object"&&R!==null?ss(R):pp,T.state=u.memoizedState,R=p.getDerivedStateFromProps,typeof R=="function"&&(BT(u,p,R,x),T.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(R=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),R!==T.state&&FT.enqueueReplaceState(T,T.state,null),O0(u,x,T,S),D0(),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308),x=!0}else if(l===null){T=u.stateNode;var U=u.memoizedProps,Q=sh(p,U);T.props=Q;var ue=T.context,ye=p.contextType;R=pp,typeof ye=="object"&&ye!==null&&(R=ss(ye));var ve=p.getDerivedStateFromProps;ye=typeof ve=="function"||typeof T.getSnapshotBeforeUpdate=="function",U=u.pendingProps!==U,ye||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U||ue!==R)&&V5(u,T,x,R),Yc=!1;var fe=u.memoizedState;T.state=fe,O0(u,x,T,S),D0(),ue=u.memoizedState,U||fe!==ue||Yc?(typeof ve=="function"&&(BT(u,p,ve,x),ue=u.memoizedState),(Q=Yc||$5(u,p,Q,x,fe,ue,R))?(ye||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(u.flags|=4194308)):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=ue),T.props=x,T.state=ue,T.context=R,x=Q):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{T=u.stateNode,mT(l,u),R=u.memoizedProps,ye=sh(p,R),T.props=ye,ve=u.pendingProps,fe=T.context,ue=p.contextType,Q=pp,typeof ue=="object"&&ue!==null&&(Q=ss(ue)),U=p.getDerivedStateFromProps,(ue=typeof U=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(R!==ve||fe!==Q)&&V5(u,T,x,Q),Yc=!1,fe=u.memoizedState,T.state=fe,O0(u,x,T,S),D0();var ge=u.memoizedState;R!==ve||fe!==ge||Yc||l!==null&&l.dependencies!==null&&Jb(l.dependencies)?(typeof U=="function"&&(BT(u,p,U,x),ge=u.memoizedState),(ye=Yc||$5(u,p,ye,x,fe,ge,Q)||l!==null&&l.dependencies!==null&&Jb(l.dependencies))?(ue||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(x,ge,Q),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(x,ge,Q)),typeof T.componentDidUpdate=="function"&&(u.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof T.componentDidUpdate!="function"||R===l.memoizedProps&&fe===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&fe===l.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=ge),T.props=x,T.state=ge,T.context=Q,x=ye):(typeof T.componentDidUpdate!="function"||R===l.memoizedProps&&fe===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&fe===l.memoizedState||(u.flags|=1024),x=!1)}return T=x,gv(l,u),x=(u.flags&128)!==0,T||x?(T=u.stateNode,p=x&&typeof p.getDerivedStateFromError!="function"?null:T.render(),u.flags|=1,l!==null&&x?(u.child=nh(u,l.child,null,S),u.child=nh(u,null,p,S)):is(l,u,p,S),u.memoizedState=T.state,l=u.child):l=vl(l,u,S),l}function i4(l,u,p,x){return Kd(),u.flags|=256,is(l,u,p,x),u.child}var $T={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function VT(l){return{baseLanes:l,cachePool:Yj()}}function qT(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Ei),l}function a4(l,u,p){var x=u.pendingProps,S=!1,T=(u.flags&128)!==0,R;if((R=T)||(R=l!==null&&l.memoizedState===null?!1:(or.current&2)!==0),R&&(S=!0,u.flags&=-129),R=(u.flags&32)!==0,u.flags&=-33,l===null){if(jt){if(S?Jc(u):Qc(),(l=_n)?(l=pD(l,ua),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Vc!==null?{id:wo,overflow:So}:null,retryLane:536870912,hydrationErrors:null},p=Fj(l),p.return=u,u.child=p,rs=u,_n=null)):l=null,l===null)throw Gc(u);return NA(l)?u.lanes=32:u.lanes=536870912,null}var U=x.children;return x=x.fallback,S?(Qc(),S=u.mode,U=yv({mode:"hidden",children:U},S),x=Xd(x,S,p,null),U.return=u,x.return=u,U.sibling=x,u.child=U,x=u.child,x.memoizedState=VT(p),x.childLanes=qT(l,R,p),u.memoizedState=$T,B0(null,x)):(Jc(u),GT(u,U))}var Q=l.memoizedState;if(Q!==null&&(U=Q.dehydrated,U!==null)){if(T)u.flags&256?(Jc(u),u.flags&=-257,u=WT(l,u,p)):u.memoizedState!==null?(Qc(),u.child=l.child,u.flags|=128,u=null):(Qc(),U=x.fallback,S=u.mode,x=yv({mode:"visible",children:x.children},S),U=Xd(U,S,p,null),U.flags|=2,x.return=u,U.return=u,x.sibling=U,u.child=x,nh(u,l.child,null,p),x=u.child,x.memoizedState=VT(p),x.childLanes=qT(l,R,p),u.memoizedState=$T,u=B0(null,x));else if(Jc(u),NA(U)){if(R=U.nextSibling&&U.nextSibling.dataset,R)var ue=R.dgst;R=ue,x=Error(n(419)),x.stack="",x.digest=R,A0({value:x,source:null,stack:null}),u=WT(l,u,p)}else if(vr||xp(l,u,p,!1),R=(p&l.childLanes)!==0,vr||R){if(R=yn,R!==null&&(x=Ob(R,p),x!==0&&x!==Q.retryLane))throw Q.retryLane=x,Yd(l,x),ri(R,l,x),HT;AA(U)||Av(),u=WT(l,u,p)}else AA(U)?(u.flags|=192,u.child=l.child,u=null):(l=Q.treeContext,_n=ha(U.nextSibling),rs=u,jt=!0,qc=null,ua=!1,l!==null&&Uj(u,l),u=GT(u,x.children),u.flags|=4096);return u}return S?(Qc(),U=x.fallback,S=u.mode,Q=l.child,ue=Q.sibling,x=pl(Q,{mode:"hidden",children:x.children}),x.subtreeFlags=Q.subtreeFlags&65011712,ue!==null?U=pl(ue,U):(U=Xd(U,S,p,null),U.flags|=2),U.return=u,x.return=u,x.sibling=U,u.child=x,B0(null,x),x=u.child,U=l.child.memoizedState,U===null?U=VT(p):(S=U.cachePool,S!==null?(Q=xr._currentValue,S=S.parent!==Q?{parent:Q,pool:Q}:S):S=Yj(),U={baseLanes:U.baseLanes|p,cachePool:S}),x.memoizedState=U,x.childLanes=qT(l,R,p),u.memoizedState=$T,B0(l.child,x)):(Jc(u),p=l.child,l=p.sibling,p=pl(p,{mode:"visible",children:x.children}),p.return=u,p.sibling=null,l!==null&&(R=u.deletions,R===null?(u.deletions=[l],u.flags|=16):R.push(l)),u.child=p,u.memoizedState=null,p)}function GT(l,u){return u=yv({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function yv(l,u){return l=vi(22,l,null,u),l.lanes=0,l}function WT(l,u,p){return nh(u,l.child,null,p),l=GT(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function o4(l,u,p){l.lanes|=u;var x=l.alternate;x!==null&&(x.lanes|=u),lT(l.return,u,p)}function YT(l,u,p,x,S,T){var R=l.memoizedState;R===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:p,tailMode:S,treeForkCount:T}:(R.isBackwards=u,R.rendering=null,R.renderingStartTime=0,R.last=x,R.tail=p,R.tailMode=S,R.treeForkCount=T)}function l4(l,u,p){var x=u.pendingProps,S=x.revealOrder,T=x.tail;x=x.children;var R=or.current,U=(R&2)!==0;if(U?(R=R&1|2,u.flags|=128):R&=1,me(or,R),is(l,u,x,p),x=jt?T0:0,!U&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&o4(l,p,u);else if(l.tag===19)o4(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&iv(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),YT(u,!1,S,p,T,x);break;case"backwards":case"unstable_legacy-backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&iv(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}YT(u,!0,p,null,T,x);break;case"together":YT(u,!1,null,null,void 0,x);break;default:u.memoizedState=null}return u.child}function vl(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),tu|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(xp(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,p=pl(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=pl(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function XT(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Jb(l)))}function AH(l,u,p){switch(u.tag){case 3:He(u,u.stateNode.containerInfo),Wc(u,xr,l.memoizedState.cache),Kd();break;case 27:case 5:Qe(u);break;case 4:He(u,u.stateNode.containerInfo);break;case 10:Wc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,vT(u),null;break;case 13:var x=u.memoizedState;if(x!==null)return x.dehydrated!==null?(Jc(u),u.flags|=128,null):(p&u.child.childLanes)!==0?a4(l,u,p):(Jc(u),l=vl(l,u,p),l!==null?l.sibling:null);Jc(u);break;case 19:var S=(l.flags&128)!==0;if(x=(p&u.childLanes)!==0,x||(xp(l,u,p,!1),x=(p&u.childLanes)!==0),S){if(x)return l4(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),me(or,or.current),x)break;return null;case 22:return u.lanes=0,e4(l,u,p,u.pendingProps);case 24:Wc(u,xr,l.memoizedState.cache)}return vl(l,u,p)}function c4(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)vr=!0;else{if(!XT(l,p)&&(u.flags&128)===0)return vr=!1,AH(l,u,p);vr=(l.flags&131072)!==0}else vr=!1,jt&&(u.flags&1048576)!==0&&Hj(u,T0,u.index);switch(u.lanes=0,u.tag){case 16:e:{var x=u.pendingProps;if(l=eh(u.elementType),u.type=l,typeof l=="function")eT(l)?(x=sh(l,x),u.tag=1,u=s4(null,u,l,x,p)):(u.tag=0,u=UT(null,u,l,x,p));else{if(l!=null){var S=l.$$typeof;if(S===k){u.tag=11,u=J5(null,u,l,x,p);break e}else if(S===P){u.tag=14,u=Q5(null,u,l,x,p);break e}}throw u=X(l)||l,Error(n(306,u,""))}}return u;case 0:return UT(l,u,u.type,u.pendingProps,p);case 1:return x=u.type,S=sh(x,u.pendingProps),s4(l,u,x,S,p);case 3:e:{if(He(u,u.stateNode.containerInfo),l===null)throw Error(n(387));x=u.pendingProps;var T=u.memoizedState;S=T.element,mT(l,u),O0(u,x,null,p);var R=u.memoizedState;if(x=R.cache,Wc(u,xr,x),x!==T.cache&&cT(u,[xr],p,!0),D0(),x=R.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:R.cache},u.updateQueue.baseState=T,u.memoizedState=T,u.flags&256){u=i4(l,u,x,p);break e}else if(x!==S){S=oa(Error(n(424)),u),A0(S),u=i4(l,u,x,p);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(_n=ha(l.firstChild),rs=u,jt=!0,qc=null,ua=!0,p=e5(u,null,x,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Kd(),x===S){u=vl(l,u,p);break e}is(l,u,x,p)}u=u.child}return u;case 26:return gv(l,u),l===null?(p=vD(u.type,null,u.pendingProps,null))?u.memoizedState=p:jt||(p=u.type,l=u.pendingProps,x=Ov(je.current).createElement(p),x[kr]=u,x[vs]=l,as(x,p,l),Yn(x),u.stateNode=x):u.memoizedState=vD(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Qe(u),l===null&&jt&&(x=u.stateNode=yD(u.type,u.pendingProps,je.current),rs=u,ua=!0,S=_n,au(u.type)?(kA=S,_n=ha(x.firstChild)):_n=S),is(l,u,u.pendingProps.children,p),gv(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&jt&&((S=x=_n)&&(x=nU(x,u.type,u.pendingProps,ua),x!==null?(u.stateNode=x,rs=u,_n=ha(x.firstChild),ua=!1,S=!0):S=!1),S||Gc(u)),Qe(u),S=u.type,T=u.pendingProps,R=l!==null?l.memoizedProps:null,x=T.children,CA(S,T)?x=null:R!==null&&CA(S,R)&&(u.flags|=32),u.memoizedState!==null&&(S=ST(l,u,yH,null,null,p),Z0._currentValue=S),gv(l,u),is(l,u,x,p),u.child;case 6:return l===null&&jt&&((l=p=_n)&&(p=rU(p,u.pendingProps,ua),p!==null?(u.stateNode=p,rs=u,_n=null,l=!0):l=!1),l||Gc(u)),null;case 13:return a4(l,u,p);case 4:return He(u,u.stateNode.containerInfo),x=u.pendingProps,l===null?u.child=nh(u,null,x,p):is(l,u,x,p),u.child;case 11:return J5(l,u,u.type,u.pendingProps,p);case 7:return is(l,u,u.pendingProps,p),u.child;case 8:return is(l,u,u.pendingProps.children,p),u.child;case 12:return is(l,u,u.pendingProps.children,p),u.child;case 10:return x=u.pendingProps,Wc(u,u.type,x.value),is(l,u,x.children,p),u.child;case 9:return S=u.type._context,x=u.pendingProps.children,Qd(u),S=ss(S),x=x(S),u.flags|=1,is(l,u,x,p),u.child;case 14:return Q5(l,u,u.type,u.pendingProps,p);case 15:return Z5(l,u,u.type,u.pendingProps,p);case 19:return l4(l,u,p);case 31:return TH(l,u,p);case 22:return e4(l,u,p,u.pendingProps);case 24:return Qd(u),x=ss(xr),l===null?(S=hT(),S===null&&(S=yn,T=uT(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=p),S=T),u.memoizedState={parent:x,cache:S},pT(u),Wc(u,xr,S)):((l.lanes&p)!==0&&(mT(l,u),O0(u,null,null,p),D0()),S=l.memoizedState,T=u.memoizedState,S.parent!==x?(S={parent:x,cache:x},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),Wc(u,xr,x)):(x=T.cache,Wc(u,xr,x),x!==S.cache&&cT(u,[xr],p,!0))),is(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function wl(l){l.flags|=4}function KT(l,u,p,x,S){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(S&335544128)===S)if(l.stateNode.complete)l.flags|=8192;else if(P4())l.flags|=8192;else throw th=tv,fT}else l.flags&=-16777217}function u4(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!TD(u))if(P4())l.flags|=8192;else throw th=tv,fT}function xv(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Fr():536870912,l.lanes|=u,_p|=u)}function F0(l,u){if(!jt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function jn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,x=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,x|=S.subtreeFlags&65011712,x|=S.flags&65011712,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=x,l.childLanes=p,u}function NH(l,u,p){var x=u.pendingProps;switch(sT(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(u),null;case 1:return jn(u),null;case 3:return p=u.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),yl(xr),Ye(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(yp(u)?wl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,aT())),jn(u),null;case 26:var S=u.type,T=u.memoizedState;return l===null?(wl(u),T!==null?(jn(u),u4(u,T)):(jn(u),KT(u,S,null,x,p))):T?T!==l.memoizedState?(wl(u),jn(u),u4(u,T)):(jn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==x&&wl(u),jn(u),KT(u,S,l,x,p)),null;case 27:if(Ht(u),p=je.current,S=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==x&&wl(u);else{if(!x){if(u.stateNode===null)throw Error(n(166));return jn(u),null}l=we.current,yp(u)?$j(u):(l=yD(S,x,p),u.stateNode=l,wl(u))}return jn(u),null;case 5:if(Ht(u),S=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==x&&wl(u);else{if(!x){if(u.stateNode===null)throw Error(n(166));return jn(u),null}if(T=we.current,yp(u))$j(u);else{var R=Ov(je.current);switch(T){case 1:T=R.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:T=R.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":T=R.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":T=R.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":T=R.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof x.is=="string"?R.createElement("select",{is:x.is}):R.createElement("select"),x.multiple?T.multiple=!0:x.size&&(T.size=x.size);break;default:T=typeof x.is=="string"?R.createElement(S,{is:x.is}):R.createElement(S)}}T[kr]=u,T[vs]=x;e:for(R=u.child;R!==null;){if(R.tag===5||R.tag===6)T.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===u)break e;for(;R.sibling===null;){if(R.return===null||R.return===u)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}u.stateNode=T;e:switch(as(T,S,x),S){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&wl(u)}}return jn(u),KT(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==x&&wl(u);else{if(typeof x!="string"&&u.stateNode===null)throw Error(n(166));if(l=je.current,yp(u)){if(l=u.stateNode,p=u.memoizedProps,x=null,S=rs,S!==null)switch(S.tag){case 27:case 5:x=S.memoizedProps}l[kr]=u,l=!!(l.nodeValue===p||x!==null&&x.suppressHydrationWarning===!0||aD(l.nodeValue,p)),l||Gc(u,!0)}else l=Ov(l).createTextNode(x),l[kr]=u,u.stateNode=l}return jn(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(x=yp(u),p!==null){if(l===null){if(!x)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[kr]=u}else Kd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;jn(u),l=!1}else p=aT(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(Si(u),u):(Si(u),null);if((u.flags&128)!==0)throw Error(n(558))}return jn(u),null;case 13:if(x=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=yp(u),x!==null&&x.dehydrated!==null){if(l===null){if(!S)throw Error(n(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[kr]=u}else Kd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;jn(u),S=!1}else S=aT(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(Si(u),u):(Si(u),null)}return Si(u),(u.flags&128)!==0?(u.lanes=p,u):(p=x!==null,l=l!==null&&l.memoizedState!==null,p&&(x=u.child,S=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(S=x.alternate.memoizedState.cachePool.pool),T=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(T=x.memoizedState.cachePool.pool),T!==S&&(x.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),xv(u,u.updateQueue),jn(u),null);case 4:return Ye(),l===null&&xA(u.stateNode.containerInfo),jn(u),null;case 10:return yl(u.type),jn(u),null;case 19:if(ne(or),x=u.memoizedState,x===null)return jn(u),null;if(S=(u.flags&128)!==0,T=x.rendering,T===null)if(S)F0(x,!1);else{if(Jn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(T=iv(l),T!==null){for(u.flags|=128,F0(x,!1),l=T.updateQueue,u.updateQueue=l,xv(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)Bj(p,l),p=p.sibling;return me(or,or.current&1|2),jt&&ml(u,x.treeForkCount),u.child}l=l.sibling}x.tail!==null&&Tn()>Cv&&(u.flags|=128,S=!0,F0(x,!1),u.lanes=4194304)}else{if(!S)if(l=iv(T),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,xv(u,l),F0(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!jt)return jn(u),null}else 2*Tn()-x.renderingStartTime>Cv&&p!==536870912&&(u.flags|=128,S=!0,F0(x,!1),u.lanes=4194304);x.isBackwards?(T.sibling=u.child,u.child=T):(l=x.last,l!==null?l.sibling=T:u.child=T,x.last=T)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Tn(),l.sibling=null,p=or.current,me(or,S?p&1|2:p&1),jt&&ml(u,x.treeForkCount),l):(jn(u),null);case 22:case 23:return Si(u),bT(),x=u.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(u.flags|=8192):x&&(u.flags|=8192),x?(p&536870912)!==0&&(u.flags&128)===0&&(jn(u),u.subtreeFlags&6&&(u.flags|=8192)):jn(u),p=u.updateQueue,p!==null&&xv(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==p&&(u.flags|=2048),l!==null&&ne(Zd),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),yl(xr),jn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function kH(l,u){switch(sT(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return yl(xr),Ye(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Ht(u),null;case 31:if(u.memoizedState!==null){if(Si(u),u.alternate===null)throw Error(n(340));Kd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Si(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Kd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(or),null;case 4:return Ye(),null;case 10:return yl(u.type),null;case 22:case 23:return Si(u),bT(),l!==null&&ne(Zd),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return yl(xr),null;case 25:return null;default:return null}}function d4(l,u){switch(sT(u),u.tag){case 3:yl(xr),Ye();break;case 26:case 27:case 5:Ht(u);break;case 4:Ye();break;case 31:u.memoizedState!==null&&Si(u);break;case 13:Si(u);break;case 19:ne(or);break;case 10:yl(u.type);break;case 22:case 23:Si(u),bT(),l!==null&&ne(Zd);break;case 24:yl(xr)}}function z0(l,u){try{var p=u.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var S=x.next;p=S;do{if((p.tag&l)===l){x=void 0;var T=p.create,R=p.inst;x=T(),R.destroy=x}p=p.next}while(p!==S)}}catch(U){Qt(u,u.return,U)}}function Zc(l,u,p){try{var x=u.updateQueue,S=x!==null?x.lastEffect:null;if(S!==null){var T=S.next;x=T;do{if((x.tag&l)===l){var R=x.inst,U=R.destroy;if(U!==void 0){R.destroy=void 0,S=u;var Q=p,ue=U;try{ue()}catch(ye){Qt(S,Q,ye)}}}x=x.next}while(x!==T)}}catch(ye){Qt(u,u.return,ye)}}function h4(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{n5(u,p)}catch(x){Qt(l,l.return,x)}}}function f4(l,u,p){p.props=sh(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(x){Qt(l,u,x)}}function H0(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof p=="function"?l.refCleanup=p(x):p.current=x}}catch(S){Qt(l,u,S)}}function Co(l,u){var p=l.ref,x=l.refCleanup;if(p!==null)if(typeof x=="function")try{x()}catch(S){Qt(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){Qt(l,u,S)}else p.current=null}function p4(l){var u=l.type,p=l.memoizedProps,x=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&x.focus();break e;case"img":p.src?x.src=p.src:p.srcSet&&(x.srcset=p.srcSet)}}catch(S){Qt(l,l.return,S)}}function JT(l,u,p){try{var x=l.stateNode;KH(x,l.type,p,u),x[vs]=u}catch(S){Qt(l,l.return,S)}}function m4(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&au(l.type)||l.tag===4}function QT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||m4(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&au(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ZT(l,u,p){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=ia));else if(x!==4&&(x===27&&au(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(ZT(l,u,p),l=l.sibling;l!==null;)ZT(l,u,p),l=l.sibling}function bv(l,u,p){var x=l.tag;if(x===5||x===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(x!==4&&(x===27&&au(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(bv(l,u,p),l=l.sibling;l!==null;)bv(l,u,p),l=l.sibling}function g4(l){var u=l.stateNode,p=l.memoizedProps;try{for(var x=l.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);as(u,x,p),u[kr]=l,u[vs]=p}catch(T){Qt(l,l.return,T)}}var Sl=!1,wr=!1,eA=!1,y4=typeof WeakSet=="function"?WeakSet:Set,Vr=null;function MH(l,u){if(l=l.containerInfo,wA=zv,l=Mj(l),WE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var x=p.getSelection&&p.getSelection();if(x&&x.rangeCount!==0){p=x.anchorNode;var S=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{p.nodeType,T.nodeType}catch{p=null;break e}var R=0,U=-1,Q=-1,ue=0,ye=0,ve=l,fe=null;t:for(;;){for(var ge;ve!==p||S!==0&&ve.nodeType!==3||(U=R+S),ve!==T||x!==0&&ve.nodeType!==3||(Q=R+x),ve.nodeType===3&&(R+=ve.nodeValue.length),(ge=ve.firstChild)!==null;)fe=ve,ve=ge;for(;;){if(ve===l)break t;if(fe===p&&++ue===S&&(U=R),fe===T&&++ye===x&&(Q=R),(ge=ve.nextSibling)!==null)break;ve=fe,fe=ve.parentNode}ve=ge}p=U===-1||Q===-1?null:{start:U,end:Q}}else p=null}p=p||{start:0,end:0}}else p=null;for(SA={focusedElem:l,selectionRange:p},zv=!1,Vr=u;Vr!==null;)if(u=Vr,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Vr=l;else for(;Vr!==null;){switch(u=Vr,T=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)S=l[p],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,p=u,S=T.memoizedProps,T=T.memoizedState,x=p.stateNode;try{var Pe=sh(p.type,S);l=x.getSnapshotBeforeUpdate(Pe,T),x.__reactInternalSnapshotBeforeUpdate=l}catch(Ke){Qt(p,p.return,Ke)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)TA(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":TA(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Vr=l;break}Vr=u.return}}function x4(l,u,p){var x=p.flags;switch(p.tag){case 0:case 11:case 15:El(l,p),x&4&&z0(5,p);break;case 1:if(El(l,p),x&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(R){Qt(p,p.return,R)}else{var S=sh(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(R){Qt(p,p.return,R)}}x&64&&h4(p),x&512&&H0(p,p.return);break;case 3:if(El(l,p),x&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{n5(l,u)}catch(R){Qt(p,p.return,R)}}break;case 27:u===null&&x&4&&g4(p);case 26:case 5:El(l,p),u===null&&x&4&&p4(p),x&512&&H0(p,p.return);break;case 12:El(l,p);break;case 31:El(l,p),x&4&&w4(l,p);break;case 13:El(l,p),x&4&&S4(l,p),x&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=BH.bind(null,p),sU(l,p))));break;case 22:if(x=p.memoizedState!==null||Sl,!x){u=u!==null&&u.memoizedState!==null||wr,S=Sl;var T=wr;Sl=x,(wr=u)&&!T?Tl(l,p,(p.subtreeFlags&8772)!==0):El(l,p),Sl=S,wr=T}break;case 30:break;default:El(l,p)}}function b4(l){var u=l.alternate;u!==null&&(l.alternate=null,b4(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&m0(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pn=null,Zs=!1;function Cl(l,u,p){for(p=p.child;p!==null;)v4(l,u,p),p=p.sibling}function v4(l,u,p){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(xe,p)}catch{}switch(p.tag){case 26:wr||Co(p,u),Cl(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:wr||Co(p,u);var x=Pn,S=Zs;au(p.type)&&(Pn=p.stateNode,Zs=!1),Cl(l,u,p),K0(p.stateNode),Pn=x,Zs=S;break;case 5:wr||Co(p,u);case 6:if(x=Pn,S=Zs,Pn=null,Cl(l,u,p),Pn=x,Zs=S,Pn!==null)if(Zs)try{(Pn.nodeType===9?Pn.body:Pn.nodeName==="HTML"?Pn.ownerDocument.body:Pn).removeChild(p.stateNode)}catch(T){Qt(p,u,T)}else try{Pn.removeChild(p.stateNode)}catch(T){Qt(p,u,T)}break;case 18:Pn!==null&&(Zs?(l=Pn,hD(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Bp(l)):hD(Pn,p.stateNode));break;case 4:x=Pn,S=Zs,Pn=p.stateNode.containerInfo,Zs=!0,Cl(l,u,p),Pn=x,Zs=S;break;case 0:case 11:case 14:case 15:Zc(2,p,u),wr||Zc(4,p,u),Cl(l,u,p);break;case 1:wr||(Co(p,u),x=p.stateNode,typeof x.componentWillUnmount=="function"&&f4(p,u,x)),Cl(l,u,p);break;case 21:Cl(l,u,p);break;case 22:wr=(x=wr)||p.memoizedState!==null,Cl(l,u,p),wr=x;break;default:Cl(l,u,p)}}function w4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Bp(l)}catch(p){Qt(u,u.return,p)}}}function S4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Bp(l)}catch(p){Qt(u,u.return,p)}}function _H(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new y4),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new y4),u;default:throw Error(n(435,l.tag))}}function vv(l,u){var p=_H(l);u.forEach(function(x){if(!p.has(x)){p.add(x);var S=FH.bind(null,l,x);x.then(S,S)}})}function ei(l,u){var p=u.deletions;if(p!==null)for(var x=0;x<p.length;x++){var S=p[x],T=l,R=u,U=R;e:for(;U!==null;){switch(U.tag){case 27:if(au(U.type)){Pn=U.stateNode,Zs=!1;break e}break;case 5:Pn=U.stateNode,Zs=!1;break e;case 3:case 4:Pn=U.stateNode.containerInfo,Zs=!0;break e}U=U.return}if(Pn===null)throw Error(n(160));v4(T,R,S),Pn=null,Zs=!1,T=S.alternate,T!==null&&(T.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)C4(u,l),u=u.sibling}var qa=null;function C4(l,u){var p=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ei(u,l),ti(l),x&4&&(Zc(3,l,l.return),z0(3,l),Zc(5,l,l.return));break;case 1:ei(u,l),ti(l),x&512&&(wr||p===null||Co(p,p.return)),x&64&&Sl&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?x:p.concat(x))));break;case 26:var S=qa;if(ei(u,l),ti(l),x&512&&(wr||p===null||Co(p,p.return)),x&4){var T=p!==null?p.memoizedState:null;if(x=l.memoizedState,p===null)if(x===null)if(l.stateNode===null){e:{x=l.type,p=l.memoizedProps,S=S.ownerDocument||S;t:switch(x){case"title":T=S.getElementsByTagName("title")[0],(!T||T[$d]||T[kr]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=S.createElement(x),S.head.insertBefore(T,S.querySelector("head > title"))),as(T,x,p),T[kr]=l,Yn(T),x=T;break e;case"link":var R=CD("link","href",S).get(x+(p.href||""));if(R){for(var U=0;U<R.length;U++)if(T=R[U],T.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&T.getAttribute("rel")===(p.rel==null?null:p.rel)&&T.getAttribute("title")===(p.title==null?null:p.title)&&T.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){R.splice(U,1);break t}}T=S.createElement(x),as(T,x,p),S.head.appendChild(T);break;case"meta":if(R=CD("meta","content",S).get(x+(p.content||""))){for(U=0;U<R.length;U++)if(T=R[U],T.getAttribute("content")===(p.content==null?null:""+p.content)&&T.getAttribute("name")===(p.name==null?null:p.name)&&T.getAttribute("property")===(p.property==null?null:p.property)&&T.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&T.getAttribute("charset")===(p.charSet==null?null:p.charSet)){R.splice(U,1);break t}}T=S.createElement(x),as(T,x,p),S.head.appendChild(T);break;default:throw Error(n(468,x))}T[kr]=l,Yn(T),x=T}l.stateNode=x}else ED(S,l.type,l.stateNode);else l.stateNode=SD(S,x,l.memoizedProps);else T!==x?(T===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):T.count--,x===null?ED(S,l.type,l.stateNode):SD(S,x,l.memoizedProps)):x===null&&l.stateNode!==null&&JT(l,l.memoizedProps,p.memoizedProps)}break;case 27:ei(u,l),ti(l),x&512&&(wr||p===null||Co(p,p.return)),p!==null&&x&4&&JT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ei(u,l),ti(l),x&512&&(wr||p===null||Co(p,p.return)),l.flags&32){S=l.stateNode;try{It(S,"")}catch(Pe){Qt(l,l.return,Pe)}}x&4&&l.stateNode!=null&&(S=l.memoizedProps,JT(l,S,p!==null?p.memoizedProps:S)),x&1024&&(eA=!0);break;case 6:if(ei(u,l),ti(l),x&4){if(l.stateNode===null)throw Error(n(162));x=l.memoizedProps,p=l.stateNode;try{p.nodeValue=x}catch(Pe){Qt(l,l.return,Pe)}}break;case 3:if(Pv=null,S=qa,qa=Rv(u.containerInfo),ei(u,l),qa=S,ti(l),x&4&&p!==null&&p.memoizedState.isDehydrated)try{Bp(u.containerInfo)}catch(Pe){Qt(l,l.return,Pe)}eA&&(eA=!1,E4(l));break;case 4:x=qa,qa=Rv(l.stateNode.containerInfo),ei(u,l),ti(l),qa=x;break;case 12:ei(u,l),ti(l);break;case 31:ei(u,l),ti(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,vv(l,x)));break;case 13:ei(u,l),ti(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Sv=Tn()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,vv(l,x)));break;case 22:S=l.memoizedState!==null;var Q=p!==null&&p.memoizedState!==null,ue=Sl,ye=wr;if(Sl=ue||S,wr=ye||Q,ei(u,l),wr=ye,Sl=ue,ti(l),x&8192)e:for(u=l.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(p===null||Q||Sl||wr||ih(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){Q=p=u;try{if(T=Q.stateNode,S)R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{U=Q.stateNode;var ve=Q.memoizedProps.style,fe=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;U.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Pe){Qt(Q,Q.return,Pe)}}}else if(u.tag===6){if(p===null){Q=u;try{Q.stateNode.nodeValue=S?"":Q.memoizedProps}catch(Pe){Qt(Q,Q.return,Pe)}}}else if(u.tag===18){if(p===null){Q=u;try{var ge=Q.stateNode;S?fD(ge,!0):fD(Q.stateNode,!1)}catch(Pe){Qt(Q,Q.return,Pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}x&4&&(x=l.updateQueue,x!==null&&(p=x.retryQueue,p!==null&&(x.retryQueue=null,vv(l,p))));break;case 19:ei(u,l),ti(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,vv(l,x)));break;case 30:break;case 21:break;default:ei(u,l),ti(l)}}function ti(l){var u=l.flags;if(u&2){try{for(var p,x=l.return;x!==null;){if(m4(x)){p=x;break}x=x.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var S=p.stateNode,T=QT(l);bv(l,T,S);break;case 5:var R=p.stateNode;p.flags&32&&(It(R,""),p.flags&=-33);var U=QT(l);bv(l,U,R);break;case 3:case 4:var Q=p.stateNode.containerInfo,ue=QT(l);ZT(l,ue,Q);break;default:throw Error(n(161))}}catch(ye){Qt(l,l.return,ye)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function E4(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;E4(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function El(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)x4(l,u.alternate,u),u=u.sibling}function ih(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Zc(4,u,u.return),ih(u);break;case 1:Co(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&f4(u,u.return,p),ih(u);break;case 27:K0(u.stateNode);case 26:case 5:Co(u,u.return),ih(u);break;case 22:u.memoizedState===null&&ih(u);break;case 30:ih(u);break;default:ih(u)}l=l.sibling}}function Tl(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var x=u.alternate,S=l,T=u,R=T.flags;switch(T.tag){case 0:case 11:case 15:Tl(S,T,p),z0(4,T);break;case 1:if(Tl(S,T,p),x=T,S=x.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(ue){Qt(x,x.return,ue)}if(x=T,S=x.updateQueue,S!==null){var U=x.stateNode;try{var Q=S.shared.hiddenCallbacks;if(Q!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Q.length;S++)t5(Q[S],U)}catch(ue){Qt(x,x.return,ue)}}p&&R&64&&h4(T),H0(T,T.return);break;case 27:g4(T);case 26:case 5:Tl(S,T,p),p&&x===null&&R&4&&p4(T),H0(T,T.return);break;case 12:Tl(S,T,p);break;case 31:Tl(S,T,p),p&&R&4&&w4(S,T);break;case 13:Tl(S,T,p),p&&R&4&&S4(S,T);break;case 22:T.memoizedState===null&&Tl(S,T,p),H0(T,T.return);break;case 30:break;default:Tl(S,T,p)}u=u.sibling}}function tA(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&N0(p))}function nA(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&N0(l))}function Ga(l,u,p,x){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)T4(l,u,p,x),u=u.sibling}function T4(l,u,p,x){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Ga(l,u,p,x),S&2048&&z0(9,u);break;case 1:Ga(l,u,p,x);break;case 3:Ga(l,u,p,x),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&N0(l)));break;case 12:if(S&2048){Ga(l,u,p,x),l=u.stateNode;try{var T=u.memoizedProps,R=T.id,U=T.onPostCommit;typeof U=="function"&&U(R,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Q){Qt(u,u.return,Q)}}else Ga(l,u,p,x);break;case 31:Ga(l,u,p,x);break;case 13:Ga(l,u,p,x);break;case 23:break;case 22:T=u.stateNode,R=u.alternate,u.memoizedState!==null?T._visibility&2?Ga(l,u,p,x):U0(l,u):T._visibility&2?Ga(l,u,p,x):(T._visibility|=2,Np(l,u,p,x,(u.subtreeFlags&10256)!==0||!1)),S&2048&&tA(R,u);break;case 24:Ga(l,u,p,x),S&2048&&nA(u.alternate,u);break;default:Ga(l,u,p,x)}}function Np(l,u,p,x,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var T=l,R=u,U=p,Q=x,ue=R.flags;switch(R.tag){case 0:case 11:case 15:Np(T,R,U,Q,S),z0(8,R);break;case 23:break;case 22:var ye=R.stateNode;R.memoizedState!==null?ye._visibility&2?Np(T,R,U,Q,S):U0(T,R):(ye._visibility|=2,Np(T,R,U,Q,S)),S&&ue&2048&&tA(R.alternate,R);break;case 24:Np(T,R,U,Q,S),S&&ue&2048&&nA(R.alternate,R);break;default:Np(T,R,U,Q,S)}u=u.sibling}}function U0(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,x=u,S=x.flags;switch(x.tag){case 22:U0(p,x),S&2048&&tA(x.alternate,x);break;case 24:U0(p,x),S&2048&&nA(x.alternate,x);break;default:U0(p,x)}u=u.sibling}}var $0=8192;function kp(l,u,p){if(l.subtreeFlags&$0)for(l=l.child;l!==null;)A4(l,u,p),l=l.sibling}function A4(l,u,p){switch(l.tag){case 26:kp(l,u,p),l.flags&$0&&l.memoizedState!==null&&gU(p,qa,l.memoizedState,l.memoizedProps);break;case 5:kp(l,u,p);break;case 3:case 4:var x=qa;qa=Rv(l.stateNode.containerInfo),kp(l,u,p),qa=x;break;case 22:l.memoizedState===null&&(x=l.alternate,x!==null&&x.memoizedState!==null?(x=$0,$0=16777216,kp(l,u,p),$0=x):kp(l,u,p));break;default:kp(l,u,p)}}function N4(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function V0(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var x=u[p];Vr=x,M4(x,l)}N4(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)k4(l),l=l.sibling}function k4(l){switch(l.tag){case 0:case 11:case 15:V0(l),l.flags&2048&&Zc(9,l,l.return);break;case 3:V0(l);break;case 12:V0(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,wv(l)):V0(l);break;default:V0(l)}}function wv(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var x=u[p];Vr=x,M4(x,l)}N4(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Zc(8,u,u.return),wv(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,wv(u));break;default:wv(u)}l=l.sibling}}function M4(l,u){for(;Vr!==null;){var p=Vr;switch(p.tag){case 0:case 11:case 15:Zc(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var x=p.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:N0(p.memoizedState.cache)}if(x=p.child,x!==null)x.return=p,Vr=x;else e:for(p=l;Vr!==null;){x=Vr;var S=x.sibling,T=x.return;if(b4(x),x===p){Vr=null;break e}if(S!==null){S.return=T,Vr=S;break e}Vr=T}}}var jH={getCacheForType:function(l){var u=ss(xr),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return ss(xr).controller.signal}},DH=typeof WeakMap=="function"?WeakMap:Map,Ut=0,yn=null,St=null,At=0,Jt=0,Ci=null,eu=!1,Mp=!1,rA=!1,Al=0,Jn=0,tu=0,ah=0,sA=0,Ei=0,_p=0,q0=null,ni=null,iA=!1,Sv=0,_4=0,Cv=1/0,Ev=null,nu=null,Mr=0,ru=null,jp=null,Nl=0,aA=0,oA=null,j4=null,G0=0,lA=null;function Ti(){return(Ut&2)!==0&&At!==0?At&-At:q.T!==null?pA():Rb()}function D4(){if(Ei===0)if((At&536870912)===0||jt){var l=hl;hl<<=1,(hl&3932160)===0&&(hl=262144),Ei=l}else Ei=536870912;return l=wi.current,l!==null&&(l.flags|=32),Ei}function ri(l,u,p){(l===yn&&(Jt===2||Jt===9)||l.cancelPendingCommit!==null)&&(Dp(l,0),su(l,At,Ei,!1)),na(l,p),((Ut&2)===0||l!==yn)&&(l===yn&&((Ut&2)===0&&(ah|=p),Jn===4&&su(l,At,Ei,!1)),Eo(l))}function O4(l,u,p){if((Ut&6)!==0)throw Error(n(327));var x=!p&&(u&127)===0&&(u&l.expiredLanes)===0||Pt(l,u),S=x?LH(l,u):uA(l,u,!0),T=x;do{if(S===0){Mp&&!x&&su(l,u,0,!1);break}else{if(p=l.current.alternate,T&&!OH(p)){S=uA(l,u,!1),T=!1;continue}if(S===2){if(T=u,l.errorRecoveryDisabledLanes&T)var R=0;else R=l.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){u=R;e:{var U=l;S=q0;var Q=U.current.memoizedState.isDehydrated;if(Q&&(Dp(U,R).flags|=256),R=uA(U,R,!1),R!==2){if(rA&&!Q){U.errorRecoveryDisabledLanes|=T,ah|=T,S=4;break e}T=ni,ni=S,T!==null&&(ni===null?ni=T:ni.push.apply(ni,T))}S=R}if(T=!1,S!==2)continue}}if(S===1){Dp(l,0),su(l,u,0,!0);break}e:{switch(x=l,T=S,T){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:su(x,u,Ei,!eu);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(S=Sv+300-Tn(),10<S)){if(su(x,u,Ei,!eu),rt(x,0,!0)!==0)break e;Nl=u,x.timeoutHandle=uD(R4.bind(null,x,p,ni,Ev,iA,u,Ei,ah,_p,eu,T,"Throttled",-0,0),S);break e}R4(x,p,ni,Ev,iA,u,Ei,ah,_p,eu,T,null,-0,0)}}break}while(!0);Eo(l)}function R4(l,u,p,x,S,T,R,U,Q,ue,ye,ve,fe,ge){if(l.timeoutHandle=-1,ve=u.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ia},A4(u,T,ve);var Pe=(T&62914560)===T?Sv-Tn():(T&4194048)===T?_4-Tn():0;if(Pe=yU(ve,Pe),Pe!==null){Nl=T,l.cancelPendingCommit=Pe(U4.bind(null,l,u,T,p,x,S,R,U,Q,ye,ve,null,fe,ge)),su(l,T,R,!ue);return}}U4(l,u,T,p,x,S,R,U,Q)}function OH(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var x=0;x<p.length;x++){var S=p[x],T=S.getSnapshot;S=S.value;try{if(!bi(T(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function su(l,u,p,x){u&=~sA,u&=~ah,l.suspendedLanes|=u,l.pingedLanes&=~u,x&&(l.warmLanes|=u),x=l.expirationTimes;for(var S=u;0<S;){var T=31-lt(S),R=1<<T;x[T]=-1,S&=~R}p!==0&&Js(l,p,u)}function Tv(){return(Ut&6)===0?(W0(0),!1):!0}function cA(){if(St!==null){if(Jt===0)var l=St.return;else l=St,gl=Jd=null,TT(l),Sp=null,M0=0,l=St;for(;l!==null;)d4(l.alternate,l),l=l.return;St=null}}function Dp(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,ZH(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Nl=0,cA(),yn=l,St=p=pl(l.current,null),At=u,Jt=0,Ci=null,eu=!1,Mp=Pt(l,u),rA=!1,_p=Ei=sA=ah=tu=Jn=0,ni=q0=null,iA=!1,(u&8)!==0&&(u|=u&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=u;0<x;){var S=31-lt(x),T=1<<S;u|=l[S],x&=~T}return Al=u,Gb(),p}function L4(l,u){ut=null,q.H=I0,u===wp||u===ev?(u=Jj(),Jt=3):u===fT?(u=Jj(),Jt=4):Jt=u===HT?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ci=u,St===null&&(Jn=1,pv(l,oa(u,l.current)))}function P4(){var l=wi.current;return l===null?!0:(At&4194048)===At?da===null:(At&62914560)===At||(At&536870912)!==0?l===da:!1}function I4(){var l=q.H;return q.H=I0,l===null?I0:l}function B4(){var l=q.A;return q.A=jH,l}function Av(){Jn=4,eu||(At&4194048)!==At&&wi.current!==null||(Mp=!0),(tu&134217727)===0&&(ah&134217727)===0||yn===null||su(yn,At,Ei,!1)}function uA(l,u,p){var x=Ut;Ut|=2;var S=I4(),T=B4();(yn!==l||At!==u)&&(Ev=null,Dp(l,u)),u=!1;var R=Jn;e:do try{if(Jt!==0&&St!==null){var U=St,Q=Ci;switch(Jt){case 8:cA(),R=6;break e;case 3:case 2:case 9:case 6:wi.current===null&&(u=!0);var ue=Jt;if(Jt=0,Ci=null,Op(l,U,Q,ue),p&&Mp){R=0;break e}break;default:ue=Jt,Jt=0,Ci=null,Op(l,U,Q,ue)}}RH(),R=Jn;break}catch(ye){L4(l,ye)}while(!0);return u&&l.shellSuspendCounter++,gl=Jd=null,Ut=x,q.H=S,q.A=T,St===null&&(yn=null,At=0,Gb()),R}function RH(){for(;St!==null;)F4(St)}function LH(l,u){var p=Ut;Ut|=2;var x=I4(),S=B4();yn!==l||At!==u?(Ev=null,Cv=Tn()+500,Dp(l,u)):Mp=Pt(l,u);e:do try{if(Jt!==0&&St!==null){u=St;var T=Ci;t:switch(Jt){case 1:Jt=0,Ci=null,Op(l,u,T,1);break;case 2:case 9:if(Xj(T)){Jt=0,Ci=null,z4(u);break}u=function(){Jt!==2&&Jt!==9||yn!==l||(Jt=7),Eo(l)},T.then(u,u);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:Xj(T)?(Jt=0,Ci=null,z4(u)):(Jt=0,Ci=null,Op(l,u,T,7));break;case 5:var R=null;switch(St.tag){case 26:R=St.memoizedState;case 5:case 27:var U=St;if(R?TD(R):U.stateNode.complete){Jt=0,Ci=null;var Q=U.sibling;if(Q!==null)St=Q;else{var ue=U.return;ue!==null?(St=ue,Nv(ue)):St=null}break t}}Jt=0,Ci=null,Op(l,u,T,5);break;case 6:Jt=0,Ci=null,Op(l,u,T,6);break;case 8:cA(),Jn=6;break e;default:throw Error(n(462))}}PH();break}catch(ye){L4(l,ye)}while(!0);return gl=Jd=null,q.H=x,q.A=S,Ut=p,St!==null?0:(yn=null,At=0,Gb(),Jn)}function PH(){for(;St!==null&&!an();)F4(St)}function F4(l){var u=c4(l.alternate,l,Al);l.memoizedProps=l.pendingProps,u===null?Nv(l):St=u}function z4(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=r4(p,u,u.pendingProps,u.type,void 0,At);break;case 11:u=r4(p,u,u.pendingProps,u.type.render,u.ref,At);break;case 5:TT(u);default:d4(p,u),u=St=Bj(u,Al),u=c4(p,u,Al)}l.memoizedProps=l.pendingProps,u===null?Nv(l):St=u}function Op(l,u,p,x){gl=Jd=null,TT(u),Sp=null,M0=0;var S=u.return;try{if(EH(l,S,u,p,At)){Jn=1,pv(l,oa(p,l.current)),St=null;return}}catch(T){if(S!==null)throw St=S,T;Jn=1,pv(l,oa(p,l.current)),St=null;return}u.flags&32768?(jt||x===1?l=!0:Mp||(At&536870912)!==0?l=!1:(eu=l=!0,(x===2||x===9||x===3||x===6)&&(x=wi.current,x!==null&&x.tag===13&&(x.flags|=16384))),H4(u,l)):Nv(u)}function Nv(l){var u=l;do{if((u.flags&32768)!==0){H4(u,eu);return}l=u.return;var p=NH(u.alternate,u,Al);if(p!==null){St=p;return}if(u=u.sibling,u!==null){St=u;return}St=u=l}while(u!==null);Jn===0&&(Jn=5)}function H4(l,u){do{var p=kH(l.alternate,l);if(p!==null){p.flags&=32767,St=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){St=l;return}St=l=p}while(l!==null);Jn=6,St=null}function U4(l,u,p,x,S,T,R,U,Q){l.cancelPendingCommit=null;do kv();while(Mr!==0);if((Ut&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(T=u.lanes|u.childLanes,T|=QE,Ln(l,p,T,R,U,Q),l===yn&&(St=yn=null,At=0),jp=u,ru=l,Nl=p,aA=T,oA=S,j4=x,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,zH(_,function(){return W4(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||x){x=q.T,q.T=null,S=Z.p,Z.p=2,R=Ut,Ut|=4;try{MH(l,u,p)}finally{Ut=R,Z.p=S,q.T=x}}Mr=1,$4(),V4(),q4()}}function $4(){if(Mr===1){Mr=0;var l=ru,u=jp,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=q.T,q.T=null;var x=Z.p;Z.p=2;var S=Ut;Ut|=4;try{C4(u,l);var T=SA,R=Mj(l.containerInfo),U=T.focusedElem,Q=T.selectionRange;if(R!==U&&U&&U.ownerDocument&&kj(U.ownerDocument.documentElement,U)){if(Q!==null&&WE(U)){var ue=Q.start,ye=Q.end;if(ye===void 0&&(ye=ue),"selectionStart"in U)U.selectionStart=ue,U.selectionEnd=Math.min(ye,U.value.length);else{var ve=U.ownerDocument||document,fe=ve&&ve.defaultView||window;if(fe.getSelection){var ge=fe.getSelection(),Pe=U.textContent.length,Ke=Math.min(Q.start,Pe),cn=Q.end===void 0?Ke:Math.min(Q.end,Pe);!ge.extend&&Ke>cn&&(R=cn,cn=Ke,Ke=R);var ie=Nj(U,Ke),re=Nj(U,cn);if(ie&&re&&(ge.rangeCount!==1||ge.anchorNode!==ie.node||ge.anchorOffset!==ie.offset||ge.focusNode!==re.node||ge.focusOffset!==re.offset)){var ce=ve.createRange();ce.setStart(ie.node,ie.offset),ge.removeAllRanges(),Ke>cn?(ge.addRange(ce),ge.extend(re.node,re.offset)):(ce.setEnd(re.node,re.offset),ge.addRange(ce))}}}}for(ve=[],ge=U;ge=ge.parentNode;)ge.nodeType===1&&ve.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ve.length;U++){var be=ve[U];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}zv=!!wA,SA=wA=null}finally{Ut=S,Z.p=x,q.T=p}}l.current=u,Mr=2}}function V4(){if(Mr===2){Mr=0;var l=ru,u=jp,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=q.T,q.T=null;var x=Z.p;Z.p=2;var S=Ut;Ut|=4;try{x4(l,u.alternate,u)}finally{Ut=S,Z.p=x,q.T=p}}Mr=3}}function q4(){if(Mr===4||Mr===3){Mr=0,gi();var l=ru,u=jp,p=Nl,x=j4;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Mr=5:(Mr=0,jp=ru=null,G4(l,l.pendingLanes));var S=l.pendingLanes;if(S===0&&(nu=null),d0(p),u=u.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(xe,u,void 0,(u.current.flags&128)===128)}catch{}if(x!==null){u=q.T,S=Z.p,Z.p=2,q.T=null;try{for(var T=l.onRecoverableError,R=0;R<x.length;R++){var U=x[R];T(U.value,{componentStack:U.stack})}}finally{q.T=u,Z.p=S}}(Nl&3)!==0&&kv(),Eo(l),S=l.pendingLanes,(p&261930)!==0&&(S&42)!==0?l===lA?G0++:(G0=0,lA=l):G0=0,W0(0)}}function G4(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,N0(u)))}function kv(){return $4(),V4(),q4(),W4()}function W4(){if(Mr!==5)return!1;var l=ru,u=aA;aA=0;var p=d0(Nl),x=q.T,S=Z.p;try{Z.p=32>p?32:p,q.T=null,p=oA,oA=null;var T=ru,R=Nl;if(Mr=0,jp=ru=null,Nl=0,(Ut&6)!==0)throw Error(n(331));var U=Ut;if(Ut|=4,k4(T.current),T4(T,T.current,R,p),Ut=U,W0(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(xe,T)}catch{}return!0}finally{Z.p=S,q.T=x,G4(l,u)}}function Y4(l,u,p){u=oa(p,u),u=zT(l.stateNode,u,2),l=Kc(l,u,2),l!==null&&(na(l,2),Eo(l))}function Qt(l,u,p){if(l.tag===3)Y4(l,l,p);else for(;u!==null;){if(u.tag===3){Y4(u,l,p);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(nu===null||!nu.has(x))){l=oa(p,l),p=X5(2),x=Kc(u,p,2),x!==null&&(K5(p,x,u,l),na(x,2),Eo(x));break}}u=u.return}}function dA(l,u,p){var x=l.pingCache;if(x===null){x=l.pingCache=new DH;var S=new Set;x.set(u,S)}else S=x.get(u),S===void 0&&(S=new Set,x.set(u,S));S.has(p)||(rA=!0,S.add(p),l=IH.bind(null,l,u,p),u.then(l,l))}function IH(l,u,p){var x=l.pingCache;x!==null&&x.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,yn===l&&(At&p)===p&&(Jn===4||Jn===3&&(At&62914560)===At&&300>Tn()-Sv?(Ut&2)===0&&Dp(l,0):sA|=p,_p===At&&(_p=0)),Eo(l)}function X4(l,u){u===0&&(u=Fr()),l=Yd(l,u),l!==null&&(na(l,u),Eo(l))}function BH(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),X4(l,p)}function FH(l,u){var p=0;switch(l.tag){case 31:case 13:var x=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(u),X4(l,p)}function zH(l,u){return ar(l,u)}var Mv=null,Rp=null,hA=!1,_v=!1,fA=!1,iu=0;function Eo(l){l!==Rp&&l.next===null&&(Rp===null?Mv=Rp=l:Rp=Rp.next=l),_v=!0,hA||(hA=!0,UH())}function W0(l,u){if(!fA&&_v){fA=!0;do for(var p=!1,x=Mv;x!==null;){if(l!==0){var S=x.pendingLanes;if(S===0)var T=0;else{var R=x.suspendedLanes,U=x.pingedLanes;T=(1<<31-lt(42|l)+1)-1,T&=S&~(R&~U),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(p=!0,Z4(x,T))}else T=At,T=rt(x,x===yn?T:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(T&3)===0||Pt(x,T)||(p=!0,Z4(x,T));x=x.next}while(p);fA=!1}}function HH(){K4()}function K4(){_v=hA=!1;var l=0;iu!==0&&QH()&&(l=iu);for(var u=Tn(),p=null,x=Mv;x!==null;){var S=x.next,T=J4(x,u);T===0?(x.next=null,p===null?Mv=S:p.next=S,S===null&&(Rp=p)):(p=x,(l!==0||(T&3)!==0)&&(_v=!0)),x=S}Mr!==0&&Mr!==5||W0(l),iu!==0&&(iu=0)}function J4(l,u){for(var p=l.suspendedLanes,x=l.pingedLanes,S=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var R=31-lt(T),U=1<<R,Q=S[R];Q===-1?((U&p)===0||(U&x)!==0)&&(S[R]=Rs(U,u)):Q<=u&&(l.expiredLanes|=U),T&=~U}if(u=yn,p=At,p=rt(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,p===0||l===u&&(Jt===2||Jt===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&gn(x),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Pt(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(x!==null&&gn(x),d0(p)){case 2:case 8:p=z;break;case 32:p=_;break;case 268435456:p=Y;break;default:p=_}return x=Q4.bind(null,l),p=ar(p,x),l.callbackPriority=u,l.callbackNode=p,u}return x!==null&&x!==null&&gn(x),l.callbackPriority=2,l.callbackNode=null,2}function Q4(l,u){if(Mr!==0&&Mr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(kv()&&l.callbackNode!==p)return null;var x=At;return x=rt(l,l===yn?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:(O4(l,x,u),J4(l,Tn()),l.callbackNode!=null&&l.callbackNode===p?Q4.bind(null,l):null)}function Z4(l,u){if(kv())return null;O4(l,u,!0)}function UH(){eU(function(){(Ut&6)!==0?ar(Ks,HH):K4()})}function pA(){if(iu===0){var l=bp;l===0&&(l=gr,gr<<=1,(gr&261888)===0&&(gr=256)),iu=l}return iu}function eD(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:sa(""+l)}function tD(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function $H(l,u,p,x,S){if(u==="submit"&&p&&p.stateNode===S){var T=eD((S[vs]||null).action),R=x.submitter;R&&(u=(u=R[vs]||null)?eD(u.formAction):R.getAttribute("formAction"),u!==null&&(T=u,R=null));var U=new Ub("action","action",null,x,S);l.push({event:U,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(iu!==0){var Q=R?tD(S,R):new FormData(S);RT(p,{pending:!0,data:Q,method:S.method,action:T},null,Q)}}else typeof T=="function"&&(U.preventDefault(),Q=R?tD(S,R):new FormData(S),RT(p,{pending:!0,data:Q,method:S.method,action:T},T,Q))},currentTarget:S}]})}}for(var mA=0;mA<JE.length;mA++){var gA=JE[mA],VH=gA.toLowerCase(),qH=gA[0].toUpperCase()+gA.slice(1);Va(VH,"on"+qH)}Va(Dj,"onAnimationEnd"),Va(Oj,"onAnimationIteration"),Va(Rj,"onAnimationStart"),Va("dblclick","onDoubleClick"),Va("focusin","onFocus"),Va("focusout","onBlur"),Va(oH,"onTransitionRun"),Va(lH,"onTransitionStart"),Va(cH,"onTransitionCancel"),Va(Lj,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Y0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Y0));function nD(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var x=l[p],S=x.event;x=x.listeners;e:{var T=void 0;if(u)for(var R=x.length-1;0<=R;R--){var U=x[R],Q=U.instance,ue=U.currentTarget;if(U=U.listener,Q!==T&&S.isPropagationStopped())break e;T=U,S.currentTarget=ue;try{T(S)}catch(ye){qb(ye)}S.currentTarget=null,T=Q}else for(R=0;R<x.length;R++){if(U=x[R],Q=U.instance,ue=U.currentTarget,U=U.listener,Q!==T&&S.isPropagationStopped())break e;T=U,S.currentTarget=ue;try{T(S)}catch(ye){qb(ye)}S.currentTarget=null,T=Q}}}}function Ct(l,u){var p=u[f0];p===void 0&&(p=u[f0]=new Set);var x=l+"__bubble";p.has(x)||(rD(u,l,2,!1),p.add(x))}function yA(l,u,p){var x=0;u&&(x|=4),rD(p,l,x,u)}var jv="_reactListening"+Math.random().toString(36).slice(2);function xA(l){if(!l[jv]){l[jv]=!0,Lb.forEach(function(p){p!=="selectionchange"&&(GH.has(p)||yA(p,!1,l),yA(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[jv]||(u[jv]=!0,yA("selectionchange",!1,u))}}function rD(l,u,p,x){switch(DD(u)){case 2:var S=vU;break;case 8:S=wU;break;default:S=OA}p=S.bind(null,u,p,l),S=void 0,!BE||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),x?S!==void 0?l.addEventListener(u,p,{capture:!0,passive:S}):l.addEventListener(u,p,!0):S!==void 0?l.addEventListener(u,p,{passive:S}):l.addEventListener(u,p,!1)}function bA(l,u,p,x,S){var T=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var R=x.tag;if(R===3||R===4){var U=x.stateNode.containerInfo;if(U===S)break;if(R===4)for(R=x.return;R!==null;){var Q=R.tag;if((Q===3||Q===4)&&R.stateNode.containerInfo===S)return;R=R.return}for(;U!==null;){if(R=zr(U),R===null)return;if(Q=R.tag,Q===5||Q===6||Q===26||Q===27){x=T=R;continue e}U=U.parentNode}}x=x.return}lj(function(){var ue=T,ye=PE(p),ve=[];e:{var fe=Pj.get(l);if(fe!==void 0){var ge=Ub,Pe=l;switch(l){case"keypress":if(zb(p)===0)break e;case"keydown":case"keyup":ge=Fz;break;case"focusin":Pe="focus",ge=UE;break;case"focusout":Pe="blur",ge=UE;break;case"beforeblur":case"afterblur":ge=UE;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=dj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Nz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Uz;break;case Dj:case Oj:case Rj:ge=_z;break;case Lj:ge=Vz;break;case"scroll":case"scrollend":ge=Tz;break;case"wheel":ge=Gz;break;case"copy":case"cut":case"paste":ge=Dz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=fj;break;case"toggle":case"beforetoggle":ge=Yz}var Ke=(u&4)!==0,cn=!Ke&&(l==="scroll"||l==="scrollend"),ie=Ke?fe!==null?fe+"Capture":null:fe;Ke=[];for(var re=ue,ce;re!==null;){var be=re;if(ce=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ce===null||ie===null||(be=g0(re,ie),be!=null&&Ke.push(X0(re,be,ce))),cn)break;re=re.return}0<Ke.length&&(fe=new ge(fe,Pe,null,p,ye),ve.push({event:fe,listeners:Ke}))}}if((u&7)===0){e:{if(fe=l==="mouseover"||l==="pointerover",ge=l==="mouseout"||l==="pointerout",fe&&p!==LE&&(Pe=p.relatedTarget||p.fromElement)&&(zr(Pe)||Pe[zc]))break e;if((ge||fe)&&(fe=ye.window===ye?ye:(fe=ye.ownerDocument)?fe.defaultView||fe.parentWindow:window,ge?(Pe=p.relatedTarget||p.toElement,ge=ue,Pe=Pe?zr(Pe):null,Pe!==null&&(cn=i(Pe),Ke=Pe.tag,Pe!==cn||Ke!==5&&Ke!==27&&Ke!==6)&&(Pe=null)):(ge=null,Pe=ue),ge!==Pe)){if(Ke=dj,be="onMouseLeave",ie="onMouseEnter",re="mouse",(l==="pointerout"||l==="pointerover")&&(Ke=fj,be="onPointerLeave",ie="onPointerEnter",re="pointer"),cn=ge==null?fe:Vd(ge),ce=Pe==null?fe:Vd(Pe),fe=new Ke(be,re+"leave",ge,p,ye),fe.target=cn,fe.relatedTarget=ce,be=null,zr(ye)===ue&&(Ke=new Ke(ie,re+"enter",Pe,p,ye),Ke.target=ce,Ke.relatedTarget=cn,be=Ke),cn=be,ge&&Pe)t:{for(Ke=WH,ie=ge,re=Pe,ce=0,be=ie;be;be=Ke(be))ce++;be=0;for(var Ve=re;Ve;Ve=Ke(Ve))be++;for(;0<ce-be;)ie=Ke(ie),ce--;for(;0<be-ce;)re=Ke(re),be--;for(;ce--;){if(ie===re||re!==null&&ie===re.alternate){Ke=ie;break t}ie=Ke(ie),re=Ke(re)}Ke=null}else Ke=null;ge!==null&&sD(ve,fe,ge,Ke,!1),Pe!==null&&cn!==null&&sD(ve,cn,Pe,Ke,!0)}}e:{if(fe=ue?Vd(ue):window,ge=fe.nodeName&&fe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&fe.type==="file")var Bt=wj;else if(bj(fe))if(Sj)Bt=sH;else{Bt=nH;var Fe=tH}else ge=fe.nodeName,!ge||ge.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?ue&&yr(ue.elementType)&&(Bt=wj):Bt=rH;if(Bt&&(Bt=Bt(l,ue))){vj(ve,Bt,p,ye);break e}Fe&&Fe(l,fe,ue),l==="focusout"&&ue&&fe.type==="number"&&ue.memoizedProps.value!=null&&$r(fe,"number",fe.value)}switch(Fe=ue?Vd(ue):window,l){case"focusin":(bj(Fe)||Fe.contentEditable==="true")&&(dp=Fe,YE=ue,E0=null);break;case"focusout":E0=YE=dp=null;break;case"mousedown":XE=!0;break;case"contextmenu":case"mouseup":case"dragend":XE=!1,_j(ve,p,ye);break;case"selectionchange":if(aH)break;case"keydown":case"keyup":_j(ve,p,ye)}var ht;if(VE)e:{switch(l){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else up?yj(l,p)&&(Nt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Nt="onCompositionStart");Nt&&(pj&&p.locale!=="ko"&&(up||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&up&&(ht=cj()):($c=ye,FE="value"in $c?$c.value:$c.textContent,up=!0)),Fe=Dv(ue,Nt),0<Fe.length&&(Nt=new hj(Nt,l,null,p,ye),ve.push({event:Nt,listeners:Fe}),ht?Nt.data=ht:(ht=xj(p),ht!==null&&(Nt.data=ht)))),(ht=Kz?Jz(l,p):Qz(l,p))&&(Nt=Dv(ue,"onBeforeInput"),0<Nt.length&&(Fe=new hj("onBeforeInput","beforeinput",null,p,ye),ve.push({event:Fe,listeners:Nt}),Fe.data=ht)),$H(ve,l,ue,p,ye)}nD(ve,u)})}function X0(l,u,p){return{instance:l,listener:u,currentTarget:p}}function Dv(l,u){for(var p=u+"Capture",x=[];l!==null;){var S=l,T=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||T===null||(S=g0(l,p),S!=null&&x.unshift(X0(l,S,T)),S=g0(l,u),S!=null&&x.push(X0(l,S,T))),l.tag===3)return x;l=l.return}return[]}function WH(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function sD(l,u,p,x,S){for(var T=u._reactName,R=[];p!==null&&p!==x;){var U=p,Q=U.alternate,ue=U.stateNode;if(U=U.tag,Q!==null&&Q===x)break;U!==5&&U!==26&&U!==27||ue===null||(Q=ue,S?(ue=g0(p,T),ue!=null&&R.unshift(X0(p,ue,Q))):S||(ue=g0(p,T),ue!=null&&R.push(X0(p,ue,Q)))),p=p.return}R.length!==0&&l.push({event:u,listeners:R})}var YH=/\r\n?/g,XH=/\u0000|\uFFFD/g;function iD(l){return(typeof l=="string"?l:""+l).replace(YH,`
`).replace(XH,"")}function aD(l,u){return u=iD(u),iD(l)===u}function ln(l,u,p,x,S,T){switch(p){case"children":typeof x=="string"?u==="body"||u==="textarea"&&x===""||It(l,x):(typeof x=="number"||typeof x=="bigint")&&u!=="body"&&It(l,""+x);break;case"className":ae(l,"class",x);break;case"tabIndex":ae(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":ae(l,p,x);break;case"style":vo(l,x,T);break;case"data":if(u!=="object"){ae(l,"data",x);break}case"src":case"href":if(x===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(p);break}x=sa(""+x),l.setAttribute(p,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(p==="formAction"?(u!=="input"&&ln(l,u,"name",S.name,S,null),ln(l,u,"formEncType",S.formEncType,S,null),ln(l,u,"formMethod",S.formMethod,S,null),ln(l,u,"formTarget",S.formTarget,S,null)):(ln(l,u,"encType",S.encType,S,null),ln(l,u,"method",S.method,S,null),ln(l,u,"target",S.target,S,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(p);break}x=sa(""+x),l.setAttribute(p,x);break;case"onClick":x!=null&&(l.onclick=ia);break;case"onScroll":x!=null&&Ct("scroll",l);break;case"onScrollEnd":x!=null&&Ct("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(p=x.__html,p!=null){if(S.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}p=sa(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(p,""+x):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":x===!0?l.setAttribute(p,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(p,x):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(p,x):l.removeAttribute(p);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(p):l.setAttribute(p,x);break;case"popover":Ct("beforetoggle",l),Ct("toggle",l),$(l,"popover",x);break;case"xlinkActuate":Se(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Se(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Se(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Se(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Se(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Se(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Se(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Se(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Se(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":$(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ra.get(p)||p,$(l,p,x))}}function vA(l,u,p,x,S,T){switch(p){case"style":vo(l,x,T);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(p=x.__html,p!=null){if(S.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"children":typeof x=="string"?It(l,x):(typeof x=="number"||typeof x=="bigint")&&It(l,""+x);break;case"onScroll":x!=null&&Ct("scroll",l);break;case"onScrollEnd":x!=null&&Ct("scrollend",l);break;case"onClick":x!=null&&(l.onclick=ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pb.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(S=p.endsWith("Capture"),u=p.slice(2,S?p.length-7:void 0),T=l[vs]||null,T=T!=null?T[p]:null,typeof T=="function"&&l.removeEventListener(u,T,S),typeof x=="function")){typeof T!="function"&&T!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,x,S);break e}p in l?l[p]=x:x===!0?l.setAttribute(p,""):$(l,p,x)}}}function as(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",l),Ct("load",l);var x=!1,S=!1,T;for(T in p)if(p.hasOwnProperty(T)){var R=p[T];if(R!=null)switch(T){case"src":x=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ln(l,u,T,R,p,null)}}S&&ln(l,u,"srcSet",p.srcSet,p,null),x&&ln(l,u,"src",p.src,p,null);return;case"input":Ct("invalid",l);var U=T=R=S=null,Q=null,ue=null;for(x in p)if(p.hasOwnProperty(x)){var ye=p[x];if(ye!=null)switch(x){case"name":S=ye;break;case"type":R=ye;break;case"checked":Q=ye;break;case"defaultChecked":ue=ye;break;case"value":T=ye;break;case"defaultValue":U=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(137,u));break;default:ln(l,u,x,ye,p,null)}}Xn(l,T,U,Q,ue,R,S,!1);return;case"select":Ct("invalid",l),x=R=T=null;for(S in p)if(p.hasOwnProperty(S)&&(U=p[S],U!=null))switch(S){case"value":T=U;break;case"defaultValue":R=U;break;case"multiple":x=U;default:ln(l,u,S,U,p,null)}u=T,p=R,l.multiple=!!x,u!=null?xi(l,!!x,u,!1):p!=null&&xi(l,!!x,p,!0);return;case"textarea":Ct("invalid",l),T=S=x=null;for(R in p)if(p.hasOwnProperty(R)&&(U=p[R],U!=null))switch(R){case"value":x=U;break;case"defaultValue":S=U;break;case"children":T=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:ln(l,u,R,U,p,null)}Ha(l,x,S,T);return;case"option":for(Q in p)if(p.hasOwnProperty(Q)&&(x=p[Q],x!=null))switch(Q){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:ln(l,u,Q,x,p,null)}return;case"dialog":Ct("beforetoggle",l),Ct("toggle",l),Ct("cancel",l),Ct("close",l);break;case"iframe":case"object":Ct("load",l);break;case"video":case"audio":for(x=0;x<Y0.length;x++)Ct(Y0[x],l);break;case"image":Ct("error",l),Ct("load",l);break;case"details":Ct("toggle",l);break;case"embed":case"source":case"link":Ct("error",l),Ct("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in p)if(p.hasOwnProperty(ue)&&(x=p[ue],x!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ln(l,u,ue,x,p,null)}return;default:if(yr(u)){for(ye in p)p.hasOwnProperty(ye)&&(x=p[ye],x!==void 0&&vA(l,u,ye,x,p,void 0));return}}for(U in p)p.hasOwnProperty(U)&&(x=p[U],x!=null&&ln(l,u,U,x,p,null))}function KH(l,u,p,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,T=null,R=null,U=null,Q=null,ue=null,ye=null;for(ge in p){var ve=p[ge];if(p.hasOwnProperty(ge)&&ve!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":Q=ve;default:x.hasOwnProperty(ge)||ln(l,u,ge,null,x,ve)}}for(var fe in x){var ge=x[fe];if(ve=p[fe],x.hasOwnProperty(fe)&&(ge!=null||ve!=null))switch(fe){case"type":T=ge;break;case"name":S=ge;break;case"checked":ue=ge;break;case"defaultChecked":ye=ge;break;case"value":R=ge;break;case"defaultValue":U=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,u));break;default:ge!==ve&&ln(l,u,fe,ge,x,ve)}}Mn(l,R,U,Q,ue,ye,T,S);return;case"select":ge=R=U=fe=null;for(T in p)if(Q=p[T],p.hasOwnProperty(T)&&Q!=null)switch(T){case"value":break;case"multiple":ge=Q;default:x.hasOwnProperty(T)||ln(l,u,T,null,x,Q)}for(S in x)if(T=x[S],Q=p[S],x.hasOwnProperty(S)&&(T!=null||Q!=null))switch(S){case"value":fe=T;break;case"defaultValue":U=T;break;case"multiple":R=T;default:T!==Q&&ln(l,u,S,T,x,Q)}u=U,p=R,x=ge,fe!=null?xi(l,!!p,fe,!1):!!x!=!!p&&(u!=null?xi(l,!!p,u,!0):xi(l,!!p,p?[]:"",!1));return;case"textarea":ge=fe=null;for(U in p)if(S=p[U],p.hasOwnProperty(U)&&S!=null&&!x.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ln(l,u,U,null,x,S)}for(R in x)if(S=x[R],T=p[R],x.hasOwnProperty(R)&&(S!=null||T!=null))switch(R){case"value":fe=S;break;case"defaultValue":ge=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==T&&ln(l,u,R,S,x,T)}za(l,fe,ge);return;case"option":for(var Pe in p)if(fe=p[Pe],p.hasOwnProperty(Pe)&&fe!=null&&!x.hasOwnProperty(Pe))switch(Pe){case"selected":l.selected=!1;break;default:ln(l,u,Pe,null,x,fe)}for(Q in x)if(fe=x[Q],ge=p[Q],x.hasOwnProperty(Q)&&fe!==ge&&(fe!=null||ge!=null))switch(Q){case"selected":l.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:ln(l,u,Q,fe,x,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in p)fe=p[Ke],p.hasOwnProperty(Ke)&&fe!=null&&!x.hasOwnProperty(Ke)&&ln(l,u,Ke,null,x,fe);for(ue in x)if(fe=x[ue],ge=p[ue],x.hasOwnProperty(ue)&&fe!==ge&&(fe!=null||ge!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,u));break;default:ln(l,u,ue,fe,x,ge)}return;default:if(yr(u)){for(var cn in p)fe=p[cn],p.hasOwnProperty(cn)&&fe!==void 0&&!x.hasOwnProperty(cn)&&vA(l,u,cn,void 0,x,fe);for(ye in x)fe=x[ye],ge=p[ye],!x.hasOwnProperty(ye)||fe===ge||fe===void 0&&ge===void 0||vA(l,u,ye,fe,x,ge);return}}for(var ie in p)fe=p[ie],p.hasOwnProperty(ie)&&fe!=null&&!x.hasOwnProperty(ie)&&ln(l,u,ie,null,x,fe);for(ve in x)fe=x[ve],ge=p[ve],!x.hasOwnProperty(ve)||fe===ge||fe==null&&ge==null||ln(l,u,ve,fe,x,ge)}function oD(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JH(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,p=performance.getEntriesByType("resource"),x=0;x<p.length;x++){var S=p[x],T=S.transferSize,R=S.initiatorType,U=S.duration;if(T&&U&&oD(R)){for(R=0,U=S.responseEnd,x+=1;x<p.length;x++){var Q=p[x],ue=Q.startTime;if(ue>U)break;var ye=Q.transferSize,ve=Q.initiatorType;ye&&oD(ve)&&(Q=Q.responseEnd,R+=ye*(Q<U?1:(U-ue)/(Q-ue)))}if(--x,u+=8*(T+R)/(S.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var wA=null,SA=null;function Ov(l){return l.nodeType===9?l:l.ownerDocument}function lD(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cD(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function CA(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var EA=null;function QH(){var l=window.event;return l&&l.type==="popstate"?l===EA?!1:(EA=l,!0):(EA=null,!1)}var uD=typeof setTimeout=="function"?setTimeout:void 0,ZH=typeof clearTimeout=="function"?clearTimeout:void 0,dD=typeof Promise=="function"?Promise:void 0,eU=typeof queueMicrotask=="function"?queueMicrotask:typeof dD<"u"?function(l){return dD.resolve(null).then(l).catch(tU)}:uD;function tU(l){setTimeout(function(){throw l})}function au(l){return l==="head"}function hD(l,u){var p=u,x=0;do{var S=p.nextSibling;if(l.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"||p==="/&"){if(x===0){l.removeChild(S),Bp(u);return}x--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")x++;else if(p==="html")K0(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,K0(p);for(var T=p.firstChild;T;){var R=T.nextSibling,U=T.nodeName;T[$d]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&T.rel.toLowerCase()==="stylesheet"||p.removeChild(T),T=R}}else p==="body"&&K0(l.ownerDocument.body);p=S}while(p);Bp(u)}function fD(l,u){var p=l;l=0;do{var x=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=x}while(p)}function TA(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":TA(p),m0(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function nU(l,u,p,x){for(;l.nodeType===1;){var S=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[$d])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==S.rel||l.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||l.getAttribute("title")!==(S.title==null?null:S.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(S.src==null?null:S.src)||l.getAttribute("type")!==(S.type==null?null:S.type)||l.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var T=S.name==null?null:""+S.name;if(S.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=ha(l.nextSibling),l===null)break}return null}function rU(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=ha(l.nextSibling),l===null))return null;return l}function pD(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=ha(l.nextSibling),l===null))return null;return l}function AA(l){return l.data==="$?"||l.data==="$~"}function NA(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function sU(l,u){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||p.readyState!=="loading")u();else{var x=function(){u(),p.removeEventListener("DOMContentLoaded",x)};p.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function ha(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var kA=null;function mD(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(u===0)return ha(l.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}l=l.nextSibling}return null}function gD(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return l;u--}else p!=="/$"&&p!=="/&"||u++}l=l.previousSibling}return null}function yD(l,u,p){switch(u=Ov(p),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function K0(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);m0(l)}var fa=new Map,xD=new Set;function Rv(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var kl=Z.d;Z.d={f:iU,r:aU,D:oU,C:lU,L:cU,m:uU,X:hU,S:dU,M:fU};function iU(){var l=kl.f(),u=Tv();return l||u}function aU(l){var u=bo(l);u!==null&&u.tag===5&&u.type==="form"?L5(u):kl.r(l)}var Lp=typeof document>"u"?null:document;function bD(l,u,p){var x=Lp;if(x&&typeof u=="string"&&u){var S=yt(u);S='link[rel="'+l+'"][href="'+S+'"]',typeof p=="string"&&(S+='[crossorigin="'+p+'"]'),xD.has(S)||(xD.add(S),l={rel:l,crossOrigin:p,href:u},x.querySelector(S)===null&&(u=x.createElement("link"),as(u,"link",l),Yn(u),x.head.appendChild(u)))}}function oU(l){kl.D(l),bD("dns-prefetch",l,null)}function lU(l,u){kl.C(l,u),bD("preconnect",l,u)}function cU(l,u,p){kl.L(l,u,p);var x=Lp;if(x&&l&&u){var S='link[rel="preload"][as="'+yt(u)+'"]';u==="image"&&p&&p.imageSrcSet?(S+='[imagesrcset="'+yt(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(S+='[imagesizes="'+yt(p.imageSizes)+'"]')):S+='[href="'+yt(l)+'"]';var T=S;switch(u){case"style":T=Pp(l);break;case"script":T=Ip(l)}fa.has(T)||(l=g({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),fa.set(T,l),x.querySelector(S)!==null||u==="style"&&x.querySelector(J0(T))||u==="script"&&x.querySelector(Q0(T))||(u=x.createElement("link"),as(u,"link",l),Yn(u),x.head.appendChild(u)))}}function uU(l,u){kl.m(l,u);var p=Lp;if(p&&l){var x=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+yt(x)+'"][href="'+yt(l)+'"]',T=S;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Ip(l)}if(!fa.has(T)&&(l=g({rel:"modulepreload",href:l},u),fa.set(T,l),p.querySelector(S)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Q0(T)))return}x=p.createElement("link"),as(x,"link",l),Yn(x),p.head.appendChild(x)}}}function dU(l,u,p){kl.S(l,u,p);var x=Lp;if(x&&l){var S=Hc(x).hoistableStyles,T=Pp(l);u=u||"default";var R=S.get(T);if(!R){var U={loading:0,preload:null};if(R=x.querySelector(J0(T)))U.loading=5;else{l=g({rel:"stylesheet",href:l,"data-precedence":u},p),(p=fa.get(T))&&MA(l,p);var Q=R=x.createElement("link");Yn(Q),as(Q,"link",l),Q._p=new Promise(function(ue,ye){Q.onload=ue,Q.onerror=ye}),Q.addEventListener("load",function(){U.loading|=1}),Q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Lv(R,u,x)}R={type:"stylesheet",instance:R,count:1,state:U},S.set(T,R)}}}function hU(l,u){kl.X(l,u);var p=Lp;if(p&&l){var x=Hc(p).hoistableScripts,S=Ip(l),T=x.get(S);T||(T=p.querySelector(Q0(S)),T||(l=g({src:l,async:!0},u),(u=fa.get(S))&&_A(l,u),T=p.createElement("script"),Yn(T),as(T,"link",l),p.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(S,T))}}function fU(l,u){kl.M(l,u);var p=Lp;if(p&&l){var x=Hc(p).hoistableScripts,S=Ip(l),T=x.get(S);T||(T=p.querySelector(Q0(S)),T||(l=g({src:l,async:!0,type:"module"},u),(u=fa.get(S))&&_A(l,u),T=p.createElement("script"),Yn(T),as(T,"link",l),p.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(S,T))}}function vD(l,u,p,x){var S=(S=je.current)?Rv(S):null;if(!S)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Pp(p.href),p=Hc(S).hoistableStyles,x=p.get(u),x||(x={type:"style",instance:null,count:0,state:null},p.set(u,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Pp(p.href);var T=Hc(S).hoistableStyles,R=T.get(l);if(R||(S=S.ownerDocument||S,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,R),(T=S.querySelector(J0(l)))&&!T._p&&(R.instance=T,R.state.loading=5),fa.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},fa.set(l,p),T||pU(S,l,p,R.state))),u&&x===null)throw Error(n(528,""));return R}if(u&&x!==null)throw Error(n(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ip(p),p=Hc(S).hoistableScripts,x=p.get(u),x||(x={type:"script",instance:null,count:0,state:null},p.set(u,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Pp(l){return'href="'+yt(l)+'"'}function J0(l){return'link[rel="stylesheet"]['+l+"]"}function wD(l){return g({},l,{"data-precedence":l.precedence,precedence:null})}function pU(l,u,p,x){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?x.loading=1:(u=l.createElement("link"),x.preload=u,u.addEventListener("load",function(){return x.loading|=1}),u.addEventListener("error",function(){return x.loading|=2}),as(u,"link",p),Yn(u),l.head.appendChild(u))}function Ip(l){return'[src="'+yt(l)+'"]'}function Q0(l){return"script[async]"+l}function SD(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var x=l.querySelector('style[data-href~="'+yt(p.href)+'"]');if(x)return u.instance=x,Yn(x),x;var S=g({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),Yn(x),as(x,"style",S),Lv(x,p.precedence,l),u.instance=x;case"stylesheet":S=Pp(p.href);var T=l.querySelector(J0(S));if(T)return u.state.loading|=4,u.instance=T,Yn(T),T;x=wD(p),(S=fa.get(S))&&MA(x,S),T=(l.ownerDocument||l).createElement("link"),Yn(T);var R=T;return R._p=new Promise(function(U,Q){R.onload=U,R.onerror=Q}),as(T,"link",x),u.state.loading|=4,Lv(T,p.precedence,l),u.instance=T;case"script":return T=Ip(p.src),(S=l.querySelector(Q0(T)))?(u.instance=S,Yn(S),S):(x=p,(S=fa.get(T))&&(x=g({},p),_A(x,S)),l=l.ownerDocument||l,S=l.createElement("script"),Yn(S),as(S,"link",x),l.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(x=u.instance,u.state.loading|=4,Lv(x,p.precedence,l));return u.instance}function Lv(l,u,p){for(var x=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=x.length?x[x.length-1]:null,T=S,R=0;R<x.length;R++){var U=x[R];if(U.dataset.precedence===u)T=U;else if(T!==S)break}T?T.parentNode.insertBefore(l,T.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function MA(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function _A(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Pv=null;function CD(l,u,p){if(Pv===null){var x=new Map,S=Pv=new Map;S.set(p,x)}else S=Pv,x=S.get(p),x||(x=new Map,S.set(p,x));if(x.has(l))return x;for(x.set(l,null),p=p.getElementsByTagName(l),S=0;S<p.length;S++){var T=p[S];if(!(T[$d]||T[kr]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var R=T.getAttribute(u)||"";R=l+R;var U=x.get(R);U?U.push(T):x.set(R,[T])}}return x}function ED(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function mU(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function TD(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function gU(l,u,p,x){if(p.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var S=Pp(x.href),T=u.querySelector(J0(S));if(T){u=T._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Iv.bind(l),u.then(l,l)),p.state.loading|=4,p.instance=T,Yn(T);return}T=u.ownerDocument||u,x=wD(x),(S=fa.get(S))&&MA(x,S),T=T.createElement("link"),Yn(T);var R=T;R._p=new Promise(function(U,Q){R.onload=U,R.onerror=Q}),as(T,"link",x),p.instance=T}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Iv.bind(l),u.addEventListener("load",p),u.addEventListener("error",p))}}var jA=0;function yU(l,u){return l.stylesheets&&l.count===0&&Fv(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var x=setTimeout(function(){if(l.stylesheets&&Fv(l,l.stylesheets),l.unsuspend){var T=l.unsuspend;l.unsuspend=null,T()}},6e4+u);0<l.imgBytes&&jA===0&&(jA=62500*JH());var S=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Fv(l,l.stylesheets),l.unsuspend)){var T=l.unsuspend;l.unsuspend=null,T()}},(l.imgBytes>jA?50:800)+u);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(x),clearTimeout(S)}}:null}function Iv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fv(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Bv=null;function Fv(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Bv=new Map,u.forEach(xU,l),Bv=null,Iv.call(l))}function xU(l,u){if(!(u.state.loading&4)){var p=Bv.get(l);if(p)var x=p.get(null);else{p=new Map,Bv.set(l,p);for(var S=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<S.length;T++){var R=S[T];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(p.set(R.dataset.precedence,R),x=R)}x&&p.set(null,x)}S=u.instance,R=S.getAttribute("data-precedence"),T=p.get(R)||x,T===x&&p.set(null,S),p.set(R,S),this.count++,x=Iv.bind(this),S.addEventListener("load",x),S.addEventListener("error",x),T?T.parentNode.insertBefore(S,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(S,l.firstChild)),u.state.loading|=4}}var Z0={$$typeof:A,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function bU(l,u,p,x,S,T,R,U,Q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=x,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function AD(l,u,p,x,S,T,R,U,Q,ue,ye,ve){return l=new bU(l,u,p,R,Q,ue,ye,ve,U),u=1,T===!0&&(u|=24),T=vi(3,null,null,u),l.current=T,T.stateNode=l,u=uT(),u.refCount++,l.pooledCache=u,u.refCount++,T.memoizedState={element:x,isDehydrated:p,cache:u},pT(T),l}function ND(l){return l?(l=pp,l):pp}function kD(l,u,p,x,S,T){S=ND(S),x.context===null?x.context=S:x.pendingContext=S,x=Xc(u),x.payload={element:p},T=T===void 0?null:T,T!==null&&(x.callback=T),p=Kc(l,x,u),p!==null&&(ri(p,l,u),j0(p,l,u))}function MD(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function DA(l,u){MD(l,u),(l=l.alternate)&&MD(l,u)}function _D(l){if(l.tag===13||l.tag===31){var u=Yd(l,67108864);u!==null&&ri(u,l,67108864),DA(l,67108864)}}function jD(l){if(l.tag===13||l.tag===31){var u=Ti();u=op(u);var p=Yd(l,u);p!==null&&ri(p,l,u),DA(l,u)}}var zv=!0;function vU(l,u,p,x){var S=q.T;q.T=null;var T=Z.p;try{Z.p=2,OA(l,u,p,x)}finally{Z.p=T,q.T=S}}function wU(l,u,p,x){var S=q.T;q.T=null;var T=Z.p;try{Z.p=8,OA(l,u,p,x)}finally{Z.p=T,q.T=S}}function OA(l,u,p,x){if(zv){var S=RA(x);if(S===null)bA(l,u,x,Hv,p),OD(l,x);else if(CU(S,l,u,p,x))x.stopPropagation();else if(OD(l,x),u&4&&-1<SU.indexOf(l)){for(;S!==null;){var T=bo(S);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var R=Ce(T.pendingLanes);if(R!==0){var U=T;for(U.pendingLanes|=2,U.entangledLanes|=2;R;){var Q=1<<31-lt(R);U.entanglements[1]|=Q,R&=~Q}Eo(T),(Ut&6)===0&&(Cv=Tn()+500,W0(0))}}break;case 31:case 13:U=Yd(T,2),U!==null&&ri(U,T,2),Tv(),DA(T,2)}if(T=RA(x),T===null&&bA(l,u,x,Hv,p),T===S)break;S=T}S!==null&&x.stopPropagation()}else bA(l,u,x,null,p)}}function RA(l){return l=PE(l),LA(l)}var Hv=null;function LA(l){if(Hv=null,l=zr(l),l!==null){var u=i(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=a(u),l!==null)return l;l=null}else if(p===31){if(l=o(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Hv=l,null}function DD(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nr()){case Ks:return 2;case z:return 8;case _:case D:return 32;case Y:return 268435456;default:return 32}default:return 32}}var PA=!1,ou=null,lu=null,cu=null,ey=new Map,ty=new Map,uu=[],SU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OD(l,u){switch(l){case"focusin":case"focusout":ou=null;break;case"dragenter":case"dragleave":lu=null;break;case"mouseover":case"mouseout":cu=null;break;case"pointerover":case"pointerout":ey.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ty.delete(u.pointerId)}}function ny(l,u,p,x,S,T){return l===null||l.nativeEvent!==T?(l={blockedOn:u,domEventName:p,eventSystemFlags:x,nativeEvent:T,targetContainers:[S]},u!==null&&(u=bo(u),u!==null&&_D(u)),l):(l.eventSystemFlags|=x,u=l.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),l)}function CU(l,u,p,x,S){switch(u){case"focusin":return ou=ny(ou,l,u,p,x,S),!0;case"dragenter":return lu=ny(lu,l,u,p,x,S),!0;case"mouseover":return cu=ny(cu,l,u,p,x,S),!0;case"pointerover":var T=S.pointerId;return ey.set(T,ny(ey.get(T)||null,l,u,p,x,S)),!0;case"gotpointercapture":return T=S.pointerId,ty.set(T,ny(ty.get(T)||null,l,u,p,x,S)),!0}return!1}function RD(l){var u=zr(l.target);if(u!==null){var p=i(u);if(p!==null){if(u=p.tag,u===13){if(u=a(p),u!==null){l.blockedOn=u,h0(l.priority,function(){jD(p)});return}}else if(u===31){if(u=o(p),u!==null){l.blockedOn=u,h0(l.priority,function(){jD(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Uv(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=RA(l.nativeEvent);if(p===null){p=l.nativeEvent;var x=new p.constructor(p.type,p);LE=x,p.target.dispatchEvent(x),LE=null}else return u=bo(p),u!==null&&_D(u),l.blockedOn=p,!1;u.shift()}return!0}function LD(l,u,p){Uv(l)&&p.delete(u)}function EU(){PA=!1,ou!==null&&Uv(ou)&&(ou=null),lu!==null&&Uv(lu)&&(lu=null),cu!==null&&Uv(cu)&&(cu=null),ey.forEach(LD),ty.forEach(LD)}function $v(l,u){l.blockedOn===u&&(l.blockedOn=null,PA||(PA=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,EU)))}var Vv=null;function PD(l){Vv!==l&&(Vv=l,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vv===l&&(Vv=null);for(var u=0;u<l.length;u+=3){var p=l[u],x=l[u+1],S=l[u+2];if(typeof x!="function"){if(LA(x||p)===null)continue;break}var T=bo(p);T!==null&&(l.splice(u,3),u-=3,RT(T,{pending:!0,data:S,method:p.method,action:x},x,S))}}))}function Bp(l){function u(Q){return $v(Q,l)}ou!==null&&$v(ou,l),lu!==null&&$v(lu,l),cu!==null&&$v(cu,l),ey.forEach(u),ty.forEach(u);for(var p=0;p<uu.length;p++){var x=uu[p];x.blockedOn===l&&(x.blockedOn=null)}for(;0<uu.length&&(p=uu[0],p.blockedOn===null);)RD(p),p.blockedOn===null&&uu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(x=0;x<p.length;x+=3){var S=p[x],T=p[x+1],R=S[vs]||null;if(typeof T=="function")R||PD(p);else if(R){var U=null;if(T&&T.hasAttribute("formAction")){if(S=T,R=T[vs]||null)U=R.formAction;else if(LA(S)!==null)continue}else U=R.action;typeof U=="function"?p[x+1]=U:(p.splice(x,3),x-=3),PD(p)}}}function ID(){function l(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(R){return S=R})},focusReset:"manual",scroll:"manual"})}function u(){S!==null&&(S(),S=null),x||setTimeout(p,20)}function p(){if(!x&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,S=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){x=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),S!==null&&(S(),S=null)}}}function IA(l){this._internalRoot=l}qv.prototype.render=IA.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var p=u.current,x=Ti();kD(p,x,l,u,null,null)},qv.prototype.unmount=IA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;kD(l.current,2,null,l,null,null),Tv(),u[zc]=null}};function qv(l){this._internalRoot=l}qv.prototype.unstable_scheduleHydration=function(l){if(l){var u=Rb();l={blockedOn:null,target:l,priority:u};for(var p=0;p<uu.length&&u!==0&&u<uu[p].priority;p++);uu.splice(p,0,l),p===0&&RD(l)}};var BD=e.version;if(BD!=="19.2.3")throw Error(n(527,BD,"19.2.3"));Z.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=d(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var TU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gv.isDisabled&&Gv.supportsFiber)try{xe=Gv.inject(TU),$e=Gv}catch{}}return cy.createRoot=function(l,u){if(!s(l))throw Error(n(299));var p=!1,x="",S=q5,T=G5,R=W5;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError)),u=AD(l,1,!1,null,null,p,x,null,S,T,R,ID),l[zc]=u.current,xA(l),new IA(u)},cy.hydrateRoot=function(l,u,p){if(!s(l))throw Error(n(299));var x=!1,S="",T=q5,R=G5,U=W5,Q=null;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(T=p.onUncaughtError),p.onCaughtError!==void 0&&(R=p.onCaughtError),p.onRecoverableError!==void 0&&(U=p.onRecoverableError),p.formState!==void 0&&(Q=p.formState)),u=AD(l,1,!0,u,p??null,x,S,Q,T,R,U,ID),u.context=ND(null),p=u.current,x=Ti(),x=op(x),S=Xc(x),S.callback=null,Kc(p,S,x),p=x,u.current.lanes=p,na(u,p),Eo(u),l[zc]=u.current,xA(l),new qv(u)},cy.version="19.2.3",cy}var LO;function wq(){if(LO)return QA.exports;LO=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),QA.exports=vq(),QA.exports}var Sq=wq();const Cq=Qf(Sq);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PO="popstate";function Eq(r={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return F3("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Sx(s)}return Aq(e,t,null,r)}function zn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Ba(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tq(){return Math.random().toString(36).substring(2,10)}function IO(r,e){return{usr:r.state,key:r.key,idx:e}}function F3(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?r0(e):e,state:t,key:e&&e.key||n||Tq()}}function Sx({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function r0(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function Aq(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",c=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function g(){o="POP";let E=h(),C=E==null?null:E-d;d=E,c&&c({action:o,location:w.location,delta:C})}function y(E,C){o="PUSH";let N=F3(w.location,E,C);d=h()+1;let A=IO(N,d),k=w.createHref(N);try{a.pushState(A,"",k)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(k)}i&&c&&c({action:o,location:w.location,delta:1})}function b(E,C){o="REPLACE";let N=F3(w.location,E,C);d=h();let A=IO(N,d),k=w.createHref(N);a.replaceState(A,"",k),i&&c&&c({action:o,location:w.location,delta:0})}function v(E){return Nq(E)}let w={get action(){return o},get location(){return r(s,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(PO,g),c=E,()=>{s.removeEventListener(PO,g),c=null}},createHref(E){return e(s,E)},createURL:v,encodeLocation(E){let C=v(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:b,go(E){return a.go(E)}};return w}function Nq(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zn(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Sx(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Q8(r,e,t="/"){return kq(r,e,t,!1)}function kq(r,e,t,n){let s=typeof e=="string"?r0(e):e,i=Oc(s.pathname||"/",t);if(i==null)return null;let a=Z8(r);Mq(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let d=zq(i);o=Bq(a[c],d,n)}return o}function Z8(r,e=[],t=[],n="",s=!1){let i=(a,o,c=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;zn(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let g=Tc([n,h.relativePath]),y=t.concat(h);a.children&&a.children.length>0&&(zn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Z8(a.children,e,y,g,c)),!(a.path==null&&!a.index)&&e.push({path:g,score:Pq(g,a.index),routesMeta:y})};return r.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let d of eB(a.path))i(a,o,!0,d)}),e}function eB(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=eB(n.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function Mq(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Iq(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var _q=/^:[\w-]+$/,jq=3,Dq=2,Oq=1,Rq=10,Lq=-2,BO=r=>r==="*";function Pq(r,e){let t=r.split("/"),n=t.length;return t.some(BO)&&(n+=Lq),e&&(n+=Dq),t.filter(s=>!BO(s)).reduce((s,i)=>s+(_q.test(i)?jq:i===""?Oq:Rq),n)}function Iq(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function Bq(r,e,t=!1){let{routesMeta:n}=r,s={},i="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",g=LS({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),y=c.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=LS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:Tc([i,g.pathname]),pathnameBase:Vq(Tc([i,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(i=Tc([i,g.pathnameBase]))}return a}function LS(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Fq(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:g},y)=>{if(h==="*"){let v=o[y]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=o[y];return g&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:r}}function Fq(r,e=!1,t=!0){Ba(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function zq(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ba(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Oc(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var tB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hq=r=>tB.test(r);function Uq(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?r0(r):r,i;if(t)if(Hq(t))i=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Ba(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?i=FO(t.substring(1),"/"):i=FO(t,e)}else i=e;return{pathname:i,search:qq(n),hash:Gq(s)}}function FO(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function n2(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $q(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function GM(r){let e=$q(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function WM(r,e,t,n=!1){let s;typeof r=="string"?s=r0(r):(s={...r},zn(!s.pathname||!s.pathname.includes("?"),n2("?","pathname","search",s)),zn(!s.pathname||!s.pathname.includes("#"),n2("#","pathname","hash",s)),zn(!s.search||!s.search.includes("#"),n2("#","search","hash",s)));let i=r===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let g=e.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}o=g>=0?e[g]:"/"}let c=Uq(s,o),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Tc=r=>r.join("/").replace(/\/\/+/g,"/"),Vq=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),qq=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Gq=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Wq=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Yq(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function Xq(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rB(r,e){let t=r;if(typeof t!="string"||!tB.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,s=!1;if(nB)try{let i=new URL(window.location.href),a=t.startsWith("//")?new URL(i.protocol+t):new URL(t),o=Oc(a.pathname,e);a.origin===i.origin&&o!=null?t=o+a.search+a.hash:s=!0}catch{Ba(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sB=["POST","PUT","PATCH","DELETE"];new Set(sB);var Kq=["GET",...sB];new Set(Kq);var s0=I.createContext(null);s0.displayName="DataRouter";var lE=I.createContext(null);lE.displayName="DataRouterState";var Jq=I.createContext(!1),iB=I.createContext({isTransitioning:!1});iB.displayName="ViewTransition";var Qq=I.createContext(new Map);Qq.displayName="Fetchers";var Zq=I.createContext(null);Zq.displayName="Await";var Zi=I.createContext(null);Zi.displayName="Navigation";var Cb=I.createContext(null);Cb.displayName="Location";var go=I.createContext({outlet:null,matches:[],isDataRoute:!1});go.displayName="Route";var YM=I.createContext(null);YM.displayName="RouteError";var aB="REACT_ROUTER_ERROR",eG="REDIRECT",tG="ROUTE_ERROR_RESPONSE";function nG(r){if(r.startsWith(`${aB}:${eG}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function rG(r){if(r.startsWith(`${aB}:${tG}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Wq(e.status,e.statusText,e.data)}catch{}}function sG(r,{relative:e}={}){zn(i0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=I.useContext(Zi),{hash:s,pathname:i,search:a}=Eb(r,{relative:e}),o=i;return t!=="/"&&(o=i==="/"?t:Tc([t,i])),n.createHref({pathname:o,search:a,hash:s})}function i0(){return I.useContext(Cb)!=null}function dl(){return zn(i0(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Cb).location}var oB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lB(r){I.useContext(Zi).static||I.useLayoutEffect(r)}function yo(){let{isDataRoute:r}=I.useContext(go);return r?yG():iG()}function iG(){zn(i0(),"useNavigate() may be used only in the context of a <Router> component.");let r=I.useContext(s0),{basename:e,navigator:t}=I.useContext(Zi),{matches:n}=I.useContext(go),{pathname:s}=dl(),i=JSON.stringify(GM(n)),a=I.useRef(!1);return lB(()=>{a.current=!0}),I.useCallback((c,d={})=>{if(Ba(a.current,oB),!a.current)return;if(typeof c=="number"){t.go(c);return}let h=WM(c,JSON.parse(i),s,d.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Tc([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,i,s,r])}I.createContext(null);function cB(){let{matches:r}=I.useContext(go),e=r[r.length-1];return e?e.params:{}}function Eb(r,{relative:e}={}){let{matches:t}=I.useContext(go),{pathname:n}=dl(),s=JSON.stringify(GM(t));return I.useMemo(()=>WM(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function aG(r,e){return uB(r,e)}function uB(r,e,t,n,s){var N;zn(i0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=I.useContext(Zi),{matches:a}=I.useContext(go),o=a[a.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",g=o&&o.route;{let A=g&&g.path||"";hB(d,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=dl(),b;if(e){let A=typeof e=="string"?r0(e):e;zn(h==="/"||((N=A.pathname)==null?void 0:N.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),b=A}else b=y;let v=b.pathname||"/",w=v;if(h!=="/"){let A=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=Q8(r,{pathname:w});Ba(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ba(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=dG(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:Tc([h,i.encodeLocation?i.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Tc([h,i.encodeLocation?i.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),a,t,n,s);return e&&C?I.createElement(Cb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function oG(){let r=gG(),e=Yq(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:i},"ErrorBoundary")," or"," ",I.createElement("code",{style:i},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,a)}var lG=I.createElement(oG,null),dB=class extends I.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=rG(r.digest);t&&(r=t)}let e=r!==void 0?I.createElement(go.Provider,{value:this.props.routeContext},I.createElement(YM.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?I.createElement(cG,{error:r},e):e}};dB.contextType=Jq;var r2=new WeakMap;function cG({children:r,error:e}){let{basename:t}=I.useContext(Zi);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=nG(e.digest);if(n){let s=r2.get(e);if(s)throw s;let i=rB(n.location,t);if(nB&&!r2.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw r2.set(e,a),a}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return r}function uG({routeContext:r,match:e,children:t}){let n=I.useContext(s0);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(go.Provider,{value:r},t)}function dG(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,a=t==null?void 0:t.errors;if(a!=null){let h=i.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);zn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let o=!1,c=-1;if(t)for(let h=0;h<i.length;h++){let g=i[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=h),g.route.id){let{loaderData:y,errors:b}=t,v=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||v){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=t&&n?(h,g)=>{var y,b;n(h,{location:t.location,params:((b=(y=t.matches)==null?void 0:y[0])==null?void 0:b.params)??{},unstable_pattern:Xq(t.matches),errorInfo:g})}:void 0;return i.reduceRight((h,g,y)=>{let b,v=!1,w=null,E=null;t&&(b=a&&g.route.id?a[g.route.id]:void 0,w=g.route.errorElement||lG,o&&(c<0&&y===0?(hB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,E=null):c===y&&(v=!0,E=g.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,y+1)),N=()=>{let A;return b?A=w:v?A=E:g.route.Component?A=I.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=h,I.createElement(uG,{match:g,routeContext:{outlet:h,matches:C,isDataRoute:t!=null},children:A})};return t&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?I.createElement(dB,{location:t.location,revalidation:t.revalidation,component:w,error:b,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):N()},null)}function XM(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hG(r){let e=I.useContext(s0);return zn(e,XM(r)),e}function fG(r){let e=I.useContext(lE);return zn(e,XM(r)),e}function pG(r){let e=I.useContext(go);return zn(e,XM(r)),e}function KM(r){let e=pG(r),t=e.matches[e.matches.length-1];return zn(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function mG(){return KM("useRouteId")}function gG(){var n;let r=I.useContext(YM),e=fG("useRouteError"),t=KM("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function yG(){let{router:r}=hG("useNavigate"),e=KM("useNavigate"),t=I.useRef(!1);return lB(()=>{t.current=!0}),I.useCallback(async(s,i={})=>{Ba(t.current,oB),t.current&&(typeof s=="number"?await r.navigate(s):await r.navigate(s,{fromRouteId:e,...i}))},[r,e])}var zO={};function hB(r,e,t){!e&&!zO[r]&&(zO[r]=!0,Ba(!1,t))}I.memo(xG);function xG({routes:r,future:e,state:t,onError:n}){return uB(r,void 0,t,n,e)}function fB({to:r,replace:e,state:t,relative:n}){zn(i0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(Zi);Ba(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=I.useContext(go),{pathname:a}=dl(),o=yo(),c=WM(r,GM(i),a,n==="path"),d=JSON.stringify(c);return I.useEffect(()=>{o(JSON.parse(d),{replace:e,state:t,relative:n})},[o,d,n,e,t]),null}function ya(r){zn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bG({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:i=!1,unstable_useTransitions:a}){zn(!i0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:o,navigator:s,static:i,unstable_useTransitions:a,future:{}}),[o,s,i,a]);typeof t=="string"&&(t=r0(t));let{pathname:d="/",search:h="",hash:g="",state:y=null,key:b="default"}=t,v=I.useMemo(()=>{let w=Oc(d,o);return w==null?null:{location:{pathname:w,search:h,hash:g,state:y,key:b},navigationType:n}},[o,d,h,g,y,b,n]);return Ba(v!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:I.createElement(Zi.Provider,{value:c},I.createElement(Cb.Provider,{children:e,value:v}))}function vG({children:r,location:e}){return aG(z3(r),e)}function z3(r,e=[]){let t=[];return I.Children.forEach(r,(n,s)=>{if(!I.isValidElement(n))return;let i=[...e,s];if(n.type===I.Fragment){t.push.apply(t,z3(n.props.children,i));return}zn(n.type===ya,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=z3(n.props.children,i)),t.push(a)}),t}var hS="get",fS="application/x-www-form-urlencoded";function cE(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function wG(r){return cE(r)&&r.tagName.toLowerCase()==="button"}function SG(r){return cE(r)&&r.tagName.toLowerCase()==="form"}function CG(r){return cE(r)&&r.tagName.toLowerCase()==="input"}function EG(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function TG(r,e){return r.button===0&&(!e||e==="_self")&&!EG(r)}var sw=null;function AG(){if(sw===null)try{new FormData(document.createElement("form"),0),sw=!1}catch{sw=!0}return sw}var NG=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function s2(r){return r!=null&&!NG.has(r)?(Ba(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fS}"`),null):r}function kG(r,e){let t,n,s,i,a;if(SG(r)){let o=r.getAttribute("action");n=o?Oc(o,e):null,t=r.getAttribute("method")||hS,s=s2(r.getAttribute("enctype"))||fS,i=new FormData(r)}else if(wG(r)||CG(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||o.getAttribute("action");if(n=c?Oc(c,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||hS,s=s2(r.getAttribute("formenctype"))||s2(o.getAttribute("enctype"))||fS,i=new FormData(o,r),!AG()){let{name:d,type:h,value:g}=r;if(h==="image"){let y=d?`${d}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else d&&i.append(d,g)}}else{if(cE(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hS,n=null,s=fS,a=r}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function JM(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function MG(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Oc(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function _G(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jG(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function DG(r,e,t){let n=await Promise.all(r.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await _G(i,t);return a.links?a.links():[]}return[]}));return PG(n.flat(1).filter(jG).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function HO(r,e,t,n,s,i){let a=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,o=(c,d)=>{var h;return t[d].pathname!==c.pathname||((h=t[d].route.path)==null?void 0:h.endsWith("*"))&&t[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>a(c,d)||o(c,d)):i==="data"?e.filter((c,d)=>{var g;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function OG(r,e,{includeHydrateFallback:t}={}){return RG(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function RG(r){return[...new Set(r)]}function LG(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function PG(r,e){let t=new Set;return new Set(e),r.reduce((n,s)=>{let i=JSON.stringify(LG(s));return t.has(i)||(t.add(i),n.push({key:i,link:s})),n},[])}function pB(){let r=I.useContext(s0);return JM(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function IG(){let r=I.useContext(lE);return JM(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var QM=I.createContext(void 0);QM.displayName="FrameworkContext";function mB(){let r=I.useContext(QM);return JM(r,"You must render this element inside a <HydratedRouter> element"),r}function BG(r,e){let t=I.useContext(QM),[n,s]=I.useState(!1),[i,a]=I.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,y=I.useRef(null);I.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let w=C=>{C.forEach(N=>{a(N.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[r]),I.useEffect(()=>{if(n){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[n]);let b=()=>{s(!0)},v=()=>{s(!1),a(!1)};return t?r!=="intent"?[i,y,{}]:[i,y,{onFocus:uy(o,b),onBlur:uy(c,v),onMouseEnter:uy(d,b),onMouseLeave:uy(h,v),onTouchStart:uy(g,b)}]:[!1,y,{}]}function uy(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function FG({page:r,...e}){let{router:t}=pB(),n=I.useMemo(()=>Q8(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?I.createElement(HG,{page:r,matches:n,...e}):null}function zG(r){let{manifest:e,routeModules:t}=mB(),[n,s]=I.useState([]);return I.useEffect(()=>{let i=!1;return DG(r,e,t).then(a=>{i||s(a)}),()=>{i=!0}},[r,e,t]),n}function HG({page:r,matches:e,...t}){let n=dl(),{manifest:s,routeModules:i}=mB(),{basename:a}=pB(),{loaderData:o,matches:c}=IG(),d=I.useMemo(()=>HO(r,e,c,s,n,"data"),[r,e,c,s,n]),h=I.useMemo(()=>HO(r,e,c,s,n,"assets"),[r,e,c,s,n]),g=I.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let v=new Set,w=!1;if(e.forEach(C=>{var A;let N=s.routes[C.route.id];!N||!N.hasLoader||(!d.some(k=>k.route.id===C.route.id)&&C.route.id in o&&((A=i[C.route.id])!=null&&A.shouldRevalidate)||N.hasClientLoader?w=!0:v.add(C.route.id))}),v.size===0)return[];let E=MG(r,a,"data");return w&&v.size>0&&E.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[a,o,n,s,d,e,r,i]),y=I.useMemo(()=>OG(h,s),[h,s]),b=zG(h);return I.createElement(I.Fragment,null,g.map(v=>I.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),y.map(v=>I.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),b.map(({key:v,link:w})=>I.createElement("link",{key:v,nonce:t.nonce,...w})))}function UG(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $G=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$G&&(window.__reactRouterVersion="7.11.0")}catch{}function VG({basename:r,children:e,unstable_useTransitions:t,window:n}){let s=I.useRef();s.current==null&&(s.current=Eq({window:n,v5Compat:!0}));let i=s.current,[a,o]=I.useState({action:i.action,location:i.location}),c=I.useCallback(d=>{t===!1?o(d):I.startTransition(()=>o(d))},[t]);return I.useLayoutEffect(()=>i.listen(c),[i,c]),I.createElement(bG,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:t})}var gB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ja=I.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:c,to:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:y,...b},v){let{basename:w,unstable_useTransitions:E}=I.useContext(Zi),C=typeof d=="string"&&gB.test(d),N=rB(d,w);d=N.to;let A=sG(d,{relative:s}),[k,M,O]=BG(n,b),P=YG(d,{replace:a,state:o,target:c,preventScrollReset:h,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:E});function F(ee){e&&e(ee),ee.defaultPrevented||P(ee)}let H=I.createElement("a",{...b,...O,href:N.absoluteURL||A,onClick:N.isExternal||i?e:F,ref:UG(v,M),target:c,"data-discover":!C&&t==="render"?"true":void 0});return k&&!C?I.createElement(I.Fragment,null,H,I.createElement(FG,{page:A})):H});Ja.displayName="Link";var qG=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:c,...d},h){let g=Eb(a,{relative:d.relative}),y=dl(),b=I.useContext(lE),{navigator:v,basename:w}=I.useContext(Zi),E=b!=null&&ZG(g)&&o===!0,C=v.encodeLocation?v.encodeLocation(g).pathname:g.pathname,N=y.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(N=N.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&w&&(A=Oc(A,w)||A);const k=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let M=N===C||!s&&N.startsWith(C)&&N.charAt(k)==="/",O=A!=null&&(A===C||!s&&A.startsWith(C)&&A.charAt(C.length)==="/"),P={isActive:M,isPending:O,isTransitioning:E},F=M?e:void 0,H;typeof n=="function"?H=n(P):H=[n,M?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ee=typeof i=="function"?i(P):i;return I.createElement(Ja,{...d,"aria-current":F,className:H,ref:h,style:ee,to:a,viewTransition:o},typeof c=="function"?c(P):c)});qG.displayName="NavLink";var GG=I.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:i,method:a=hS,action:o,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:y,...b},v)=>{let{unstable_useTransitions:w}=I.useContext(Zi),E=JG(),C=QG(o,{relative:d}),N=a.toLowerCase()==="get"?"get":"post",A=typeof o=="string"&&gB.test(o),k=M=>{if(c&&c(M),M.defaultPrevented)return;M.preventDefault();let O=M.nativeEvent.submitter,P=(O==null?void 0:O.getAttribute("formmethod"))||a,F=()=>E(O||M.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:y});w&&t!==!1?I.startTransition(()=>F()):F()};return I.createElement("form",{ref:v,method:N,action:C,onSubmit:n?c:k,...b,"data-discover":!A&&r==="render"?"true":void 0})});GG.displayName="Form";function WG(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yB(r){let e=I.useContext(s0);return zn(e,WG(r)),e}function YG(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let d=yo(),h=dl(),g=Eb(r,{relative:i});return I.useCallback(y=>{if(TG(y,e)){y.preventDefault();let b=t!==void 0?t:Sx(h)===Sx(g),v=()=>d(r,{replace:b,state:n,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:o});c?I.startTransition(()=>v()):v()}},[h,d,g,t,n,e,r,s,i,a,o,c])}var XG=0,KG=()=>`__${String(++XG)}__`;function JG(){let{router:r}=yB("useSubmit"),{basename:e}=I.useContext(Zi),t=mG(),n=r.fetch,s=r.navigate;return I.useCallback(async(i,a={})=>{let{action:o,method:c,encType:d,formData:h,body:g}=kG(i,e);if(a.navigate===!1){let y=a.fetcherKey||KG();await n(y,t,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await s(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,s,e,t])}function QG(r,{relative:e}={}){let{basename:t}=I.useContext(Zi),n=I.useContext(go);zn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Eb(r||".",{relative:e})},a=dl();if(r==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(g=>g).forEach(g=>o.append("index",g));let h=o.toString();i.search=h?`?${h}`:""}}return(!r||r===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Tc([t,i.pathname])),Sx(i)}function ZG(r,{relative:e}={}){let t=I.useContext(iB);zn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=yB("useViewTransitionState"),s=Eb(r,{relative:e});if(!t.isTransitioning)return!1;let i=Oc(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=Oc(t.nextLocation.pathname,n)||t.nextLocation.pathname;return LS(s.pathname,a)!=null||LS(s.pathname,i)!=null}var eW=J8();const tW=Qf(eW),nW="/assets/file-blank-solid-240-DUMZ0WQ9.png",rW="/assets/file-css-solid-240-BHklwn9W.png",sW="/assets/file-pdf-solid-240-ANi_uwT2.png",iW="/assets/file-png-solid-240-Cd058vx6.png";let aW={data:""},oW=r=>{if(typeof window=="object"){let e=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(r||document.head).appendChild(e),e.firstChild}return r||aW},lW=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,cW=/\/\*[^]*?\*\/|  +/g,UO=/\n+/g,Su=(r,e)=>{let t="",n="",s="";for(let i in r){let a=r[i];i[0]=="@"?i[1]=="i"?t=i+" "+a+";":n+=i[1]=="f"?Su(a,i):i+"{"+Su(a,i[1]=="k"?"":e)+"}":typeof a=="object"?n+=Su(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Su.p?Su.p(i,a):i+":"+a+";")}return t+(e&&s?e+"{"+s+"}":s)+n},Ml={},xB=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+xB(r[t]);return e}return r},uW=(r,e,t,n,s)=>{let i=xB(r),a=Ml[i]||(Ml[i]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(i));if(!Ml[a]){let c=i!==r?r:(d=>{let h,g,y=[{}];for(;h=lW.exec(d.replace(cW,""));)h[4]?y.shift():h[3]?(g=h[3].replace(UO," ").trim(),y.unshift(y[0][g]=y[0][g]||{})):y[0][h[1]]=h[2].replace(UO," ").trim();return y[0]})(r);Ml[a]=Su(s?{["@keyframes "+a]:c}:c,t?"":"."+a)}let o=t&&Ml.g?Ml.g:null;return t&&(Ml.g=Ml[a]),((c,d,h,g)=>{g?d.data=d.data.replace(g,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(Ml[a],e,n,o),a},dW=(r,e,t)=>r.reduce((n,s,i)=>{let a=e[i];if(a&&a.call){let o=a(t),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=c?"."+c:o&&typeof o=="object"?o.props?"":Su(o,""):o===!1?"":o}return n+s+(a??"")},"");function uE(r){let e=this||{},t=r.call?r(e.p):r;return uW(t.unshift?t.raw?dW(t,[].slice.call(arguments,1),e.p):t.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):t,oW(e.target),e.g,e.o,e.k)}let bB,H3,U3;uE.bind({g:1});let Rc=uE.bind({k:1});function hW(r,e,t,n){Su.p=e,bB=r,H3=t,U3=n}function Id(r,e){let t=this||{};return function(){let n=arguments;function s(i,a){let o=Object.assign({},i),c=o.className||s.className;t.p=Object.assign({theme:H3&&H3()},o),t.o=/ *go\d+/.test(c),o.className=uE.apply(t,n)+(c?" "+c:"");let d=r;return r[0]&&(d=o.as||r,delete o.as),U3&&d[0]&&U3(o),bB(d,o)}return s}}var fW=r=>typeof r=="function",PS=(r,e)=>fW(r)?r(e):r,pW=(()=>{let r=0;return()=>(++r).toString()})(),vB=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),mW=20,ZM="default",wB=(r,e)=>{let{toastLimit:t}=r.settings;switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,t)};case 1:return{...r,toasts:r.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return wB(r,{type:r.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let i=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},pS=[],SB={toasts:[],pausedAt:void 0,settings:{toastLimit:mW}},al={},CB=(r,e=ZM)=>{al[e]=wB(al[e]||SB,r),pS.forEach(([t,n])=>{t===e&&n(al[e])})},EB=r=>Object.keys(al).forEach(e=>CB(r,e)),gW=r=>Object.keys(al).find(e=>al[e].toasts.some(t=>t.id===r)),dE=(r=ZM)=>e=>{CB(e,r)},yW={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xW=(r={},e=ZM)=>{let[t,n]=I.useState(al[e]||SB),s=I.useRef(al[e]);I.useEffect(()=>(s.current!==al[e]&&n(al[e]),pS.push([e,n]),()=>{let a=pS.findIndex(([o])=>o===e);a>-1&&pS.splice(a,1)}),[e]);let i=t.toasts.map(a=>{var o,c,d;return{...r,...r[a.type],...a,removeDelay:a.removeDelay||((o=r[a.type])==null?void 0:o.removeDelay)||(r==null?void 0:r.removeDelay),duration:a.duration||((c=r[a.type])==null?void 0:c.duration)||(r==null?void 0:r.duration)||yW[a.type],style:{...r.style,...(d=r[a.type])==null?void 0:d.style,...a.style}}});return{...t,toasts:i}},bW=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||pW()}),Tb=r=>(e,t)=>{let n=bW(e,r,t);return dE(n.toasterId||gW(n.id))({type:2,toast:n}),n.id},Pr=(r,e)=>Tb("blank")(r,e);Pr.error=Tb("error");Pr.success=Tb("success");Pr.loading=Tb("loading");Pr.custom=Tb("custom");Pr.dismiss=(r,e)=>{let t={type:3,toastId:r};e?dE(e)(t):EB(t)};Pr.dismissAll=r=>Pr.dismiss(void 0,r);Pr.remove=(r,e)=>{let t={type:4,toastId:r};e?dE(e)(t):EB(t)};Pr.removeAll=r=>Pr.remove(void 0,r);Pr.promise=(r,e,t)=>{let n=Pr.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(s=>{let i=e.success?PS(e.success,s):void 0;return i?Pr.success(i,{id:n,...t,...t==null?void 0:t.success}):Pr.dismiss(n),s}).catch(s=>{let i=e.error?PS(e.error,s):void 0;i?Pr.error(i,{id:n,...t,...t==null?void 0:t.error}):Pr.dismiss(n)}),r};var vW=1e3,wW=(r,e="default")=>{let{toasts:t,pausedAt:n}=xW(r,e),s=I.useRef(new Map).current,i=I.useCallback((g,y=vW)=>{if(s.has(g))return;let b=setTimeout(()=>{s.delete(g),a({type:4,toastId:g})},y);s.set(g,b)},[]);I.useEffect(()=>{if(n)return;let g=Date.now(),y=t.map(b=>{if(b.duration===1/0)return;let v=(b.duration||0)+b.pauseDuration-(g-b.createdAt);if(v<0){b.visible&&Pr.dismiss(b.id);return}return setTimeout(()=>Pr.dismiss(b.id,e),v)});return()=>{y.forEach(b=>b&&clearTimeout(b))}},[t,n,e]);let a=I.useCallback(dE(e),[e]),o=I.useCallback(()=>{a({type:5,time:Date.now()})},[a]),c=I.useCallback((g,y)=>{a({type:1,toast:{id:g,height:y}})},[a]),d=I.useCallback(()=>{n&&a({type:6,time:Date.now()})},[n,a]),h=I.useCallback((g,y)=>{let{reverseOrder:b=!1,gutter:v=8,defaultPosition:w}=y||{},E=t.filter(A=>(A.position||w)===(g.position||w)&&A.height),C=E.findIndex(A=>A.id===g.id),N=E.filter((A,k)=>k<C&&A.visible).length;return E.filter(A=>A.visible).slice(...b?[N+1]:[0,N]).reduce((A,k)=>A+(k.height||0)+v,0)},[t]);return I.useEffect(()=>{t.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let y=s.get(g.id);y&&(clearTimeout(y),s.delete(g.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:h}}},SW=Rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CW=Rc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,EW=Rc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,TW=Id("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CW} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${EW} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,AW=Rc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,NW=Id("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${AW} 1s linear infinite;
`,kW=Rc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MW=Rc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_W=Id("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kW} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MW} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,jW=Id("div")`
  position: absolute;
`,DW=Id("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OW=Rc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RW=Id("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OW} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,LW=({toast:r})=>{let{icon:e,type:t,iconTheme:n}=r;return e!==void 0?typeof e=="string"?I.createElement(RW,null,e):e:t==="blank"?null:I.createElement(DW,null,I.createElement(NW,{...n}),t!=="loading"&&I.createElement(jW,null,t==="error"?I.createElement(TW,{...n}):I.createElement(_W,{...n})))},PW=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,IW=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,BW="0%{opacity:0;} 100%{opacity:1;}",FW="0%{opacity:1;} 100%{opacity:0;}",zW=Id("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HW=Id("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,UW=(r,e)=>{let t=r.includes("top")?1:-1,[n,s]=vB()?[BW,FW]:[PW(t),IW(t)];return{animation:e?`${Rc(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Rc(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$W=I.memo(({toast:r,position:e,style:t,children:n})=>{let s=r.height?UW(r.position||e||"top-center",r.visible):{opacity:0},i=I.createElement(LW,{toast:r}),a=I.createElement(HW,{...r.ariaProps},PS(r.message,r));return I.createElement(zW,{className:r.className,style:{...s,...t,...r.style}},typeof n=="function"?n({icon:i,message:a}):I.createElement(I.Fragment,null,i,a))});hW(I.createElement);var VW=({id:r,className:e,style:t,onHeightUpdate:n,children:s})=>{let i=I.useCallback(a=>{if(a){let o=()=>{let c=a.getBoundingClientRect().height;n(r,c)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[r,n]);return I.createElement("div",{ref:i,className:e,style:t},s)},qW=(r,e)=>{let t=r.includes("top"),n=t?{top:0}:{bottom:0},s=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vB()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...n,...s}},GW=uE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,iw=16,TB=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:n,children:s,toasterId:i,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:d}=wW(t,i);return I.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:iw,left:iw,right:iw,bottom:iw,pointerEvents:"none",...a},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let g=h.position||e,y=d.calculateOffset(h,{reverseOrder:r,gutter:n,defaultPosition:e}),b=qW(g,y);return I.createElement(VW,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?GW:"",style:b},h.type==="custom"?PS(h.message,h):s?s(h):I.createElement($W,{toast:h,position:g}))}))},tt=Pr;const Ue={GetCurrentUser:async()=>{try{const e=await(await fetch(`${zt}public/currentUser`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();return localStorage.setItem("userData",JSON.stringify(e||{})),e}catch(r){throw console.error("CurrentUser error:",r),r}},GetDoctorsList:async()=>{try{const r=await fetch(`${zt}public/alldoctors`,{method:"GET",headers:{"Content-Type":"application/json"}}),e=await r.json();if(!r.ok)throw console.log("Failed to fetch current user:",r.status),new Error(e.message||"Failed to fetch current user");return localStorage.setItem("DoctorsList",JSON.stringify(e||{})),e}catch(r){throw console.error("DoctorsList error:",r),r}},CreatAppointment:async r=>{try{const e=await fetch(`${zt}public/reservation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw console.log("Failed to fetch current user:",e.status),new Error(t.message||"Failed to fetch current user");return t}catch(e){throw console.error("DoctorsList error:",e),e}},AddPatientInfo:async r=>{try{const e=await fetch(`${zt}public/patient/Info`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw console.log("Failed to fetch current user:",e.status),new Error(t.message||"Failed to fetch current user");return t}catch(e){throw console.error("DoctorsList error:",e),e}},DoctorEditPatientInfo:async r=>{try{const e=await fetch(`${zt}public/doctor/edit-patient-info`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw console.log("Failed to fetch current user:",e.status),new Error(t.message||"Failed to fetch current user");return t}catch(e){throw console.error("DoctorsList error:",e),e}},CancelAppointment:async r=>{try{const e=await fetch(`${zt}public/Cancel-reservation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw console.log("Failed to fetch current user:",e.status),new Error(t.message||"Failed to fetch current user");return t}catch(e){throw console.error("DoctorsList error:",e),e}},UpdateUser:async r=>{const e=await fetch(`${zt}public/Update-user`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)});if(!e.ok){const t=await e.text();let n="Something went wrong";try{n=JSON.parse(t).message||n}catch{t&&(n=t)}throw new Error(n)}return await e.json()},uploadProfilePicture:async r=>{await fetch(`${zt}public/uploadProfilePicture`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:r})},DoctorReservations:async()=>{try{const e=await(await fetch(`${zt}public/doctor-reservation`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();localStorage.setItem("DoctorReservations",JSON.stringify(e||{}))}catch(r){throw console.error("DoctorReservations error:",r),r}},PatientReservations:async()=>{try{const e=await(await fetch(`${zt}public/patient-reservation`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();localStorage.setItem("PatientReservations",JSON.stringify(e||{}))}catch(r){throw console.error("PatientReservations error:",r),r}},uploadDocument:async(r,e)=>{await fetch(`${zt}public/uploadDocument/${e}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:r})},changePasswordSecure:async r=>{try{const e=await fetch(`${zt}/auth/change-password-secure`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(r)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to change password")}return await e.json()}catch(e){throw new Error(e.message||"Network error occurred")}},GetAllUsers:async()=>{try{const e=await(await fetch(`${zt}public/user`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();localStorage.setItem("allUsers",JSON.stringify(e||{}))}catch(r){throw console.error("PatientReservations error:",r),r}},GetReservationCount:async(r,e)=>{try{return await(await fetch(`${zt}public/reservation/count?date=${r}&doctorId=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json()}catch(t){throw console.error("PatientReservations error:",t),t}},UpdateOrCreateDoctorInfo:async r=>{try{const e=await fetch(`${zt}public/doctor`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(r)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to change password")}return await e.json()}catch(e){throw new Error(e.message||"Network error occurred")}},GetDoctorsByStatus:async r=>{try{const t=await(await fetch(`${zt}public/doctors-by-status/${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();return localStorage.setItem("DoctorsList",JSON.stringify(t||{})),t}catch(e){throw console.error("GetDoctors error:",e),e}},UpdateDoctorStatus:async(r,e)=>{const t=await fetch(`${zt}public/doctor/status/${r}?status=${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}});t.ok||console.error("Failed to update doctor status",t.statusText);const n=await t.json();return localStorage.setItem("DoctorsList",JSON.stringify(n||{})),n},UpdateDoctorServingNumber:async r=>{try{await fetch(`${zt}public/doctor/update-serving-number/${r}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})}catch(e){throw tt.error(e.message||"Failed to update Serving Number"),e}},AddNewReview:async r=>{try{await fetch(`${zt}public/addReview`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)})}catch(e){throw tt.error(e.message||"Failed to update Serving Number"),e}},GetReviews:async()=>{try{const e=await(await fetch(`${zt}public/reviews/me`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();return localStorage.setItem("ReservationReviews",JSON.stringify(e||{})),e}catch(r){throw console.error("GetDoctors error:",r),r}},GetReviewsByDoctorId:async r=>{try{const t=await(await fetch(`${zt}public/getReviewsByDoctor/${r}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json();return localStorage.setItem("DoctorReviews",JSON.stringify(t||{})),t}catch(e){throw console.error("GetDoctors error:",e),e}},UpdateAppointmentStatus:async(r,e,t)=>{try{const n=t!=null?`${zt}public/reservation/updatestatus?id=${r}&status=${e}&totalFees=${t}`:`${zt}public/reservation/updatestatus?id=${r}&status=${e}`;await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})}catch(n){throw console.error("PatientReservations error:",n),n}},RescheduleAppointment:async(r,e)=>{try{const t=await fetch(`${zt}public/reservation/reschedule/${r}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to reschedule appointment");return n}catch(t){throw console.error("RescheduleAppointment error:",t),t}},AddMedicalHistory:async r=>{try{const e=await fetch(`${zt}public/doctor/add-medical-history`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to add medical history");return t}catch(e){throw console.error("AddMedicalHistory error:",e),e}},GetAllReservations:async()=>{try{return await(await fetch(`${zt}public/reservation`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})).json()}catch(r){throw console.error("GetAllReservations error:",r),r}},DeleteUser:async r=>{try{const e=await fetch(`${zt}public/user/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}});if(!e.ok){const t=await e.text();throw new Error(t||"Failed to delete user")}return await e.text()}catch(e){throw console.error("DeleteUser error:",e),e}}},zt="https://medicareb.work.gd/api/",AB={0:"src/assets/userProfilePictures/Male/m1.jpg",1:"src/assets/userProfilePictures/Male/m2.jpg",2:"src/assets/userProfilePictures/Male/m3.jpg",3:"src/assets/userProfilePictures/Male/m4.jpg",4:"src/assets/userProfilePictures/Male/m5.jpg",5:"src/assets/userProfilePictures/Male/m6.jpg",6:"src/assets/userProfilePictures/Male/m8.jpg",7:"src/assets/userProfilePictures/Male/m9.jpg",8:"src/assets/userProfilePictures/Male/m1.jpg",9:"src/assets/userProfilePictures/Male/m2.jpg",10:"src/assets/userProfilePictures/Male/m3.jpg",11:"src/assets/userProfilePictures/Male/m4.jpg",12:"src/assets/userProfilePictures/Male/m5.jpg",13:"src/assets/userProfilePictures/Male/m6.jpg",14:"src/assets/userProfilePictures/Male/m8.jpg",15:"src/assets/userProfilePictures/Male/m9.jpg",16:"src/assets/userProfilePictures/Male/m1.jpg",17:"src/assets/userProfilePictures/Male/m2.jpg",18:"src/assets/userProfilePictures/Male/m3.jpg",19:"src/assets/userProfilePictures/Male/m4.jpg",20:"src/assets/userProfilePictures/Male/m5.jpg",21:"src/assets/userProfilePictures/Male/m6.jpg",22:"src/assets/userProfilePictures/Male/m8.jpg",23:"src/assets/userProfilePictures/Male/m9.jpg",24:"src/assets/userProfilePictures/Male/m1.jpg",25:"src/assets/userProfilePictures/Male/m2.jpg",26:"src/assets/userProfilePictures/Male/m3.jpg",27:"src/assets/userProfilePictures/Male/m4.jpg",28:"src/assets/userProfilePictures/Male/m5.jpg",29:"src/assets/userProfilePictures/Male/m6.jpg",30:"src/assets/userProfilePictures/Male/m8.jpg",31:"src/assets/userProfilePictures/Male/m9.jpg"},NB={0:"src/assets/userProfilePictures/Female/f1.jpg",1:"src/assets/userProfilePictures/Female/f2.jpg",2:"src/assets/userProfilePictures/Female/f3.jpg",3:"src/assets/userProfilePictures/Female/f4.jpg",4:"src/assets/userProfilePictures/Female/ff5.jpg",5:"src/assets/userProfilePictures/Female/66.jpg",6:"src/assets/userProfilePictures/Female/ff5.jpg",7:"src/assets/userProfilePictures/Female/f1.jpg",8:"src/assets/userProfilePictures/Female/f1.jpg",9:"src/assets/userProfilePictures/Female/f2.jpg",10:"src/assets/userProfilePictures/Female/f3.jpg",11:"src/assets/userProfilePictures/Female/f4.jpg",12:"src/assets/userProfilePictures/Female/ff5.jpg",13:"src/assets/userProfilePictures/Female/66.jpg",14:"src/assets/userProfilePictures/Female/ff5.jpg",15:"src/assets/userProfilePictures/Female/f1.jpg",16:"src/assets/userProfilePictures/Female/f1.jpg",17:"src/assets/userProfilePictures/Female/f2.jpg",18:"src/assets/userProfilePictures/Female/f3.jpg",19:"src/assets/userProfilePictures/Female/f4.jpg",20:"src/assets/userProfilePictures/Female/ff5.jpg",21:"src/assets/userProfilePictures/Female/66.jpg",22:"src/assets/userProfilePictures/Female/ff5.jpg",23:"src/assets/userProfilePictures/Female/f1.jpg",24:"src/assets/userProfilePictures/Female/f1.jpg",25:"src/assets/userProfilePictures/Female/f2.jpg",26:"src/assets/userProfilePictures/Female/f3.jpg",27:"src/assets/userProfilePictures/Female/f4.jpg",28:"src/assets/userProfilePictures/Female/ff5.jpg",29:"src/assets/userProfilePictures/Female/66.jpg",30:"src/assets/userProfilePictures/Female/ff5.jpg",31:"src/assets/userProfilePictures/Female/f1.jpg"};JSON.parse(localStorage.getItem("userData"));const WW="BG4RexXOjw1VP-aLtSrCVCva4p5rk9crSInF8848SvWXGESDpZRqBb3YNNEtmRGI0VANCYft2DojG8QhHIhCPnU",qf="src/assets/userProfilePictures/default-female.jpg",Lc="src/assets/userProfilePictures/default-male.jpg",kB=["Cairo","elsheikhZayed","Alexandria","Giza","Mansoura","Tanta","Asyut","Suez","PortSaid","Ismailia","Dakahlia","Qalyubia","Gharbia","Sharqia","KafrElSheikh","Beheira","Matrouh","BeniSuef","Minya","Fayoum","Qena","Luxor","Aswan","RedSea","SouthSinai","NorthSinai","NewValley","Sohag"],IS={default:nW,pdf:sW,png:iW,css:rW};function YW({children:r,trigger:e}){const[t,n]=I.useState(!1),s=I.useRef(null),i=()=>{clearTimeout(s.current),n(!0)},a=()=>{s.current=setTimeout(()=>{n(!1)},400)};return f.jsxs("div",{onMouseEnter:i,onMouseLeave:a,className:"relative inline-block",children:[f.jsx("div",{className:`w-full pr-10 ${t?"bg-white rounded-t-xl":""}`,children:e}),t&&f.jsx("ul",{className:`absolute w-full  z-11\r
            bg-white divide-y divide-gray-100 rounded-b-lg shadow-2xl shadow-black overflow-hidden`,children:r})]})}function $O({children:r}){return f.jsx("li",{className:`flex gap-3 items-center px-4 py-2 text-gray-800 hover:bg-gray-50\r
        cursor-pointer `,children:r})}const Lf={signup:async r=>{try{const e=await fetch(`${zt}auth/signup`,{method:"POST",headers:{"Content-Type":"application/json",accept:"*/*"},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw new Error(t.message||"Signup failed");return t}catch(e){throw console.error("Signup error:",e),e}},login:async r=>{try{const e=await fetch(`${zt}auth/signin`,{method:"POST",headers:{"Content-Type":"application/json",accept:"*/*"},body:JSON.stringify(r)});console.log(e.status);const t=await e.json();if(!e.ok)throw new Error(t.message||"Login failed");return t.token&&(localStorage.setItem("authToken",t.token),await Ue.GetCurrentUser()),t}catch(e){throw console.error("Login error:",e),e}},logout:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),localStorage.removeItem("DoctorsList"),localStorage.removeItem("loglevel"),localStorage.removeItem("PatientReservations"),localStorage.removeItem("DoctorReservations")},getToken:()=>localStorage.getItem("authToken"),isLoggedIn:()=>!!localStorage.getItem("authToken")};function Xy(){const r=localStorage.getItem("userData"),e=r?JSON.parse(r):null,[t,n]=I.useState(!1),s=yo();return I.useEffect(()=>{n(e!==null)},[]),f.jsx("div",{children:f.jsxs("header",{className:"flex justify-between items-center h-26  text-black py-6 px-8 md:px-39",children:[f.jsx("div",{className:"flex items-center",children:f.jsx(Ja,{to:"/",className:"text-lg hover:text-blue-500",children:f.jsx("img",{src:"src/assets/medicare Logo.png",className:"w-50"})})}),f.jsxs("nav",{className:"space-x-4  flex flex-row items-center",children:[f.jsx(Ja,{to:"/",className:"text-lg hover:text-blue-500 mt-3",children:"Home"}),(e==null?void 0:e.roles[0].name)==="ROLE_DOCTOR"&&f.jsx(Ja,{to:"/dashboard",className:"text-lg hover:text-blue-500 mt-3",children:"Dashboard"}),(e==null?void 0:e.roles[0].name)==="ROLE_ADMIN"&&f.jsx(Ja,{to:"/admin",className:"text-lg hover:text-blue-500 mt-3",children:"Admin Panel"}),t===!0?f.jsxs(YW,{trigger:f.jsxs(Ja,{to:"/settings",className:"text-lg w-[190px] hover:text-blue-500 flex flex-row items-center space-x-3 ",children:[f.jsx("img",{src:e.imageUrl!=null?e.imageUrl:e.gender==="male"?Lc:qf,alt:e.gender==="male"?Lc:qf,className:"w-[50px] h-[50px]  mb-1 rounded-full ml-3 mt-3 object-cover"}),f.jsxs("div",{className:"flex flex-col ",children:[f.jsxs("p",{className:"leading-4 mt-3 font-[Poppins] ",children:[e==null?void 0:e.username," "]}),f.jsxs("p",{className:"font-[Poppins] text-gray-800 text-sm pr-3 max-w-[160px] overflow-hidden text-ellipsis whitespace-nowrap",children:[e==null?void 0:e.email," "]})]})]}),children:[f.jsx($O,{children:f.jsx("button",{className:"text-lg hover:text-blue-500",onClick:()=>{Lf.logout(),n(!1),s("/")},children:"Logout"})}),f.jsx($O,{children:f.jsx(Ja,{to:"/settings",className:"text-lg hover:text-blue-500",children:"Profile"})})]}):f.jsx(f.Fragment,{}),t===!1?f.jsx(Ja,{to:"/signup",children:f.jsx("button",{className:"bg-[#DFDFDF] text-[#373637] w-40 h-11 rounded-lg font-bold pt-1 hover:bg-[rgba(0,0,0,0.2)] transition duration-300 ease-in-out",children:f.jsxs("span",{className:"inline-flex items-center space-x-2",children:[f.jsx("svg",{className:"w-5 h-5",width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M11.3334 13V11.6667C11.3334 10.9594 11.0525 10.2811 10.5524 9.78105C10.0523 9.28095 9.37399 9 8.66675 9H3.33341C2.62617 9 1.94789 9.28095 1.4478 9.78105C0.9477 10.2811 0.666748 10.9594 0.666748 11.6667V13M15.3334 13V11.6667C15.333 11.0758 15.1363 10.5018 14.7743 10.0349C14.4123 9.5679 13.9055 9.23438 13.3334 9.08667M10.6667 1.08667C11.2404 1.23353 11.7488 1.56713 12.1118 2.03487C12.4749 2.50261 12.672 3.07789 12.672 3.67C12.672 4.26211 12.4749 4.83739 12.1118 5.30513C11.7488 5.77287 11.2404 6.10647 10.6667 6.25333M8.66675 3.66667C8.66675 5.13943 7.47284 6.33333 6.00008 6.33333C4.52732 6.33333 3.33341 5.13943 3.33341 3.66667C3.33341 2.19391 4.52732 1 6.00008 1C7.47284 1 8.66675 2.19391 8.66675 3.66667Z",stroke:"#8A226F",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),f.jsx("span",{className:"font-[Poppins]  text-sm",children:"  Create Account"})]})})}):f.jsx(f.Fragment,{}),t===!1?f.jsx(Ja,{to:"/login",children:f.jsx("button",{className:"bg-[#DFDFDF] text-[#373637] w-35 h-11 rounded-lg font-bold pt-1 hover:bg-[rgba(0,0,0,0.2)] transition duration-300 ease-in-out",children:f.jsxs("span",{className:"inline-flex items-center space-x-2",children:[f.jsx("svg",{className:"w-5 h-5",width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M11.3334 13V11.6667C11.3334 10.9594 11.0525 10.2811 10.5524 9.78105C10.0523 9.28095 9.37399 9 8.66675 9H3.33341C2.62617 9 1.94789 9.28095 1.4478 9.78105C0.9477 10.2811 0.666748 10.9594 0.666748 11.6667V13M15.3334 13V11.6667C15.333 11.0758 15.1363 10.5018 14.7743 10.0349C14.4123 9.5679 13.9055 9.23438 13.3334 9.08667M10.6667 1.08667C11.2404 1.23353 11.7488 1.56713 12.1118 2.03487C12.4749 2.50261 12.672 3.07789 12.672 3.67C12.672 4.26211 12.4749 4.83739 12.1118 5.30513C11.7488 5.77287 11.2404 6.10647 10.6667 6.25333M8.66675 3.66667C8.66675 5.13943 7.47284 6.33333 6.00008 6.33333C4.52732 6.33333 3.33341 5.13943 3.33341 3.66667C3.33341 2.19391 4.52732 1 6.00008 1C7.47284 1 8.66675 2.19391 8.66675 3.66667Z",stroke:"#8A226F",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),f.jsx("span",{className:"font-[Poppins]  text-sm",children:" Sign in"})]})})}):f.jsx(f.Fragment,{})]})]})})}function MB({text:r,Input:e,change:t,width:n}){return f.jsxs("div",{className:"flex rounded-2xl ",children:[f.jsxs("svg",{width:"56",height:"59",viewBox:"0 0 56 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"z-10 ",children:[f.jsx("path",{d:"M0 10C0 4.47715 4.47715 0 10 0H46C51.5229 0 56 4.47715 56 10V49C56 54.5228 51.5229 59 46 59H10C4.47715 59 0 54.5228 0 49V10Z",fill:"#95D2FF"}),f.jsx("path",{d:"M36.625 40.5L31.7312 35.425M34.375 28.8333C34.375 33.988 30.3456 38.1667 25.375 38.1667C20.4044 38.1667 16.375 33.988 16.375 28.8333C16.375 23.6787 20.4044 19.5 25.375 19.5C30.3456 19.5 34.375 23.6787 34.375 28.8333Z",stroke:"#444444",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),f.jsx("input",{style:{width:n},className:"flex max-w-[600px] h-[59px] bg-[rgb(120,111,173,17%)] text-[Poppins] font-bold text-[#7B7B7B] rounded-xl  absolute z-0  pl-20 items-center justify-start focus:border-gray-400 focus:border-2 outline-0  ",type:"text",placeholder:r,value:e,onChange:t})]})}function _B({location:r,width:e}){return f.jsxs("div",{className:"flex rounded-2xl ",children:[f.jsxs("svg",{width:"56",height:"59",viewBox:"0 0 56 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"z-10 ",children:[f.jsx("path",{d:"M0 10C0 4.47715 4.47715 0 10 0H46C51.5229 0 56 4.47715 56 10V49C56 54.5228 51.5229 59 46 59H10C4.47715 59 0 54.5228 0 49V10Z",fill:"#95D2FF"}),f.jsx("path",{d:"M27.5 44.1667C27.1597 44.1667 26.868 44.0722 26.625 43.8833C26.3819 43.6944 26.1996 43.4465 26.0781 43.1396C25.6163 41.8174 25.0329 40.5778 24.3281 39.4208C23.6475 38.2639 22.6875 36.9062 21.4479 35.3479C20.2083 33.7896 19.1996 32.3021 18.4218 30.8854C17.6684 29.4687 17.2916 27.7569 17.2916 25.75C17.2916 22.9875 18.276 20.65 20.2448 18.7375C22.2378 16.8014 24.6562 15.8333 27.5 15.8333C30.3437 15.8333 32.75 16.8014 34.7187 18.7375C36.7118 20.65 37.7083 22.9875 37.7083 25.75C37.7083 27.8986 37.2829 29.6931 36.4323 31.1333C35.6059 32.55 34.6458 33.9549 33.552 35.3479C32.2395 37.0479 31.243 38.4646 30.5625 39.5979C29.9062 40.7076 29.3593 41.8882 28.9218 43.1396C28.8003 43.4701 28.6059 43.7299 28.3385 43.9187C28.0954 44.084 27.8159 44.1667 27.5 44.1667ZM27.5 39.1021C27.9132 38.2993 28.375 37.5083 28.8854 36.7292C29.4201 35.95 30.1979 34.9111 31.2187 33.6125C32.2638 32.2903 33.1145 31.0743 33.7708 29.9646C34.4513 28.8312 34.7916 27.4264 34.7916 25.75C34.7916 23.7903 34.0746 22.1257 32.6406 20.7562C31.2309 19.3632 29.5173 18.6667 27.5 18.6667C25.4826 18.6667 23.7569 19.3632 22.3229 20.7562C20.9132 22.1257 20.2083 23.7903 20.2083 25.75C20.2083 27.4264 20.5364 28.8312 21.1927 29.9646C21.8732 31.0743 22.7361 32.2903 23.7812 33.6125C24.802 34.9111 25.5677 35.95 26.0781 36.7292C26.6128 37.5083 27.0868 38.2993 27.5 39.1021ZM27.5 29.2917C28.5208 29.2917 29.3836 28.9493 30.0885 28.2646C30.7934 27.5799 31.1458 26.7417 31.1458 25.75C31.1458 24.7583 30.7934 23.9201 30.0885 23.2354C29.3836 22.5507 28.5208 22.2083 27.5 22.2083C26.4791 22.2083 25.6163 22.5507 24.9114 23.2354C24.2066 23.9201 23.8541 24.7583 23.8541 25.75C23.8541 26.7417 24.2066 27.5799 24.9114 28.2646C25.6163 28.9493 26.4791 29.2917 27.5 29.2917Z",fill:"#4A4458"})]}),f.jsxs("div",{style:{width:e},className:"flex max-w-[600px] h-[59px] bg-[rgb(120,111,173,17%)] text-[Poppins] font-bold text-[#7B7B7B] rounded-lg  absolute z-0  pl-20 items-center justify-start ",children:[" ",r]})]})}const jB=6048e5,XW=864e5,e_=6e4,t_=36e5,KW=1e3,VO=Symbol.for("constructDateFrom");function Rn(r,e){return typeof r=="function"?r(e):r&&typeof r=="object"&&VO in r?r[VO](e):r instanceof Date?new r.constructor(e):new Date(e)}function Kt(r,e){return Rn(e||r,r)}function n_(r,e,t){const n=Kt(r,t==null?void 0:t.in);return isNaN(e)?Rn((t==null?void 0:t.in)||r,NaN):(e&&n.setDate(n.getDate()+e),n)}function JW(r,e,t){const n=Kt(r,t==null?void 0:t.in);if(isNaN(e))return Rn(r,NaN);if(!e)return n;const s=n.getDate(),i=Rn(r,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function qO(r,e,t){const{years:n=0,months:s=0,weeks:i=0,days:a=0,hours:o=0,minutes:c=0,seconds:d=0}=e,h=Kt(r,t==null?void 0:t.in),g=s||n?JW(h,s+n*12):h,y=a||i?n_(g,a+i*7):g,b=c+o*60,w=(d+b*60)*1e3;return Rn(r,+y+w)}let QW={};function a0(){return QW}function Dd(r,e){var o,c,d,h;const t=a0(),n=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Kt(r,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Wg(r,e){return Dd(r,{...e,weekStartsOn:1})}function DB(r,e){const t=Kt(r,e==null?void 0:e.in),n=t.getFullYear(),s=Rn(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Wg(s),a=Rn(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Wg(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function BS(r){const e=Kt(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function hE(r,...e){const t=Rn.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function Cx(r,e){const t=Kt(r,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function ZW(r,e,t){const[n,s]=hE(t==null?void 0:t.in,r,e),i=Cx(n),a=Cx(s),o=+i-BS(i),c=+a-BS(a);return Math.round((o-c)/XW)}function eY(r,e){const t=DB(r,e),n=Rn(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wg(n)}function tY(r){return Rn(r,Date.now())}function $3(r,e,t){const[n,s]=hE(t==null?void 0:t.in,r,e);return+Cx(n)==+Cx(s)}function nY(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function rY(r){return!(!nY(r)&&typeof r!="number"||isNaN(+Kt(r)))}function sY(r,e){const t=Kt(r,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function iY(r,e){const[t,n]=hE(r,e.start,e.end);return{start:t,end:n}}function aY(r,e){const{start:t,end:n}=iY(e==null?void 0:e.in,r);let s=+t>+n;const i=s?+t:+n,a=s?n:t;a.setHours(0,0,0,0);let o=1;const c=[];for(;+a<=i;)c.push(Rn(t,a)),a.setDate(a.getDate()+o),a.setHours(0,0,0,0);return s?c.reverse():c}function oY(r,e){const t=Kt(r,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const lY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cY=(r,e,t)=>{let n;const s=lY[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function i2(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const uY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fY={date:i2({formats:uY,defaultWidth:"full"}),time:i2({formats:dY,defaultWidth:"full"}),dateTime:i2({formats:hY,defaultWidth:"full"})},pY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mY=(r,e,t,n)=>pY[r];function dy(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=r.formattingValues[o]||r.formattingValues[a]}else{const a=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[o]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const gY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SY=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},CY={ordinalNumber:SY,era:dy({values:gY,defaultWidth:"wide"}),quarter:dy({values:yY,defaultWidth:"wide",argumentCallback:r=>r-1}),month:dy({values:xY,defaultWidth:"wide"}),day:dy({values:bY,defaultWidth:"wide"}),dayPeriod:dy({values:vY,defaultWidth:"wide",formattingValues:wY,defaultFormattingWidth:"wide"})};function hy(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],c=Array.isArray(o)?TY(o,g=>g.test(a)):EY(o,g=>g.test(a));let d;d=r.valueCallback?r.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function EY(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function TY(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function AY(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const NY=/^(\d+)(th|st|nd|rd)?/i,kY=/\d+/i,MY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_Y={any:[/^b/i,/^(a|c)/i]},jY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DY={any:[/1/i,/2/i,/3/i,/4/i]},OY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},RY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},BY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FY={ordinalNumber:AY({matchPattern:NY,parsePattern:kY,valueCallback:r=>parseInt(r,10)}),era:hy({matchPatterns:MY,defaultMatchWidth:"wide",parsePatterns:_Y,defaultParseWidth:"any"}),quarter:hy({matchPatterns:jY,defaultMatchWidth:"wide",parsePatterns:DY,defaultParseWidth:"any",valueCallback:r=>r+1}),month:hy({matchPatterns:OY,defaultMatchWidth:"wide",parsePatterns:RY,defaultParseWidth:"any"}),day:hy({matchPatterns:LY,defaultMatchWidth:"wide",parsePatterns:PY,defaultParseWidth:"any"}),dayPeriod:hy({matchPatterns:IY,defaultMatchWidth:"any",parsePatterns:BY,defaultParseWidth:"any"})},OB={code:"en-US",formatDistance:cY,formatLong:fY,formatRelative:mY,localize:CY,match:FY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zY(r,e){const t=Kt(r,e==null?void 0:e.in);return ZW(t,oY(t))+1}function RB(r,e){const t=Kt(r,e==null?void 0:e.in),n=+Wg(t)-+eY(t);return Math.round(n/jB)+1}function r_(r,e){var h,g,y,b;const t=Kt(r,e==null?void 0:e.in),n=t.getFullYear(),s=a0(),i=(e==null?void 0:e.firstWeekContainsDate)??((g=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)??1,a=Rn((e==null?void 0:e.in)||r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=Dd(a,e),c=Rn((e==null?void 0:e.in)||r,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Dd(c,e);return+t>=+o?n+1:+t>=+d?n:n-1}function HY(r,e){var o,c,d,h;const t=a0(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r_(r,e),i=Rn((e==null?void 0:e.in)||r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Dd(i,e)}function LB(r,e){const t=Kt(r,e==null?void 0:e.in),n=+Dd(t,e)-+HY(t,e);return Math.round(n/jB)+1}function rn(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const hu={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return rn(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):rn(t+1,2)},d(r,e){return rn(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return rn(r.getHours()%12||12,e.length)},H(r,e){return rn(r.getHours(),e.length)},m(r,e){return rn(r.getMinutes(),e.length)},s(r,e){return rn(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return rn(s,e.length)}},zp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GO={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return hu.y(r,e)},Y:function(r,e,t,n){const s=r_(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return rn(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):rn(i,e.length)},R:function(r,e){const t=DB(r);return rn(t,e.length)},u:function(r,e){const t=r.getFullYear();return rn(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return rn(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return rn(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return hu.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return rn(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=LB(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):rn(s,e.length)},I:function(r,e,t){const n=RB(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):rn(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):hu.d(r,e)},D:function(r,e,t){const n=zY(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):rn(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return rn(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return rn(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return rn(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=zp.noon:n===0?s=zp.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=zp.evening:n>=12?s=zp.afternoon:n>=4?s=zp.morning:s=zp.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return hu.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):hu.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):rn(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):rn(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):hu.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):hu.s(r,e)},S:function(r,e){return hu.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return YO(n);case"XXXX":case"XX":return hh(n);case"XXXXX":case"XXX":default:return hh(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return YO(n);case"xxxx":case"xx":return hh(n);case"xxxxx":case"xxx":default:return hh(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+WO(n,":");case"OOOO":default:return"GMT"+hh(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+WO(n,":");case"zzzz":default:return"GMT"+hh(n,":")}},t:function(r,e,t){const n=Math.trunc(+r/1e3);return rn(n,e.length)},T:function(r,e,t){return rn(+r,e.length)}};function WO(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+rn(i,2)}function YO(r,e){return r%60===0?(r>0?"-":"+")+rn(Math.abs(r)/60,2):hh(r,e)}function hh(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=rn(Math.trunc(n/60),2),i=rn(n%60,2);return t+s+e+i}const XO=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PB=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},UY=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return XO(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",XO(n,e)).replace("{{time}}",PB(s,e))},V3={p:PB,P:UY},$Y=/^D+$/,VY=/^Y+$/,qY=["D","DD","YY","YYYY"];function IB(r){return $Y.test(r)}function BB(r){return VY.test(r)}function q3(r,e,t){const n=GY(r,e,t);if(console.warn(n),qY.includes(r))throw new RangeError(n)}function GY(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XY=/^'([^]*?)'?$/,KY=/''/g,JY=/[a-zA-Z]/;function hr(r,e,t){var h,g,y,b;const n=a0(),s=n.locale??OB,i=n.firstWeekContainsDate??((g=(h=n.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,a=n.weekStartsOn??((b=(y=n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0,o=Kt(r,t==null?void 0:t.in);if(!rY(o))throw new RangeError("Invalid time value");let c=e.match(YY).map(v=>{const w=v[0];if(w==="p"||w==="P"){const E=V3[w];return E(v,s.formatLong)}return v}).join("").match(WY).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:QY(v)};if(GO[w])return{isToken:!0,value:v};if(w.match(JY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const w=v.value;(BB(w)||IB(w))&&q3(w,e,String(r));const E=GO[w[0]];return E(o,w,s.localize,d)}).join("")}function QY(r){const e=r.match(XY);return e?e[1].replace(KY,"'"):r}function Hy(r,e){return Kt(r,e==null?void 0:e.in).getDay()}function ZY(){return Object.assign({},a0())}function eX(r,e){const t=Kt(r,e==null?void 0:e.in).getDay();return t===0?7:t}function a2(r,e){return+Kt(r)<+Kt(e)}function fu(r,e){return+Kt(r)==+Kt(e)}function tX(r,e){const t=nX(e)?new e(0):Rn(e,0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}function nX(r){var e;return typeof r=="function"&&((e=r.prototype)==null?void 0:e.constructor)===r}const rX=10;class FB{constructor(){le(this,"subPriority",0)}validate(e,t){return!0}}class sX extends FB{constructor(e,t,n,s,i){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class iX extends FB{constructor(t,n){super();le(this,"priority",rX);le(this,"subPriority",-1);this.context=t||(s=>Rn(n,s))}set(t,n){return n.timestampIsSet?t:Rn(t,tX(t,this.context))}}let Vt=class{run(e,t,n,s){const i=this.parse(e,t,n,s);return i?{setter:new sX(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,n){return!0}};class aX extends Vt{constructor(){super(...arguments);le(this,"priority",140);le(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,n,s){return n.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const fr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},sl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function pr(r,e){return r&&{value:e(r.value),rest:r.rest}}function qn(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function il(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:n*(s*t_+i*e_+a*KW),rest:e.slice(t[0].length)}}function zB(r){return qn(fr.anyDigitsSigned,r)}function ir(r,e){switch(r){case 1:return qn(fr.singleDigit,e);case 2:return qn(fr.twoDigits,e);case 3:return qn(fr.threeDigits,e);case 4:return qn(fr.fourDigits,e);default:return qn(new RegExp("^\\d{1,"+r+"}"),e)}}function FS(r,e){switch(r){case 1:return qn(fr.singleDigitSigned,e);case 2:return qn(fr.twoDigitsSigned,e);case 3:return qn(fr.threeDigitsSigned,e);case 4:return qn(fr.fourDigitsSigned,e);default:return qn(new RegExp("^-?\\d{1,"+r+"}"),e)}}function s_(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function HB(r,e){const t=e>0,n=t?e:1-e;let s;if(n<=50)s=r||100;else{const i=n+50,a=Math.trunc(i/100)*100,o=r>=i%100;s=r+a-(o?100:0)}return t?s:1-s}function UB(r){return r%400===0||r%4===0&&r%100!==0}class oX extends Vt{constructor(){super(...arguments);le(this,"priority",130);le(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,s){const i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return pr(ir(4,t),i);case"yo":return pr(s.ordinalNumber(t,{unit:"year"}),i);default:return pr(ir(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s){const i=t.getFullYear();if(s.isTwoDigitYear){const o=HB(s.year,i);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const a=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class lX extends Vt{constructor(){super(...arguments);le(this,"priority",130);le(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,s){const i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return pr(ir(4,t),i);case"Yo":return pr(s.ordinalNumber(t,{unit:"year"}),i);default:return pr(ir(n.length,t),i)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s,i){const a=r_(t,i);if(s.isTwoDigitYear){const c=HB(s.year,a);return t.setFullYear(c,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),Dd(t,i)}const o=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(o,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),Dd(t,i)}}class cX extends Vt{constructor(){super(...arguments);le(this,"priority",130);le(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return FS(n==="R"?4:n.length,t)}set(t,n,s){const i=Rn(t,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),Wg(i)}}class uX extends Vt{constructor(){super(...arguments);le(this,"priority",130);le(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return FS(n==="u"?4:n.length,t)}set(t,n,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class dX extends Vt{constructor(){super(...arguments);le(this,"priority",120);le(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"Q":case"QQ":return ir(n.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class hX extends Vt{constructor(){super(...arguments);le(this,"priority",120);le(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"q":case"qq":return ir(n.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class fX extends Vt{constructor(){super(...arguments);le(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);le(this,"priority",110)}parse(t,n,s){const i=a=>a-1;switch(n){case"M":return pr(qn(fr.month,t),i);case"MM":return pr(ir(2,t),i);case"Mo":return pr(s.ordinalNumber(t,{unit:"month"}),i);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class pX extends Vt{constructor(){super(...arguments);le(this,"priority",110);le(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,s){const i=a=>a-1;switch(n){case"L":return pr(qn(fr.month,t),i);case"LL":return pr(ir(2,t),i);case"Lo":return pr(s.ordinalNumber(t,{unit:"month"}),i);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function mX(r,e,t){const n=Kt(r,t==null?void 0:t.in),s=LB(n,t)-e;return n.setDate(n.getDate()-s*7),Kt(n,t==null?void 0:t.in)}class gX extends Vt{constructor(){super(...arguments);le(this,"priority",100);le(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,s){switch(n){case"w":return qn(fr.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return ir(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s,i){return Dd(mX(t,s,i),i)}}function yX(r,e,t){const n=Kt(r,t==null?void 0:t.in),s=RB(n,t)-e;return n.setDate(n.getDate()-s*7),n}class xX extends Vt{constructor(){super(...arguments);le(this,"priority",100);le(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,s){switch(n){case"I":return qn(fr.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return ir(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s){return Wg(yX(t,s))}}const bX=[31,28,31,30,31,30,31,31,30,31,30,31],vX=[31,29,31,30,31,30,31,31,30,31,30,31];class wX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"subPriority",1);le(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"d":return qn(fr.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return ir(n.length,t)}}validate(t,n){const s=t.getFullYear(),i=UB(s),a=t.getMonth();return i?n>=1&&n<=vX[a]:n>=1&&n<=bX[a]}set(t,n,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class SX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"subpriority",1);le(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,s){switch(n){case"D":case"DD":return qn(fr.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return ir(n.length,t)}}validate(t,n){const s=t.getFullYear();return UB(s)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function i_(r,e,t){var g,y,b,v;const n=a0(),s=(t==null?void 0:t.weekStartsOn)??((y=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((v=(b=n.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,i=Kt(r,t==null?void 0:t.in),a=i.getDay(),c=(e%7+7)%7,d=7-s,h=e<0||e>6?e-(a+d)%7:(c+d)%7-(a+d)%7;return n_(i,h,t)}class CX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,i){return t=i_(t,s,i),t.setHours(0,0,0,0),t}}class EX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,s,i){const a=o=>{const c=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return pr(ir(n.length,t),a);case"eo":return pr(s.ordinalNumber(t,{unit:"day"}),a);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,i){return t=i_(t,s,i),t.setHours(0,0,0,0),t}}class TX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,s,i){const a=o=>{const c=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return pr(ir(n.length,t),a);case"co":return pr(s.ordinalNumber(t,{unit:"day"}),a);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,i){return t=i_(t,s,i),t.setHours(0,0,0,0),t}}function AX(r,e,t){const n=Kt(r,t==null?void 0:t.in),s=eX(n,t),i=e-s;return n_(n,i,t)}class NX extends Vt{constructor(){super(...arguments);le(this,"priority",90);le(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,s){const i=a=>a===0?7:a;switch(n){case"i":case"ii":return ir(n.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return pr(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i);case"iiiii":return pr(s.day(t,{width:"narrow",context:"formatting"}),i);case"iiiiii":return pr(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i);case"iiii":default:return pr(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),i)}}validate(t,n){return n>=1&&n<=7}set(t,n,s){return t=AX(t,s),t.setHours(0,0,0,0),t}}class kX extends Vt{constructor(){super(...arguments);le(this,"priority",80);le(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(s_(s),0,0,0),t}}class MX extends Vt{constructor(){super(...arguments);le(this,"priority",80);le(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(s_(s),0,0,0),t}}class _X extends Vt{constructor(){super(...arguments);le(this,"priority",80);le(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(s_(s),0,0,0),t}}class jX extends Vt{constructor(){super(...arguments);le(this,"priority",70);le(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,s){switch(n){case"h":return qn(fr.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return ir(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,s){const i=t.getHours()>=12;return i&&s<12?t.setHours(s+12,0,0,0):!i&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class DX extends Vt{constructor(){super(...arguments);le(this,"priority",70);le(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,s){switch(n){case"H":return qn(fr.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return ir(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,s){return t.setHours(s,0,0,0),t}}class OX extends Vt{constructor(){super(...arguments);le(this,"priority",70);le(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,s){switch(n){case"K":return qn(fr.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return ir(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class RX extends Vt{constructor(){super(...arguments);le(this,"priority",70);le(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,s){switch(n){case"k":return qn(fr.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return ir(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,s){const i=s<=24?s%24:s;return t.setHours(i,0,0,0),t}}class LX extends Vt{constructor(){super(...arguments);le(this,"priority",60);le(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"m":return qn(fr.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return ir(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setMinutes(s,0,0),t}}class PX extends Vt{constructor(){super(...arguments);le(this,"priority",50);le(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"s":return qn(fr.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return ir(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setSeconds(s,0),t}}class IX extends Vt{constructor(){super(...arguments);le(this,"priority",30);le(this,"incompatibleTokens",["t","T"])}parse(t,n){const s=i=>Math.trunc(i*Math.pow(10,-n.length+3));return pr(ir(n.length,t),s)}set(t,n,s){return t.setMilliseconds(s),t}}class BX extends Vt{constructor(){super(...arguments);le(this,"priority",10);le(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return il(sl.basicOptionalMinutes,t);case"XX":return il(sl.basic,t);case"XXXX":return il(sl.basicOptionalSeconds,t);case"XXXXX":return il(sl.extendedOptionalSeconds,t);case"XXX":default:return il(sl.extended,t)}}set(t,n,s){return n.timestampIsSet?t:Rn(t,t.getTime()-BS(t)-s)}}class FX extends Vt{constructor(){super(...arguments);le(this,"priority",10);le(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return il(sl.basicOptionalMinutes,t);case"xx":return il(sl.basic,t);case"xxxx":return il(sl.basicOptionalSeconds,t);case"xxxxx":return il(sl.extendedOptionalSeconds,t);case"xxx":default:return il(sl.extended,t)}}set(t,n,s){return n.timestampIsSet?t:Rn(t,t.getTime()-BS(t)-s)}}class zX extends Vt{constructor(){super(...arguments);le(this,"priority",40);le(this,"incompatibleTokens","*")}parse(t){return zB(t)}set(t,n,s){return[Rn(t,s*1e3),{timestampIsSet:!0}]}}class HX extends Vt{constructor(){super(...arguments);le(this,"priority",20);le(this,"incompatibleTokens","*")}parse(t){return zB(t)}set(t,n,s){return[Rn(t,s),{timestampIsSet:!0}]}}const UX={G:new aX,y:new oX,Y:new lX,R:new cX,u:new uX,Q:new dX,q:new hX,M:new fX,L:new pX,w:new gX,I:new xX,d:new wX,D:new SX,E:new CX,e:new EX,c:new TX,i:new NX,a:new kX,b:new MX,B:new _X,h:new jX,H:new DX,K:new OX,k:new RX,m:new LX,s:new PX,S:new IX,X:new BX,x:new FX,t:new zX,T:new HX},$X=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,VX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qX=/^'([^]*?)'?$/,GX=/''/g,WX=/\S/,YX=/[a-zA-Z]/;function Ac(r,e,t,n){var E,C,N,A;const s=()=>Rn(t,NaN),i=ZY(),a=i.locale??OB,o=i.firstWeekContainsDate??((C=(E=i.locale)==null?void 0:E.options)==null?void 0:C.firstWeekContainsDate)??1,c=i.weekStartsOn??((A=(N=i.locale)==null?void 0:N.options)==null?void 0:A.weekStartsOn)??0;if(!e)return r?s():Kt(t,n==null?void 0:n.in);const d={firstWeekContainsDate:o,weekStartsOn:c,locale:a},h=[new iX(n==null?void 0:n.in,t)],g=e.match(VX).map(k=>{const M=k[0];if(M in V3){const O=V3[M];return O(k,a.formatLong)}return k}).join("").match($X),y=[];for(let k of g){BB(k)&&q3(k,e,r),IB(k)&&q3(k,e,r);const M=k[0],O=UX[M];if(O){const{incompatibleTokens:P}=O;if(Array.isArray(P)){const H=y.find(ee=>P.includes(ee.token)||ee.token===M);if(H)throw new RangeError(`The format string mustn't contain \`${H.fullToken}\` and \`${k}\` at the same time`)}else if(O.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);y.push({token:M,fullToken:k});const F=O.run(r,k,a.match,d);if(!F)return s();h.push(F.setter),r=F.rest}else{if(M.match(YX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(k==="''"?k="'":M==="'"&&(k=XX(k)),r.indexOf(k)===0)r=r.slice(k.length);else return s()}}if(r.length>0&&WX.test(r))return s();const b=h.map(k=>k.priority).sort((k,M)=>M-k).filter((k,M,O)=>O.indexOf(k)===M).map(k=>h.filter(M=>M.priority===k).sort((M,O)=>O.subPriority-M.subPriority)).map(k=>k[0]);let v=Kt(t,n==null?void 0:n.in);if(isNaN(+v))return s();const w={};for(const k of b){if(!k.validate(v,d))return s();const M=k.set(v,w,d);Array.isArray(M)?(v=M[0],Object.assign(w,M[1])):v=M}return v}function XX(r){return r.match(qX)[1].replace(GX,"'")}function aw(r,e,t){const[n,s]=hE(t==null?void 0:t.in,r,e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Hp(r,e){return $3(Rn(r,r),tY(r))}function $B(r,e){const t=()=>Rn(e==null?void 0:e.in,NaN),s=ZX(r);let i;if(s.date){const d=eK(s.date,2);i=tK(d.restDateString,d.year)}if(!i||isNaN(+i))return t();const a=+i;let o=0,c;if(s.time&&(o=nK(s.time),isNaN(o)))return t();if(s.timezone){if(c=rK(s.timezone),isNaN(c))return t()}else{const d=new Date(a+o),h=Kt(0,e==null?void 0:e.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return Kt(a+o+c,e==null?void 0:e.in)}const ow={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},KX=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,JX=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,QX=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ZX(r){const e={},t=r.split(ow.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],ow.timeZoneDelimiter.test(e.date)&&(e.date=r.split(ow.timeZoneDelimiter)[0],n=r.substr(e.date.length,r.length))),n){const s=ow.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function eK(r,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:r.slice((n[1]||n[2]).length)}}function tK(r,e){if(e===null)return new Date(NaN);const t=r.match(KX);if(!t)return new Date(NaN);const n=!!t[4],s=fy(t[1]),i=fy(t[2])-1,a=fy(t[3]),o=fy(t[4]),c=fy(t[5])-1;if(n)return lK(e,o,c)?sK(e,o,c):new Date(NaN);{const d=new Date(0);return!aK(e,i,a)||!oK(e,s)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(s,a)),d)}}function fy(r){return r?parseInt(r):1}function nK(r){const e=r.match(JX);if(!e)return NaN;const t=o2(e[1]),n=o2(e[2]),s=o2(e[3]);return cK(t,n,s)?t*t_+n*e_+s*1e3:NaN}function o2(r){return r&&parseFloat(r.replace(",","."))||0}function rK(r){if(r==="Z")return 0;const e=r.match(QX);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return uK(n,s)?t*(n*t_+s*e_):NaN}function sK(r,e,t){const n=new Date(0);n.setUTCFullYear(r,0,4);const s=n.getUTCDay()||7,i=(e-1)*7+t+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const iK=[31,null,31,30,31,30,31,31,30,31,30,31];function VB(r){return r%400===0||r%4===0&&r%100!==0}function aK(r,e,t){return e>=0&&e<=11&&t>=1&&t<=(iK[e]||(VB(r)?29:28))}function oK(r,e){return e>=1&&e<=(VB(r)?366:365)}function lK(r,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function cK(r,e,t){return r===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&r>=0&&r<25}function uK(r,e){return e>=0&&e<=59}function dK(r){return Cx(Date.now(),r)}function hK(r,e){return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},r),I.createElement("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}))}const fK=I.forwardRef(hK);function pK(r,e){return I.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:e},r),I.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}))}const mK=I.forwardRef(pK),gK={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};function KO(...r){return r.filter(Boolean).join(" ")}function yK({onDaySelect:r,Doctor:e}){let t=dK(),[n,s]=I.useState(t),[,i]=I.useState(t),[a,o]=I.useState(hr(t,"MMM-yyyy")),c=Ac(a,"MMM-yyyy",new Date),d=aY({start:c,end:sY(c)});const[h,g]=I.useState(null);function y(A,k){g(k),i(A),r&&r(bK(n,A),k)}function b(){let A=qO(c,{months:-1});o(hr(A,"MMM-yyyy"))}function v(){let A=qO(c,{months:1});o(hr(A,"MMM-yyyy"))}let w=d.filter(A=>$3(A,n));const E=(()=>{const A=new Set;return((e==null?void 0:e.reservationDates)||[]).forEach(k=>{const M=$B(k);!isNaN(M)&&$3(M,n)&&A.add(hr(M,"HH:mm"))}),A})(),C=N(e.startTime,e.endTime,e.workingDays.map(A=>gK[A]),E);function N(A,k,M,O=new Set){const P=Ac(A,"HH:mm:ss",new Date),F=Ac(k,"HH:mm:ss",new Date),H=(e==null?void 0:e.visitDuration)||30,ee=[];let G=1;for(;P<F;){const J=hr(P,"HH:mm");P.setMinutes(P.getMinutes()+H);const V=hr(P,"HH:mm");ee.push({id:G++,startTime:J,endTime:V,day:M.map(X=>X),disabled:O.has(J)})}return ee}return f.jsx("div",{className:"pt-0",children:f.jsx("div",{className:"max-w-md px-4 mx-auto sm:px-7 md:max-w-4xl md:px-6",children:f.jsxs("div",{className:"md:grid md:grid-cols-2 md:divide-x md:divide-gray-200",children:[f.jsxs("div",{className:"md:pr-14",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("h2",{className:"flex-auto font-semibold text-gray-900",children:hr(c,"MMMM yyyy")}),f.jsxs("button",{type:"button",onClick:b,className:"-my-1.5 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Previous month"}),f.jsx(fK,{className:"w-5 h-5","aria-hidden":"true"})]}),f.jsxs("button",{onClick:v,type:"button",className:"-my-1.5 -mr-1.5 ml-2 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[f.jsx("span",{className:"sr-only",children:"Next month"}),f.jsx(mK,{className:"w-5 h-5","aria-hidden":"true"})]})]}),f.jsxs("div",{className:"grid grid-cols-7 mt-10 text-xs leading-6 text-center text-gray-500",children:[f.jsx("div",{children:"SUN"}),f.jsx("div",{children:"MON"}),f.jsx("div",{children:"TUE"}),f.jsx("div",{children:"WED"}),f.jsx("div",{children:"THU"}),f.jsx("div",{children:"FRI"}),f.jsx("div",{children:"SAT"})]}),f.jsx("div",{className:"grid grid-cols-7 mt-2 text-sm ",children:d.map((A,k)=>f.jsxs("div",{className:KO(k===0&&vK[Hy(A)],"py-1.5"),children:[f.jsx("button",{type:"button",onClick:async()=>{s(A);const M=await Ue.GetReservationCount(A.toLocaleString().split(",")[0],e.doctorId);console.log("count number :",M)},disabled:!aw(A,c)||a2(A,t)||!C[0].day.includes(Hy(A))||e.vacations.includes(hr(A,"yyyy-MM-dd")),className:KO(fu(A,n)&&"text-white",!fu(A,n)&&Hp(A)&&"text-red-500",!fu(A,n)&&!Hp(A)&&aw(A,c)&&"text-gray-900",!fu(A,n)&&!Hp(A)&&!aw(A,c)&&"text-gray-400",fu(A,n)&&Hp(A)&&"bg-red-500",fu(A,n)&&!Hp(A)&&"bg-gray-900",!fu(A,n)&&"hover:bg-gray-200",(fu(A,n)||Hp(A))&&"font-semibold","mx-auto flex h-8 w-8 items-center justify-center rounded-full",(!aw(A,c)||a2(A,t)||e.vacations.includes(hr(A,"yyyy-MM-dd"))||!C[0].day.includes(Hy(A)))&&"opacity-50 cursor-not-allowed"),children:f.jsx("time",{dateTime:hr(A,"yyyy-MM-dd"),children:hr(A,"d")})}),f.jsx("div",{className:"w-1 h-1 mx-auto mt-1",children:!a2(A,t)&&C[0].day.includes(Hy(A))&&!e.vacations.includes(hr(A,"yyyy-MM-dd"))&&f.jsx("div",{className:"w-1 h-1 rounded-full bg-sky-500"})})]},A.toString()))})]}),f.jsxs("section",{className:"pl-10",children:[f.jsxs("h2",{className:"font-semibold text-gray-900",children:["Available Times for"," ",f.jsx("time",{dateTime:hr(n,"yyyy-MM-dd"),children:hr(n,"MMM dd, yyy")})]}),f.jsx("ol",{className:"mt-2  text-sm leading-6  text-gray-500",children:w.length>0?f.jsx("div",{className:"h-80 overflow-y-auto pr-10",children:C.map(A=>f.jsx(xK,{availableAppointments:A,onTimeClick:y,selectedId:h},A.id))}):f.jsx("p",{children:"No Reservations for today."})})]})]})})})}function xK({availableAppointments:r,onTimeClick:e,selectedId:t}){const n=!!r.disabled;return f.jsxs("button",{type:"button",onClick:function(){return!n&&e(r.startTime,Number(r.id))},className:"group flex items-center justify-between p-3 rounded-xl border border-border-light hover:border-primary cursor-pointer transition bg-gray-50 hover:bg-white mt-3 w-full hover:shadow-sm "+(n?"opacity-50 cursor-not-allowed line-through":""),title:n?"This time is already reserved":"",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"flex items-center justify-center w-8 h-7  rounded-full bg-white text-xs font-bold text-gray-500 shadow-sm border",children:r.id}),f.jsxs("span",{className:"text-gray-700 font-medium",children:[hr(Ac(r.startTime,"HH:mm",new Date),"h:mm a")," - ",hr(Ac(r.endTime,"HH:mm",new Date),"h:mm a")]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"material-icons-round text-gray-400 text-lg",children:"calendar_today"}),f.jsx("input",{className:"w-4 h-4 text-primary border-gray-300 focus:ring-primary bg-white border",name:"time_slot",type:"radio",checked:t===r.id,readOnly:!0,disabled:n})]})]})}function bK(r,e){return Ac(`${hr(r,"yyyy-MM-dd")} ${e}`,"yyyy-MM-dd HH:mm",new Date).toISOString()}let vK=["","col-start-2","col-start-3","col-start-4","col-start-5","col-start-6","col-start-7"];const wK=({onLoginSuccess:r,onLogin:e})=>{const[t,n]=I.useState({username:"",password:""}),s=yo(),[i,a]=I.useState(!1),[o,c]=I.useState(""),d=g=>{const{name:y,value:b}=g.target;n(v=>({...v,[y]:b}))},h=async g=>{g.preventDefault(),a(!0),c("");try{const y=e?await e(t):await Lf.login(t);s("/settings")}catch(y){c(y.message||"Invalid username or password. Please try again.")}finally{a(!1)}};return f.jsxs("div",{className:"login-container",children:[f.jsx("h2",{children:"Login to Your Account"}),o&&f.jsx("div",{className:"error-message",children:o}),f.jsxs("form",{onSubmit:h,className:"login-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"userName",children:"userName"}),f.jsx("input",{type:"text",id:"userName",name:"username",value:t.username,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:d,required:!0})]}),f.jsx("button",{type:"submit",className:"submit-btn",disabled:i,children:i?"Logging In...":"Login"})]}),f.jsxs("div",{className:"login-footer",children:[f.jsxs("p",{children:["Don't have an account? ",f.jsx("a",{href:"/signup",children:"Sign up"})]}),f.jsx("p",{children:f.jsx("a",{href:"/forgot-password",children:"Forgot password?"})})]})]})},qB=I.createContext(),SK=()=>I.useContext(qB),CK=({children:r})=>{const[e,t]=I.useState(!1),[n,s]=I.useState(null),[i,a]=I.useState(!0);I.useEffect(()=>{(()=>{const g=Lf.isLoggedIn();if(t(g),g)try{const y=localStorage.getItem("userData");y&&s(JSON.parse(y))}catch(y){console.error("Error parsing user data",y)}a(!1)})()},[]);const d={isLoggedIn:e,user:n,loading:i,login:async h=>{const g=await Lf.login(h);return t(!0),s(g.user||{}),g},logout:()=>{Lf.logout(),t(!1),s(null)}};return f.jsx(qB.Provider,{value:d,children:r})},GB=({setLoginForm:r})=>{const{isLoggedIn:e,login:t}=SK();return f.jsx("div",{className:"login-page",children:f.jsxs("div",{className:"login-content",children:[f.jsx("div",{className:"login-header"}),f.jsx(wK,{onLogin:t})]})})};function WB({selectedDoctor:r}){const[e,t]=I.useState(JSON.parse(localStorage.getItem("DoctorReviews")));return I.useEffect(()=>{async function n(){const s=await Ue.GetReviewsByDoctorId(r.userId!==null?r.userId:r.doctorId);t(s)}n()},[r.userId]),f.jsx(f.Fragment,{children:e.length!==0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"mb-10 pb-8 border-b border-gray-200  "}),f.jsxs("div",{className:"mb-10 pb-8  ",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:["Patient Feedback",f.jsxs("span",{className:"hidden sm:inline-flex items-center justify-center px-2 py-0.5 rounded-full bg-yellow-50 text-yellow-600 text-xs font-bold border border-yellow-200",children:[r.rating," Rating"]})]}),f.jsxs("button",{className:"text-sm font-semibold text-primary hover:text-emerald-700 transition flex items-center gap-1 group",children:["View all ",e.length," reviews",f.jsx("span",{className:"material-icons-round text-base group-hover:translate-x-0.5 transition-transform",children:"arrow_forward"})]})]}),f.jsx("div",{className:"flex-col ",children:e.map((n,s)=>f.jsxs("div",{className:"p-5 rounded-2xl bg-gray-50 border border-gray-100 hover:shadow-md hover:border-primary/20 transition-all duration-300 mt-4",children:[f.jsx("div",{className:"flex items-start justify-between mb-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{alt:n.name||"Patient",className:"w-12 h-12 rounded-full object-cover ring-2 ring-white shadow-sm",src:n.imageUrl||"https://lh3.googleusercontent.com/aida-public/AB6AXuB_HuUaHLem-708lyJRRXJGYIvspItRFOaxC_tA8-T-g4Q89W9jQtlzQb6JDhm4fqj0X6U40mUvMSU-o60QMbmoKFqMnyAe8CpFJYbCi4TZCNg71zNIXaBd-I6RMgHpq4RaHwFQb3QH_SKXxQwdEF3jdN7GthkjvYGAMuBdnuhD-Sb0wbOM5OA_0WJgSIX8k46BS7yA8PczAw7bY5m5aZIyKhzExA86HKeamHi7ViiofjVrWnwTLtGywtyR7swcMj_l2jWaa5ERlrI"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-gray-900",children:n.username||"Anonymous"}),f.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[f.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((i,a)=>f.jsx("span",{className:"material-icons-round text-[14px]",children:a<Math.round(n.rating)?"star":"star_border"},a))}),f.jsx("span",{className:"text-xs text-gray-400 font-medium",children:n.date||""})]})]})]})}),f.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed italic relative pl-3 border-l-2 border-primary/30",children:['"',n.comment,'"']})]},s))})]})]}):null})}function EK({selectedDoctor:r,setSelectedDoctor:e,setIsPopupOpen:t,setDoctorsList:n}){const s=()=>{t(!1),e(null)},[i,a]=I.useState({status:"Pending",doctorId:r.doctorId,date:"",duration:30,visitPurpose:"",createdAt:new Date().toISOString(),queueNumber:null}),[o,c]=I.useState([]),[d,h]=I.useState(!1),[g,y]=I.useState(!1);JSON.parse(localStorage.getItem("DoctorReviews"));const b=E=>{const{name:C,value:N}=E.target;a(A=>({...A,[C]:N}))},v=E=>{try{window.dispatchEvent(new CustomEvent("app:open-chat",{detail:{toId:String(E)}}))}catch(C){console.error("Open chat failed",C)}},w=async E=>{E.preventDefault(),y(!0),c(C=>[...C,i]);try{await Ue.CreatAppointment(i);const N=(await Ue.GetDoctorsList()).filter(A=>{var k,M;return((k=A.specialty)==null?void 0:k.toLowerCase().trim())===((M=r.specialty)==null?void 0:M.toLowerCase().trim())});n(N),a({date:"",visitPurpose:"",createdAt:"",queueNumber:null}),s()}catch(C){console.log(C)}finally{y(!1)}};return f.jsx(f.Fragment,{children:d===!1||localStorage.getItem("authToken")!=null?f.jsx("div",{className:"fixed inset-0 bg-[rgba(64,64,64,61%)] flex justify-center items-center z-10",children:f.jsx("div",{className:"bg-white rounded-xl py-4 pr-1 ",children:f.jsxs("div",{className:"p-4 md:p-6 rounded-xl w-[90vw] max-w-250  md:w-[60vw] bg-white max-h-[90vh] overflow-y-auto ",children:[f.jsxs("div",{className:"flex flex-col md:flex-row items-center  ",children:[f.jsx("img",{src:r.gender==="male"?AB[r.index]:NB[r.index],alt:"Doctor",className:"w-[30vw] md:w-[12vw] max-w-37.5 h-auto rounded-full mx-5 md:ml-3 mt-2"}),f.jsxs("div",{children:[f.jsx("div",{className:"flex-row flex justify-between max-w-195 w-[45vw]",children:f.jsxs("div",{className:"flex-col flex",children:[f.jsx("h2",{className:"text-lg md:text-xl  font-Montserrat-Alternates text-center md:text-left",children:r.fullName}),f.jsxs("div",{className:"flex flex-row items-center",children:[f.jsx("p",{className:"font-[Poppins] font-medium text-sm md:text-[13px] leading-6 md:leading-8 mt-2 md:mt-0 md:ml-0 text-center md:text-left",children:r.specialty}),f.jsx("p",{className:"font-[Poppins] text-sm md:text-[13px] leading-6 md:leading-8 mt-2 md:mt-0 md:ml-5 text-center md:text-left",children:r.specialityDetails})]})]})}),f.jsxs("p",{className:"ml-0  font-[Poppins] text-sm md:text-[13px] leading-6 md:leading-7 mt-4 md:mt-0 text-center md:text-left md:w-[40vw] max-w-190 ",children:["bio :",r.bio===null?"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce consequat lobortis lorem. Praesent interdum justo ut purus tempor tincidunt. Morbi ut ultrices magna, et efficitur justo. Ut auctor pulvinar odio quis fringilla.":r.bio]}),f.jsxs("div",{className:"flex-row flex justify-between max-w-195 w-[45vw]",children:[f.jsxs("div",{className:"inline-flex flex-col md:flex-row items-center mt-1 bg-gray-100 px-3  rounded-xl ",children:[f.jsx("span",{className:"material-icons-round text-gray-400",children:"location_on"}),f.jsxs("div",{className:"flex flex-col items-center md:items-start mt-1 md:ml-2",children:[f.jsx("p",{className:"text-sm text-center md:text-left",children:r.city}),f.jsx("p",{className:"text-sm text-center md:text-left",children:r.address})]})]}),f.jsxs("button",{className:"flex items-center gap-2 bg-[#0e7490] hover:bg-cyan-800 text-white px-3 mt-2 mr-5 py-0 h-9 rounded-lg shadow-md transition-all focus:ring-2 focus:ring-offset-2 focus:ring-[#0e7490]  w-full lg:w-auto justify-center",type:"button",onClick:()=>v(r.doctorId),children:[f.jsx("span",{className:"material-icons-round",style:{fontSize:"18px"},children:"chat_bubble"})," Message"]})]})]})]}),f.jsx("div",{className:"mb-10 pb-8 border-b border-gray-200  "}),f.jsxs("form",{onSubmit:w,children:[f.jsx(yK,{onDaySelect:(E,C)=>a(N=>({...N,date:E,queueNumber:C})),Doctor:r}),localStorage.getItem("authToken")!=null?f.jsxs("div",{className:"flex flex-col md:flex-row w-full  justify-between  items-center pr-15 ",children:[f.jsxs("label",{className:"flex flex-col",children:[f.jsx("span",{className:"mb-1 md:ml-10 mt-5",children:"Patient Complaint / Reason for visit"}),f.jsx("textarea",{className:"border border-gray-300 rounded-lg p-2 md:ml-10 max-w-[550px] md:w-[25vw] h-[100px] md:h-[100px] resize-none",placeholder:"Describe your symptoms or reason for the visit",name:"visitPurpose",onChange:b,value:i.visitPurpose,required:!0})]}),f.jsxs("p",{className:"inline-flex flex-row  items-end rounded-lg mt-20 bg-gray-100 border border-gray-200 p-2  font-medium text-gray-400  ",children:["TOTAL FEES ",f.jsx("span",{className:"material-icons-round text-green-600",children:"payments "}),f.jsxs("span",{className:"font-bold text-black",children:["   ",r.fees," EGP"]})]})]}):f.jsxs("div",{className:"flex flex-row justify-center items-center space-x-5 mt-6",children:[f.jsx("p",{children:"please sign in to continue"}),f.jsx("button",{onClick:()=>{h(!0)},type:"button",className:"flex flex-row bg-blue-50 px-4 py-2 justify-center items-center rounded-lg w-full md:w-auto",children:"Login"})]}),f.jsx("div",{className:"flex flex-col items-center md:items-end mt-6",children:localStorage.getItem("authToken")!=null?f.jsxs("div",{className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-5 my-5",children:[f.jsxs("button",{type:"submit",className:"flex flex-row bg-[#C6FFA7] px-4 py-2 justify-center items-center rounded-lg w-full md:w-auto",disabled:g,children:[g&&f.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Confirm Reservation"]}),f.jsx("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded w-full md:w-auto",onClick:s,children:"Cancel"})]}):f.jsx("div",{className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-5 my-1",children:f.jsx("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded w-full md:w-auto",onClick:s,children:"Cancel"})})})]}),f.jsx(WB,{selectedDoctor:r})]})})}):f.jsxs("div",{className:"fixed inset-0 bg-[rgba(64,64,64,61%)] flex flex-col justify-center items-center z-10",children:[f.jsx(GB,{setLoginForm:h}),f.jsx("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded w-full md:w-auto",onClick:s,children:"Cancel"})]})})}function JO(r){return r!==null&&typeof r=="object"&&"constructor"in r&&r.constructor===Object}function a_(r,e){r===void 0&&(r={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof r[t]>"u"?r[t]=e[t]:JO(e[t])&&JO(r[t])&&Object.keys(e[t]).length>0&&a_(r[t],e[t])})}const YB={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function np(){const r=typeof document<"u"?document:{};return a_(r,YB),r}const TK={document:YB,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(r){return typeof setTimeout>"u"?(r(),null):setTimeout(r,0)},cancelAnimationFrame(r){typeof setTimeout>"u"||clearTimeout(r)}};function ea(){const r=typeof window<"u"?window:{};return a_(r,TK),r}function AK(r){const e=r;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function G3(r,e){return e===void 0&&(e=0),setTimeout(r,e)}function zS(){return Date.now()}function NK(r){const e=ea();let t;return e.getComputedStyle&&(t=e.getComputedStyle(r,null)),!t&&r.currentStyle&&(t=r.currentStyle),t||(t=r.style),t}function kK(r,e){e===void 0&&(e="x");const t=ea();let n,s,i;const a=NK(r);return t.WebKitCSSMatrix?(s=a.transform||a.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(o=>o.replace(",",".")).join(", ")),i=new t.WebKitCSSMatrix(s==="none"?"":s)):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=i.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=i.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=i.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function lw(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"}function MK(r){return typeof window<"u"&&typeof window.HTMLElement<"u"?r instanceof HTMLElement:r&&(r.nodeType===1||r.nodeType===11)}function Wi(){const r=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const n=t<0||arguments.length<=t?void 0:arguments[t];if(n!=null&&!MK(n)){const s=Object.keys(Object(n)).filter(i=>e.indexOf(i)<0);for(let i=0,a=s.length;i<a;i+=1){const o=s[i],c=Object.getOwnPropertyDescriptor(n,o);c!==void 0&&c.enumerable&&(lw(r[o])&&lw(n[o])?n[o].__swiper__?r[o]=n[o]:Wi(r[o],n[o]):!lw(r[o])&&lw(n[o])?(r[o]={},n[o].__swiper__?r[o]=n[o]:Wi(r[o],n[o])):r[o]=n[o])}}}return r}function cw(r,e,t){r.style.setProperty(e,t)}function XB(r){let{swiper:e,targetPosition:t,side:n}=r;const s=ea(),i=-e.translate;let a=null,o;const c=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const d=t>i?"next":"prev",h=(y,b)=>d==="next"&&y>=b||d==="prev"&&y<=b,g=()=>{o=new Date().getTime(),a===null&&(a=o);const y=Math.max(Math.min((o-a)/c,1),0),b=.5-Math.cos(y*Math.PI)/2;let v=i+b*(t-i);if(h(v,t)&&(v=t),e.wrapperEl.scrollTo({[n]:v}),h(v,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:v})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(g)};g()}function ol(r,e){return e===void 0&&(e=""),[...r.children].filter(t=>t.matches(e))}function KB(r,e){e===void 0&&(e=[]);const t=document.createElement(r);return t.classList.add(...Array.isArray(e)?e:[e]),t}function _K(r,e){const t=[];for(;r.previousElementSibling;){const n=r.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function jK(r,e){const t=[];for(;r.nextElementSibling;){const n=r.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),r=n}return t}function wd(r,e){return ea().getComputedStyle(r,null).getPropertyValue(e)}function HS(r){let e=r,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function JB(r,e){const t=[];let n=r.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function W3(r,e,t){const n=ea();return r[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(r,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let l2;function DK(){const r=ea(),e=np();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in r||r.DocumentTouch&&e instanceof r.DocumentTouch)}}function QB(){return l2||(l2=DK()),l2}let c2;function OK(r){let{userAgent:e}=r===void 0?{}:r;const t=QB(),n=ea(),s=n.navigator.platform,i=e||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,c=n.screen.height,d=i.match(/(Android);?[\s\/]+([\d.]+)?/);let h=i.match(/(iPad).*OS\s([\d_]+)/);const g=i.match(/(iPod)(.*OS\s([\d_]+))?/),y=!h&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),b=s==="Win32";let v=s==="MacIntel";const w=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&v&&t.touch&&w.indexOf(`${o}x${c}`)>=0&&(h=i.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),v=!1),d&&!b&&(a.os="android",a.android=!0),(h||y||g)&&(a.os="ios",a.ios=!0),a}function RK(r){return r===void 0&&(r={}),c2||(c2=OK(r)),c2}let u2;function LK(){const r=ea();let e=!1;function t(){const n=r.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}if(t()){const n=String(r.navigator.userAgent);if(n.includes("Version/")){const[s,i]=n.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=s<16||s===16&&i<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(r.navigator.userAgent)}}function PK(){return u2||(u2=LK()),u2}function IK(r){let{swiper:e,on:t,emit:n}=r;const s=ea();let i=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},c=()=>{!e||e.destroyed||!e.initialized||(i=new ResizeObserver(g=>{a=s.requestAnimationFrame(()=>{const{width:y,height:b}=e;let v=y,w=b;g.forEach(E=>{let{contentBoxSize:C,contentRect:N,target:A}=E;A&&A!==e.el||(v=N?N.width:(C[0]||C).inlineSize,w=N?N.height:(C[0]||C).blockSize)}),(v!==y||w!==b)&&o()})}),i.observe(e.el))},d=()=>{a&&s.cancelAnimationFrame(a),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null)},h=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){c();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",h)}),t("destroy",()=>{d(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",h)})}function BK(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const i=[],a=ea(),o=function(h,g){g===void 0&&(g={});const y=a.MutationObserver||a.WebkitMutationObserver,b=new y(v=>{if(e.__preventObserver__)return;if(v.length===1){s("observerUpdate",v[0]);return}const w=function(){s("observerUpdate",v[0])};a.requestAnimationFrame?a.requestAnimationFrame(w):a.setTimeout(w,0)});b.observe(h,{attributes:typeof g.attributes>"u"?!0:g.attributes,childList:typeof g.childList>"u"?!0:g.childList,characterData:typeof g.characterData>"u"?!0:g.characterData}),i.push(b)},c=()=>{if(e.params.observer){if(e.params.observeParents){const h=JB(e.hostEl);for(let g=0;g<h.length;g+=1)o(h[g])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},d=()=>{i.forEach(h=>{h.disconnect()}),i.splice(0,i.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",c),n("destroy",d)}var FK={on(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return r.split(" ").forEach(i=>{n.eventsListeners[i]||(n.eventsListeners[i]=[]),n.eventsListeners[i][s](e)}),n},once(r,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(){n.off(r,s),s.__emitterProxy&&delete s.__emitterProxy;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(n,a)}return s.__emitterProxy=e,n.on(r,s,t)},onAny(r,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof r!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(r)<0&&t.eventsAnyListeners[n](r),t},offAny(r){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(r);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(r,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||r.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,i)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(i,1)})}),t},emit(){const r=this;if(!r.eventsListeners||r.destroyed||!r.eventsListeners)return r;let e,t,n;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return typeof i[0]=="string"||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),n=r):(e=i[0].events,t=i[0].data,n=i[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(c=>{r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach(d=>{d.apply(n,[c,...t])}),r.eventsListeners&&r.eventsListeners[c]&&r.eventsListeners[c].forEach(d=>{d.apply(n,t)})}),r}};function zK(){const r=this;let e,t;const n=r.el;typeof r.params.width<"u"&&r.params.width!==null?e=r.params.width:e=n.clientWidth,typeof r.params.height<"u"&&r.params.height!==null?t=r.params.height:t=n.clientHeight,!(e===0&&r.isHorizontal()||t===0&&r.isVertical())&&(e=e-parseInt(wd(n,"padding-left")||0,10)-parseInt(wd(n,"padding-right")||0,10),t=t-parseInt(wd(n,"padding-top")||0,10)-parseInt(wd(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(r,{width:e,height:t,size:r.isHorizontal()?e:t}))}function HK(){const r=this;function e(G){return r.isHorizontal()?G:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[G]}function t(G,J){return parseFloat(G.getPropertyValue(e(J))||0)}const n=r.params,{wrapperEl:s,slidesEl:i,size:a,rtlTranslate:o,wrongRTL:c}=r,d=r.virtual&&n.virtual.enabled,h=d?r.virtual.slides.length:r.slides.length,g=ol(i,`.${r.params.slideClass}, swiper-slide`),y=d?r.virtual.slides.length:g.length;let b=[];const v=[],w=[];let E=n.slidesOffsetBefore;typeof E=="function"&&(E=n.slidesOffsetBefore.call(r));let C=n.slidesOffsetAfter;typeof C=="function"&&(C=n.slidesOffsetAfter.call(r));const N=r.snapGrid.length,A=r.slidesGrid.length;let k=n.spaceBetween,M=-E,O=0,P=0;if(typeof a>"u")return;typeof k=="string"&&k.indexOf("%")>=0?k=parseFloat(k.replace("%",""))/100*a:typeof k=="string"&&(k=parseFloat(k)),r.virtualSize=-k,g.forEach(G=>{o?G.style.marginLeft="":G.style.marginRight="",G.style.marginBottom="",G.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(cw(s,"--swiper-centered-offset-before",""),cw(s,"--swiper-centered-offset-after",""));const F=n.grid&&n.grid.rows>1&&r.grid;F&&r.grid.initSlides(y);let H;const ee=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(G=>typeof n.breakpoints[G].slidesPerView<"u").length>0;for(let G=0;G<y;G+=1){H=0;let J;if(g[G]&&(J=g[G]),F&&r.grid.updateSlide(G,J,y,e),!(g[G]&&wd(J,"display")==="none")){if(n.slidesPerView==="auto"){ee&&(g[G].style[e("width")]="");const V=getComputedStyle(J),X=J.style.transform,K=J.style.webkitTransform;if(X&&(J.style.transform="none"),K&&(J.style.webkitTransform="none"),n.roundLengths)H=r.isHorizontal()?W3(J,"width"):W3(J,"height");else{const q=t(V,"width"),Z=t(V,"padding-left"),he=t(V,"padding-right"),te=t(V,"margin-left"),pe=t(V,"margin-right"),W=V.getPropertyValue("box-sizing");if(W&&W==="border-box")H=q+te+pe;else{const{clientWidth:ne,offsetWidth:me}=J;H=q+Z+he+te+pe+(me-ne)}}X&&(J.style.transform=X),K&&(J.style.webkitTransform=K),n.roundLengths&&(H=Math.floor(H))}else H=(a-(n.slidesPerView-1)*k)/n.slidesPerView,n.roundLengths&&(H=Math.floor(H)),g[G]&&(g[G].style[e("width")]=`${H}px`);g[G]&&(g[G].swiperSlideSize=H),w.push(H),n.centeredSlides?(M=M+H/2+O/2+k,O===0&&G!==0&&(M=M-a/2-k),G===0&&(M=M-a/2-k),Math.abs(M)<1/1e3&&(M=0),n.roundLengths&&(M=Math.floor(M)),P%n.slidesPerGroup===0&&b.push(M),v.push(M)):(n.roundLengths&&(M=Math.floor(M)),(P-Math.min(r.params.slidesPerGroupSkip,P))%r.params.slidesPerGroup===0&&b.push(M),v.push(M),M=M+H+k),r.virtualSize+=H+k,O=H,P+=1}}if(r.virtualSize=Math.max(r.virtualSize,a)+C,o&&c&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${r.virtualSize+k}px`),n.setWrapperSize&&(s.style[e("width")]=`${r.virtualSize+k}px`),F&&r.grid.updateWrapperSize(H,b,e),!n.centeredSlides){const G=[];for(let J=0;J<b.length;J+=1){let V=b[J];n.roundLengths&&(V=Math.floor(V)),b[J]<=r.virtualSize-a&&G.push(V)}b=G,Math.floor(r.virtualSize-a)-Math.floor(b[b.length-1])>1&&b.push(r.virtualSize-a)}if(d&&n.loop){const G=w[0]+k;if(n.slidesPerGroup>1){const J=Math.ceil((r.virtual.slidesBefore+r.virtual.slidesAfter)/n.slidesPerGroup),V=G*n.slidesPerGroup;for(let X=0;X<J;X+=1)b.push(b[b.length-1]+V)}for(let J=0;J<r.virtual.slidesBefore+r.virtual.slidesAfter;J+=1)n.slidesPerGroup===1&&b.push(b[b.length-1]+G),v.push(v[v.length-1]+G),r.virtualSize+=G}if(b.length===0&&(b=[0]),k!==0){const G=r.isHorizontal()&&o?"marginLeft":e("marginRight");g.filter((J,V)=>!n.cssMode||n.loop?!0:V!==g.length-1).forEach(J=>{J.style[G]=`${k}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let G=0;w.forEach(V=>{G+=V+(k||0)}),G-=k;const J=G-a;b=b.map(V=>V<=0?-E:V>J?J+C:V)}if(n.centerInsufficientSlides){let G=0;if(w.forEach(J=>{G+=J+(k||0)}),G-=k,G<a){const J=(a-G)/2;b.forEach((V,X)=>{b[X]=V-J}),v.forEach((V,X)=>{v[X]=V+J})}}if(Object.assign(r,{slides:g,snapGrid:b,slidesGrid:v,slidesSizesGrid:w}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){cw(s,"--swiper-centered-offset-before",`${-b[0]}px`),cw(s,"--swiper-centered-offset-after",`${r.size/2-w[w.length-1]/2}px`);const G=-r.snapGrid[0],J=-r.slidesGrid[0];r.snapGrid=r.snapGrid.map(V=>V+G),r.slidesGrid=r.slidesGrid.map(V=>V+J)}if(y!==h&&r.emit("slidesLengthChange"),b.length!==N&&(r.params.watchOverflow&&r.checkOverflow(),r.emit("snapGridLengthChange")),v.length!==A&&r.emit("slidesGridLengthChange"),n.watchSlidesProgress&&r.updateSlidesOffset(),!d&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const G=`${n.containerModifierClass}backface-hidden`,J=r.el.classList.contains(G);y<=n.maxBackfaceHiddenSlides?J||r.el.classList.add(G):J&&r.el.classList.remove(G)}}function UK(r){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,i;typeof r=="number"?e.setTransition(r):r===!0&&e.setTransition(e.params.speed);const a=o=>n?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const o=e.activeIndex+i;if(o>e.slides.length&&!n)break;t.push(a(o))}else t.push(a(e.activeIndex));for(i=0;i<t.length;i+=1)if(typeof t[i]<"u"){const o=t[i].offsetHeight;s=o>s?o:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function $K(){const r=this,e=r.slides,t=r.isElement?r.isHorizontal()?r.wrapperEl.offsetLeft:r.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(r.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-r.cssOverflowAdjustment()}function VK(r){r===void 0&&(r=this&&this.translate||0);const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:i}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-r;s&&(a=r),n.forEach(c=>{c.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let c=0;c<n.length;c+=1){const d=n[c];let h=d.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(h-=n[0].swiperSlideOffset);const g=(a+(t.centeredSlides?e.minTranslate():0)-h)/(d.swiperSlideSize+o),y=(a-i[0]+(t.centeredSlides?e.minTranslate():0)-h)/(d.swiperSlideSize+o),b=-(a-h),v=b+e.slidesSizesGrid[c];(b>=0&&b<e.size-1||v>1&&v<=e.size||b<=0&&v>=e.size)&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(c),n[c].classList.add(t.slideVisibleClass)),d.progress=s?-g:g,d.originalProgress=s?-y:y}}function qK(r){const e=this;if(typeof r>"u"){const h=e.rtlTranslate?-1:1;r=e&&e.translate&&e.translate*h||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:i,isEnd:a,progressLoop:o}=e;const c=i,d=a;if(n===0)s=0,i=!0,a=!0;else{s=(r-e.minTranslate())/n;const h=Math.abs(r-e.minTranslate())<1,g=Math.abs(r-e.maxTranslate())<1;i=h||s<=0,a=g||s>=1,h&&(s=0),g&&(s=1)}if(t.loop){const h=e.getSlideIndexByData(0),g=e.getSlideIndexByData(e.slides.length-1),y=e.slidesGrid[h],b=e.slidesGrid[g],v=e.slidesGrid[e.slidesGrid.length-1],w=Math.abs(r);w>=y?o=(w-y)/v:o=(w+v-b)/v,o>1&&(o-=1)}Object.assign(e,{progress:s,progressLoop:o,isBeginning:i,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(r),i&&!c&&e.emit("reachBeginning toEdge"),a&&!d&&e.emit("reachEnd toEdge"),(c&&!i||d&&!a)&&e.emit("fromEdge"),e.emit("progress",s)}function GK(){const r=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=r,i=r.virtual&&t.virtual.enabled,a=c=>ol(n,`.${t.slideClass}${c}, swiper-slide${c}`)[0];e.forEach(c=>{c.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(i)if(t.loop){let c=s-r.virtual.slidesBefore;c<0&&(c=r.virtual.slides.length+c),c>=r.virtual.slides.length&&(c-=r.virtual.slides.length),o=a(`[data-swiper-slide-index="${c}"]`)}else o=a(`[data-swiper-slide-index="${s}"]`);else o=e[s];if(o){o.classList.add(t.slideActiveClass);let c=jK(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c&&(c=e[0]),c&&c.classList.add(t.slideNextClass);let d=_K(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!d===0&&(d=e[e.length-1]),d&&d.classList.add(t.slidePrevClass)}r.emitSlidesClasses()}const mS=(r,e)=>{if(!r||r.destroyed||!r.params)return;const t=()=>r.isElement?"swiper-slide":`.${r.params.slideClass}`,n=e.closest(t());if(n){let s=n.querySelector(`.${r.params.lazyPreloaderClass}`);!s&&r.isElement&&(n.shadowRoot?s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(s=n.shadowRoot.querySelector(`.${r.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},d2=(r,e)=>{if(!r.slides[e])return;const t=r.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Y3=r=>{if(!r||r.destroyed||!r.params)return;let e=r.params.lazyPreloadPrevNext;const t=r.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=r.params.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(r.params.slidesPerView),s=r.activeIndex;if(r.params.grid&&r.params.grid.rows>1){const a=s,o=[a-e];o.push(...Array.from({length:e}).map((c,d)=>a+n+d)),r.slides.forEach((c,d)=>{o.includes(c.column)&&d2(r,d)});return}const i=s+n-1;if(r.params.rewind||r.params.loop)for(let a=s-e;a<=i+e;a+=1){const o=(a%t+t)%t;(o<s||o>i)&&d2(r,o)}else for(let a=Math.max(s-e,0);a<=Math.min(i+e,t-1);a+=1)a!==s&&(a>i||a<s)&&d2(r,a)};function WK(r){const{slidesGrid:e,params:t}=r,n=r.rtlTranslate?r.translate:-r.translate;let s;for(let i=0;i<e.length;i+=1)typeof e[i+1]<"u"?n>=e[i]&&n<e[i+1]-(e[i+1]-e[i])/2?s=i:n>=e[i]&&n<e[i+1]&&(s=i+1):n>=e[i]&&(s=i);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function YK(r){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:i,realIndex:a,snapIndex:o}=e;let c=r,d;const h=y=>{let b=y-e.virtual.slidesBefore;return b<0&&(b=e.virtual.slides.length+b),b>=e.virtual.slides.length&&(b-=e.virtual.slides.length),b};if(typeof c>"u"&&(c=WK(e)),n.indexOf(t)>=0)d=n.indexOf(t);else{const y=Math.min(s.slidesPerGroupSkip,c);d=y+Math.floor((c-y)/s.slidesPerGroup)}if(d>=n.length&&(d=n.length-1),c===i){d!==o&&(e.snapIndex=d,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=h(c));return}let g;e.virtual&&s.virtual.enabled&&s.loop?g=h(c):e.slides[c]?g=parseInt(e.slides[c].getAttribute("data-swiper-slide-index")||c,10):g=c,Object.assign(e,{previousSnapIndex:o,snapIndex:d,previousRealIndex:a,realIndex:g,previousIndex:i,activeIndex:c}),e.initialized&&Y3(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==g&&e.emit("realIndexChange"),e.emit("slideChange"))}function XK(r,e){const t=this,n=t.params;let s=r.closest(`.${n.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(r)&&[...e.slice(e.indexOf(r)+1,e.length)].forEach(o=>{!s&&o.matches&&o.matches(`.${n.slideClass}, swiper-slide`)&&(s=o)});let i=!1,a;if(s){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===s){i=!0,a=o;break}}if(s&&i)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}n.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var KK={updateSize:zK,updateSlides:HK,updateAutoHeight:UK,updateSlidesOffset:$K,updateSlidesProgress:VK,updateProgress:qK,updateSlidesClasses:GK,updateActiveIndex:YK,updateClickedSlide:XK};function JK(r){r===void 0&&(r=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:i}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let a=kK(i,r);return a+=e.cssOverflowAdjustment(),n&&(a=-a),a||0}function QK(r,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:i,progress:a}=t;let o=0,c=0;const d=0;t.isHorizontal()?o=n?-r:r:c=r,s.roundLengths&&(o=Math.floor(o),c=Math.floor(c)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:c,s.cssMode?i[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-c:s.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():c-=t.cssOverflowAdjustment(),i.style.transform=`translate3d(${o}px, ${c}px, ${d}px)`);let h;const g=t.maxTranslate()-t.minTranslate();g===0?h=0:h=(r-t.minTranslate())/g,h!==a&&t.updateProgress(r),t.emit("setTranslate",t.translate,e)}function ZK(){return-this.snapGrid[0]}function eJ(){return-this.snapGrid[this.snapGrid.length-1]}function tJ(r,e,t,n,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),n===void 0&&(n=!0);const i=this,{params:a,wrapperEl:o}=i;if(i.animating&&a.preventInteractionOnTransition)return!1;const c=i.minTranslate(),d=i.maxTranslate();let h;if(n&&r>c?h=c:n&&r<d?h=d:h=r,i.updateProgress(h),a.cssMode){const g=i.isHorizontal();if(e===0)o[g?"scrollLeft":"scrollTop"]=-h;else{if(!i.support.smoothScroll)return XB({swiper:i,targetPosition:-h,side:g?"left":"top"}),!0;o.scrollTo({[g?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(h),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(h),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(y){!i||i.destroyed||y.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,t&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var nJ={getTranslate:JK,setTranslate:QK,minTranslate:ZK,maxTranslate:eJ,translateTo:tJ};function rJ(r,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${r}ms`,t.wrapperEl.style.transitionDelay=r===0?"0ms":""),t.emit("setTransition",r,e)}function ZB(r){let{swiper:e,runCallbacks:t,direction:n,step:s}=r;const{activeIndex:i,previousIndex:a}=e;let o=n;if(o||(i>a?o="next":i<a?o="prev":o="reset"),e.emit(`transition${s}`),t&&i!==a){if(o==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),o==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function sJ(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),ZB({swiper:t,runCallbacks:r,direction:e,step:"Start"}))}function iJ(r,e){r===void 0&&(r=!0);const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),ZB({swiper:t,runCallbacks:r,direction:e,step:"End"}))}var aJ={setTransition:rJ,transitionStart:sJ,transitionEnd:iJ};function oJ(r,e,t,n,s){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const i=this;let a=r;a<0&&(a=0);const{params:o,snapGrid:c,slidesGrid:d,previousIndex:h,activeIndex:g,rtlTranslate:y,wrapperEl:b,enabled:v}=i;if(i.animating&&o.preventInteractionOnTransition||!v&&!n&&!s)return!1;const w=Math.min(i.params.slidesPerGroupSkip,a);let E=w+Math.floor((a-w)/i.params.slidesPerGroup);E>=c.length&&(E=c.length-1);const C=-c[E];if(o.normalizeSlideIndex)for(let A=0;A<d.length;A+=1){const k=-Math.floor(C*100),M=Math.floor(d[A]*100),O=Math.floor(d[A+1]*100);typeof d[A+1]<"u"?k>=M&&k<O-(O-M)/2?a=A:k>=M&&k<O&&(a=A+1):k>=M&&(a=A)}if(i.initialized&&a!==g&&(!i.allowSlideNext&&(y?C>i.translate&&C>i.minTranslate():C<i.translate&&C<i.minTranslate())||!i.allowSlidePrev&&C>i.translate&&C>i.maxTranslate()&&(g||0)!==a))return!1;a!==(h||0)&&t&&i.emit("beforeSlideChangeStart"),i.updateProgress(C);let N;if(a>g?N="next":a<g?N="prev":N="reset",y&&-C===i.translate||!y&&C===i.translate)return i.updateActiveIndex(a),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),o.effect!=="slide"&&i.setTranslate(C),N!=="reset"&&(i.transitionStart(t,N),i.transitionEnd(t,N)),!1;if(o.cssMode){const A=i.isHorizontal(),k=y?C:-C;if(e===0){const M=i.virtual&&i.params.virtual.enabled;M&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),M&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{b[A?"scrollLeft":"scrollTop"]=k})):b[A?"scrollLeft":"scrollTop"]=k,M&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1})}else{if(!i.support.smoothScroll)return XB({swiper:i,targetPosition:k,side:A?"left":"top"}),!0;b.scrollTo({[A?"left":"top"]:k,behavior:"smooth"})}return!0}return i.setTransition(e),i.setTranslate(C),i.updateActiveIndex(a),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,n),i.transitionStart(t,N),e===0?i.transitionEnd(t,N):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(k){!i||i.destroyed||k.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(t,N))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function lJ(r,e,t,n){r===void 0&&(r=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof r=="string"&&(r=parseInt(r,10));const s=this;let i=r;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?i=i+s.virtual.slidesBefore:i=s.getSlideIndexByData(i)),s.slideTo(i,e,t,n)}function cJ(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const n=this,{enabled:s,params:i,animating:a}=n;if(!s)return n;let o=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const c=n.activeIndex<i.slidesPerGroupSkip?1:o,d=n.virtual&&i.virtual.enabled;if(i.loop){if(a&&!d&&i.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+c,r,e,t)}),!0}return i.rewind&&n.isEnd?n.slideTo(0,r,e,t):n.slideTo(n.activeIndex+c,r,e,t)}function uJ(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const n=this,{params:s,snapGrid:i,slidesGrid:a,rtlTranslate:o,enabled:c,animating:d}=n;if(!c)return n;const h=n.virtual&&s.virtual.enabled;if(s.loop){if(d&&!h&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const g=o?n.translate:-n.translate;function y(C){return C<0?-Math.floor(Math.abs(C)):Math.floor(C)}const b=y(g),v=i.map(C=>y(C));let w=i[v.indexOf(b)-1];if(typeof w>"u"&&s.cssMode){let C;i.forEach((N,A)=>{b>=N&&(C=A)}),typeof C<"u"&&(w=i[C>0?C-1:C])}let E=0;if(typeof w<"u"&&(E=a.indexOf(w),E<0&&(E=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(E=E-n.slidesPerViewDynamic("previous",!0)+1,E=Math.max(E,0))),s.rewind&&n.isBeginning){const C=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(C,r,e,t)}else if(s.loop&&n.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(E,r,e,t)}),!0;return n.slideTo(E,r,e,t)}function dJ(r,e,t){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0);const n=this;return n.slideTo(n.activeIndex,r,e,t)}function hJ(r,e,t,n){r===void 0&&(r=this.params.speed),e===void 0&&(e=!0),n===void 0&&(n=.5);const s=this;let i=s.activeIndex;const a=Math.min(s.params.slidesPerGroupSkip,i),o=a+Math.floor((i-a)/s.params.slidesPerGroup),c=s.rtlTranslate?s.translate:-s.translate;if(c>=s.snapGrid[o]){const d=s.snapGrid[o],h=s.snapGrid[o+1];c-d>(h-d)*n&&(i+=s.params.slidesPerGroup)}else{const d=s.snapGrid[o-1],h=s.snapGrid[o];c-d<=(h-d)*n&&(i-=s.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,s.slidesGrid.length-1),s.slideTo(i,r,e,t)}function fJ(){const r=this,{params:e,slidesEl:t}=r,n=e.slidesPerView==="auto"?r.slidesPerViewDynamic():e.slidesPerView;let s=r.clickedIndex,i;const a=r.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(r.animating)return;i=parseInt(r.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<r.loopedSlides-n/2||s>r.slides.length-r.loopedSlides+n/2?(r.loopFix(),s=r.getSlideIndex(ol(t,`${a}[data-swiper-slide-index="${i}"]`)[0]),G3(()=>{r.slideTo(s)})):r.slideTo(s):s>r.slides.length-n?(r.loopFix(),s=r.getSlideIndex(ol(t,`${a}[data-swiper-slide-index="${i}"]`)[0]),G3(()=>{r.slideTo(s)})):r.slideTo(s)}else r.slideTo(s)}var pJ={slideTo:oJ,slideToLoop:lJ,slideNext:cJ,slidePrev:uJ,slideReset:dJ,slideToClosest:hJ,slideToClickedSlide:fJ};function mJ(r){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;ol(n,`.${t.slideClass}, swiper-slide`).forEach((i,a)=>{i.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:r,direction:t.centeredSlides?void 0:"next"})}function gJ(r){let{slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:s,activeSlideIndex:i,byController:a,byMousewheel:o}=r===void 0?{}:r;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:d,allowSlidePrev:h,allowSlideNext:g,slidesEl:y,params:b}=c;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&b.virtual.enabled){t&&(!b.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):b.centeredSlides&&c.snapIndex<b.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=g,c.emit("loopFix");return}const v=b.slidesPerView==="auto"?c.slidesPerViewDynamic():Math.ceil(parseFloat(b.slidesPerView,10));let w=b.loopedSlides||v;w%b.slidesPerGroup!==0&&(w+=b.slidesPerGroup-w%b.slidesPerGroup),c.loopedSlides=w;const E=[],C=[];let N=c.activeIndex;typeof i>"u"?i=c.getSlideIndex(c.slides.filter(P=>P.classList.contains(b.slideActiveClass))[0]):N=i;const A=n==="next"||!n,k=n==="prev"||!n;let M=0,O=0;if(i<w){M=Math.max(w-i,b.slidesPerGroup);for(let P=0;P<w-i;P+=1){const F=P-Math.floor(P/d.length)*d.length;E.push(d.length-F-1)}}else if(i>c.slides.length-w*2){O=Math.max(i-(c.slides.length-w*2),b.slidesPerGroup);for(let P=0;P<O;P+=1){const F=P-Math.floor(P/d.length)*d.length;C.push(F)}}if(k&&E.forEach(P=>{c.slides[P].swiperLoopMoveDOM=!0,y.prepend(c.slides[P]),c.slides[P].swiperLoopMoveDOM=!1}),A&&C.forEach(P=>{c.slides[P].swiperLoopMoveDOM=!0,y.append(c.slides[P]),c.slides[P].swiperLoopMoveDOM=!1}),c.recalcSlides(),b.slidesPerView==="auto"&&c.updateSlides(),b.watchSlidesProgress&&c.updateSlidesOffset(),t){if(E.length>0&&k)if(typeof e>"u"){const P=c.slidesGrid[N],H=c.slidesGrid[N+M]-P;o?c.setTranslate(c.translate-H):(c.slideTo(N+M,0,!1,!0),s&&(c.touches[c.isHorizontal()?"startX":"startY"]+=H,c.touchEventsData.currentTranslate=c.translate))}else s&&(c.slideToLoop(e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate);else if(C.length>0&&A)if(typeof e>"u"){const P=c.slidesGrid[N],H=c.slidesGrid[N-O]-P;o?c.setTranslate(c.translate-H):(c.slideTo(N-O,0,!1,!0),s&&(c.touches[c.isHorizontal()?"startX":"startY"]+=H,c.touchEventsData.currentTranslate=c.translate))}else c.slideToLoop(e,0,!1,!0)}if(c.allowSlidePrev=h,c.allowSlideNext=g,c.controller&&c.controller.control&&!a){const P={slideRealIndex:e,direction:n,setTranslate:s,activeSlideIndex:i,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(F=>{!F.destroyed&&F.params.loop&&F.loopFix({...P,slideTo:F.params.slidesPerView===b.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...P,slideTo:c.controller.control.params.slidesPerView===b.slidesPerView?t:!1})}c.emit("loopFix")}function yJ(){const r=this,{params:e,slidesEl:t}=r;if(!e.loop||r.virtual&&r.params.virtual.enabled)return;r.recalcSlides();const n=[];r.slides.forEach(s=>{const i=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[i]=s}),r.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),r.recalcSlides(),r.slideTo(r.realIndex,0)}var xJ={loopCreate:mJ,loopFix:gJ,loopDestroy:yJ};function bJ(r){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=r?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function vJ(){const r=this;r.params.watchOverflow&&r.isLocked||r.params.cssMode||(r.isElement&&(r.__preventObserver__=!0),r[r.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",r.isElement&&requestAnimationFrame(()=>{r.__preventObserver__=!1}))}var wJ={setGrabCursor:bJ,unsetGrabCursor:vJ};function SJ(r,e){e===void 0&&(e=this);function t(n){if(!n||n===np()||n===ea())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(r);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function CJ(r){const e=this,t=np(),n=ea(),s=e.touchEventsData;s.evCache.push(r);const{params:i,touches:a,enabled:o}=e;if(!o||!i.simulateTouch&&r.pointerType==="mouse"||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let c=r;c.originalEvent&&(c=c.originalEvent);let d=c.target;if(i.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(d)||"which"in c&&c.which===3||"button"in c&&c.button>0||s.isTouched&&s.isMoved)return;const h=!!i.noSwipingClass&&i.noSwipingClass!=="",g=r.composedPath?r.composedPath():r.path;h&&c.target&&c.target.shadowRoot&&g&&(d=g[0]);const y=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,b=!!(c.target&&c.target.shadowRoot);if(i.noSwiping&&(b?SJ(y,d):d.closest(y))){e.allowClick=!0;return}if(i.swipeHandler&&!d.closest(i.swipeHandler))return;a.currentX=c.pageX,a.currentY=c.pageY;const v=a.currentX,w=a.currentY,E=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,C=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(E&&(v<=C||v>=n.innerWidth-C))if(E==="prevent")r.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=v,a.startY=w,s.touchStartTime=zS(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(s.allowThresholdMove=!1);let N=!0;d.matches(s.focusableElements)&&(N=!1,d.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==d&&t.activeElement.blur();const A=N&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||A)&&!d.isContentEditable&&c.preventDefault(),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",c)}function EJ(r){const e=np(),t=this,n=t.touchEventsData,{params:s,touches:i,rtlTranslate:a,enabled:o}=t;if(!o||!s.simulateTouch&&r.pointerType==="mouse")return;let c=r;if(c.originalEvent&&(c=c.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",c);return}const d=n.evCache.findIndex(P=>P.pointerId===c.pointerId);d>=0&&(n.evCache[d]=c);const h=n.evCache.length>1?n.evCache[0]:c,g=h.pageX,y=h.pageY;if(c.preventedByNestedSwiper){i.startX=g,i.startY=y;return}if(!t.allowTouchMove){c.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(i,{startX:g,startY:y,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:g,currentY:y}),n.touchStartTime=zS());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(y<i.startY&&t.translate<=t.maxTranslate()||y>i.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(g<i.startX&&t.translate<=t.maxTranslate()||g>i.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&c.target===e.activeElement&&c.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}if(n.allowTouchCallbacks&&t.emit("touchMove",c),c.targetTouches&&c.targetTouches.length>1)return;i.currentX=g,i.currentY=y;const b=i.currentX-i.startX,v=i.currentY-i.startY;if(t.params.threshold&&Math.sqrt(b**2+v**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let P;t.isHorizontal()&&i.currentY===i.startY||t.isVertical()&&i.currentX===i.startX?n.isScrolling=!1:b*b+v*v>=25&&(P=Math.atan2(Math.abs(v),Math.abs(b))*180/Math.PI,n.isScrolling=t.isHorizontal()?P>s.touchAngle:90-P>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",c),typeof n.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(n.startMoving=!0),n.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&n.evCache.length>1){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&c.cancelable&&c.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&c.stopPropagation();let w=t.isHorizontal()?b:v,E=t.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;s.oneWayMovement&&(w=Math.abs(w)*(a?1:-1),E=Math.abs(E)*(a?1:-1)),i.diff=w,w*=s.touchRatio,a&&(w=-w,E=-E);const C=t.touchesDirection;t.swipeDirection=w>0?"prev":"next",t.touchesDirection=E>0?"prev":"next";const N=t.params.loop&&!s.cssMode,A=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!n.isMoved){if(N&&A&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const P=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(P)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",c)}let k;n.isMoved&&C!==t.touchesDirection&&N&&A&&Math.abs(w)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),k=!0),t.emit("sliderMove",c),n.isMoved=!0,n.currentTranslate=w+n.startTranslate;let M=!0,O=s.resistanceRatio;if(s.touchReleaseOnEdges&&(O=0),w>0?(N&&A&&!k&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(M=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+w)**O))):w<0&&(N&&A&&!k&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(M=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-w)**O))),M&&(c.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(w)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,n.currentTranslate=n.startTranslate,i.diff=t.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function TJ(r){const e=this,t=e.touchEventsData,n=t.evCache.findIndex(A=>A.pointerId===r.pointerId);if(n>=0&&t.evCache.splice(n,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:s,touches:i,rtlTranslate:a,slidesGrid:o,enabled:c}=e;if(!c||!s.simulateTouch&&r.pointerType==="mouse")return;let d=r;if(d.originalEvent&&(d=d.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",d),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&s.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}s.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=zS(),g=h-t.touchStartTime;if(e.allowClick){const A=d.path||d.composedPath&&d.composedPath();e.updateClickedSlide(A&&A[0]||d.target,A),e.emit("tap click",d),g<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",d)}if(t.lastClickTime=zS(),G3(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||i.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let y;if(s.followFinger?y=a?e.translate:-e.translate:y=-t.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:y});return}let b=0,v=e.slidesSizesGrid[0];for(let A=0;A<o.length;A+=A<s.slidesPerGroupSkip?1:s.slidesPerGroup){const k=A<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof o[A+k]<"u"?y>=o[A]&&y<o[A+k]&&(b=A,v=o[A+k]-o[A]):y>=o[A]&&(b=A,v=o[o.length-1]-o[o.length-2])}let w=null,E=null;s.rewind&&(e.isBeginning?E=s.virtual&&s.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(w=0));const C=(y-o[b])/v,N=b<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(g>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(C>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?w:b+N):e.slideTo(b)),e.swipeDirection==="prev"&&(C>1-s.longSwipesRatio?e.slideTo(b+N):E!==null&&C<0&&Math.abs(C)>s.longSwipesRatio?e.slideTo(E):e.slideTo(b))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(d.target===e.navigation.nextEl||d.target===e.navigation.prevEl)?d.target===e.navigation.nextEl?e.slideTo(b+N):e.slideTo(b):(e.swipeDirection==="next"&&e.slideTo(w!==null?w:b+N),e.swipeDirection==="prev"&&e.slideTo(E!==null?E:b))}}function QO(){const r=this,{params:e,el:t}=r;if(t&&t.offsetWidth===0)return;e.breakpoints&&r.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:i}=r,a=r.virtual&&r.params.virtual.enabled;r.allowSlideNext=!0,r.allowSlidePrev=!0,r.updateSize(),r.updateSlides(),r.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&r.isEnd&&!r.isBeginning&&!r.params.centeredSlides&&!o?r.slideTo(r.slides.length-1,0,!1,!0):r.params.loop&&!a?r.slideToLoop(r.realIndex,0,!1,!0):r.slideTo(r.activeIndex,0,!1,!0),r.autoplay&&r.autoplay.running&&r.autoplay.paused&&(clearTimeout(r.autoplay.resizeTimeout),r.autoplay.resizeTimeout=setTimeout(()=>{r.autoplay&&r.autoplay.running&&r.autoplay.paused&&r.autoplay.resume()},500)),r.allowSlidePrev=s,r.allowSlideNext=n,r.params.watchOverflow&&i!==r.snapGrid&&r.checkOverflow()}function AJ(r){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&r.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(r.stopPropagation(),r.stopImmediatePropagation())))}function NJ(){const r=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=r;if(!n)return;r.previousTranslate=r.translate,r.isHorizontal()?r.translate=-e.scrollLeft:r.translate=-e.scrollTop,r.translate===0&&(r.translate=0),r.updateActiveIndex(),r.updateSlidesClasses();let s;const i=r.maxTranslate()-r.minTranslate();i===0?s=0:s=(r.translate-r.minTranslate())/i,s!==r.progress&&r.updateProgress(t?-r.translate:r.translate),r.emit("setTranslate",r.translate,!1)}function kJ(r){const e=this;mS(e,r.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let ZO=!1;function MJ(){}const e7=(r,e)=>{const t=np(),{params:n,el:s,wrapperEl:i,device:a}=r,o=!!n.nested,c=e==="on"?"addEventListener":"removeEventListener",d=e;s[c]("pointerdown",r.onTouchStart,{passive:!1}),t[c]("pointermove",r.onTouchMove,{passive:!1,capture:o}),t[c]("pointerup",r.onTouchEnd,{passive:!0}),t[c]("pointercancel",r.onTouchEnd,{passive:!0}),t[c]("pointerout",r.onTouchEnd,{passive:!0}),t[c]("pointerleave",r.onTouchEnd,{passive:!0}),t[c]("contextmenu",r.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[c]("click",r.onClick,!0),n.cssMode&&i[c]("scroll",r.onScroll),n.updateOnWindowResize?r[d](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",QO,!0):r[d]("observerUpdate",QO,!0),s[c]("load",r.onLoad,{capture:!0})};function _J(){const r=this,e=np(),{params:t}=r;r.onTouchStart=CJ.bind(r),r.onTouchMove=EJ.bind(r),r.onTouchEnd=TJ.bind(r),t.cssMode&&(r.onScroll=NJ.bind(r)),r.onClick=AJ.bind(r),r.onLoad=kJ.bind(r),ZO||(e.addEventListener("touchstart",MJ),ZO=!0),e7(r,"on")}function jJ(){e7(this,"off")}var DJ={attachEvents:_J,detachEvents:jJ};const eR=(r,e)=>r.grid&&e.grid&&e.grid.rows>1;function OJ(){const r=this,{realIndex:e,initialized:t,params:n,el:s}=r,i=n.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const a=r.getBreakpoint(i,r.params.breakpointsBase,r.el);if(!a||r.currentBreakpoint===a)return;const c=(a in i?i[a]:void 0)||r.originalParams,d=eR(r,n),h=eR(r,c),g=n.enabled;d&&!h?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),r.emitContainerClasses()):!d&&h&&(s.classList.add(`${n.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),r.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(C=>{if(typeof c[C]>"u")return;const N=n[C]&&n[C].enabled,A=c[C]&&c[C].enabled;N&&!A&&r[C].disable(),!N&&A&&r[C].enable()});const y=c.direction&&c.direction!==n.direction,b=n.loop&&(c.slidesPerView!==n.slidesPerView||y),v=n.loop;y&&t&&r.changeDirection(),Wi(r.params,c);const w=r.params.enabled,E=r.params.loop;Object.assign(r,{allowTouchMove:r.params.allowTouchMove,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev}),g&&!w?r.disable():!g&&w&&r.enable(),r.currentBreakpoint=a,r.emit("_beforeBreakpoint",c),t&&(b?(r.loopDestroy(),r.loopCreate(e),r.updateSlides()):!v&&E?(r.loopCreate(e),r.updateSlides()):v&&!E&&r.loopDestroy()),r.emit("breakpoint",c)}function RJ(r,e,t){if(e===void 0&&(e="window"),!r||e==="container"&&!t)return;let n=!1;const s=ea(),i=e==="window"?s.innerHeight:t.clientHeight,a=Object.keys(r).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const c=parseFloat(o.substr(1));return{value:i*c,point:o}}return{value:o,point:o}});a.sort((o,c)=>parseInt(o.value,10)-parseInt(c.value,10));for(let o=0;o<a.length;o+=1){const{point:c,value:d}=a[o];e==="window"?s.matchMedia(`(min-width: ${d}px)`).matches&&(n=c):d<=t.clientWidth&&(n=c)}return n||"max"}var LJ={setBreakpoint:OJ,getBreakpoint:RJ};function PJ(r,e){const t=[];return r.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function IJ(){const r=this,{classNames:e,params:t,rtl:n,el:s,device:i}=r,a=PJ(["initialized",t.direction,{"free-mode":r.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),s.classList.add(...e),r.emitContainerClasses()}function BJ(){const r=this,{el:e,classNames:t}=r;e.classList.remove(...t),r.emitContainerClasses()}var FJ={addClasses:IJ,removeClasses:BJ};function zJ(){const r=this,{isLocked:e,params:t}=r,{slidesOffsetBefore:n}=t;if(n){const s=r.slides.length-1,i=r.slidesGrid[s]+r.slidesSizesGrid[s]+n*2;r.isLocked=r.size>i}else r.isLocked=r.snapGrid.length===1;t.allowSlideNext===!0&&(r.allowSlideNext=!r.isLocked),t.allowSlidePrev===!0&&(r.allowSlidePrev=!r.isLocked),e&&e!==r.isLocked&&(r.isEnd=!1),e!==r.isLocked&&r.emit(r.isLocked?"lock":"unlock")}var HJ={checkOverflow:zJ},X3={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function UJ(r,e){return function(n){n===void 0&&(n={});const s=Object.keys(n)[0],i=n[s];if(typeof i!="object"||i===null){Wi(e,n);return}if(r[s]===!0&&(r[s]={enabled:!0}),s==="navigation"&&r[s]&&r[s].enabled&&!r[s].prevEl&&!r[s].nextEl&&(r[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&r[s]&&r[s].enabled&&!r[s].el&&(r[s].auto=!0),!(s in r&&"enabled"in i)){Wi(e,n);return}typeof r[s]=="object"&&!("enabled"in r[s])&&(r[s].enabled=!0),r[s]||(r[s]={enabled:!1}),Wi(e,n)}}const h2={eventsEmitter:FK,update:KK,translate:nJ,transition:aJ,slide:pJ,loop:xJ,grabCursor:wJ,events:DJ,breakpoints:LJ,checkOverflow:HJ,classes:FJ},f2={};let o_=class Pl{constructor(){let e,t;for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Wi({},t),e&&!t.el&&(t.el=e);const a=np();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const h=[];return a.querySelectorAll(t.el).forEach(g=>{const y=Wi({},t,{el:g});h.push(new Pl(y))}),h}const o=this;o.__swiper__=!0,o.support=QB(),o.device=RK({userAgent:t.userAgent}),o.browser=PK(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const c={};o.modules.forEach(h=>{h({params:t,swiper:o,extendParams:UJ(t,c),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const d=Wi({},X3,c);return o.params=Wi({},d,f2,t),o.originalParams=Wi({},o.params),o.passedParams=Wi({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(h=>{o.on(h,o.params.on[h])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=ol(t,`.${n.slideClass}, swiper-slide`),i=HS(s[0]);return HS(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=ol(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),a=(n.maxTranslate()-s)*e+s;n.translateTo(a,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const n=this,{params:s,slides:i,slidesGrid:a,slidesSizesGrid:o,size:c,activeIndex:d}=n;let h=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let g=i[d]?i[d].swiperSlideSize:0,y;for(let b=d+1;b<i.length;b+=1)i[b]&&!y&&(g+=i[b].swiperSlideSize,h+=1,g>c&&(y=!0));for(let b=d-1;b>=0;b-=1)i[b]&&!y&&(g+=i[b].swiperSlideSize,h+=1,g>c&&(y=!0))}else if(e==="current")for(let g=d+1;g<i.length;g+=1)(t?a[g]+o[g]-a[d]<c:a[g]-a[d]<c)&&(h+=1);else for(let g=d-1;g>=0;g-=1)a[d]-a[g]<c&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&mS(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const a=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(a.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(i=>{e==="vertical"?i.style.width="":i.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):ol(n,s())[0];return!a&&t.params.createElements&&(a=KB("div",t.params.wrapperClass),n.append(a),ol(n,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:n,wrapperEl:a,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:a,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||wd(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||wd(n,"direction")==="rtl"),wrongRTL:wd(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(i=>{i.complete?mS(t,i):i.addEventListener("load",a=>{mS(t,a.target)})}),Y3(t),t.initialized=!0,Y3(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const n=this,{params:s,el:i,wrapperEl:a,slides:o}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(c=>{c.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(c=>{n.off(c)}),e!==!1&&(n.el.swiper=null,AK(n)),n.destroyed=!0),null}static extendDefaults(e){Wi(f2,e)}static get extendedDefaults(){return f2}static get defaults(){return X3}static installModule(e){Pl.prototype.__modules__||(Pl.prototype.__modules__=[]);const t=Pl.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Pl.installModule(t)),Pl):(Pl.installModule(e),Pl)}};Object.keys(h2).forEach(r=>{Object.keys(h2[r]).forEach(e=>{o_.prototype[e]=h2[r][e]})});o_.use([IK,BK]);const t7=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Gf(r){return typeof r=="object"&&r!==null&&r.constructor&&Object.prototype.toString.call(r).slice(8,-1)==="Object"&&!r.__swiper__}function Pf(r,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof r[n]>"u"?r[n]=e[n]:Gf(e[n])&&Gf(r[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?r[n]=e[n]:Pf(r[n],e[n]):r[n]=e[n]})}function n7(r){return r===void 0&&(r={}),r.navigation&&typeof r.navigation.nextEl>"u"&&typeof r.navigation.prevEl>"u"}function r7(r){return r===void 0&&(r={}),r.pagination&&typeof r.pagination.el>"u"}function s7(r){return r===void 0&&(r={}),r.scrollbar&&typeof r.scrollbar.el>"u"}function i7(r){r===void 0&&(r="");const e=r.split(" ").map(n=>n.trim()).filter(n=>!!n),t=[];return e.forEach(n=>{t.indexOf(n)<0&&t.push(n)}),t.join(" ")}function $J(r){return r===void 0&&(r=""),r?r.includes("swiper-wrapper")?r:`swiper-wrapper ${r}`:"swiper-wrapper"}function VJ(r){let{swiper:e,slides:t,passedParams:n,changedParams:s,nextEl:i,prevEl:a,scrollbarEl:o,paginationEl:c}=r;const d=s.filter(H=>H!=="children"&&H!=="direction"&&H!=="wrapperClass"),{params:h,pagination:g,navigation:y,scrollbar:b,virtual:v,thumbs:w}=e;let E,C,N,A,k,M,O,P;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(E=!0),s.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(C=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||c)&&(h.pagination||h.pagination===!1)&&g&&!g.el&&(N=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(h.scrollbar||h.scrollbar===!1)&&b&&!b.el&&(A=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||a)&&(n.navigation.nextEl||i)&&(h.navigation||h.navigation===!1)&&y&&!y.prevEl&&!y.nextEl&&(k=!0);const F=H=>{e[H]&&(e[H].destroy(),H==="navigation"?(e.isElement&&(e[H].prevEl.remove(),e[H].nextEl.remove()),h[H].prevEl=void 0,h[H].nextEl=void 0,e[H].prevEl=void 0,e[H].nextEl=void 0):(e.isElement&&e[H].el.remove(),h[H].el=void 0,e[H].el=void 0))};s.includes("loop")&&e.isElement&&(h.loop&&!n.loop?M=!0:!h.loop&&n.loop?O=!0:P=!0),d.forEach(H=>{if(Gf(h[H])&&Gf(n[H]))Pf(h[H],n[H]),(H==="navigation"||H==="pagination"||H==="scrollbar")&&"enabled"in n[H]&&!n[H].enabled&&F(H);else{const ee=n[H];(ee===!0||ee===!1)&&(H==="navigation"||H==="pagination"||H==="scrollbar")?ee===!1&&F(H):h[H]=n[H]}}),d.includes("controller")&&!C&&e.controller&&e.controller.control&&h.controller&&h.controller.control&&(e.controller.control=h.controller.control),s.includes("children")&&t&&v&&h.virtual.enabled&&(v.slides=t,v.update(!0)),s.includes("children")&&t&&h.loop&&(P=!0),E&&w.init()&&w.update(!0),C&&(e.controller.control=h.controller.control),N&&(e.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-pagination"),c.part.add("pagination"),e.el.appendChild(c)),c&&(h.pagination.el=c),g.init(),g.render(),g.update()),A&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(h.scrollbar.el=o),b.init(),b.updateSize(),b.setTranslate()),k&&(e.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),i.innerHTML=e.hostEl.constructor.nextButtonSvg,i.part.add("button-next"),e.el.appendChild(i)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),i&&(h.navigation.nextEl=i),a&&(h.navigation.prevEl=a),y.init(),y.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&e.changeDirection(n.direction,!1),(M||P)&&e.loopDestroy(),(O||P)&&e.loopCreate(),e.update()}function qJ(r,e){r===void 0&&(r={}),e===void 0&&(e=!0);const t={on:{}},n={},s={};Pf(t,X3),t._emitClasses=!0,t.init=!1;const i={},a=t7.map(c=>c.replace(/_/,"")),o=Object.assign({},r);return Object.keys(o).forEach(c=>{typeof r[c]>"u"||(a.indexOf(c)>=0?Gf(r[c])?(t[c]={},s[c]={},Pf(t[c],r[c]),Pf(s[c],r[c])):(t[c]=r[c],s[c]=r[c]):c.search(/on[A-Z]/)===0&&typeof r[c]=="function"?e?n[`${c[2].toLowerCase()}${c.substr(3)}`]=r[c]:t.on[`${c[2].toLowerCase()}${c.substr(3)}`]=r[c]:i[c]=r[c])}),["navigation","pagination","scrollbar"].forEach(c=>{t[c]===!0&&(t[c]={}),t[c]===!1&&delete t[c]}),{params:t,passedParams:s,rest:i,events:n}}function GJ(r,e){let{el:t,nextEl:n,prevEl:s,paginationEl:i,scrollbarEl:a,swiper:o}=r;n7(e)&&n&&s&&(o.params.navigation.nextEl=n,o.originalParams.navigation.nextEl=n,o.params.navigation.prevEl=s,o.originalParams.navigation.prevEl=s),r7(e)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),s7(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function WJ(r,e,t,n,s){const i=[];if(!e)return i;const a=c=>{i.indexOf(c)<0&&i.push(c)};if(t&&n){const c=n.map(s),d=t.map(s);c.join("")!==d.join("")&&a("children"),n.length!==t.length&&a("children")}return t7.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in r&&c in e)if(Gf(r[c])&&Gf(e[c])){const d=Object.keys(r[c]),h=Object.keys(e[c]);d.length!==h.length?a(c):(d.forEach(g=>{r[c][g]!==e[c][g]&&a(c)}),h.forEach(g=>{r[c][g]!==e[c][g]&&a(c)}))}else r[c]!==e[c]&&a(c)}),i}const YJ=r=>{!r||r.destroyed||!r.params.virtual||r.params.virtual&&!r.params.virtual.enabled||(r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),r.parallax&&r.params.parallax&&r.params.parallax.enabled&&r.parallax.setTranslate())};function US(){return US=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},US.apply(this,arguments)}function a7(r){return r.type&&r.type.displayName&&r.type.displayName.includes("SwiperSlide")}function o7(r){const e=[];return Wt.Children.toArray(r).forEach(t=>{a7(t)?e.push(t):t.props&&t.props.children&&o7(t.props.children).forEach(n=>e.push(n))}),e}function XJ(r){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Wt.Children.toArray(r).forEach(n=>{if(a7(n))e.push(n);else if(n.props&&n.props.slot&&t[n.props.slot])t[n.props.slot].push(n);else if(n.props&&n.props.children){const s=o7(n.props.children);s.length>0?s.forEach(i=>e.push(i)):t["container-end"].push(n)}else t["container-end"].push(n)}),{slides:e,slots:t}}function KJ(r,e,t){if(!t)return null;const n=h=>{let g=h;return h<0?g=e.length+h:g>=e.length&&(g=g-e.length),g},s=r.isHorizontal()?{[r.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:i,to:a}=t,o=r.params.loop?-e.length:0,c=r.params.loop?e.length*2:e.length,d=[];for(let h=o;h<c;h+=1)h>=i&&h<=a&&d.push(e[n(h)]);return d.map((h,g)=>Wt.cloneElement(h,{swiper:r,style:s,key:`slide-${g}`}))}function Ky(r,e){return typeof window>"u"?I.useEffect(r,e):I.useLayoutEffect(r,e)}const tR=I.createContext(null),JJ=I.createContext(null),l7=I.forwardRef(function(r,e){let{className:t,tag:n="div",wrapperTag:s="div",children:i,onSwiper:a,...o}=r===void 0?{}:r,c=!1;const[d,h]=I.useState("swiper"),[g,y]=I.useState(null),[b,v]=I.useState(!1),w=I.useRef(!1),E=I.useRef(null),C=I.useRef(null),N=I.useRef(null),A=I.useRef(null),k=I.useRef(null),M=I.useRef(null),O=I.useRef(null),P=I.useRef(null),{params:F,passedParams:H,rest:ee,events:G}=qJ(o),{slides:J,slots:V}=XJ(i),X=()=>{v(!b)};Object.assign(F.on,{_containerClasses(te,pe){h(pe)}});const K=()=>{Object.assign(F.on,G),c=!0;const te={...F};if(delete te.wrapperClass,C.current=new o_(te),C.current.virtual&&C.current.params.virtual.enabled){C.current.virtual.slides=J;const pe={cache:!1,slides:J,renderExternal:y,renderExternalUpdate:!1};Pf(C.current.params.virtual,pe),Pf(C.current.originalParams.virtual,pe)}};E.current||K(),C.current&&C.current.on("_beforeBreakpoint",X);const q=()=>{c||!G||!C.current||Object.keys(G).forEach(te=>{C.current.on(te,G[te])})},Z=()=>{!G||!C.current||Object.keys(G).forEach(te=>{C.current.off(te,G[te])})};I.useEffect(()=>()=>{C.current&&C.current.off("_beforeBreakpoint",X)}),I.useEffect(()=>{!w.current&&C.current&&(C.current.emitSlidesClasses(),w.current=!0)}),Ky(()=>{if(e&&(e.current=E.current),!!E.current)return C.current.destroyed&&K(),GJ({el:E.current,nextEl:k.current,prevEl:M.current,paginationEl:O.current,scrollbarEl:P.current,swiper:C.current},F),a&&a(C.current),()=>{C.current&&!C.current.destroyed&&C.current.destroy(!0,!1)}},[]),Ky(()=>{q();const te=WJ(H,N.current,J,A.current,pe=>pe.key);return N.current=H,A.current=J,te.length&&C.current&&!C.current.destroyed&&VJ({swiper:C.current,slides:J,passedParams:H,changedParams:te,nextEl:k.current,prevEl:M.current,scrollbarEl:P.current,paginationEl:O.current}),()=>{Z()}}),Ky(()=>{YJ(C.current)},[g]);function he(){return F.virtual?KJ(C.current,J,g):J.map((te,pe)=>Wt.cloneElement(te,{swiper:C.current,swiperSlideIndex:pe}))}return Wt.createElement(n,US({ref:E,className:i7(`${d}${t?` ${t}`:""}`)},ee),Wt.createElement(JJ.Provider,{value:C.current},V["container-start"],Wt.createElement(s,{className:$J(F.wrapperClass)},V["wrapper-start"],he(),V["wrapper-end"]),n7(F)&&Wt.createElement(Wt.Fragment,null,Wt.createElement("div",{ref:M,className:"swiper-button-prev"}),Wt.createElement("div",{ref:k,className:"swiper-button-next"})),s7(F)&&Wt.createElement("div",{ref:P,className:"swiper-scrollbar"}),r7(F)&&Wt.createElement("div",{ref:O,className:"swiper-pagination"}),V["container-end"]))});l7.displayName="Swiper";const c7=I.forwardRef(function(r,e){let{tag:t="div",children:n,className:s="",swiper:i,zoom:a,lazy:o,virtualIndex:c,swiperSlideIndex:d,...h}=r===void 0?{}:r;const g=I.useRef(null),[y,b]=I.useState("swiper-slide"),[v,w]=I.useState(!1);function E(k,M,O){M===g.current&&b(O)}Ky(()=>{if(typeof d<"u"&&(g.current.swiperSlideIndex=d),e&&(e.current=g.current),!(!g.current||!i)){if(i.destroyed){y!=="swiper-slide"&&b("swiper-slide");return}return i.on("_slideClass",E),()=>{i&&i.off("_slideClass",E)}}}),Ky(()=>{i&&g.current&&!i.destroyed&&b(i.getSlideClasses(g.current))},[i]);const C={isActive:y.indexOf("swiper-slide-active")>=0,isVisible:y.indexOf("swiper-slide-visible")>=0,isPrev:y.indexOf("swiper-slide-prev")>=0,isNext:y.indexOf("swiper-slide-next")>=0},N=()=>typeof n=="function"?n(C):n,A=()=>{w(!0)};return Wt.createElement(t,US({ref:g,className:i7(`${y}${s?` ${s}`:""}`),"data-swiper-slide-index":c,onLoad:A},h),a&&Wt.createElement(tR.Provider,{value:C},Wt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},N(),o&&!v&&Wt.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&Wt.createElement(tR.Provider,{value:C},N(),o&&!v&&Wt.createElement("div",{className:"swiper-lazy-preloader"})))});c7.displayName="SwiperSlide";function QJ(r,e,t,n){return r.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let i=ol(r.el,`.${n[s]}`)[0];i||(i=KB("div",n[s]),i.className=n[s],r.el.append(i)),t[s]=i,e[s]=i}}),t}function py(r){return r===void 0&&(r=""),`.${r.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function ZJ(r){let{swiper:e,extendParams:t,on:n,emit:s}=r;const i="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:N=>N,formatFractionTotal:N=>N,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;const c=N=>(Array.isArray(N)?N:[N]).filter(A=>!!A);function d(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function h(N,A){const{bulletActiveClass:k}=e.params.pagination;N&&(N=N[`${A==="prev"?"previous":"next"}ElementSibling`],N&&(N.classList.add(`${k}-${A}`),N=N[`${A==="prev"?"previous":"next"}ElementSibling`],N&&N.classList.add(`${k}-${A}-${A}`)))}function g(N){const A=N.target.closest(py(e.params.pagination.bulletClass));if(!A)return;N.preventDefault();const k=HS(A)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===k)return;const M=e.realIndex,O=e.getSlideIndexByData(k),P=e.getSlideIndexByData(e.realIndex),F=H=>{const ee=e.activeIndex;e.loopFix({direction:H,activeSlideIndex:O,slideTo:!1});const G=e.activeIndex;ee===G&&e.slideToLoop(M,0,!1,!0)};if(O>e.slides.length-e.loopedSlides)F(O>P?"next":"prev");else if(e.params.centeredSlides){const H=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(e.params.slidesPerView,10));O<Math.floor(H/2)&&F("prev")}e.slideToLoop(k)}else e.slideTo(k)}function y(){const N=e.rtl,A=e.params.pagination;if(d())return;let k=e.pagination.el;k=c(k);let M,O;const P=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,F=e.params.loop?Math.ceil(P/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(O=e.previousRealIndex||0,M=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(M=e.snapIndex,O=e.previousSnapIndex):(O=e.previousIndex||0,M=e.activeIndex||0),A.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const H=e.pagination.bullets;let ee,G,J;if(A.dynamicBullets&&(a=W3(H[0],e.isHorizontal()?"width":"height"),k.forEach(V=>{V.style[e.isHorizontal()?"width":"height"]=`${a*(A.dynamicMainBullets+4)}px`}),A.dynamicMainBullets>1&&O!==void 0&&(o+=M-(O||0),o>A.dynamicMainBullets-1?o=A.dynamicMainBullets-1:o<0&&(o=0)),ee=Math.max(M-o,0),G=ee+(Math.min(H.length,A.dynamicMainBullets)-1),J=(G+ee)/2),H.forEach(V=>{const X=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(K=>`${A.bulletActiveClass}${K}`)].map(K=>typeof K=="string"&&K.includes(" ")?K.split(" "):K).flat();V.classList.remove(...X)}),k.length>1)H.forEach(V=>{const X=HS(V);X===M?V.classList.add(...A.bulletActiveClass.split(" ")):e.isElement&&V.setAttribute("part","bullet"),A.dynamicBullets&&(X>=ee&&X<=G&&V.classList.add(...`${A.bulletActiveClass}-main`.split(" ")),X===ee&&h(V,"prev"),X===G&&h(V,"next"))});else{const V=H[M];if(V&&V.classList.add(...A.bulletActiveClass.split(" ")),e.isElement&&H.forEach((X,K)=>{X.setAttribute("part",K===M?"bullet-active":"bullet")}),A.dynamicBullets){const X=H[ee],K=H[G];for(let q=ee;q<=G;q+=1)H[q]&&H[q].classList.add(...`${A.bulletActiveClass}-main`.split(" "));h(X,"prev"),h(K,"next")}}if(A.dynamicBullets){const V=Math.min(H.length,A.dynamicMainBullets+4),X=(a*V-a)/2-J*a,K=N?"right":"left";H.forEach(q=>{q.style[e.isHorizontal()?K:"top"]=`${X}px`})}}k.forEach((H,ee)=>{if(A.type==="fraction"&&(H.querySelectorAll(py(A.currentClass)).forEach(G=>{G.textContent=A.formatFractionCurrent(M+1)}),H.querySelectorAll(py(A.totalClass)).forEach(G=>{G.textContent=A.formatFractionTotal(F)})),A.type==="progressbar"){let G;A.progressbarOpposite?G=e.isHorizontal()?"vertical":"horizontal":G=e.isHorizontal()?"horizontal":"vertical";const J=(M+1)/F;let V=1,X=1;G==="horizontal"?V=J:X=J,H.querySelectorAll(py(A.progressbarFillClass)).forEach(K=>{K.style.transform=`translate3d(0,0,0) scaleX(${V}) scaleY(${X})`,K.style.transitionDuration=`${e.params.speed}ms`})}A.type==="custom"&&A.renderCustom?(H.innerHTML=A.renderCustom(e,M+1,F),ee===0&&s("paginationRender",H)):(ee===0&&s("paginationRender",H),s("paginationUpdate",H)),e.params.watchOverflow&&e.enabled&&H.classList[e.isLocked?"add":"remove"](A.lockClass)})}function b(){const N=e.params.pagination;if(d())return;const A=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let k=e.pagination.el;k=c(k);let M="";if(N.type==="bullets"){let O=e.params.loop?Math.ceil(A/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&O>A&&(O=A);for(let P=0;P<O;P+=1)N.renderBullet?M+=N.renderBullet.call(e,P,N.bulletClass):M+=`<${N.bulletElement} ${e.isElement?'part="bullet"':""} class="${N.bulletClass}"></${N.bulletElement}>`}N.type==="fraction"&&(N.renderFraction?M=N.renderFraction.call(e,N.currentClass,N.totalClass):M=`<span class="${N.currentClass}"></span> / <span class="${N.totalClass}"></span>`),N.type==="progressbar"&&(N.renderProgressbar?M=N.renderProgressbar.call(e,N.progressbarFillClass):M=`<span class="${N.progressbarFillClass}"></span>`),e.pagination.bullets=[],k.forEach(O=>{N.type!=="custom"&&(O.innerHTML=M||""),N.type==="bullets"&&e.pagination.bullets.push(...O.querySelectorAll(py(N.bulletClass)))}),N.type!=="custom"&&s("paginationRender",k[0])}function v(){e.params.pagination=QJ(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const N=e.params.pagination;if(!N.el)return;let A;typeof N.el=="string"&&e.isElement&&(A=e.el.querySelector(N.el)),!A&&typeof N.el=="string"&&(A=[...document.querySelectorAll(N.el)]),A||(A=N.el),!(!A||A.length===0)&&(e.params.uniqueNavElements&&typeof N.el=="string"&&Array.isArray(A)&&A.length>1&&(A=[...e.el.querySelectorAll(N.el)],A.length>1&&(A=A.filter(k=>JB(k,".swiper")[0]===e.el)[0])),Array.isArray(A)&&A.length===1&&(A=A[0]),Object.assign(e.pagination,{el:A}),A=c(A),A.forEach(k=>{N.type==="bullets"&&N.clickable&&k.classList.add(...(N.clickableClass||"").split(" ")),k.classList.add(N.modifierClass+N.type),k.classList.add(e.isHorizontal()?N.horizontalClass:N.verticalClass),N.type==="bullets"&&N.dynamicBullets&&(k.classList.add(`${N.modifierClass}${N.type}-dynamic`),o=0,N.dynamicMainBullets<1&&(N.dynamicMainBullets=1)),N.type==="progressbar"&&N.progressbarOpposite&&k.classList.add(N.progressbarOppositeClass),N.clickable&&k.addEventListener("click",g),e.enabled||k.classList.add(N.lockClass)}))}function w(){const N=e.params.pagination;if(d())return;let A=e.pagination.el;A&&(A=c(A),A.forEach(k=>{k.classList.remove(N.hiddenClass),k.classList.remove(N.modifierClass+N.type),k.classList.remove(e.isHorizontal()?N.horizontalClass:N.verticalClass),N.clickable&&(k.classList.remove(...(N.clickableClass||"").split(" ")),k.removeEventListener("click",g))})),e.pagination.bullets&&e.pagination.bullets.forEach(k=>k.classList.remove(...N.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const N=e.params.pagination;let{el:A}=e.pagination;A=c(A),A.forEach(k=>{k.classList.remove(N.horizontalClass,N.verticalClass),k.classList.add(e.isHorizontal()?N.horizontalClass:N.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?C():(v(),b(),y())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&y()}),n("snapIndexChange",()=>{y()}),n("snapGridLengthChange",()=>{b(),y()}),n("destroy",()=>{w()}),n("enable disable",()=>{let{el:N}=e.pagination;N&&(N=c(N),N.forEach(A=>A.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{y()}),n("click",(N,A)=>{const k=A.target,M=c(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&M&&M.length>0&&!k.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&k===e.navigation.nextEl||e.navigation.prevEl&&k===e.navigation.prevEl))return;const O=M[0].classList.contains(e.params.pagination.hiddenClass);s(O===!0?"paginationShow":"paginationHide"),M.forEach(P=>P.classList.toggle(e.params.pagination.hiddenClass))}});const E=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:N}=e.pagination;N&&(N=c(N),N.forEach(A=>A.classList.remove(e.params.pagination.paginationDisabledClass))),v(),b(),y()},C=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:N}=e.pagination;N&&(N=c(N),N.forEach(A=>A.classList.add(e.params.pagination.paginationDisabledClass))),w()};Object.assign(e.pagination,{enable:E,disable:C,render:b,update:y,init:v,destroy:w})}let p2=null;function eQ({setActiveIndex:r,activeIndex:e,setDoctorsList:t}){const n=[{name:"Dermatology",image:"/images/determolgy%201.png"},{name:"internal medicine",image:"/images/internal%20medi%201.png"},{name:"Gynecology",image:"/images/gynecology%201.png"},{name:"Dentist",image:"/images/Dental%201.png"},{name:"Neurology",image:"/images/Neurology%201.png"},{name:"Otolaryngology",image:"/images/ota%201.png"}];return f.jsx(l7,{className:"w-[60vw] h-[180px]  !pt-[20px] ",modules:[ZJ],spaceBetween:20,pagination:{clickable:!0},centeredSlides:!1,breakpoints:{640:{slidesPerView:2},768:{slidesPerView:3},1050:{slidesPerView:4},1450:{slidesPerView:5},1600:{slidesPerView:6}},onClick:async s=>{var i,a;if(s.clickedIndex===e)r(null);else{r(s.clickedIndex);try{p2===null&&(p2=await Ue.GetDoctorsList());const o=(a=(i=n[s.clickedIndex])==null?void 0:i.name)==null?void 0:a.toLowerCase().trim(),c=p2.filter(d=>{var h;return((h=d.specialty)==null?void 0:h.toLowerCase().trim())===o});t(c)}catch(o){console.error("Error fetching doctor list:",o)}}},children:n.map((s,i)=>f.jsx(c7,{children:f.jsxs("div",{className:` rounded-2xl w-[170px] h-[114px] flex flex-col justify-center items-center ${e===i?"border-2 border-blue-500 bg-[#322725]":"bg-[#F5F5F5]"}`,children:[f.jsx("img",{className:"w-auto h-auto",src:s.image}),f.jsx("p",{className:"font-[Montserrat Alternates] font-medium text-[#249BF1]",children:s.name})]})},i))})}function tQ(){const[r,e]=I.useState({text:"",location:""}),t=n=>{};return f.jsxs("div",{className:"flex flex-col items-start justify-start w-full h-full",children:[f.jsx("p",{className:`2xl:pl-[14vw] pl-[5vw]\r
            text-3xl 2xl:text-4xl font-normal tracking-tight  OutlineText text-[#3C63C7] pt-10`,children:"Find the right doctor"}),f.jsx("p",{className:`2xl:pl-[14vw] pl-[5vw]\r
            text-3xl 2xl:text-4xl font-normal tracking-tight OutlineText  text-[#3C63C7]`,children:"Right at your fingertips"}),f.jsx("p",{className:`2xl:pl-[14vw] pl-[5vw]\r
             w-[400px] lg:w-full\r
             text-lg lg:text-xl font-normal  pt-12  text-[#9C9C9C]`,children:"We care gives you the  tools and information you need to"}),f.jsxs("div",{className:`ml-[5vw] 2xl:ml-[14vw]\r
            flex  items-center mt-10`,children:[f.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"30",cy:"30",r:"30",fill:"#C4006A"}),f.jsx("path",{d:"M42.6667 45L32.1667 34.5C31.3333 35.1667 30.375 35.6944 29.2917 36.0833C28.2083 36.4722 27.0556 36.6667 25.8333 36.6667C22.8056 36.6667 20.2431 35.6181 18.1458 33.5208C16.0486 31.4236 15 28.8611 15 25.8333C15 22.8056 16.0486 20.2431 18.1458 18.1458C20.2431 16.0486 22.8056 15 25.8333 15C28.8611 15 31.4236 16.0486 33.5208 18.1458C35.6181 20.2431 36.6667 22.8056 36.6667 25.8333C36.6667 27.0556 36.4722 28.2083 36.0833 29.2917C35.6944 30.375 35.1667 31.3333 34.5 32.1667L45 42.6667L42.6667 45ZM25.8333 33.3333C27.9167 33.3333 29.6875 32.6042 31.1458 31.1458C32.6042 29.6875 33.3333 27.9167 33.3333 25.8333C33.3333 23.75 32.6042 21.9792 31.1458 20.5208C29.6875 19.0625 27.9167 18.3333 25.8333 18.3333C23.75 18.3333 21.9792 19.0625 20.5208 20.5208C19.0625 21.9792 18.3333 23.75 18.3333 25.8333C18.3333 27.9167 19.0625 29.6875 20.5208 31.1458C21.9792 32.6042 23.75 33.3333 25.8333 33.3333Z",fill:"#F3BAFB"})]}),f.jsx("p",{className:"ml-[20px] text-lg md:text-xl text-[#3C63C7]",children:"Search nearest Clinic"})]}),f.jsxs("div",{className:` ml-[calc(5vw+30px)] 2xl:ml-[calc(14vw+30px)]\r
            flex mt-2 items-start`,children:[f.jsx("svg",{width:"2",height:"100",viewBox:"0 0 2 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("rect",{width:"2",height:"100",fill:"#D9D9D9"})}),f.jsx("p",{className:"ml-[50px] xl:w-[500px] w-[300px] text-[#9C9C9C] text-lg md:text-xl ",children:" Find doctors and clinics based on the  factors that matter most to you."})]}),f.jsxs("div",{className:`ml-[5vw] 2xl:ml-[14vw]\r
            flex items-center mt-2`,children:[f.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"30",cy:"30",r:"30",fill:"#EFE8AC"}),f.jsx("path",{d:"M46 48V44C46 41.8783 45.1571 39.8434 43.6569 38.3431C42.1566 36.8429 40.1217 36 38 36H22C19.8783 36 17.8434 36.8429 16.3431 38.3431C14.8429 39.8434 14 41.8783 14 44V48M38 20C38 24.4183 34.4183 28 30 28C25.5817 28 22 24.4183 22 20C22 15.5817 25.5817 12 30 12C34.4183 12 38 15.5817 38 20Z",stroke:"#8A226F",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),f.jsx("p",{className:"ml-[20px] text-lg md:text-xl text-[#3C63C7]",children:"Appointment with the best doctor"})]}),f.jsxs("div",{className:`ml-[calc(5vw+30px)] 2xl:ml-[calc(14vw+30px)]\r
            flex mt-2 items-start`,children:[f.jsx("svg",{width:"2",height:"100",viewBox:"0 0 2 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("rect",{width:"2",height:"100",fill:"#D9D9D9"})}),f.jsx("p",{className:"ml-[50px] xl:w-[500px] w-[300px] text-[#9C9C9C] text-lg md:text-xl ",children:" Convenient schedule your appointment by phone or online when available."})]}),f.jsxs("div",{className:`ml-[5vw] 2xl:ml-[14vw]\r
            flex items-center mt-2`,children:[f.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"30",cy:"30",r:"30",fill:"#DBFFE7"}),f.jsx("path",{d:"M45.5833 38.2V43.2C45.5853 43.6641 45.4878 44.1236 45.2972 44.5489C45.1066 44.9742 44.827 45.3559 44.4765 45.6697C44.1259 45.9835 43.712 46.2224 43.2613 46.3711C42.8106 46.5198 42.333 46.5751 41.8592 46.5333C36.6023 45.976 31.5528 44.2235 27.1162 41.4166C22.9886 38.8577 19.4891 35.4436 16.8662 31.4166C13.9791 27.0686 12.1824 22.1183 11.6217 16.9666C11.579 16.5057 11.6351 16.0412 11.7865 15.6027C11.9379 15.1641 12.1813 14.7611 12.501 14.4193C12.8208 14.0775 13.2101 13.8045 13.644 13.6175C14.0779 13.4305 14.5469 13.3337 15.0212 13.3333H20.1462C20.9753 13.3253 21.779 13.6118 22.4077 14.1392C23.0363 14.6666 23.4469 15.399 23.5629 16.2C23.7792 17.8001 24.1804 19.3712 24.7587 20.8833C24.9886 21.4798 25.0383 22.1281 24.9021 22.7514C24.7658 23.3747 24.4493 23.9468 23.99 24.4L21.8204 26.5166C24.2523 30.6892 27.7935 34.144 32.0704 36.5166L34.24 34.4C34.7045 33.9519 35.2909 33.643 35.9297 33.5101C36.5686 33.3772 37.2331 33.4257 37.8446 33.65C39.3945 34.2142 41.0049 34.6056 42.645 34.8166C43.4748 34.9308 44.2327 35.3386 44.7745 35.9624C45.3162 36.5863 45.6041 37.3826 45.5833 38.2Z",stroke:"#00C437",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),f.jsx("p",{className:"ml-[20px] text-lg md:text-xl text-[#3C63C7]",children:"Get consultant"})]}),f.jsx("div",{className:`ml-[calc(5vw+30px)] 2xl:ml-[calc(14vw+30px)]\r
            flex mt-2 items-start`,children:f.jsx("p",{className:"ml-[50px] xl:w-[500px] w-[300px] text-[#9C9C9C] text-lg md:text-xl ",children:" Learn what you need to know and which questions to ask your doctor."})}),f.jsxs("div",{className:"absolute 2xl:right-[15vw] right-[3vw]  flex flex-col justify-end items-end ",children:[f.jsx("img",{src:"/images/doctor%201.png",className:"lg:w-full lg:h-full w-[70%] "}),f.jsxs("div",{className:"w-[360px] h-[223px] bg-[#F0F0F0] rounded-2xl ml-[30px flex flex-col ",children:[f.jsx("p",{className:"font-Montserrat-Alternates text-[#6D6D6D] text-xl flex justify-center pt-[30px]",children:"find the best doctor you need"}),f.jsx("div",{className:"pt-[16px] pl-[20px]",children:f.jsx(MB,{text:"Search Doctor , Clinic",Input:r.text,change:t,width:"320px"})}),f.jsx("div",{className:"pt-[16px] pl-[20px]",children:f.jsx(_B,{location:"Set your location",width:"320px"})})]})]})]})}function nQ({isFilled:r}){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`h-5 w-5 ${r?"text-yellow-700":"text-gray-400"}`,children:f.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z",clipRule:"evenodd"})})}function rQ({rating:r}){return f.jsx("div",{className:"flex",children:Array.from({length:5},(t,n)=>f.jsx(nQ,{isFilled:n<r},n))})}function sQ({setIsPopupOpen:r,setSelectedDoctor:e,Doctors:t}){const n=async(s,i)=>{await Ue.GetReviewsByDoctorId(s.doctorId),e({...s,index:i}),r(!0)};return t.map((s,i)=>f.jsx("div",{className:"w-[543px] h-[182px] bg-[#F5FFFD] border-[#EDEDED] border-1 rounded-xl",onClick:()=>n(s,i),children:f.jsxs("div",{className:"grid grid-cols-[180px_363px] ",children:[f.jsxs("div",{className:"",children:[f.jsx("img",{src:s.gender==="male"?AB[i]:NB[i],alt:"Doctor",className:"w-[115px] h-[121px] rounded-full ml-3 mt-2"}),f.jsxs("div",{className:"flex flex-row mt-1 ml-3",children:[f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 22C11.7667 22 11.5667 21.9333 11.4 21.8C11.2333 21.6667 11.1083 21.4917 11.025 21.275C10.7083 20.3417 10.3083 19.4667 9.825 18.65C9.35833 17.8333 8.7 16.875 7.85 15.775C7 14.675 6.30833 13.625 5.775 12.625C5.25833 11.625 5 10.4167 5 9C5 7.05 5.675 5.4 7.025 4.05C8.39167 2.68333 10.05 2 12 2C13.95 2 15.6 2.68333 16.95 4.05C18.3167 5.4 19 7.05 19 9C19 10.5167 18.7083 11.7833 18.125 12.8C17.5583 13.8 16.9 14.7917 16.15 15.775C15.25 16.975 14.5667 17.975 14.1 18.775C13.65 19.5583 13.275 20.3917 12.975 21.275C12.8917 21.5083 12.7583 21.6917 12.575 21.825C12.4083 21.9417 12.2167 22 12 22ZM12 11.5C12.7 11.5 13.2917 11.2583 13.775 10.775C14.2583 10.2917 14.5 9.7 14.5 9C14.5 8.3 14.2583 7.70833 13.775 7.225C13.2917 6.74167 12.7 6.5 12 6.5C11.3 6.5 10.7083 6.74167 10.225 7.225C9.74167 7.70833 9.5 8.3 9.5 9C9.5 9.7 9.74167 10.2917 10.225 10.775C10.7083 11.2583 11.3 11.5 12 11.5Z",fill:"#79747E"})}),f.jsx("p",{className:"ml-1 text-sm ",children:s.city})]}),f.jsx("div",{className:"flex flex-row ml-10 h-[13.5px] overflow-hidden",children:f.jsx("p",{className:"text-sm leading-3 ",children:s.address})})]}),f.jsxs("div",{className:"",children:[f.jsxs("div",{className:"flex flex-row justify-between mr-10 mt-4",children:[f.jsx("p",{className:"font-Montserrat-Alternates",children:s.fullName.length>19?s.username:s.fullName}),f.jsxs("div",{className:"flex flex-row",children:[f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M14 13C13.1667 13 12.4583 12.7083 11.875 12.125C11.2917 11.5417 11 10.8333 11 10C11 9.16667 11.2917 8.45833 11.875 7.875C12.4583 7.29167 13.1667 7 14 7C14.8333 7 15.5417 7.29167 16.125 7.875C16.7083 8.45833 17 9.16667 17 10C17 10.8333 16.7083 11.5417 16.125 12.125C15.5417 12.7083 14.8333 13 14 13ZM7 16C6.45 16 5.97917 15.8042 5.5875 15.4125C5.19583 15.0208 5 14.55 5 14V6C5 5.45 5.19583 4.97917 5.5875 4.5875C5.97917 4.19583 6.45 4 7 4H21C21.55 4 22.0208 4.19583 22.4125 4.5875C22.8042 4.97917 23 5.45 23 6V14C23 14.55 22.8042 15.0208 22.4125 15.4125C22.0208 15.8042 21.55 16 21 16H7ZM9 14H19C19 13.45 19.1958 12.9792 19.5875 12.5875C19.9792 12.1958 20.45 12 21 12V8C20.45 8 19.9792 7.80417 19.5875 7.4125C19.1958 7.02083 19 6.55 19 6H9C9 6.55 8.80417 7.02083 8.4125 7.4125C8.02083 7.80417 7.55 8 7 8V12C7.55 12 8.02083 12.1958 8.4125 12.5875C8.80417 12.9792 9 13.45 9 14ZM20 20H3C2.45 20 1.97917 19.8042 1.5875 19.4125C1.19583 19.0208 1 18.55 1 18V7H3V18H20V20Z",fill:"#79A85F"})}),f.jsxs("p",{className:"ml-1 text-sm leading-5",children:[s.fees," EGP"]})]})]}),f.jsxs("div",{className:"flex flex-row mt-2",children:[f.jsx(rQ,{rating:s.rating}),f.jsxs("p",{className:"ml-2 text-sm leading-5",children:[s.rating," Stars"]})]}),f.jsx("div",{className:"flex flex-row mt-2 font-[Poppins] font-medium text-[13px]",children:s.specialty}),f.jsx("div",{className:"flex flex-row  font[Poppins] text-[13px]",children:s.specialityDetails}),f.jsxs("div",{className:"flex flex-row mt-5 justify-between bg-[rgb(0,156,199,42%)] h-[30px] ml-15 rounded-sm text-[10px] font-medium font-[Poppins] ]",children:[f.jsx("div",{className:"ml-3 justify-center items-center flex",children:"Availability"}),f.jsx("div",{className:s.workingDays.includes("SUN")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"SUN"}),f.jsx("div",{className:s.workingDays.includes("MON")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"MON"}),f.jsx("div",{className:s.workingDays.includes("TUE")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"TUS"}),f.jsx("div",{className:s.workingDays.includes("WED")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"WED"}),f.jsx("div",{className:s.workingDays.includes("THU")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"THU"}),f.jsx("div",{className:s.workingDays.includes("FRI")?"text-black justify-center items-center flex":"text-white justify-center items-center flex",children:"FRI"}),f.jsx("div",{className:s.workingDays.includes("SAT")?"text-black mr-3 justify-center items-center flex":"text-white mr-3 justify-center items-center flex",children:"SAT"})]})]})]})},s.doctorId))}var nR,iQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},u7={exports:{}};nR=function(){return(()=>{var r={720:(n,s,i)=>{i.r(s),i.d(s,{Scene:()=>OE,Tweenable:()=>gr,interpolate:()=>Vd,processTweens:()=>oe,setBezierFunction:()=>Bb,shouldScheduleUpdate:()=>wt,tween:()=>hl,unsetBezierFunction:()=>RE});var a={};i.r(a),i.d(a,{bounce:()=>me,bouncePast:()=>we,easeFrom:()=>je,easeFromTo:()=>Ne,easeInBack:()=>q,easeInCirc:()=>J,easeInCubic:()=>b,easeInExpo:()=>H,easeInOutBack:()=>he,easeInOutCirc:()=>X,easeInOutCubic:()=>w,easeInOutExpo:()=>G,easeInOutQuad:()=>y,easeInOutQuart:()=>N,easeInOutQuint:()=>M,easeInOutSine:()=>F,easeInQuad:()=>h,easeInQuart:()=>E,easeInQuint:()=>A,easeInSine:()=>O,easeOutBack:()=>Z,easeOutBounce:()=>K,easeOutCirc:()=>V,easeOutCubic:()=>v,easeOutExpo:()=>ee,easeOutQuad:()=>g,easeOutQuart:()=>C,easeOutQuint:()=>k,easeOutSine:()=>P,easeTo:()=>Me,elastic:()=>te,linear:()=>d,swingFrom:()=>W,swingFromTo:()=>pe,swingTo:()=>ne});var o={};i.r(o),i.d(o,{afterTween:()=>DE,beforeTween:()=>jE,doesApply:()=>zc,tweenCreated:()=>f0});/*!
	 * All equations are adapted from Thomas Fuchs'
	 * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).
	 *
	 * Based on Easing Equations (c) 2003 [Robert
	 * Penner](http://www.robertpenner.com/), all rights reserved. This work is
	 * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).
	 *//*!
	 *  TERMS OF USE - EASING EQUATIONS
	 *  Open source under the BSD License.
	 *  Easing Equations (c) 2003 Robert Penner, all rights reserved.
	 */var c,d=function($){return $},h=function($){return Math.pow($,2)},g=function($){return-(Math.pow($-1,2)-1)},y=function($){return($/=.5)<1?.5*Math.pow($,2):-.5*(($-=2)*$-2)},b=function($){return Math.pow($,3)},v=function($){return Math.pow($-1,3)+1},w=function($){return($/=.5)<1?.5*Math.pow($,3):.5*(Math.pow($-2,3)+2)},E=function($){return Math.pow($,4)},C=function($){return-(Math.pow($-1,4)-1)},N=function($){return($/=.5)<1?.5*Math.pow($,4):-.5*(($-=2)*Math.pow($,3)-2)},A=function($){return Math.pow($,5)},k=function($){return Math.pow($-1,5)+1},M=function($){return($/=.5)<1?.5*Math.pow($,5):.5*(Math.pow($-2,5)+2)},O=function($){return 1-Math.cos($*(Math.PI/2))},P=function($){return Math.sin($*(Math.PI/2))},F=function($){return-.5*(Math.cos(Math.PI*$)-1)},H=function($){return $===0?0:Math.pow(2,10*($-1))},ee=function($){return $===1?1:1-Math.pow(2,-10*$)},G=function($){return $===0?0:$===1?1:($/=.5)<1?.5*Math.pow(2,10*($-1)):.5*(2-Math.pow(2,-10*--$))},J=function($){return-(Math.sqrt(1-$*$)-1)},V=function($){return Math.sqrt(1-Math.pow($-1,2))},X=function($){return($/=.5)<1?-.5*(Math.sqrt(1-$*$)-1):.5*(Math.sqrt(1-($-=2)*$)+1)},K=function($){return $<1/2.75?7.5625*$*$:$<2/2.75?7.5625*($-=1.5/2.75)*$+.75:$<2.5/2.75?7.5625*($-=2.25/2.75)*$+.9375:7.5625*($-=2.625/2.75)*$+.984375},q=function($){var ae=1.70158;return $*$*((ae+1)*$-ae)},Z=function($){var ae=1.70158;return($-=1)*$*((ae+1)*$+ae)+1},he=function($){var ae=1.70158;return($/=.5)<1?$*$*((1+(ae*=1.525))*$-ae)*.5:.5*(($-=2)*$*((1+(ae*=1.525))*$+ae)+2)},te=function($){return-1*Math.pow(4,-8*$)*Math.sin((6*$-1)*(2*Math.PI)/2)+1},pe=function($){var ae=1.70158;return($/=.5)<1?$*$*((1+(ae*=1.525))*$-ae)*.5:.5*(($-=2)*$*((1+(ae*=1.525))*$+ae)+2)},W=function($){var ae=1.70158;return $*$*((ae+1)*$-ae)},ne=function($){var ae=1.70158;return($-=1)*$*((ae+1)*$+ae)+1},me=function($){return $<1/2.75?7.5625*$*$:$<2/2.75?7.5625*($-=1.5/2.75)*$+.75:$<2.5/2.75?7.5625*($-=2.25/2.75)*$+.9375:7.5625*($-=2.625/2.75)*$+.984375},we=function($){return $<1/2.75?7.5625*$*$:$<2/2.75?2-(7.5625*($-=1.5/2.75)*$+.75):$<2.5/2.75?2-(7.5625*($-=2.25/2.75)*$+.9375):2-(7.5625*($-=2.625/2.75)*$+.984375)},Ne=function($){return($/=.5)<1?.5*Math.pow($,4):-.5*(($-=2)*Math.pow($,3)-2)},je=function($){return Math.pow($,4)},Me=function($){return Math.pow($,.25)};function He($,ae){if(!($ instanceof ae))throw new TypeError("Cannot call a class as a function")}function Ye($,ae){for(var Se=0;Se<ae.length;Se++){var de=ae[Se];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty($,de.key,de)}}function Qe($){return Qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},Qe($)}function Ht($,ae){var Se=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);ae&&(de=de.filter((function(_e){return Object.getOwnPropertyDescriptor($,_e).enumerable}))),Se.push.apply(Se,de)}return Se}function En($){for(var ae=1;ae<arguments.length;ae++){var Se=arguments[ae]!=null?arguments[ae]:{};ae%2?Ht(Object(Se),!0).forEach((function(de){Ge($,de,Se[de])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Se)):Ht(Object(Se)).forEach((function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Se,de))}))}return $}function Ge($,ae,Se){return ae in $?Object.defineProperty($,ae,{value:Se,enumerable:!0,configurable:!0,writable:!0}):$[ae]=Se,$}var Ze,Mt,Te,Be="linear",et=typeof window<"u"?window:iQ,mn="afterTween",ar="afterTweenEnd",gn="beforeTween",an="tweenCreated",gi="function",Tn="string",Nr=et.requestAnimationFrame||et.webkitRequestAnimationFrame||et.oRequestAnimationFrame||et.msRequestAnimationFrame||et.mozCancelRequestAnimationFrame&&et.mozRequestAnimationFrame||setTimeout,Ks=function(){},z=null,_=null,D=En({},a),Y=function($,ae,Se,de,_e,Xe,st){var gt,Tt,An,yt=$<Xe?0:($-Xe)/_e,Mn=!1;for(var Xn in st&&st.call&&(Mn=!0,gt=st(yt)),ae)Mn||(gt=((Tt=st[Xn]).call?Tt:D[Tt])(yt)),An=Se[Xn],ae[Xn]=An+(de[Xn]-An)*gt;return ae},se=function($,ae){var Se=$._timestamp,de=$._currentState,_e=$._delay;if(!(ae<Se+_e)){var Xe=$._duration,st=$._targetState,gt=Se+_e+Xe,Tt=ae>gt?gt:ae;$._hasEnded=Tt>=gt;var An=Xe-(gt-Tt),yt=$._filters.length>0;if($._hasEnded)return $._render(st,$._data,An),$.stop(!0);yt&&$._applyFilter(gn),Tt<Se+_e?Se=Xe=Tt=1:Se+=_e,Y(Tt,de,$._originalState,st,Xe,Se,$._easing),yt&&$._applyFilter(mn),$._render(de,$._data,An)}},oe=function(){for(var $,ae=gr.now(),Se=z;Se;)$=Se._next,se(Se,ae),Se=$},xe=Date.now||function(){return+new Date},$e=!1,wt=function($){$&&$e||($e=$,$&&lt())},lt=function $(){Ze=xe(),$e&&Nr.call(et,$,16.666666666666668),oe()},Gt=function($){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Be,Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},de=Qe(ae);if(D[ae])return D[ae];if(de===Tn||de===gi)for(var _e in $)Se[_e]=ae;else for(var Xe in $)Se[Xe]=ae[Xe]||Be;return Se},_t=function($){$===z?(z=$._next)?z._previous=null:_=null:$===_?(_=$._previous)?_._next=null:z=null:(Mt=$._previous,Te=$._next,Mt._next=Te,Te._previous=Mt),$._previous=$._next=null},ap=typeof Promise=="function"?Promise:null;c=Symbol.toStringTag;var gr=(function(){function $(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;He(this,$),Ge(this,c,"Promise"),this._config={},this._data={},this._delay=0,this._filters=[],this._next=null,this._previous=null,this._timestamp=null,this._hasEnded=!1,this._resolve=null,this._reject=null,this._currentState=de||{},this._originalState={},this._targetState={},this._start=Ks,this._render=Ks,this._promiseCtor=ap,_e&&this.setConfig(_e)}var ae,Se;return ae=$,Se=[{key:"_applyFilter",value:function(de){for(var _e=this._filters.length;_e>0;_e--){var Xe=this._filters[_e-_e][de];Xe&&Xe(this)}}},{key:"tween",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return this._isPlaying&&this.stop(),!de&&this._config||this.setConfig(de),this._pausedAtTime=null,this._timestamp=$.now(),this._start(this.get(),this._data),this._delay&&this._render(this._currentState,this._data,0),this._resume(this._timestamp)}},{key:"setConfig",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=this._config;for(var Xe in de)_e[Xe]=de[Xe];var st=_e.promise,gt=st===void 0?this._promiseCtor:st,Tt=_e.start,An=Tt===void 0?Ks:Tt,yt=_e.finish,Mn=_e.render,Xn=Mn===void 0?this._config.step||Ks:Mn,$r=_e.step,xi=$r===void 0?Ks:$r;this._data=_e.data||_e.attachment||this._data,this._isPlaying=!1,this._pausedAtTime=null,this._scheduleId=null,this._delay=de.delay||0,this._start=An,this._render=Xn||xi,this._duration=_e.duration||500,this._promiseCtor=gt,yt&&(this._resolve=yt);var za=de.from,Ha=de.to,It=Ha===void 0?{}:Ha,Uc=this._currentState,Ua=this._originalState,vo=this._targetState;for(var yr in za)Uc[yr]=za[yr];var ra=!1;for(var $a in Uc){var sa=Uc[$a];ra||Qe(sa)!==Tn||(ra=!0),Ua[$a]=sa,vo[$a]=It.hasOwnProperty($a)?It[$a]:sa}if(this._easing=Gt(this._currentState,_e.easing,this._easing),this._filters.length=0,ra){for(var ia in $.filters)$.filters[ia].doesApply(this)&&this._filters.push($.filters[ia]);this._applyFilter(an)}return this}},{key:"then",value:function(de,_e){var Xe=this;return this._promise=new this._promiseCtor((function(st,gt){Xe._resolve=st,Xe._reject=gt})),this._promise.then(de,_e)}},{key:"catch",value:function(de){return this.then().catch(de)}},{key:"finally",value:function(de){return this.then().finally(de)}},{key:"get",value:function(){return En({},this._currentState)}},{key:"set",value:function(de){this._currentState=de}},{key:"pause",value:function(){if(this._isPlaying)return this._pausedAtTime=$.now(),this._isPlaying=!1,_t(this),this}},{key:"resume",value:function(){return this._resume()}},{key:"_resume",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.now();return this._timestamp===null?this.tween():this._isPlaying?this._promise:(this._pausedAtTime&&(this._timestamp+=de-this._pausedAtTime,this._pausedAtTime=null),this._isPlaying=!0,z===null?(z=this,_=this):(this._previous=_,_._next=this,_=this),this)}},{key:"seek",value:function(de){de=Math.max(de,0);var _e=$.now();return this._timestamp+de===0||(this._timestamp=_e-de,se(this,_e)),this}},{key:"stop",value:function(){var de=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this._isPlaying)return this;this._isPlaying=!1,_t(this);var _e=this._filters.length>0;return de&&(_e&&this._applyFilter(gn),Y(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),_e&&(this._applyFilter(mn),this._applyFilter(ar))),this._resolve&&this._resolve({data:this._data,state:this._currentState,tweenable:this}),this._resolve=null,this._reject=null,this}},{key:"cancel",value:function(){var de=arguments.length>0&&arguments[0]!==void 0&&arguments[0],_e=this._currentState,Xe=this._data,st=this._isPlaying;return st?(this._reject&&this._reject({data:Xe,state:_e,tweenable:this}),this._resolve=null,this._reject=null,this.stop(de)):this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"hasEnded",value:function(){return this._hasEnded}},{key:"setScheduleFunction",value:function(de){$.setScheduleFunction(de)}},{key:"data",value:function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return de&&(this._data=En({},de)),this._data}},{key:"dispose",value:function(){for(var de in this)delete this[de]}}],Se&&Ye(ae.prototype,Se),$})();function hl(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=new gr;return ae.tween($),ae.tweenable=ae,ae}Ge(gr,"now",(function(){return Ze})),Ge(gr,"setScheduleFunction",(function($){return Nr=$})),Ge(gr,"filters",{}),Ge(gr,"formulas",D),wt(!0);var yi,Ce,rt=/(\d|-|\.)/,Pt=/([^\-0-9.]+)/g,Rs=/[0-9.-]+/g,Fr=(yi=Rs.source,Ce=/,\s*/.source,new RegExp("rgba?\\(".concat(yi).concat(Ce).concat(yi).concat(Ce).concat(yi,"(").concat(Ce).concat(yi,")?\\)"),"g")),Ls=/^.*\(/,na=/#([0-9]|[a-f]){3,6}/gi,Ln="VAL",Js=function($,ae){return $.map((function(Se,de){return"_".concat(ae,"_").concat(de)}))};function Fc($){return parseInt($,16)}var Ob=function($){return"rgb(".concat((ae=$,(ae=ae.replace(/#/,"")).length===3&&(ae=(ae=ae.split(""))[0]+ae[0]+ae[1]+ae[1]+ae[2]+ae[2]),[Fc(ae.substr(0,2)),Fc(ae.substr(2,2)),Fc(ae.substr(4,2))]).join(","),")");var ae},op=function($,ae,Se){var de=ae.match($),_e=ae.replace($,Ln);return de&&de.forEach((function(Xe){return _e=_e.replace(Ln,Se(Xe))})),_e},d0=function($){for(var ae in $){var Se=$[ae];typeof Se=="string"&&Se.match(na)&&($[ae]=op(na,Se,Ob))}},Rb=function($){var ae=$.match(Rs),Se=ae.slice(0,3).map(Math.floor),de=$.match(Ls)[0];if(ae.length===3)return"".concat(de).concat(Se.join(","),")");if(ae.length===4)return"".concat(de).concat(Se.join(","),",").concat(ae[3],")");throw new Error("Invalid rgbChunk: ".concat($))},h0=function($){return $.match(Rs)},xo=function($,ae){var Se={};return ae.forEach((function(de){Se[de]=$[de],delete $[de]})),Se},kr=function($,ae){return ae.map((function(Se){return $[Se]}))},vs=function($,ae){return ae.forEach((function(Se){return $=$.replace(Ln,+Se.toFixed(4))})),$},zc=function($){for(var ae in $._currentState)if(typeof $._currentState[ae]=="string")return!0;return!1};function f0($){var ae=$._currentState;[ae,$._originalState,$._targetState].forEach(d0),$._tokenData=(function(Se){var de,_e,Xe={};for(var st in Se){var gt=Se[st];typeof gt=="string"&&(Xe[st]={formatString:(de=gt,_e=void 0,_e=de.match(Pt),_e?(_e.length===1||de.charAt(0).match(rt))&&_e.unshift(""):_e=["",""],_e.join(Ln)),chunkNames:Js(h0(gt),st)})}return Xe})(ae)}function jE($){var ae=$._currentState,Se=$._originalState,de=$._targetState,_e=$._easing,Xe=$._tokenData;(function(st,gt){var Tt=function(yt){var Mn=gt[yt].chunkNames,Xn=st[yt];if(typeof Xn=="string"){var $r=Xn.split(" "),xi=$r[$r.length-1];Mn.forEach((function(za,Ha){return st[za]=$r[Ha]||xi}))}else Mn.forEach((function(za){return st[za]=Xn}));delete st[yt]};for(var An in gt)Tt(An)})(_e,Xe),[ae,Se,de].forEach((function(st){return(function(gt,Tt){var An=function(Mn){h0(gt[Mn]).forEach((function(Xn,$r){return gt[Tt[Mn].chunkNames[$r]]=+Xn})),delete gt[Mn]};for(var yt in Tt)An(yt)})(st,Xe)}))}function DE($){var ae=$._currentState,Se=$._originalState,de=$._targetState,_e=$._easing,Xe=$._tokenData;[ae,Se,de].forEach((function(st){return(function(gt,Tt){for(var An in Tt){var yt=Tt[An],Mn=yt.chunkNames,Xn=yt.formatString,$r=vs(Xn,kr(xo(gt,Mn),Mn));gt[An]=op(Fr,$r,Rb)}})(st,Xe)})),(function(st,gt){for(var Tt in gt){var An=gt[Tt].chunkNames,yt=st[An[0]];st[Tt]=typeof yt=="string"?An.map((function(Mn){var Xn=st[Mn];return delete st[Mn],Xn})).join(" "):yt}})(_e,Xe)}function p0($,ae){var Se=Object.keys($);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols($);ae&&(de=de.filter((function(_e){return Object.getOwnPropertyDescriptor($,_e).enumerable}))),Se.push.apply(Se,de)}return Se}function $d($){for(var ae=1;ae<arguments.length;ae++){var Se=arguments[ae]!=null?arguments[ae]:{};ae%2?p0(Object(Se),!0).forEach((function(de){m0($,de,Se[de])})):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Se)):p0(Object(Se)).forEach((function(de){Object.defineProperty($,de,Object.getOwnPropertyDescriptor(Se,de))}))}return $}function m0($,ae,Se){return ae in $?Object.defineProperty($,ae,{value:Se,enumerable:!0,configurable:!0,writable:!0}):$[ae]=Se,$}var zr=new gr,bo=gr.filters,Vd=function($,ae,Se,de){var _e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,Xe=$d({},$),st=Gt($,de);for(var gt in zr._filters.length=0,zr.set({}),zr._currentState=Xe,zr._originalState=$,zr._targetState=ae,zr._easing=st,bo)bo[gt].doesApply(zr)&&zr._filters.push(bo[gt]);zr._applyFilter("tweenCreated"),zr._applyFilter("beforeTween");var Tt=Y(Se,Xe,$,ae,1,_e,st);return zr._applyFilter("afterTween"),Tt};function Hc($){return(function(ae){if(Array.isArray(ae))return Yn(ae)})($)||(function(ae){if(typeof Symbol<"u"&&Symbol.iterator in Object(ae))return Array.from(ae)})($)||(function(ae,Se){if(ae){if(typeof ae=="string")return Yn(ae,Se);var de=Object.prototype.toString.call(ae).slice(8,-1);return de==="Object"&&ae.constructor&&(de=ae.constructor.name),de==="Map"||de==="Set"?Array.from(ae):de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de)?Yn(ae,Se):void 0}})($)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Yn($,ae){(ae==null||ae>$.length)&&(ae=$.length);for(var Se=0,de=new Array(ae);Se<ae;Se++)de[Se]=$[Se];return de}function Lb($,ae){if(!($ instanceof ae))throw new TypeError("Cannot call a class as a function")}function Pb($,ae){for(var Se=0;Se<ae.length;Se++){var de=ae[Se];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty($,de.key,de)}}function Hr($,ae){var Se=ae.get($);if(!Se)throw new TypeError("attempted to get private field on non-instance");return Se.get?Se.get.call($):Se.value}var Ur=new WeakMap,OE=(function(){function $(){Lb(this,$),Ur.set(this,{writable:!0,value:[]});for(var de=arguments.length,_e=new Array(de),Xe=0;Xe<de;Xe++)_e[Xe]=arguments[Xe];_e.forEach(this.add.bind(this))}var ae,Se;return ae=$,(Se=[{key:"add",value:function(de){return Hr(this,Ur).push(de),de}},{key:"remove",value:function(de){var _e=Hr(this,Ur).indexOf(de);return~_e&&Hr(this,Ur).splice(_e,1),de}},{key:"empty",value:function(){return this.tweenables.map(this.remove.bind(this))}},{key:"isPlaying",value:function(){return Hr(this,Ur).some((function(de){return de.isPlaying()}))}},{key:"play",value:function(){return Hr(this,Ur).forEach((function(de){return de.tween()})),this}},{key:"pause",value:function(){return Hr(this,Ur).forEach((function(de){return de.pause()})),this}},{key:"resume",value:function(){return Hr(this,Ur).forEach((function(de){return de.resume()})),this}},{key:"stop",value:function(de){return Hr(this,Ur).forEach((function(_e){return _e.stop(de)})),this}},{key:"tweenables",get:function(){return Hc(Hr(this,Ur))}},{key:"promises",get:function(){return Hr(this,Ur).map((function(de){return de.then()}))}}])&&Pb(ae.prototype,Se),$})();function Ib($,ae,Se,de,_e,Xe){var st,gt,Tt=0,An=0,yt=0,Mn=0,Xn=0,$r=0,xi=function(It){return((Tt*It+An)*It+yt)*It},za=function(It){return(3*Tt*It+2*An)*It+yt},Ha=function(It){return It>=0?It:0-It};return Tt=1-(yt=3*ae)-(An=3*(de-ae)-yt),Mn=1-($r=3*Se)-(Xn=3*(_e-Se)-$r),st=$,gt=(function(It){return 1/(200*It)})(Xe),(function(It){return((Mn*It+Xn)*It+$r)*It})((function(It,Uc){var Ua,vo,yr,ra,$a,sa;for(yr=It,sa=0;sa<8;sa++){if(ra=xi(yr)-It,Ha(ra)<Uc)return yr;if($a=za(yr),Ha($a)<1e-6)break;yr-=ra/$a}if((yr=It)<(Ua=0))return Ua;if(yr>(vo=1))return vo;for(;Ua<vo;){if(ra=xi(yr),Ha(ra-It)<Uc)return yr;It>ra?Ua=yr:vo=yr,yr=.5*(vo-Ua)+Ua}return yr})(st,gt))}var Bb=function($,ae,Se,de,_e){var Xe=(function(st,gt,Tt,An){return function(yt){return Ib(yt,st,gt,Tt,An,1)}})(ae,Se,de,_e);return Xe.displayName=$,Xe.x1=ae,Xe.y1=Se,Xe.x2=de,Xe.y2=_e,gr.formulas[$]=Xe},RE=function($){return delete gr.formulas[$]};gr.filters.token=o}},e={};function t(n){if(e[n])return e[n].exports;var s=e[n]={exports:{}};return r[n](s,s.exports,t),s.exports}return t.d=(n,s)=>{for(var i in s)t.o(s,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:s[i]})},t.o=(n,s)=>Object.prototype.hasOwnProperty.call(n,s),t.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t(720)})()},u7.exports=nR();var rR="Webkit Moz O ms".split(" ");function sR(r,e,t){for(var n=r.style,s=0;s<rR.length;++s)n[rR[s]+d7(e)]=t;n[e]=t}function d7(r){return r.charAt(0).toUpperCase()+r.slice(1)}function uw(r){return!(function(e){return Object.prototype.toString.call(e)==="[object Array]"})(r)&&typeof r=="object"&&!!r}function iR(r,e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)}var o0={extend:function r(e,t,n){for(var s in e=e||{},n=n||!1,t=t||{})if(t.hasOwnProperty(s)){var i=e[s],a=t[s];n&&uw(i)&&uw(a)?e[s]=r(i,a,n):e[s]=a}return e},render:function(r,e){var t=r;for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],i=new RegExp("\\{"+n+"\\}","g");t=t.replace(i,s)}return t},setStyle:sR,setStyles:function(r,e){iR(e,(function(t,n){t!=null&&(uw(t)&&t.prefix===!0?sR(r,n,t.value):r.style[n]=t)}))},capitalize:d7,isString:function(r){return typeof r=="string"||r instanceof String},isFunction:function(r){return typeof r=="function"},isObject:uw,forEachObject:iR,floatEquals:function(r,e){return Math.abs(r-e)<.001},removeChildren:function(r){for(;r.firstChild;)r.removeChild(r.firstChild)}},K3=u7.exports,ko=o0,aQ=K3.Tweenable,aR={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},xa=function r(e,t){if(!(this instanceof r))throw new Error("Constructor was called without new keyword");var n;t=ko.extend({delay:0,duration:800,easing:"linear",from:{},to:{},step:function(){}},t),n=ko.isString(e)?document.querySelector(e):e,this.path=n,this._opts=t,this._tweenable=null;var s=this.path.getTotalLength();this.path.style.strokeDasharray=s+" "+s,this.set(0)};xa.prototype.value=function(){var r=this._getComputedDashOffset(),e=this.path.getTotalLength();return parseFloat((1-r/e).toFixed(6),10)},xa.prototype.set=function(r){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(r);var e=this._opts.step;if(ko.isFunction(e)){var t=this._easing(this._opts.easing);e(this._calculateTo(r,t),this._opts.shape||this,this._opts.attachment)}},xa.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},xa.prototype.animate=function(r,e,t){e=e||{},ko.isFunction(e)&&(t=e,e={});var n=ko.extend({},e),s=ko.extend({},this._opts);e=ko.extend(s,e);var i=this._easing(e.easing),a=this._resolveFromAndTo(r,i,n);this.stop(),this.path.getBoundingClientRect();var o=this._getComputedDashOffset(),c=this._progressToOffset(r),d=this;this._tweenable=new aQ,this._tweenable.tween({from:ko.extend({offset:o},a.from),to:ko.extend({offset:c},a.to),duration:e.duration,delay:e.delay,easing:i,step:function(h){d.path.style.strokeDashoffset=h.offset;var g=e.shape||d;e.step(h,g,e.attachment)}}).then((function(h){ko.isFunction(t)&&t()}))},xa.prototype._getComputedDashOffset=function(){var r=window.getComputedStyle(this.path,null);return parseFloat(r.getPropertyValue("stroke-dashoffset"),10)},xa.prototype._progressToOffset=function(r){var e=this.path.getTotalLength();return e-r*e},xa.prototype._resolveFromAndTo=function(r,e,t){return t.from&&t.to?{from:t.from,to:t.to}:{from:this._calculateFrom(e),to:this._calculateTo(r,e)}},xa.prototype._calculateFrom=function(r){return K3.interpolate(this._opts.from,this._opts.to,this.value(),r)},xa.prototype._calculateTo=function(r,e){return K3.interpolate(this._opts.from,this._opts.to,r,e)},xa.prototype._stopTween=function(){this._tweenable!==null&&(this._tweenable.stop(),this._tweenable=null)},xa.prototype._easing=function(r){return aR.hasOwnProperty(r)?aR[r]:r};var oQ=xa,lQ=oQ,qi=o0,pu="Object is destroyed",jr=function r(e,t){if(!(this instanceof r))throw new Error("Constructor was called without new keyword");if(arguments.length!==0){this._opts=qi.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},t,!0),qi.isObject(t)&&t.svgStyle!==void 0&&(this._opts.svgStyle=t.svgStyle),qi.isObject(t)&&qi.isObject(t.text)&&t.text.style!==void 0&&(this._opts.text.style=t.text.style);var n,s=this._createSvgView(this._opts);if(!(n=qi.isString(e)?document.querySelector(e):e))throw new Error("Container does not exist: "+e);this._container=n,this._container.appendChild(s.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&qi.setStyles(s.svg,this._opts.svgStyle),this.svg=s.svg,this.path=s.path,this.trail=s.trail,this.text=null;var i=qi.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new lQ(s.path,i),qi.isObject(this._opts.text)&&this._opts.text.value!==null&&this.setText(this._opts.text.value)}};jr.prototype.animate=function(r,e,t){if(this._progressPath===null)throw new Error(pu);this._progressPath.animate(r,e,t)},jr.prototype.stop=function(){if(this._progressPath===null)throw new Error(pu);this._progressPath!==void 0&&this._progressPath.stop()},jr.prototype.pause=function(){if(this._progressPath===null)throw new Error(pu);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.pause()},jr.prototype.resume=function(){if(this._progressPath===null)throw new Error(pu);this._progressPath!==void 0&&this._progressPath._tweenable&&this._progressPath._tweenable.resume()},jr.prototype.destroy=function(){if(this._progressPath===null)throw new Error(pu);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,this.text!==null&&(this.text.parentNode.removeChild(this.text),this.text=null)},jr.prototype.set=function(r){if(this._progressPath===null)throw new Error(pu);this._progressPath.set(r)},jr.prototype.value=function(){if(this._progressPath===null)throw new Error(pu);return this._progressPath===void 0?0:this._progressPath.value()},jr.prototype.setText=function(r){if(this._progressPath===null)throw new Error(pu);this.text===null&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),qi.isObject(r)?(qi.removeChildren(this.text),this.text.appendChild(r)):this.text.innerHTML=r},jr.prototype._createSvgView=function(r){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,r);var t=null;(r.trailColor||r.trailWidth)&&(t=this._createTrail(r),e.appendChild(t));var n=this._createPath(r);return e.appendChild(n),{svg:e,path:n,trail:t}},jr.prototype._initializeSvg=function(r,e){r.setAttribute("viewBox","0 0 100 100")},jr.prototype._createPath=function(r){var e=this._pathString(r);return this._createPathElement(e,r)},jr.prototype._createTrail=function(r){var e=this._trailString(r),t=qi.extend({},r);return t.trailColor||(t.trailColor="#eee"),t.trailWidth||(t.trailWidth=t.strokeWidth),t.color=t.trailColor,t.strokeWidth=t.trailWidth,t.fill=null,this._createPathElement(e,t)},jr.prototype._createPathElement=function(r,e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",r),t.setAttribute("stroke",e.color),t.setAttribute("stroke-width",e.strokeWidth),e.fill?t.setAttribute("fill",e.fill):t.setAttribute("fill-opacity","0"),t},jr.prototype._createTextContainer=function(r,e){var t=document.createElement("div");t.className=r.text.className;var n=r.text.style;return n&&(r.text.autoStyleContainer&&(e.style.position="relative"),qi.setStyles(t,n),n.color||(t.style.color=r.color)),this._initializeTextContainer(r,e,t),t},jr.prototype._initializeTextContainer=function(r,e,t){},jr.prototype._pathString=function(r){throw new Error("Override this function for each progress bar")},jr.prototype._trailString=function(r){throw new Error("Override this function for each progress bar")},jr.prototype._warnContainerAspectRatio=function(r){if(this.containerAspectRatio){var e=window.getComputedStyle(r,null),t=parseFloat(e.getPropertyValue("width"),10),n=parseFloat(e.getPropertyValue("height"),10);qi.floatEquals(this.containerAspectRatio,t/n)||(console.warn("Incorrect aspect ratio of container","#"+r.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",t/n),console.warn("Aspect ratio of should be",this.containerAspectRatio))}};var fE=jr,h7=fE,cQ=o0,my=function(r,e){this._pathTemplate="M 0,{center} L 100,{center}",h7.apply(this,arguments)};(my.prototype=new h7).constructor=my,my.prototype._initializeSvg=function(r,e){r.setAttribute("viewBox","0 0 100 "+e.strokeWidth),r.setAttribute("preserveAspectRatio","none")},my.prototype._pathString=function(r){return cQ.render(this._pathTemplate,{center:r.strokeWidth/2})},my.prototype._trailString=function(r){return this._pathString(r)};var f7=fE,uQ=o0,Uy=function(r,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,f7.apply(this,arguments)};(Uy.prototype=new f7).constructor=Uy,Uy.prototype._pathString=function(r){var e=r.strokeWidth;r.trailWidth&&r.trailWidth>r.strokeWidth&&(e=r.trailWidth);var t=50-e/2;return uQ.render(this._pathTemplate,{radius:t,"2radius":2*t})},Uy.prototype._trailString=function(r){return this._pathString(r)};var p7=Uy,m7=fE,oR=p7,lR=o0,Up=function(r,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,m7.apply(this,arguments)};(Up.prototype=new m7).constructor=Up,Up.prototype._initializeSvg=function(r,e){r.setAttribute("viewBox","0 0 100 50")},Up.prototype._initializeTextContainer=function(r,e,t){r.text.style&&(t.style.top="auto",t.style.bottom="0",r.text.alignToBottom?lR.setStyle(t,"transform","translate(-50%, 0)"):lR.setStyle(t,"transform","translate(-50%, 50%)"))},Up.prototype._pathString=oR.prototype._pathString,Up.prototype._trailString=oR.prototype._trailString;var g7=fE,cR=o0,dw=function(r,e){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",g7.apply(this,arguments)};(dw.prototype=new g7).constructor=dw,dw.prototype._pathString=function(r){var e=100-r.strokeWidth/2;return cR.render(this._pathTemplate,{width:e,strokeWidth:r.strokeWidth,halfOfStrokeWidth:r.strokeWidth/2})},dw.prototype._trailString=function(r){var e=100-r.strokeWidth/2;return cR.render(this._trailTemplate,{width:e,strokeWidth:r.strokeWidth,halfOfStrokeWidth:r.strokeWidth/2,startMargin:r.strokeWidth/2-r.trailWidth/2})};var m2,dQ={Circle:p7},l_=function(r){var e=r.animate,t=r.progressOptions,n=r.className,s=I.useMemo((function(){return m2=document.createElement("div"),new dQ.Circle(m2,t)}),[]),i=I.useCallback((function(a){a&&a.appendChild(m2)}),[]);return I.useEffect((function(){s.animate(e)}),[e,s]),f.jsx("div",{className:n,ref:i})};const hQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},Yt=I.forwardRef((({color:r="currentColor",size:e=24,strokeWidth:t,absoluteStrokeWidth:n=!1,className:s="",altIcon:i,showAlt:a=!1,icon:o,...c},d)=>{const h=t!==void 0?n?24*Number(t)/Number(e):t:void 0,g=h!==void 0?{strokeWidth:h,stroke:"currentColor"}:{},y={ref:d,...hQ,width:e,height:e,color:r,className:s,...g,...c},b=(a&&i?i:o).map((([v,w])=>I.createElement(v,{...w,...g,key:w.key})));return I.createElement("svg",y,b)}));Yt.displayName="HugeiconsIcon";const c_=[["path",{d:"M5.32171 9.6829C7.73539 5.41196 8.94222 3.27648 10.5983 2.72678C11.5093 2.42437 12.4907 2.42437 13.4017 2.72678C15.0578 3.27648 16.2646 5.41196 18.6783 9.6829C21.092 13.9538 22.2988 16.0893 21.9368 17.8293C21.7376 18.7866 21.2469 19.6548 20.535 20.3097C19.241 21.5 16.8274 21.5 12 21.5C7.17265 21.5 4.75897 21.5 3.46496 20.3097C2.75308 19.6548 2.26239 18.7866 2.06322 17.8293C1.70119 16.0893 2.90803 13.9538 5.32171 9.6829Z",stroke:"currentColor",strokeWidth:"1.5",key:"0"}],["path",{d:"M11.992 16H12.001",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",key:"1"}],["path",{d:"M12 13L12 8.99997",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],u_=[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}]],fQ=[["path",{d:"M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}]],pQ=[["path",{d:"M17.9998 15C17.9998 15 13.5809 9.00001 11.9998 9C10.4187 8.99999 5.99985 15 5.99985 15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}]],mQ=[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M3 8H21",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],gQ=[["circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"1.5",key:"0"}],["path",{d:"M12 8V12L14 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}]],d_=[["path",{d:"M17.4776 9.01106C17.485 9.01102 17.4925 9.01101 17.5 9.01101C19.9853 9.01101 22 11.0294 22 13.5193C22 15.8398 20.25 17.7508 18 18M17.4776 9.01106C17.4924 8.84606 17.5 8.67896 17.5 8.51009C17.5 5.46695 15.0376 3 12 3C9.12324 3 6.76233 5.21267 6.52042 8.03192M17.4776 9.01106C17.3753 10.1476 16.9286 11.1846 16.2428 12.0165M6.52042 8.03192C3.98398 8.27373 2 10.4139 2 13.0183C2 15.4417 3.71776 17.4632 6 17.9273M6.52042 8.03192C6.67826 8.01687 6.83823 8.00917 7 8.00917C8.12582 8.00917 9.16474 8.38194 10.0005 9.01101",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M12 21L12 13M12 21C11.2998 21 9.99153 19.0057 9.5 18.5M12 21C12.7002 21 14.0085 19.0057 14.5 18.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}]],yQ=[["path",{d:"M19.5 5.5L18.8803 15.5251C18.7219 18.0864 18.6428 19.3671 18.0008 20.2879C17.6833 20.7431 17.2747 21.1273 16.8007 21.416C15.8421 22 14.559 22 11.9927 22C9.42312 22 8.1383 22 7.17905 21.4149C6.7048 21.1257 6.296 20.7408 5.97868 20.2848C5.33688 19.3626 5.25945 18.0801 5.10461 15.5152L4.5 5.5",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M3 5.5H21M16.0557 5.5L15.3731 4.09173C14.9196 3.15626 14.6928 2.68852 14.3017 2.39681C14.215 2.3321 14.1231 2.27454 14.027 2.2247C13.5939 2 13.0741 2 12.0345 2C10.9688 2 10.436 2 9.99568 2.23412C9.8981 2.28601 9.80498 2.3459 9.71729 2.41317C9.32164 2.7167 9.10063 3.20155 8.65861 4.17126L8.05292 5.5",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M9.5 16.5L9.5 10.5",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"2"}],["path",{d:"M14.5 16.5L14.5 10.5",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"3"}]],xQ=[["path",{d:"M8 7L16 7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M8 11L12 11",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M13 21.5V21C13 18.1716 13 16.7574 13.8787 15.8787C14.7574 15 16.1716 15 19 15H19.5M20 13.3431V10C20 6.22876 20 4.34315 18.8284 3.17157C17.6569 2 15.7712 2 12 2C8.22877 2 6.34315 2 5.17157 3.17157C4 4.34314 4 6.22876 4 10L4 14.5442C4 17.7892 4 19.4117 4.88607 20.5107C5.06508 20.7327 5.26731 20.9349 5.48933 21.1139C6.58831 22 8.21082 22 11.4558 22C12.1614 22 12.5141 22 12.8372 21.886C12.9044 21.8623 12.9702 21.835 13.0345 21.8043C13.3436 21.6564 13.593 21.407 14.0919 20.9081L18.8284 16.1716C19.4065 15.5935 19.6955 15.3045 19.8478 14.9369C20 14.5694 20 14.1606 20 13.3431Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],uR=[["path",{d:"M19.1918 9.44118L17.2265 7.46899C15.8104 6.04799 15.2554 5.28357 14.4886 5.55381C13.5325 5.89077 13.8472 8.01692 13.8472 8.73471C12.3607 8.73471 10.8152 8.60259 9.34985 8.87787C4.51259 9.78664 3 13.7153 3 18C4.3691 17.0302 5.73683 15.997 7.38233 15.5476C9.43637 14.9865 11.7304 15.2542 13.8472 15.2542C13.8472 15.972 13.5325 18.0982 14.4886 18.4351C15.3575 18.7413 15.8104 17.9409 17.2265 16.5199L19.1918 14.5477C20.3973 13.338 21 12.7332 21 11.9945C21 11.2558 20.3973 10.6509 19.1918 9.44118Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}]],bQ=[["path",{d:"M7.5 12H13.5M7.5 8H10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M8.5 20C9.55038 20.8697 10.8145 21.4238 12.2635 21.5188C13.4052 21.5937 14.5971 21.5936 15.7365 21.5188C16.1288 21.4931 16.5565 21.4007 16.9248 21.251C17.3345 21.0845 17.5395 21.0012 17.6437 21.0138C17.7478 21.0264 17.8989 21.1364 18.2011 21.3563C18.7339 21.744 19.4051 22.0225 20.4005 21.9986C20.9038 21.9865 21.1555 21.9804 21.2681 21.7909C21.3808 21.6013 21.2405 21.3389 20.9598 20.8141C20.5706 20.0862 20.324 19.2529 20.6977 18.5852C21.3413 17.6315 21.8879 16.5021 21.9678 15.2823C22.0107 14.6269 22.0107 13.9481 21.9678 13.2927C21.9146 12.4799 21.7173 11.7073 21.4012 11",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M12.345 17.4868C15.9006 17.2526 18.7328 14.4069 18.9658 10.8344C19.0114 10.1353 19.0114 9.41131 18.9658 8.71219C18.7328 5.13969 15.9006 2.29401 12.345 2.05985C11.132 1.97997 9.86553 1.98013 8.65499 2.05985C5.09943 2.29401 2.26725 5.13969 2.0342 8.71219C1.9886 9.41131 1.9886 10.1353 2.0342 10.8344C2.11908 12.1356 2.69992 13.3403 3.38372 14.3576C3.78076 15.0697 3.51873 15.9586 3.10518 16.735C2.807 17.2948 2.65791 17.5747 2.77762 17.7769C2.89732 17.9791 3.16472 17.9856 3.69951 17.9985C4.75712 18.024 5.47028 17.7269 6.03638 17.3134C6.35744 17.0788 6.51798 16.9615 6.62862 16.9481C6.73926 16.9346 6.957 17.0234 7.39241 17.2011C7.78374 17.3608 8.23812 17.4593 8.65499 17.4868C9.86553 17.5665 11.132 17.5666 12.345 17.4868Z",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],vQ=[["path",{d:"M21.7109 9.3871C21.8404 9.895 21.9249 10.4215 21.9598 10.9621C22.0134 11.7929 22.0134 12.6533 21.9598 13.4842C21.6856 17.7299 18.3536 21.1118 14.1706 21.3901C12.7435 21.485 11.2536 21.4848 9.8294 21.3901C9.33896 21.3574 8.8044 21.2403 8.34401 21.0505C7.83177 20.8394 7.5756 20.7338 7.44544 20.7498C7.31527 20.7659 7.1264 20.9052 6.74868 21.184C6.08268 21.6755 5.24367 22.0285 3.99943 21.9982C3.37026 21.9829 3.05568 21.9752 2.91484 21.7349C2.77401 21.4946 2.94941 21.1619 3.30021 20.4966C3.78674 19.5739 4.09501 18.5176 3.62791 17.6712C2.82343 16.4623 2.1401 15.0305 2.04024 13.4842C1.98659 12.6533 1.98659 11.7929 2.04024 10.9621C2.31441 6.71638 5.64639 3.33448 9.8294 3.05621C10.2156 3.03051 10.6067 3.01177 11 3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M8.5 15H15.5M8.5 10H12",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M22 4.5L14 4.5M22 4.5C22 3.79977 20.0057 2.49153 19.5 2M22 4.5C22 5.20023 20.0057 6.50847 19.5 7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],wQ=[["path",{d:"M11.9959 12H12.0049",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",key:"0"}],["path",{d:"M17.9998 12H18.0088",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",key:"1"}],["path",{d:"M5.99981 12H6.00879",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",key:"2"}]],SQ=[["path",{d:"M5 14L8.5 17.5L19 6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}]],dR=[["path",{d:"M2.5 13.8333L6 17.5L7.02402 16.4272M16.5 6.5L10.437 12.8517",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M7.5 13.8333L11 17.5L21.5 6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}]],CQ=[["path",{d:"M5.25 5L19.25 19",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M22.25 12C22.25 6.47715 17.7728 2 12.25 2C6.72715 2 2.25 6.47715 2.25 12C2.25 17.5228 6.72715 22 12.25 22C17.7728 22 22.25 17.5228 22.25 12Z",stroke:"currentColor",strokeWidth:"1.5",key:"1"}]],y7=[["path",{d:"M2 11C2 7.70017 2 6.05025 3.02513 5.02513C4.05025 4 5.70017 4 9 4H10C13.2998 4 14.9497 4 15.9749 5.02513C17 6.05025 17 7.70017 17 11V13C17 16.2998 17 17.9497 15.9749 18.9749C14.9497 20 13.2998 20 10 20H9C5.70017 20 4.05025 20 3.02513 18.9749C2 17.9497 2 16.2998 2 13V11Z",stroke:"currentColor",strokeWidth:"1.5",key:"0"}],["path",{d:"M17 8.90585L17.1259 8.80196C19.2417 7.05623 20.2996 6.18336 21.1498 6.60482C22 7.02628 22 8.42355 22 11.2181V12.7819C22 15.5765 22 16.9737 21.1498 17.3952C20.2996 17.8166 19.2417 16.9438 17.1259 15.198L17 15.0941",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",key:"1"}],["circle",{cx:"11.5",cy:"9.5",r:"1.5",stroke:"currentColor",strokeWidth:"1.5",key:"2"}]],EQ=[["path",{d:"M14 14.8135V9.18646C14 6.04126 14 4.46866 13.0747 4.0773C12.1494 3.68593 11.0603 4.79793 8.88232 7.02192C7.75439 8.17365 7.11085 8.42869 5.50604 8.42869C4.10257 8.42869 3.40084 8.42869 2.89675 8.77262C1.85035 9.48655 2.00852 10.882 2.00852 12C2.00852 13.118 1.85035 14.5134 2.89675 15.2274C3.40084 15.5713 4.10257 15.5713 5.50604 15.5713C7.11085 15.5713 7.75439 15.8264 8.88232 16.9781C11.0603 19.2021 12.1494 20.3141 13.0747 19.9227C14 19.5313 14 17.9587 14 14.8135Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M17 9C17.6254 9.81968 18 10.8634 18 12C18 13.1366 17.6254 14.1803 17 15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M20 7C21.2508 8.36613 22 10.1057 22 12C22 13.8943 21.2508 15.6339 20 17",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}]],hR=[["path",{d:"M22 22L2 2",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"0"}],["path",{d:"M17 10C17.6296 10.7667 18 11.7054 18 12.7195C18 13.1635 17.929 13.593 17.7963 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"1"}],["path",{d:"M20 8C21.2508 9.22951 22 10.7952 22 12.5C22 13.9164 21.4829 15.2367 20.5906 16.348",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"2"}],["path",{d:"M14 14C14 17.1452 14 19.5313 13.074 19.9227C12.1481 20.3141 11.0583 19.2021 8.8787 16.9781C7.7499 15.8264 7.106 15.5713 5.5 15.5713C4.3879 15.5713 3.02749 15.7187 2.33706 14.6643C2 14.1496 2 13.4331 2 12C2 10.5669 2 9.85038 2.33706 9.33566C3.02749 8.28131 4.3879 8.42869 5.5 8.42869C6.60725 8.42869 7.3569 8.43869 7.96 7.96M14 9.5C14 6.3548 14.026 4.46866 13.1 4.0773C12.3292 3.75147 11.5323 4.46765 10 6",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",key:"3"}]];var g2,Mo=function(){return Mo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Mo.apply(this,arguments)},TQ=function(r){var e,t,n,s,i,a,o,c,d,h,g,y,b,v={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(E,C){var N,A;C.path.setAttribute("trail",(N=E==null?void 0:E.state)===null||N===void 0?void 0:N.color),C.path.setAttribute("trailwidth-width",(A=E==null?void 0:E.state)===null||A===void 0?void 0:A.width);var k=Math.round(100*C.value());k===0?C.setText(""):C.setText(k)}},w=((e=r==null?void 0:r.data)===null||e===void 0?void 0:e.status)&&((t=r==null?void 0:r.data)===null||t===void 0?void 0:t.status.error)===!0;return f.jsxs("div",Mo({className:"rce-mbox-photo"},{children:[f.jsxs("div",Mo({className:"rce-mbox-photo--img",style:Mo({},((n=r==null?void 0:r.data)===null||n===void 0?void 0:n.width)&&((s=r==null?void 0:r.data)===null||s===void 0?void 0:s.height)&&{width:r.data.width,height:r.data.height})},{children:[f.jsx("img",{src:(i=r==null?void 0:r.data)===null||i===void 0?void 0:i.uri,alt:(a=r==null?void 0:r.data)===null||a===void 0?void 0:a.alt,onClick:r.onOpen,onLoad:r.onLoad,onError:r.onPhotoError}),w&&f.jsx("div",Mo({className:"rce-mbox-photo--img__block"},{children:f.jsx("span",Mo({className:"rce-mbox-photo--img__block-item rce-mbox-photo--error"},{children:f.jsx(Yt,{icon:c_})}))})),!w&&((o=r==null?void 0:r.data)===null||o===void 0?void 0:o.status)&&!(!((d=(c=r==null?void 0:r.data)===null||c===void 0?void 0:c.status)===null||d===void 0)&&d.download)&&f.jsxs("div",Mo({className:"rce-mbox-photo--img__block"},{children:[!(!((h=r==null?void 0:r.data)===null||h===void 0)&&h.status.click)&&f.jsx("button",Mo({onClick:r.onDownload,className:"rce-mbox-photo--img__block-item rce-mbox-photo--download"},{children:f.jsx(Yt,{icon:d_})})),typeof((g=r==null?void 0:r.data)===null||g===void 0?void 0:g.status.loading)=="number"&&((y=r==null?void 0:r.data)===null||y===void 0?void 0:y.status.loading)!==0&&f.jsx(l_,{animate:(b=r==null?void 0:r.data)===null||b===void 0?void 0:b.status.loading,progressOptions:v,className:"rce-mbox-photo--img__block-item"})]}))]})),(r==null?void 0:r.text)&&f.jsx("div",Mo({className:"rce-mbox-text"},{children:r.text}))]}))},Bl=function(){return Bl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Bl.apply(this,arguments)},AQ=function(r){var e,t,n,s,i,a,o,c,d,h={strokeWidth:5,color:"#333",trailColor:"#aaa",trailWidth:5,step:function(y,b){b.path.setAttribute("trail",y.color),b.path.setAttribute("trailwidth-width",y.width);var v=Math.round(100*b.value());v===0?b.setText(""):b.setText(v)}},g=((e=r==null?void 0:r.data)===null||e===void 0?void 0:e.status)&&((t=r==null?void 0:r.data)===null||t===void 0?void 0:t.status.error)===!0;return f.jsx("div",Bl({className:"rce-mbox-file"},{children:f.jsxs("button",Bl({onClick:function(y){var b,v,w;!((b=r==null?void 0:r.data)===null||b===void 0)&&b.status&&(!(!((v=r==null?void 0:r.data)===null||v===void 0)&&v.status.download)&&r.onDownload instanceof Function?r.onDownload(y):!((w=r==null?void 0:r.data)===null||w===void 0)&&w.status.download&&r.onOpen instanceof Function&&r.onOpen(y))}},{children:[f.jsxs("div",Bl({className:"rce-mbox-file--icon"},{children:[f.jsx(Yt,{icon:xQ,color:"#aaa"}),f.jsx("div",Bl({className:"rce-mbox-file--size"},{children:r==null?void 0:r.data.size}))]})),f.jsx("div",Bl({className:"rce-mbox-file--text"},{children:r.text})),f.jsxs("div",Bl({className:"rce-mbox-file--buttons"},{children:[g&&f.jsx("span",Bl({className:"rce-error-button"},{children:f.jsx(Yt,{icon:c_,color:"#ff3d3d"})})),!g&&((n=r==null?void 0:r.data)===null||n===void 0?void 0:n.status)&&!(!((s=r==null?void 0:r.data)===null||s===void 0)&&s.status.download)&&!(!((i=r==null?void 0:r.data)===null||i===void 0)&&i.status.click)&&f.jsx(Yt,{icon:d_,color:"#aaa"}),!g&&((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.status)&&typeof((o=r==null?void 0:r.data)===null||o===void 0?void 0:o.status.loading)=="number"&&((c=r==null?void 0:r.data)===null||c===void 0?void 0:c.status.loading)!==0&&f.jsx(l_,{animate:(d=r==null?void 0:r.data)===null||d===void 0?void 0:d.status.loading,className:"rce-mbox-file--loading",progressOptions:h})]}))]}))}))},x7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/g2=x7,(function(){var r={}.hasOwnProperty;function e(){for(var t=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var i=typeof s;if(i==="string"||i==="number")t.push(s);else if(Array.isArray(s)){if(s.length){var a=e.apply(null,s);a&&t.push(a)}}else if(i==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){t.push(s.toString());continue}for(var o in s)r.call(s,o)&&s[o]&&t.push(o)}}}return t.join(" ")}g2.exports?(e.default=e,g2.exports=e):window.classNames=e})();var Ot=x7.exports,Jy=function(){return Jy=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Jy.apply(this,arguments)},NQ=function(r){return f.jsx("div",Jy({className:Ot("rce-container-smsg",r.className)},{children:f.jsx("div",Jy({className:"rce-smsg"},{children:f.jsx("div",Jy({className:"rce-smsg-text"},{children:r.text}))}))}))},Qy=function(){return Qy=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Qy.apply(this,arguments)},kQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},MQ=function(r){var e,t=r.markerColor,n=t===void 0?"red":t,s=r.target,i=s===void 0?"_blank":s,a=r.zoom,o=a===void 0?"14":a,c=kQ(r,["markerColor","target","zoom"]),d=function(h){return h.replace(/LATITUDE/g,c==null?void 0:c.data.latitude).replace(/LONGITUDE/g,c==null?void 0:c.data.longitude).replace("MARKER_COLOR",n).replace("ZOOM",o).replace("KEY",c.apiKey)};return f.jsxs("div",Qy({className:"rce-container-lmsg"},{children:[f.jsx("a",Qy({onClick:c.onOpen,target:i,href:c.href||c.src||d(c.data.mapURL||"https://www.google.com/maps/search/?api=1&query=LATITUDE,LONGITUDE&zoom=ZOOM"),className:(e=Ot("rce-mbox-location",c.className),c.text&&(e=Ot(e,"rce-mbox-location-has-text")),e)},{children:f.jsx("img",{onError:c.onError,className:"rce-mbox-location-img",src:c.src||d(c.data.staticURL||"https://maps.googleapis.com/maps/api/staticmap?markers=color:MARKER_COLOR|LATITUDE,LONGITUDE&zoom=ZOOM&size=270x200&scale=2&key=KEY")})})),c.text&&f.jsx("div",Qy({className:"rce-mbox-text rce-mbox-location-text"},{children:c.text}))]}))},J3=function(){return J3=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},J3.apply(this,arguments)},_Q=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},jQ=function(r){var e=r.width,t=e===void 0?300:e,n=r.height,s=n===void 0?380:n,i=_Q(r,["width","height"]);return i.uri?f.jsx("div",J3({className:"rce-mbox-spotify"},{children:f.jsx("iframe",{src:"https://open.spotify.com/embed?"+(function(){var a=[];for(var o in i){var c=encodeURIComponent(o),d=encodeURIComponent(i[o]);a.push(c+"="+d)}return a.join("&")})(),width:t,height:s,frameBorder:"0",allowTransparency:!0})})):null},Fl=function(){return Fl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Fl.apply(this,arguments)},DQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},OQ=function(r){var e=r.onClick,t=DQ(r,["onClick"]);return f.jsxs("div",Fl({className:Ot("rce-mbox-reply",{"rce-mbox-reply-border":!!t.titleColor}),style:Fl({},t.titleColor&&{borderColor:t.titleColor}),onClick:e},{children:[f.jsxs("div",Fl({className:"rce-mbox-reply-left"},{children:[f.jsx("div",Fl({style:Fl({},t.titleColor&&{color:t.titleColor}),className:"rce-mbox-reply-owner"},{children:t.title||"Unknown"})),f.jsx("div",Fl({className:"rce-mbox-reply-message"},{children:t.message||"..."}))]})),t.photoURL&&f.jsx("div",Fl({className:"rce-mbox-reply-right"},{children:f.jsx("img",{src:t.photoURL,alt:""})}))]}))},RQ=["second","minute","hour","day","week","month","year"],LQ=["秒","分钟","小时","天","周","个月","年"],Q3={},fR=function(r,e){Q3[r]=e},y2=[60,60,24,7,365/7/12,12];function PQ(r){return r instanceof Date?r:!isNaN(r)||/^\d+$/.test(r)?new Date(parseInt(r)):(r=(r||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(r))}var mm=function(r,e,t){var n=(function(s,i){return(+new Date-+PQ(s))/1e3})(r);return(function(s,i){for(var a=s<0?1:0,o=s=Math.abs(s),c=0;s>=y2[c]&&c<y2.length;c++)s/=y2[c];return(s=Math.floor(s))>((c*=2)==0?9:1)&&(c+=1),i(s,c,o)[a].replace("%s",s.toString())})(n,(function(s){return Q3[s]||Q3.en_US})(e))};fR("en_US",(function(r,e){if(e===0)return["just now","right now"];var t=RQ[Math.floor(e/2)];return r>1&&(t+="s"),[r+" "+t+" ago","in "+r+" "+t]})),fR("zh_CN",(function(r,e){if(e===0)return["刚刚","片刻后"];var t=LQ[~~(e/2)];return[r+" "+t+"前",r+" "+t+"后"]}));var Zy=function(){return Zy=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Zy.apply(this,arguments)},IQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},ex=function(r){var e=r.type,t=e===void 0?"default":e,n=r.size,s=n===void 0?"default":n,i=r.lazyLoadingImage,a=i===void 0?void 0:i,o=IQ(r,["type","size","lazyLoadingImage"]),c=[],d=!1,h=o.src,g=!1;I.useEffect((function(){a&&(g=!0,y(h)?g=!1:(h=a,d||b(o.src)))}),[]);var y=function(v){return c.indexOf(v)!==-1},b=function(v){d=!0;var w=function(){c.push(v),d=!1},E=document.createElement("img");E.src=v,E.onload=w,E.onerror=w};return f.jsxs("div",Zy({className:Ot("rce-avatar-container",t,s,o.className)},{children:[o.letterItem?f.jsx("div",Zy({className:"rce-avatar-letter-background",style:{backgroundColor:(function(v){for(var w=0,E=0;E<v.length;E++)w=v.charCodeAt(E)+((w<<5)-w);var C="#";for(E=0;E<3;E++){var N=w>>8*E&255;C+=("00"+(N=N%150+50).toString(16)).substr(-2)}return C})(o.letterItem.id)}},{children:f.jsx("span",Zy({className:"rce-avatar-letter"},{children:o.letterItem.letter}))})):f.jsx("img",{alt:o.alt,src:h,onError:o.onError,className:Ot("rce-avatar",{"rce-avatar-lazy":g})}),o.sideElement]}))},tx=function(){return tx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},tx.apply(this,arguments)},BQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},FQ=function(r){var e=r.disabled,t=e!==void 0&&e,n=r.backgroundColor,s=n===void 0?"#3979aa":n,i=r.color,a=i===void 0?"white":i,o=BQ(r,["disabled","backgroundColor","color"]);return f.jsx("button",tx({ref:o.buttonRef,title:o.title,className:Ot("rce-button",o.type,o.className),style:{backgroundColor:s,color:a,borderColor:s},disabled:t,onClick:o.onClick},{children:o.icon?f.jsxs("span",tx({className:"rce-button-icon--container"},{children:[(o.icon.float==="right"||!o.icon.float)&&f.jsx("span",{children:o.text}),f.jsx("span",tx({style:{float:o.icon.float,fontSize:o.icon.size||12},className:"rce-button-icon"},{children:o.icon.component})),o.icon.float==="left"&&f.jsx("span",{children:o.text})]})):f.jsx("span",{children:o.text})}))},zl=function(){return zl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},zl.apply(this,arguments)},zQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},HQ=function(r){var e,t=r.animationPosition,n=t===void 0?"nortwest":t,s=r.animationType,i=s===void 0?"default":s,a=zQ(r,["animationPosition","animationType"]),o=I.useState(void 0),c=o[0],d=o[1];return f.jsxs("div",zl({className:Ot("rce-dropdown-container",a.className),onBlur:function(){c===!0&&d(!1)}},{children:[f.jsx(FQ,zl({},a.buttonProps,{onClick:function(){return d(!c)}})),f.jsx("div",zl({className:Ot("rce-dropdown",i,"rce-dropdown-open__"+n,{"dropdown-hide":c===!1},{"dropdown-show":c===!0})},{children:f.jsxs("ul",{children:[a.title&&f.jsx("span",zl({className:"rce-dropdown-title"},{children:a.title})),(e=a.items)===null||e===void 0?void 0:e.map((function(h,g){return f.jsx("li",zl({onMouseDown:function(y){return a.onSelect(g)}},{children:h instanceof Object?h.icon?f.jsxs("span",zl({className:"rce-button-icon--container"},{children:[(h.icon.float==="right"||!h.icon.float)&&f.jsx("a",{children:h.text}),f.jsx("span",zl({style:{float:h.icon.float,color:h.icon.color,fontSize:h.icon.size||12},className:Ot("rce-button-icon",h.icon.className)},{children:h.icon.component})),h.icon.float==="left"&&f.jsx("a",{children:h.text})]})):f.jsx("a",{children:h.text}):f.jsx("a",{children:h})}),g)}))]})}))]}))},Et=function(){return Et=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Et.apply(this,arguments)},UQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},$Q=function(r){var e=r.date,t=r.dateString,n=r.title,s=r.subject,i=r.collapseTitle,a=r.moreItems,o=r.participants,c=r.dataSource,d=r.onClick,h=r.onMeetingTitleClick,g=r.onMeetingVideoLinkClick,y=r.onMeetingMoreSelect,b=UQ(r,["date","dateString","title","subject","collapseTitle","moreItems","participants","dataSource","onClick","onMeetingTitleClick","onMeetingVideoLinkClick","onMeetingMoreSelect"]),v=I.useState(!1),w=v[0],E=v[1],C=b.participantsLimit,N=t||e&&mm(e);return f.jsx("div",Et({className:"rce-mbox-mtmg"},{children:f.jsxs("div",Et({className:"rce-mtmg"},{children:[f.jsx("div",Et({className:"rce-mtmg-subject"},{children:s||"Unknown Meeting"})),f.jsxs("div",Et({className:"rce-mtmg-body",onClick:d},{children:[f.jsxs("div",Et({className:"rce-mtmg-item"},{children:[f.jsx(Yt,{icon:mQ}),f.jsxs("div",Et({className:"rce-mtmg-content"},{children:[f.jsx("span",Et({className:"rce-mtmg-title"},{children:n})),f.jsx("span",Et({className:"rce-mtmg-date"},{children:N}))]}))]})),y&&a&&a.length>0&&f.jsx("div",{children:f.jsx(HQ,{animationType:"bottom",animationPosition:"norteast",buttonProps:{className:"rce-mtmg-right-icon",icon:{component:f.jsx(Yt,{icon:wQ}),size:24}},items:a,onSelect:y})})]})),f.jsx("div",Et({className:"rce-mtmg-body-bottom",onClick:function(){E(!w)}},{children:f.jsxs("div",w===!0?Et({className:"rce-mtmg-bottom--tptitle"},{children:[f.jsx(Yt,{icon:u_}),f.jsx("span",{children:i})]}):Et({className:"rce-mtmg-body-bottom--bttitle"},{children:[f.jsx(Yt,{icon:fQ}),f.jsxs("span",{children:[o==null?void 0:o.slice(0,C).map((function(A){return A.title||"Unknow"})).join(", "),o&&C&&o.length>C&&", +".concat(o.length-C)]})]}))})),f.jsx("div",Et({className:Ot("rce-mtmg-toogleContent",{"rce-mtmg-toogleContent--click":w===!0})},{children:c&&c.map((function(A,k){return f.jsxs("div",{children:[!A.event&&f.jsxs("div",Et({className:"rce-mitem"},{children:[f.jsx("div",Et({className:Ot("rce-mitem avatar",{"rce-mitem no-avatar":!A.avatar})},{children:A.avatar?f.jsx(ex,{src:A.avatar}):f.jsx(Yt,{icon:bQ})})),f.jsxs("div",Et({className:"rce-mitem-body"},{children:[f.jsxs("div",Et({className:"rce-mitem-body--top"},{children:[f.jsx("div",Et({className:"rce-mitem-body--top-title",onClick:function(M){return O=A,P=k,F=M,void(h instanceof Function&&h(O,P,F));var O,P,F}},{children:A.title})),f.jsx("div",Et({className:"rce-mitem-body--top-time"},{children:A.dateString?A.dateString:A.date&&A.date&&mm(A.date)}))]})),f.jsx("div",Et({className:"rce-mitem-body--bottom"},{children:f.jsx("div",Et({className:"rce-mitem-body--bottom-title"},{children:A.message}))}))]}))]})),A.event&&f.jsx("div",Et({className:"rce-mitem-event"},{children:f.jsxs("div",Et({className:"rce-mitem-bottom-body"},{children:[f.jsx("div",Et({className:"rce-mitem-body avatar"},{children:f.jsx(Yt,{icon:y7})})),f.jsxs("div",Et({className:"rce-mitem-bottom-body-top"},{children:[A.event.title,f.jsx("div",Et({className:"rce-mitem-body--top-time"},{children:A.dateString?A.dateString:A.date&&mm(A.date)})),f.jsx("div",Et({className:"rce-mitem-avatar-content"},{children:f.jsxs("div",Et({className:"rce-mitem-avatar"},{children:[A.event.avatars&&A.event.avatars.slice(0,A.event.avatarsLimit).map((function(M,O){return f.jsx(ex,{src:M.src},O)})),A.event.avatars&&A.event.avatarsLimit&&A.event.avatars.length>A.event.avatarsLimit&&f.jsx("div",Et({className:"rce-mitem-length rce-mitem-tooltip",tooltip:A.event.avatars.slice(A.event.avatarsLimit,A.event.avatars.length).map((function(M){return M.title})).join(",").toString()},{children:f.jsx("span",Et({className:"rce-mitem-tooltip-text"},{children:"+"+(A.event.avatars.length-A.event.avatarsLimit)}))}))]}))})),A.record&&f.jsx("div",Et({className:"rce-mtmg-call-record"},{children:f.jsxs("div",Et({className:"rce-mtmg-call-body"},{children:[f.jsxs("div",Et({onClick:function(M){return O=A,P=k,F=M,void(g instanceof Function&&g(O,P,F));var O,P,F},className:"rce-mtmg-call-avatars"},{children:[f.jsx(ex,{className:"rce-mtmg-call-avatars",src:A.record.avatar}),f.jsx("div",Et({className:"rce-mtmg-record-time"},{children:A.record.time}))]})),f.jsxs("div",Et({className:"rce-mtmg-call-body-title"},{children:[f.jsx("span",{children:A.record.title}),f.jsx("div",Et({className:"rce-mtmg-call-body-bottom"},{children:A.record.savedBy}))]}))]}))}))]}))]}))}))]},k)}))}))]}))}))},Ya=function(){return Ya=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Ya.apply(this,arguments)},VQ=function(r){var e,t,n,s,i,a={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(d,h){var g,y;h.path.setAttribute("trail",d.state!==void 0&&((g=d==null?void 0:d.state)===null||g===void 0?void 0:g.color)||""),h.path.setAttribute("trailwidth-width",d.state!==void 0&&((y=d==null?void 0:d.state)===null||y===void 0?void 0:y.width)||"");var b=Math.round(100*(h==null?void 0:h.value()));b===0?h==null||h.setText(""):h==null||h.setText(b)}},o=((e=r==null?void 0:r.data)===null||e===void 0?void 0:e.status)&&((t=r==null?void 0:r.data)===null||t===void 0?void 0:t.status.error)===!0,c=((n=r==null?void 0:r.data)===null||n===void 0?void 0:n.status)&&((s=r==null?void 0:r.data)===null||s===void 0?void 0:s.status.download);return f.jsxs("div",Ya({className:Ot("rce-mbox-video",{"padding-time":!(r!=null&&r.text)})},{children:[f.jsxs("div",Ya({className:"rce-mbox-video--video",style:Ya({},(r==null?void 0:r.data.width)&&(r==null?void 0:r.data.height)&&{width:r.data.width,height:r.data.height})},{children:[!c&&f.jsx("img",{src:r==null?void 0:r.data.uri,alt:r==null?void 0:r.data.alt,onClick:r.onOpen,onLoad:r.onLoad,onError:r.onPhotoError}),c&&f.jsxs("video",Ya({controls:!0,controlsList:r.controlsList},{children:[f.jsx("source",{src:r==null?void 0:r.data.videoURL,type:"video/mp4"}),"Your browser does not support HTML video."]})),o&&f.jsx("div",Ya({className:"rce-mbox-video--video__block"},{children:f.jsx("span",Ya({className:"rce-mbox-video--video__block-item rce-mbox-video--error"},{children:f.jsx(Yt,{icon:c_})}))})),!o&&((i=r==null?void 0:r.data)===null||i===void 0?void 0:i.status)&&!c&&f.jsxs("div",Ya({className:"rce-mbox-video--video__block"},{children:[!r.data.status.click&&f.jsx("button",Ya({onClick:r.onDownload,className:"rce-mbox-video--video__block-item rce-mbox-video--download"},{children:f.jsx(Yt,{icon:d_})})),typeof r.data.status.loading=="number"&&r.data.status.loading!==0&&f.jsx(l_,{animate:r.data.status.loading,className:"rce-mbox-video--video__block-item",progressOptions:a})]}))]})),(r==null?void 0:r.text)&&f.jsx("div",Ya({className:"rce-mbox-text"},{children:r.text}))]}))},nx=function(){return nx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},nx.apply(this,arguments)},qQ=function(r){var e=r.data.controlsList;return f.jsxs("div",nx({className:"rce-mbox-audio",style:r.customStyle},{children:[f.jsxs("audio",nx({},r.audioProps,{controls:!0,controlsList:e||"nodownload"},{children:[f.jsx("source",{src:r.data.audioURL,type:r.data.audioType||"audio/mp3"}),"Your browser does not support the audio element."]})),r.text&&f.jsx("div",nx({className:"rce-mbox-text"},{children:r.text}))]}))},xu=function(){return xu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},xu.apply(this,arguments)},GQ=function(r){var e;return f.jsx("div",xu({className:"rce-mtlink"},{children:f.jsxs("div",xu({className:"rce-mtlink-content"},{children:[f.jsx("div",xu({className:"rce-mtlink-item"},{children:f.jsx("div",xu({className:"rce-mtlink-title"},{children:r.text}))})),f.jsx("div",xu({className:"rce-mtlink-btn"},{children:(e=r==null?void 0:r.actionButtons)===null||e===void 0?void 0:e.map((function(t){return f.jsx("div",xu({className:"rce-mtlink-btn-content",onClick:function(){var n;return t.onClickButton((n=r==null?void 0:r.meetingID)!==null&&n!==void 0?n:"")}},{children:f.jsx(t.Component,{})}))}))}))]}))}))},Zt=function(){return Zt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Zt.apply(this,arguments)},WQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},YQ=function(r){var e=r.focus,t=e!==void 0&&e,n=r.notch,s=n===void 0||n,i=r.styles,a=WQ(r,["focus","notch","styles"]),o=I.useRef(t),c=I.useRef(null),d=Ot("rce-mbox",{"rce-mbox-right":a.position==="right"}),h=!(/(text|video|file|meeting|audio)/g.test(a.type||"text")||a.type==="location"&&a.text),g=a.date&&(a.dateString||mm(a.date));return I.useEffect((function(){var y;o.current!==t&&t===!0&&c&&((y=c.current)===null||y===void 0||y.scrollIntoView({block:"center",behavior:"smooth"}),a.onMessageFocused(o)),o.current=t}),[t,o]),f.jsxs("div",Zt({ref:c,className:Ot("rce-container-mbox",a.className),onClick:a.onClick},{children:[a.renderAddCmp instanceof Function?a.renderAddCmp():a.renderAddCmp,a.type==="system"?f.jsx(NQ,Zt({},a,{focus:t,notch:s})):f.jsxs("div",Zt({style:i,className:Ot(d,{"rce-mbox--clear-padding":h},{"rce-mbox--clear-notch":!s},{"message-focus":t})},{children:[f.jsxs("div",Zt({className:"rce-mbox-body",onContextMenu:a.onContextMenu},{children:[!a.retracted&&a.forwarded===!0&&f.jsx("div",Zt({className:Ot("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}),onClick:a.onForwardClick},{children:f.jsx(Yt,{icon:uR,size:20})})),!a.retracted&&a.replyButton===!0&&f.jsx("div",Zt({className:a.forwarded!==!0?Ot("rce-mbox-forward",{"rce-mbox-forward-right":a.position==="left"},{"rce-mbox-forward-left":a.position==="right"}):Ot("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onReplyClick},{children:f.jsx(Yt,{icon:vQ,size:20})})),!a.retracted&&a.removeButton===!0&&f.jsx("div",Zt({className:a.forwarded===!0?Ot("rce-mbox-remove",{"rce-mbox-remove-right":a.position==="left"},{"rce-mbox-remove-left":a.position==="right"}):Ot("rce-mbox-forward",{"rce-mbox-reply-btn-right":a.position==="left"},{"rce-mbox-reply-btn-left":a.position==="right"}),onClick:a.onRemoveMessageClick},{children:f.jsx(Yt,{icon:yQ,size:20})})),(a.title||a.avatar)&&f.jsxs("div",Zt({style:Zt({},a.titleColor&&{color:a.titleColor}),onClick:a.onTitleClick,className:Ot("rce-mbox-title",{"rce-mbox-title--clear":a.type==="text"})},{children:[a.avatar&&f.jsx(ex,{letterItem:a.letterItem,src:a.avatar}),a.title&&f.jsx("span",{children:a.title})]})),a.forwardedMessageText?f.jsx("div",Zt({className:"rce-mbox-forwardedMessage"},{children:f.jsxs("div",Zt({className:"rce-mbox-forwarded-message"},{children:[f.jsx(Yt,{icon:uR,size:18}),f.jsxs("i",Zt({style:{margin:"0 3px 1px 0"}},{children:[" ",a.forwardedMessageText]}))]}))})):null,!a.forwardedMessageText&&a.reply?f.jsx(OQ,Zt({onClick:a.onReplyMessageClick},a.reply)):null,a.type==="text"&&f.jsxs("div",Zt({className:Ot("rce-mbox-text",{"rce-mbox-text-retracted":a.retracted,left:a.position==="left",right:a.position==="right"})},{children:[a.retracted&&f.jsx(Yt,{icon:CQ,size:14}),a.text]})),a.type==="location"&&f.jsx(MQ,Zt({focus:t,notch:s},a)),a.type==="photo"&&f.jsx(TQ,Zt({focus:t,notch:s},a)),a.type==="video"&&f.jsx(VQ,Zt({focus:t,notch:s},a)),a.type==="file"&&f.jsx(AQ,Zt({focus:t,notch:s},a)),a.type==="spotify"&&f.jsx(jQ,Zt({focus:t,notch:s},a)),a.type==="meeting"&&f.jsx($Q,Zt({focus:t,notch:s},a)),a.type==="audio"&&f.jsx(qQ,Zt({focus:t,notch:s},a)),a.type==="meetingLink"&&f.jsx(GQ,Zt({focus:t,notch:s},a,{actionButtons:a==null?void 0:a.actionButtons})),f.jsxs("div",Zt({title:a.statusTitle,className:Ot("rce-mbox-time",{"rce-mbox-time-block":h},{"non-copiable":!a.copiableDate}),"data-text":a.copiableDate?void 0:g},{children:[a.copiableDate&&a.date&&(a.dateString||mm(a.date)),a.status&&f.jsxs("span",Zt({className:"rce-mbox-status"},{children:[a.status==="waiting"&&f.jsx(Yt,{icon:gQ,size:14}),a.status==="sent"&&f.jsx(Yt,{icon:SQ,size:14}),a.status==="received"&&f.jsx(Yt,{icon:dR,size:14}),a.status==="read"&&f.jsx(Yt,{icon:dR,color:"#4FC3F7",size:14})]}))]}))]})),s&&(a.position==="right"?f.jsx("svg",Zt({style:a.notchStyle,className:Ot("rce-mbox-right-notch",{"message-focus":t}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:f.jsx("path",{d:"M0 0v20L20 0"})})):f.jsx("div",{children:f.jsxs("svg",Zt({style:a.notchStyle,className:Ot("rce-mbox-left-notch",{"message-focus":t}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},{children:[f.jsx("defs",{children:f.jsxs("filter",Zt({id:"filter1",x:"0",y:"0"},{children:[f.jsx("feOffset",{result:"offOut",in:"SourceAlpha",dx:"-2",dy:"-5"}),f.jsx("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"3"}),f.jsx("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"})]}))}),f.jsx("path",{d:"M20 0v20L0 0",filter:"url(#filter1)"})]}))}))]}))]}))},Dr=function(){return Dr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},Dr.apply(this,arguments)},XQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},pR=function(r){var e=r.avatarFlexible,t=e!==void 0&&e,n=r.date,s=n===void 0?new Date:n,i=r.unread,a=i===void 0?0:i,o=r.statusColorType,c=o===void 0?"badge":o,d=r.lazyLoadingImage,h=d===void 0?void 0:d,g=r.onAvatarError,y=g===void 0?function(){}:g,b=XQ(r,["avatarFlexible","date","unread","statusColorType","lazyLoadingImage","onAvatarError"]),v=I.useState(!1),w=v[0],E=v[1],C=I.useState(!1),N=C[0],A=C[1];return I.useEffect((function(){var k;(k=b.setDragStates)===null||k===void 0||k.call(b,A)}),[]),f.jsx(f.Fragment,{children:f.jsx("div",Dr({className:Ot("rce-container-citem",b.className),onClick:function(k){var M;k.preventDefault(),w!==!0&&((M=b.onClick)===null||M===void 0||M.call(b,k))},onContextMenu:b.onContextMenu},{children:f.jsxs("div",Dr({className:"rce-citem",onDragOver:function(k){k.preventDefault(),b.onDragOver instanceof Function&&b.onDragOver(k,b.id)},onDragEnter:function(k){k.preventDefault(),b.onDragEnter instanceof Function&&b.onDragEnter(k,b.id),N||A(!0)},onDragLeave:function(k){k.preventDefault(),b.onDragLeave instanceof Function&&b.onDragLeave(k,b.id),N&&A(!1)},onDrop:function(k){k.preventDefault(),b.onDrop instanceof Function&&b.onDrop(k,b.id),N&&A(!1)}},{children:[!!b.onDragComponent&&N&&b.onDragComponent(b.id),(N&&!b.onDragComponent||!N)&&[f.jsxs("div",Dr({className:Ot("rce-citem-avatar",{"rce-citem-status-encircle":c==="encircle"})},{children:[f.jsx(ex,{src:b.avatar,alt:b.alt,className:c==="encircle"?"rce-citem-avatar-encircle-status":"",size:b.avatarSize||"large",letterItem:b.letterItem,sideElement:b.statusColor?f.jsx("span",Dr({className:"rce-citem-status",style:c==="encircle"?{border:"solid 2px ".concat(b.statusColor)}:{backgroundColor:b.statusColor}},{children:b.statusText})):f.jsx(f.Fragment,{}),onError:y,lazyLoadingImage:h,type:Ot("circle",{flexible:t})}),b.subList&&b.subList.length>0&&f.jsx("button",Dr({className:"rce-citem-expand-button",onClick:function(k){return(function(M,O){M.preventDefault(),M.stopPropagation(),b.onExpandItem instanceof Function&&b.onExpandItem(O)})(k,b.id)}},{children:b.expanded?f.jsx(Yt,{icon:pQ}):f.jsx(Yt,{icon:u_})}))]}),"avatar"),f.jsxs("div",Dr({className:"rce-citem-body"},{children:[f.jsxs("div",Dr({className:"rce-citem-body--top"},{children:[f.jsx("div",Dr({className:"rce-citem-body--top-title"},{children:b.title})),f.jsx("div",Dr({className:"rce-citem-body--top-time"},{children:s&&(b.dateString||mm(s))}))]})),f.jsxs("div",Dr({className:"rce-citem-body--bottom"},{children:[f.jsx("div",Dr({className:"rce-citem-body--bottom-title"},{children:b.subtitle})),f.jsxs("div",Dr({className:"rce-citem-body--bottom-tools",onMouseEnter:function(){E(!0)},onMouseLeave:function(){E(!1)}},{children:[b.showMute&&f.jsxs("div",Dr({className:"rce-citem-body--bottom-tools-item",onClick:b.onClickMute},{children:[b.muted===!0&&f.jsx(Yt,{icon:hR}),b.muted===!1&&f.jsx(Yt,{icon:EQ})]})),b.showVideoCall&&f.jsx("div",Dr({className:"rce-citem-body--bottom-tools-item",onClick:b.onClickVideoCall},{children:f.jsx(Yt,{icon:y7})}))]})),f.jsx("div",Dr({className:"rce-citem-body--bottom-tools-item-hidden-hover"},{children:b.showMute&&b.muted&&f.jsx("div",Dr({className:"rce-citem-body--bottom-tools-item"},{children:f.jsx(Yt,{icon:hR})}))})),f.jsx("div",Dr({className:"rce-citem-body--bottom-status"},{children:a&&a>0?f.jsx("span",{children:a}):null})),b.customStatusComponents!==void 0?b.customStatusComponents.map((function(k){return f.jsx(k,{})})):null]}))]}),"rce-citem-body")]]}))}),b.id)})},rx=function(){return rx=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},rx.apply(this,arguments)},x2=[],KQ=function(r){var e=function(a,o,c){r.onClick instanceof Function&&r.onClick(a,o,c)},t=function(a,o,c){c.preventDefault(),r.onContextMenu instanceof Function&&r.onContextMenu(a,o,c)},n=function(a,o,c){r.onAvatarError instanceof Function&&r.onAvatarError(a,o,c)},s=function(a){x2.push(a)},i=function(a,o){var c;x2.length>0&&x2.forEach((function(d){return d(!1)})),(c=r.onDragLeave)===null||c===void 0||c.call(r,a,o)};return f.jsx("div",rx({className:Ot("rce-container-clist",r.className)},{children:r.dataSource.map((function(a,o){return f.jsxs(f.Fragment,{children:[I.createElement(pR,rx({},a,{key:o,lazyLoadingImage:r.lazyLoadingImage,onAvatarError:function(c){return n(a,o,c)},onContextMenu:function(c){return t(a,o,c)},onClick:function(c){return e(a,o,c)},onClickMute:function(c){var d;return(d=r.onClickMute)===null||d===void 0?void 0:d.call(r,a,o,c)},onClickVideoCall:function(c){var d;return(d=r.onClickVideoCall)===null||d===void 0?void 0:d.call(r,a,o,c)},onDragOver:r==null?void 0:r.onDragOver,onDragEnter:r==null?void 0:r.onDragEnter,onDrop:r.onDrop,onDragLeave:i,onDragComponent:r.onDragComponent,setDragStates:s,onExpandItem:function(c){return d=a,h=o,g=c,void(r.onExpand instanceof Function&&r.onExpand(d,h,g));var d,h,g},expanded:a.expanded})),a.subList&&a.subList.length>0&&f.jsx(f.Fragment,{children:a.expanded&&a.subList.map((function(c,d){return I.createElement(pR,rx({},c,{className:"subitem",avatarSize:"xsmall",key:"".concat(o,"-").concat(d),lazyLoadingImage:r.lazyLoadingImage,onAvatarError:function(h){return n(c,d,h)},onContextMenu:function(h){return t(c,d,h)},onClick:function(h){return e(c,d,h)},onClickMute:function(h){var g;return(g=r.onClickMute)===null||g===void 0?void 0:g.call(r,c,d,h)},onClickVideoCall:function(h){var g;return(g=r.onClickVideoCall)===null||g===void 0?void 0:g.call(r,c,d,h)},onDragOver:r==null?void 0:r.onDragOver,onDragEnter:r==null?void 0:r.onDragEnter,onDrop:r.onDrop,onDragLeave:i,onDragComponent:r.onDragComponent,setDragStates:s}))}))})]})}))}))},fh=function(){return fh=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},fh.apply(this,arguments)},JQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},QQ=function(r){var e=r.referance,t=e===void 0?null:e,n=r.lockable,s=n!==void 0&&n,i=r.toBottomHeight,a=i===void 0?300:i,o=r.downButton,c=JQ(r,["referance","lockable","toBottomHeight","downButton"]),d=I.useState(0),h=d[0],g=d[1],y=I.useState(!1),b=y[0],v=y[1],w=I.useRef(c);I.useEffect((function(){var C;t&&(w.current.dataSource.length!==c.dataSource.length&&(g(E(t)),(C=t)&&C.current&&(a==="100%"||a&&h<a?C.current.scrollTop=C.current.scrollHeight:s===!0&&(C.current.scrollTop=C.current.scrollHeight-C.current.offsetHeight-h))),w.current=c)}),[w,c]);var E=function(C){return C.current?C.current.scrollHeight-C.current.scrollTop-C.current.offsetHeight:C.scrollHeight-C.scrollTop-C.offsetHeight};return f.jsxs("div",fh({className:Ot(["rce-container-mlist",c.className])},c.customProps,{children:[!!c.children&&c.isShowChild&&c.children,f.jsx("div",fh({ref:t,onScroll:function(C){var N=E(C.currentTarget);g(N),a==="100%"||a&&N>a?b!==!0&&(v(!0),g(N)):b!==!1&&(v(!1),g(N)),c.onScroll instanceof Function&&c.onScroll(C)},className:"rce-mlist"},{children:c.dataSource.map((function(C,N){return f.jsx(YQ,fh({},C,{onOpen:c.onOpen&&function(A){return k=C,M=N,O=A,void(c.onOpen instanceof Function&&c.onOpen(k,M,O));var k,M,O},onPhotoError:c.onPhotoError&&function(A){return k=C,M=N,O=A,void(c.onPhotoError instanceof Function&&c.onPhotoError(k,M,O));var k,M,O},onDownload:c.onDownload&&function(A){return k=C,M=N,O=A,void(c.onDownload instanceof Function&&c.onDownload(k,M,O));var k,M,O},onTitleClick:c.onTitleClick&&function(A){return k=C,M=N,O=A,void(c.onTitleClick instanceof Function&&c.onTitleClick(k,M,O));var k,M,O},onForwardClick:c.onForwardClick&&function(A){return k=C,M=N,O=A,void(c.onForwardClick instanceof Function&&c.onForwardClick(k,M,O));var k,M,O},onReplyClick:c.onReplyClick&&function(A){return k=C,M=N,O=A,void(c.onReplyClick instanceof Function&&c.onReplyClick(k,M,O));var k,M,O},onReplyMessageClick:c.onReplyMessageClick&&function(A){return k=C,M=N,O=A,void(c.onReplyMessageClick instanceof Function&&c.onReplyMessageClick(k,M,O));var k,M,O},onRemoveMessageClick:c.onRemoveMessageClick&&function(A){return k=C,M=N,O=A,void(c.onRemoveMessageClick instanceof Function&&c.onRemoveMessageClick(k,M,O));var k,M,O},onClick:c.onClick&&function(A){return k=C,M=N,O=A,void(c.onClick instanceof Function&&c.onClick(k,M,O));var k,M,O},onContextMenu:c.onContextMenu&&function(A){return k=C,M=N,O=A,void(c.onContextMenu instanceof Function&&c.onContextMenu(k,M,O));var k,M,O},onMeetingMoreSelect:c.onMeetingMoreSelect&&function(A){return(function(k,M,O){c.onMeetingMoreSelect instanceof Function&&c.onMeetingMoreSelect(k,M,O)})(C,N,A)},onMessageFocused:c.onMessageFocused&&function(A){return k=C,M=N,O=A,void(c.onMessageFocused instanceof Function&&c.onMessageFocused(k,M,O));var k,M,O},onMeetingMessageClick:c.onMeetingMessageClick&&function(A){return k=C,M=N,O=A,void(c.onMeetingMessageClick instanceof Function&&c.onMeetingMessageClick(k,M,O));var k,M,O},onMeetingTitleClick:c.onMeetingTitleClick,onMeetingVideoLinkClick:c.onMeetingVideoLinkClick,onMeetingLinkClick:c.onMeetingLinkClick&&function(A){return(function(k,M,O){c.onMeetingLinkClick instanceof Function&&c.onMeetingLinkClick(k,M,O)})(C,N,A)},actionButtons:c.actionButtons,styles:c.messageBoxStyles,notchStyle:c.notchStyle}),N)}))})),o===!0&&b&&a!=="100%"&&f.jsxs("div",fh({className:"rce-mlist-down-button",onClick:function(C){t&&(t.current.scrollTop=t.current.scrollHeight,c.onDownButtonClick instanceof Function&&c.onDownButtonClick(C))}},{children:[f.jsx(Yt,{icon:u_}),c.downButtonBadge!==void 0?f.jsx("span",fh({className:"rce-mlist-down-button--badge"},{children:c.downButtonBadge.toString()})):null]}))]}))},am=function(){return am=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r},am.apply(this,arguments)},ZQ=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]])}return t},eZ=function(r){var e,t=r.type,n=t===void 0?"text":t,s=r.multiline,i=s!==void 0&&s,a=r.minHeight,o=a===void 0?25:a,c=r.maxHeight,d=c===void 0?200:c,h=r.autoHeight,g=h===void 0||h,y=r.autofocus,b=y!==void 0&&y,v=ZQ(r,["type","multiline","minHeight","maxHeight","autoHeight","autofocus"]);I.useEffect((function(){var C,N;b===!0&&((N=(C=v.referance)===null||C===void 0?void 0:C.current)===null||N===void 0||N.focus()),v.clear instanceof Function&&v.clear(E)}),[]);var w=function(C){if(i===!0&&g===!0){C.target.style.height!==o+"px"&&(C.target.style.height=o+"px");var N=void 0;N=C.target.scrollHeight<=d?C.target.scrollHeight+"px":d+"px",C.target.style.height!==N&&(C.target.style.height=N)}if(v.maxlength&&(C.target.value||"").length>v.maxlength)return v.onMaxLengthExceed instanceof Function&&v.onMaxLengthExceed(),void(v.referance&&(v.referance.current.value=(C.target.value||"").substring(0,v.maxlength)));v.onChange instanceof Function&&v.onChange(C)},E=function(){var C,N,A,k={FAKE_EVENT:!0,target:(C=v.referance)===null||C===void 0?void 0:C.current};!((A=(N=v.referance)===null||N===void 0?void 0:N.current)===null||A===void 0)&&A.value&&(v.referance.current.value=""),w(k)};return f.jsxs("div",am({className:Ot("rce-container-input",v.className)},{children:[v.leftButtons&&f.jsx("div",am({className:"rce-input-buttons"},{children:v.leftButtons})),i===!1?f.jsx("input",{ref:v.referance,type:n,className:Ot("rce-input"),placeholder:v.placeholder,defaultValue:v.defaultValue,style:v.inputStyle,onChange:w,onCopy:v.onCopy,onCut:v.onCut,onPaste:v.onPaste,onBlur:v.onBlur,onFocus:v.onFocus,onSelect:v.onSelect,onSubmit:v.onSubmit,onReset:v.onReset,onKeyDown:v.onKeyDown,onKeyPress:v.onKeyPress,onKeyUp:v.onKeyUp,value:v.value}):f.jsx("textarea",am({ref:v.referance,className:Ot("rce-input","rce-input-textarea"),placeholder:v.placeholder,defaultValue:v.defaultValue,style:v.inputStyle,onChange:w,onCopy:v.onCopy,onCut:v.onCut,onPaste:v.onPaste,onBlur:v.onBlur,onFocus:v.onFocus,onSelect:v.onSelect,onSubmit:v.onSubmit,onReset:v.onReset,onKeyDown:v.onKeyDown,onKeyPress:v.onKeyPress,onKeyUp:v.onKeyUp},{children:v.defaultValue&&(e=v==null?void 0:v.value)!==null&&e!==void 0?e:null})),v.rightButtons&&f.jsx("div",am({className:"rce-input-buttons"},{children:v.rightButtons}))]}))},b2={exports:{}},hw={},mR;function tZ(){return mR||(mR=1,globalThis.crypto&&globalThis.crypto.getRandomValues?hw.randomBytes=function(r){var e=new Uint8Array(r);return globalThis.crypto.getRandomValues(e),e}:hw.randomBytes=function(r){for(var e=new Array(r),t=0;t<r;t++)e[t]=Math.floor(Math.random()*256);return e}),hw}var v2,gR;function l0(){if(gR)return v2;gR=1;var r=tZ(),e="abcdefghijklmnopqrstuvwxyz012345";return v2={string:function(t){for(var n=e.length,s=r.randomBytes(t),i=[],a=0;a<t;a++)i.push(e.substr(s[a]%n,1));return i.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var n=(""+(t-1)).length,s=new Array(n+1).join("0");return(s+this.number(t)).slice(-n)}},v2}var yR;function Bd(){return yR||(yR=1,(function(r){var e=l0(),t={},n=!1,s=globalThis.chrome&&globalThis.chrome.app&&globalThis.chrome.app.runtime;r.exports={attachEvent:function(a,o){typeof globalThis.addEventListener<"u"?globalThis.addEventListener(a,o,!1):globalThis.document&&globalThis.attachEvent&&(globalThis.document.attachEvent("on"+a,o),globalThis.attachEvent("on"+a,o))},detachEvent:function(a,o){typeof globalThis.addEventListener<"u"?globalThis.removeEventListener(a,o,!1):globalThis.document&&globalThis.detachEvent&&(globalThis.document.detachEvent("on"+a,o),globalThis.detachEvent("on"+a,o))},unloadAdd:function(a){if(s)return null;var o=e.string(8);return t[o]=a,n&&setTimeout(this.triggerUnloadCallbacks,0),o},unloadDel:function(a){a in t&&delete t[a]},triggerUnloadCallbacks:function(){for(var a in t)t[a](),delete t[a]}};var i=function(){n||(n=!0,r.exports.triggerUnloadCallbacks())};s||r.exports.attachEvent("unload",i)})(b2)),b2.exports}var w2,xR;function nZ(){return xR||(xR=1,w2=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}),w2}var fw={},bR;function rZ(){if(bR)return fw;bR=1;var r=Object.prototype.hasOwnProperty,e;function t(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch{return null}}function n(a){try{return encodeURIComponent(a)}catch{return null}}function s(a){for(var o=/([^=?#&]+)=?([^&]*)/g,c={},d;d=o.exec(a);){var h=t(d[1]),g=t(d[2]);h===null||g===null||h in c||(c[h]=g)}return c}function i(a,o){o=o||"";var c=[],d,h;typeof o!="string"&&(o="?");for(h in a)if(r.call(a,h)){if(d=a[h],!d&&(d===null||d===e||isNaN(d))&&(d=""),h=n(h),d=n(d),h===null||d===null)continue;c.push(h+"="+d)}return c.length?o+c.join("&"):""}return fw.stringify=i,fw.parse=s,fw}var S2,vR;function b7(){if(vR)return S2;vR=1;var r=nZ(),e=rZ(),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/:\d+$/,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,o=/^[a-zA-Z]:/;function c(N){return(N||"").toString().replace(t,"")}var d=[["#","hash"],["?","query"],function(A,k){return y(k.protocol)?A.replace(/\\/g,"/"):A},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function g(N){var A;typeof window<"u"?A=window:typeof globalThis<"u"?A=globalThis:typeof self<"u"?A=self:A={};var k=A.location||{};N=N||k;var M={},O=typeof N,P;if(N.protocol==="blob:")M=new w(unescape(N.pathname),{});else if(O==="string"){M=new w(N,{});for(P in h)delete M[P]}else if(O==="object"){for(P in N)P in h||(M[P]=N[P]);M.slashes===void 0&&(M.slashes=s.test(N.href))}return M}function y(N){return N==="file:"||N==="ftp:"||N==="http:"||N==="https:"||N==="ws:"||N==="wss:"}function b(N,A){N=c(N),N=N.replace(n,""),A=A||{};var k=a.exec(N),M=k[1]?k[1].toLowerCase():"",O=!!k[2],P=!!k[3],F=0,H;return O?P?(H=k[2]+k[3]+k[4],F=k[2].length+k[3].length):(H=k[2]+k[4],F=k[2].length):P?(H=k[3]+k[4],F=k[3].length):H=k[4],M==="file:"?F>=2&&(H=H.slice(2)):y(M)?H=k[4]:M?O&&(H=H.slice(2)):F>=2&&y(A.protocol)&&(H=k[4]),{protocol:M,slashes:O||y(M),slashesCount:F,rest:H}}function v(N,A){if(N==="")return A;for(var k=(A||"/").split("/").slice(0,-1).concat(N.split("/")),M=k.length,O=k[M-1],P=!1,F=0;M--;)k[M]==="."?k.splice(M,1):k[M]===".."?(k.splice(M,1),F++):F&&(M===0&&(P=!0),k.splice(M,1),F--);return P&&k.unshift(""),(O==="."||O==="..")&&k.push(""),k.join("/")}function w(N,A,k){if(N=c(N),N=N.replace(n,""),!(this instanceof w))return new w(N,A,k);var M,O,P,F,H,ee,G=d.slice(),J=typeof A,V=this,X=0;for(J!=="object"&&J!=="string"&&(k=A,A=null),k&&typeof k!="function"&&(k=e.parse),A=g(A),O=b(N||"",A),M=!O.protocol&&!O.slashes,V.slashes=O.slashes||M&&A.slashes,V.protocol=O.protocol||A.protocol||"",N=O.rest,(O.protocol==="file:"&&(O.slashesCount!==2||o.test(N))||!O.slashes&&(O.protocol||O.slashesCount<2||!y(V.protocol)))&&(G[3]=[/(.*)/,"pathname"]);X<G.length;X++){if(F=G[X],typeof F=="function"){N=F(N,V);continue}P=F[0],ee=F[1],P!==P?V[ee]=N:typeof P=="string"?(H=P==="@"?N.lastIndexOf(P):N.indexOf(P),~H&&(typeof F[2]=="number"?(V[ee]=N.slice(0,H),N=N.slice(H+F[2])):(V[ee]=N.slice(H),N=N.slice(0,H)))):(H=P.exec(N))&&(V[ee]=H[1],N=N.slice(0,H.index)),V[ee]=V[ee]||M&&F[3]&&A[ee]||"",F[4]&&(V[ee]=V[ee].toLowerCase())}k&&(V.query=k(V.query)),M&&A.slashes&&V.pathname.charAt(0)!=="/"&&(V.pathname!==""||A.pathname!=="")&&(V.pathname=v(V.pathname,A.pathname)),V.pathname.charAt(0)!=="/"&&y(V.protocol)&&(V.pathname="/"+V.pathname),r(V.port,V.protocol)||(V.host=V.hostname,V.port=""),V.username=V.password="",V.auth&&(H=V.auth.indexOf(":"),~H?(V.username=V.auth.slice(0,H),V.username=encodeURIComponent(decodeURIComponent(V.username)),V.password=V.auth.slice(H+1),V.password=encodeURIComponent(decodeURIComponent(V.password))):V.username=encodeURIComponent(decodeURIComponent(V.auth)),V.auth=V.password?V.username+":"+V.password:V.username),V.origin=V.protocol!=="file:"&&y(V.protocol)&&V.host?V.protocol+"//"+V.host:"null",V.href=V.toString()}function E(N,A,k){var M=this;switch(N){case"query":typeof A=="string"&&A.length&&(A=(k||e.parse)(A)),M[N]=A;break;case"port":M[N]=A,r(A,M.protocol)?A&&(M.host=M.hostname+":"+A):(M.host=M.hostname,M[N]="");break;case"hostname":M[N]=A,M.port&&(A+=":"+M.port),M.host=A;break;case"host":M[N]=A,i.test(A)?(A=A.split(":"),M.port=A.pop(),M.hostname=A.join(":")):(M.hostname=A,M.port="");break;case"protocol":M.protocol=A.toLowerCase(),M.slashes=!k;break;case"pathname":case"hash":if(A){var O=N==="pathname"?"/":"#";M[N]=A.charAt(0)!==O?O+A:A}else M[N]=A;break;case"username":case"password":M[N]=encodeURIComponent(A);break;case"auth":var P=A.indexOf(":");~P?(M.username=A.slice(0,P),M.username=encodeURIComponent(decodeURIComponent(M.username)),M.password=A.slice(P+1),M.password=encodeURIComponent(decodeURIComponent(M.password))):M.username=encodeURIComponent(decodeURIComponent(A))}for(var F=0;F<d.length;F++){var H=d[F];H[4]&&(M[H[1]]=M[H[1]].toLowerCase())}return M.auth=M.password?M.username+":"+M.password:M.username,M.origin=M.protocol!=="file:"&&y(M.protocol)&&M.host?M.protocol+"//"+M.host:"null",M.href=M.toString(),M}function C(N){(!N||typeof N!="function")&&(N=e.stringify);var A,k=this,M=k.host,O=k.protocol;O&&O.charAt(O.length-1)!==":"&&(O+=":");var P=O+(k.protocol&&k.slashes||y(k.protocol)?"//":"");return k.username?(P+=k.username,k.password&&(P+=":"+k.password),P+="@"):k.password?(P+=":"+k.password,P+="@"):k.protocol!=="file:"&&y(k.protocol)&&!M&&k.pathname!=="/"&&(P+="@"),(M[M.length-1]===":"||i.test(k.hostname)&&!k.port)&&(M+=":"),P+=M+k.pathname,A=typeof k.query=="object"?N(k.query):k.query,A&&(P+=A.charAt(0)!=="?"?"?"+A:A),k.hash&&(P+=k.hash),P}return w.prototype={set:E,toString:C},w.extractProtocol=b,w.location=g,w.trimLeft=c,w.qs=e,S2=w,S2}var C2,wR;function Fa(){if(wR)return C2;wR=1;var r=b7();return C2={getOrigin:function(e){if(!e)return null;var t=new r(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},C2}var pw={exports:{}},SR;function qt(){return SR||(SR=1,typeof Object.create=="function"?pw.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:pw.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),pw.exports}var E2={},T2,CR;function v7(){if(CR)return T2;CR=1;function r(){this._listeners={}}return r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var s=n.indexOf(t);if(s!==-1){n.length>1?this._listeners[e]=n.slice(0,s).concat(n.slice(s+1)):delete this._listeners[e];return}}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var s=this._listeners[t],i=0;i<s.length;i++)s[i].apply(this,n)},T2=r,T2}var ER;function Xs(){if(ER)return E2;ER=1;var r=qt(),e=v7();function t(){e.call(this)}return r(t,e),t.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}},t.prototype.once=function(n,s){var i=this,a=!1;function o(){i.removeListener(n,o),a||(a=!0,s.apply(this,arguments))}this.on(n,o)},t.prototype.emit=function(){var n=arguments[0],s=this._listeners[n];if(s){for(var i=arguments.length,a=new Array(i-1),o=1;o<i;o++)a[o-1]=arguments[o];for(var c=0;c<s.length;c++)s[c].apply(this,a)}},t.prototype.on=t.prototype.addListener=e.prototype.addEventListener,t.prototype.removeListener=e.prototype.removeEventListener,E2.EventEmitter=t,E2}var mw={exports:{}},TR;function sZ(){if(TR)return mw.exports;TR=1;var r=globalThis.WebSocket||globalThis.MozWebSocket;return r?mw.exports=function(t){return new r(t)}:mw.exports=void 0,mw.exports}var A2,AR;function iZ(){if(AR)return A2;AR=1;var r=Bd(),e=Fa(),t=qt(),n=Xs().EventEmitter,s=sZ(),i=function(){};function a(o,c,d){if(!a.enabled())throw new Error("Transport created when disabled");n.call(this);var h=this,g=e.addPath(o,"/websocket");g.slice(0,5)==="https"?g="wss"+g.slice(5):g="ws"+g.slice(4),this.url=g,this.ws=new s(this.url,[],d),this.ws.onmessage=function(y){i("message event",y.data),h.emit("message",y.data)},this.unloadRef=r.unloadAdd(function(){h.ws.close()}),this.ws.onclose=function(y){i("close event",y.code,y.reason),h.emit("close",y.code,y.reason),h._cleanup()},this.ws.onerror=function(y){h.emit("close",1006,"WebSocket connection broken"),h._cleanup()}}return t(a,n),a.prototype.send=function(o){var c="["+o+"]";this.ws.send(c)},a.prototype.close=function(){var o=this.ws;this._cleanup(),o&&o.close()},a.prototype._cleanup=function(){var o=this.ws;o&&(o.onmessage=o.onclose=o.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},a.enabled=function(){return!!s},a.transportName="websocket",a.roundTrips=2,A2=a,A2}var N2,NR;function aZ(){if(NR)return N2;NR=1;var r=qt(),e=Xs().EventEmitter,t=function(){};function n(s,i){e.call(this),this.sendBuffer=[],this.sender=i,this.url=s}return r(n,e),n.prototype.send=function(s){this.sendBuffer.push(s),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var s=this,i;this.sendStop=function(){s.sendStop=null,clearTimeout(i)},i=setTimeout(function(){s.sendStop=null,s.sendSchedule()},25)},n.prototype.sendSchedule=function(){t("sendSchedule",this.sendBuffer.length);var s=this;if(this.sendBuffer.length>0){var i="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,i,function(a){s.sendStop=null,a?(s.emit("close",a.code||1006,"Sending error: "+a),s.close()):s.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},N2=n,N2}var k2,kR;function oZ(){if(kR)return k2;kR=1;var r=qt(),e=Xs().EventEmitter,t=function(){};function n(s,i,a){e.call(this),this.Receiver=s,this.receiveUrl=i,this.AjaxObject=a,this._scheduleReceiver()}return r(n,e),n.prototype._scheduleReceiver=function(){var s=this,i=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);i.on("message",function(a){s.emit("message",a)}),i.once("close",function(a,o){t("close",a,o,s.pollIsClosing),s.poll=i=null,s.pollIsClosing||(o==="network"?s._scheduleReceiver():(s.emit("close",a||1006,o),s.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},k2=n,k2}var M2,MR;function w7(){if(MR)return M2;MR=1;var r=qt(),e=Fa(),t=aZ(),n=oZ();function s(i,a,o,c,d){var h=e.addPath(i,a),g=this;t.call(this,i,o),this.poll=new n(c,h,d),this.poll.on("message",function(y){g.emit("message",y)}),this.poll.once("close",function(y,b){g.poll=null,g.emit("close",y,b),g.close()})}return r(s,t),s.prototype.close=function(){t.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},M2=s,M2}var _2,_R;function c0(){if(_R)return _2;_R=1;var r=qt(),e=Fa(),t=w7();function n(i){return function(a,o,c){var d={};typeof o=="string"&&(d.headers={"Content-type":"text/plain"});var h=e.addPath(a,"/xhr_send"),g=new i("POST",h,o,d);return g.once("finish",function(y){if(g=null,y!==200&&y!==204)return c(new Error("http status "+y));c()}),function(){g.close(),g=null;var y=new Error("Aborted");y.code=1e3,c(y)}}}function s(i,a,o,c){t.call(this,i,a,n(c),o,c)}return r(s,t),_2=s,_2}var j2,jR;function pE(){if(jR)return j2;jR=1;var r=qt(),e=Xs().EventEmitter;function t(n,s){e.call(this);var i=this;this.bufferPosition=0,this.xo=new s("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(a,o){i._chunkHandler(a,o),i.xo=null;var c=a===200?"network":"permanent";i.emit("close",null,c),i._cleanup()})}return r(t,e),t.prototype._chunkHandler=function(n,s){if(!(n!==200||!s))for(var i=-1;;this.bufferPosition+=i+1){var a=s.slice(this.bufferPosition);if(i=a.indexOf(`
`),i===-1)break;var o=a.slice(0,i);o&&this.emit("message",o)}},t.prototype._cleanup=function(){this.removeAllListeners()},t.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},j2=t,j2}var D2,DR;function S7(){if(DR)return D2;DR=1;var r=Xs().EventEmitter,e=qt(),t=Bd(),n=Fa(),s=globalThis.XMLHttpRequest,i=function(){};function a(d,h,g,y){var b=this;r.call(this),setTimeout(function(){b._start(d,h,g,y)},0)}e(a,r),a.prototype._start=function(d,h,g,y){var b=this;try{this.xhr=new s}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}h=n.addQuery(h,"t="+ +new Date),this.unloadRef=t.unloadAdd(function(){b._cleanup(!0)});try{this.xhr.open(d,h,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i("xhr timeout"),b.emit("finish",0,""),b._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!y||!y.noCredentials)&&a.supportsCORS&&(this.xhr.withCredentials=!0),y&&y.headers)for(var v in y.headers)this.xhr.setRequestHeader(v,y.headers[v]);this.xhr.onreadystatechange=function(){if(b.xhr){var w=b.xhr,E,C;switch(i("readyState",w.readyState),w.readyState){case 3:try{C=w.status,E=w.responseText}catch{}C===1223&&(C=204),C===200&&E&&E.length>0&&b.emit("chunk",C,E);break;case 4:C=w.status,C===1223&&(C=204),(C===12005||C===12029)&&(C=0),i("finish",C,w.responseText),b.emit("finish",C,w.responseText),b._cleanup(!1);break}}};try{b.xhr.send(g)}catch{b.emit("finish",0,""),b._cleanup(!1)}},a.prototype._cleanup=function(d){if(this.xhr){if(this.removeAllListeners(),t.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),d)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!s;var o=["Active"].concat("Object").join("X");!a.enabled&&o in globalThis&&(s=function(){try{return new globalThis[o]("Microsoft.XMLHTTP")}catch{return null}},a.enabled=!!new s);var c=!1;try{c="withCredentials"in new s}catch{}return a.supportsCORS=c,D2=a,D2}var O2,OR;function mE(){if(OR)return O2;OR=1;var r=qt(),e=S7();function t(n,s,i,a){e.call(this,n,s,i,a)}return r(t,e),t.enabled=e.enabled&&e.supportsCORS,O2=t,O2}var R2,RR;function Ab(){if(RR)return R2;RR=1;var r=qt(),e=S7();function t(n,s,i){e.call(this,n,s,i,{noCredentials:!0})}return r(t,e),t.enabled=e.enabled,R2=t,R2}var L2,LR;function Nb(){return LR||(LR=1,L2={isOpera:function(){return globalThis.navigator&&/opera/i.test(globalThis.navigator.userAgent)},isKonqueror:function(){return globalThis.navigator&&/konqueror/i.test(globalThis.navigator.userAgent)},hasDomain:function(){if(!globalThis.document)return!0;try{return!!globalThis.document.domain}catch{return!1}}}),L2}var P2,PR;function lZ(){if(PR)return P2;PR=1;var r=qt(),e=c0(),t=pE(),n=mE(),s=Ab(),i=Nb();function a(o){if(!s.enabled&&!n.enabled)throw new Error("Transport created when disabled");e.call(this,o,"/xhr_streaming",t,n)}return r(a,e),a.enabled=function(o){return o.nullOrigin||i.isOpera()?!1:n.enabled},a.transportName="xhr-streaming",a.roundTrips=2,a.needBody=!!globalThis.document,P2=a,P2}var I2,IR;function h_(){if(IR)return I2;IR=1;var r=Xs().EventEmitter,e=qt(),t=Bd(),n=Nb(),s=Fa(),i=function(){};function a(o,c,d){var h=this;r.call(this),setTimeout(function(){h._start(o,c,d)},0)}return e(a,r),a.prototype._start=function(o,c,d){var h=this,g=new globalThis.XDomainRequest;c=s.addQuery(c,"t="+ +new Date),g.onerror=function(){h._error()},g.ontimeout=function(){h._error()},g.onprogress=function(){i("progress",g.responseText),h.emit("chunk",200,g.responseText)},g.onload=function(){h.emit("finish",200,g.responseText),h._cleanup(!1)},this.xdr=g,this.unloadRef=t.unloadAdd(function(){h._cleanup(!0)});try{this.xdr.open(o,c),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(d)}catch{this._error()}},a.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},a.prototype._cleanup=function(o){if(this.xdr){if(this.removeAllListeners(),t.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,o)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!(globalThis.XDomainRequest&&n.hasDomain()),I2=a,I2}var B2,BR;function C7(){if(BR)return B2;BR=1;var r=qt(),e=c0(),t=pE(),n=h_();function s(i){if(!n.enabled)throw new Error("Transport created when disabled");e.call(this,i,"/xhr_streaming",t,n)}return r(s,e),s.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:n.enabled&&i.sameScheme},s.transportName="xdr-streaming",s.roundTrips=2,B2=s,B2}var F2,FR;function E7(){return FR||(FR=1,F2=globalThis.EventSource),F2}var z2,zR;function cZ(){if(zR)return z2;zR=1;var r=qt(),e=Xs().EventEmitter,t=E7(),n=function(){};function s(i){e.call(this);var a=this,o=this.es=new t(i);o.onmessage=function(c){n("message",c.data),a.emit("message",decodeURI(c.data))},o.onerror=function(c){n("error",o.readyState);var d=o.readyState!==2?"network":"permanent";a._cleanup(),a._close(d)}}return r(s,e),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)},s.prototype._close=function(i){var a=this;setTimeout(function(){a.emit("close",null,i),a.removeAllListeners()},200)},z2=s,z2}var H2,HR;function UR(){if(HR)return H2;HR=1;var r=qt(),e=c0(),t=cZ(),n=mE(),s=E7();function i(a){if(!i.enabled())throw new Error("Transport created when disabled");e.call(this,a,"/eventsource",t,n)}return r(i,e),i.enabled=function(){return!!s},i.transportName="eventsource",i.roundTrips=2,H2=i,H2}var U2,$R;function T7(){return $R||($R=1,U2="1.6.1"),U2}var $2={exports:{}},VR;function kb(){return VR||(VR=1,(function(r){var e=Bd(),t=Nb();r.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){r.exports.WPrefix in globalThis||(globalThis[r.exports.WPrefix]={})},postMessage:function(n,s){globalThis.parent!==globalThis&&globalThis.parent.postMessage(JSON.stringify({windowId:r.exports.currentWindowId,type:n,data:s||""}),"*")},createIframe:function(n,s){var i=globalThis.document.createElement("iframe"),a,o,c=function(){clearTimeout(a);try{i.onload=null}catch{}i.onerror=null},d=function(){i&&(c(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),e.unloadDel(o))},h=function(y){i&&(d(),s(y))},g=function(y,b){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(y,b)}catch{}},0)};return i.src=n,i.style.display="none",i.style.position="absolute",i.onerror=function(){h("onerror")},i.onload=function(){clearTimeout(a),a=setTimeout(function(){h("onload timeout")},2e3)},globalThis.document.body.appendChild(i),a=setTimeout(function(){h("timeout")},15e3),o=e.unloadAdd(d),{post:g,cleanup:d,loaded:c}},createHtmlfile:function(n,s){var i=["Active"].concat("Object").join("X"),a=new globalThis[i]("htmlfile"),o,c,d,h=function(){clearTimeout(o),d.onerror=null},g=function(){a&&(h(),e.unloadDel(c),d.parentNode.removeChild(d),d=a=null,CollectGarbage())},y=function(w){a&&(g(),s(w))},b=function(w,E){try{setTimeout(function(){d&&d.contentWindow&&d.contentWindow.postMessage(w,E)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+globalThis.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[r.exports.WPrefix]=globalThis[r.exports.WPrefix];var v=a.createElement("div");return a.body.appendChild(v),d=a.createElement("iframe"),v.appendChild(d),d.src=n,d.onerror=function(){y("onerror")},o=setTimeout(function(){y("timeout")},15e3),c=e.unloadAdd(g),{post:b,cleanup:g,loaded:h}}},r.exports.iframeEnabled=!1,globalThis.document&&(r.exports.iframeEnabled=(typeof globalThis.postMessage=="function"||typeof globalThis.postMessage=="object")&&!t.isKonqueror())})($2)),$2.exports}var V2,qR;function A7(){if(qR)return V2;qR=1;var r=qt(),e=Xs().EventEmitter,t=T7(),n=Fa(),s=kb(),i=Bd(),a=l0(),o=function(){};function c(d,h,g){if(!c.enabled())throw new Error("Transport created when disabled");e.call(this);var y=this;this.origin=n.getOrigin(g),this.baseUrl=g,this.transUrl=h,this.transport=d,this.windowId=a.string(8);var b=n.addPath(g,"/iframe.html")+"#"+this.windowId;this.iframeObj=s.createIframe(b,function(v){y.emit("close",1006,"Unable to load an iframe ("+v+")"),y.close()}),this.onmessageCallback=this._message.bind(this),i.attachEvent("message",this.onmessageCallback)}return r(c,e),c.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){i.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},c.prototype._message=function(d){if(o("message",d.data),!n.isOriginEqual(d.origin,this.origin)){o("not same origin",d.origin,this.origin);return}var h;try{h=JSON.parse(d.data)}catch{o("bad json",d.data);return}if(h.windowId!==this.windowId){o("mismatched window id",h.windowId,this.windowId);return}switch(h.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([t,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",h.data);break;case"c":var g;try{g=JSON.parse(h.data)}catch{o("bad json",h.data);return}this.emit("close",g[0],g[1]),this.close();break}},c.prototype.postMessage=function(d,h){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:d,data:h||""}),this.origin)},c.prototype.send=function(d){this.postMessage("m",d)},c.enabled=function(){return s.iframeEnabled},c.transportName="iframe",c.roundTrips=2,V2=c,V2}var q2,GR;function f_(){return GR||(GR=1,q2={isObject:function(r){var e=typeof r;return e==="function"||e==="object"&&!!r},extend:function(r){if(!this.isObject(r))return r;for(var e,t,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}}),q2}var G2,WR;function W2(){if(WR)return G2;WR=1;var r=qt(),e=A7(),t=f_();return G2=function(n){function s(i,a){e.call(this,n.transportName,i,a)}return r(s,e),s.enabled=function(i,a){if(!globalThis.document)return!1;var o=t.extend({},a);return o.sameOrigin=!0,n.enabled(o)&&e.enabled()},s.transportName="iframe-"+n.transportName,s.needBody=!0,s.roundTrips=e.roundTrips+n.roundTrips-1,s.facadeTransport=n,s},G2}var Y2,YR;function uZ(){if(YR)return Y2;YR=1;var r=qt(),e=kb(),t=Fa(),n=Xs().EventEmitter,s=l0(),i=function(){};function a(c){n.call(this);var d=this;e.polluteGlobalNamespace(),this.id="a"+s.string(6),c=t.addQuery(c,"c="+decodeURIComponent(e.WPrefix+"."+this.id)),i("using htmlfile",a.htmlfileEnabled);var h=a.htmlfileEnabled?e.createHtmlfile:e.createIframe;globalThis[e.WPrefix][this.id]={start:function(){d.iframeObj.loaded()},message:function(g){d.emit("message",g)},stop:function(){d._cleanup(),d._close("network")}},this.iframeObj=h(c,function(){d._cleanup(),d._close("permanent")})}r(a,n),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete globalThis[e.WPrefix][this.id]},a.prototype._close=function(c){this.emit("close",null,c),this.removeAllListeners()},a.htmlfileEnabled=!1;var o=["Active"].concat("Object").join("X");if(o in globalThis)try{a.htmlfileEnabled=!!new globalThis[o]("htmlfile")}catch{}return a.enabled=a.htmlfileEnabled||e.iframeEnabled,Y2=a,Y2}var X2,XR;function KR(){if(XR)return X2;XR=1;var r=qt(),e=uZ(),t=Ab(),n=c0();function s(i){if(!e.enabled)throw new Error("Transport created when disabled");n.call(this,i,"/htmlfile",e,t)}return r(s,n),s.enabled=function(i){return e.enabled&&i.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,X2=s,X2}var K2,JR;function QR(){if(JR)return K2;JR=1;var r=qt(),e=c0(),t=pE(),n=mE(),s=Ab();function i(a){if(!s.enabled&&!n.enabled)throw new Error("Transport created when disabled");e.call(this,a,"/xhr",t,n)}return r(i,e),i.enabled=function(a){return a.nullOrigin?!1:s.enabled&&a.sameOrigin?!0:n.enabled},i.transportName="xhr-polling",i.roundTrips=2,K2=i,K2}var J2,ZR;function dZ(){if(ZR)return J2;ZR=1;var r=qt(),e=c0(),t=C7(),n=pE(),s=h_();function i(a){if(!s.enabled)throw new Error("Transport created when disabled");e.call(this,a,"/xhr",n,s)}return r(i,e),i.enabled=t.enabled,i.transportName="xdr-polling",i.roundTrips=2,J2=i,J2}var Q2,e6;function hZ(){if(e6)return Q2;e6=1;var r=kb(),e=l0(),t=Nb(),n=Fa(),s=qt(),i=Xs().EventEmitter,a=function(){};function o(c){var d=this;i.call(this),r.polluteGlobalNamespace(),this.id="a"+e.string(6);var h=n.addQuery(c,"c="+encodeURIComponent(r.WPrefix+"."+this.id));globalThis[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(h),this.timeoutId=setTimeout(function(){d._abort(new Error("JSONP script loaded abnormally (timeout)"))},o.timeout)}return s(o,i),o.prototype.abort=function(){if(globalThis[r.WPrefix][this.id]){var c=new Error("JSONP user aborted read");c.code=1e3,this._abort(c)}},o.timeout=35e3,o.scriptErrorTimeout=1e3,o.prototype._callback=function(c){this._cleanup(),!this.aborting&&(c&&this.emit("message",c),this.emit("close",null,"network"),this.removeAllListeners())},o.prototype._abort=function(c){this._cleanup(),this.aborting=!0,this.emit("close",c.code,c.message),this.removeAllListeners()},o.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var c=this.script;c.parentNode.removeChild(c),c.onreadystatechange=c.onerror=c.onload=c.onclick=null,this.script=null}delete globalThis[r.WPrefix][this.id]},o.prototype._scriptError=function(){var c=this;this.errorTimer||(this.errorTimer=setTimeout(function(){c.loadedOkay||c._abort(new Error("JSONP script loaded abnormally (onerror)"))},o.scriptErrorTimeout))},o.prototype._createScript=function(c){var d=this,h=this.script=globalThis.document.createElement("script"),g;if(h.id="a"+e.string(8),h.src=c,h.type="text/javascript",h.charset="UTF-8",h.onerror=this._scriptError.bind(this),h.onload=function(){d._abort(new Error("JSONP script loaded abnormally (onload)"))},h.onreadystatechange=function(){if(a("onreadystatechange",h.readyState),/loaded|closed/.test(h.readyState)){if(h&&h.htmlFor&&h.onclick){d.loadedOkay=!0;try{h.onclick()}catch{}}h&&d._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof h.async>"u"&&globalThis.document.attachEvent)if(t.isOpera())g=this.script2=globalThis.document.createElement("script"),g.text="try{var a = document.getElementById('"+h.id+"'); if(a)a.onerror();}catch(x){};",h.async=g.async=!1;else{try{h.htmlFor=h.id,h.event="onclick"}catch{}h.async=!0}typeof h.async<"u"&&(h.async=!0);var y=globalThis.document.getElementsByTagName("head")[0];y.insertBefore(h,y.firstChild),g&&y.insertBefore(g,y.firstChild)},Q2=o,Q2}var Z2,t6;function fZ(){if(t6)return Z2;t6=1;var r=l0(),e=Fa(),t=function(){},n,s;function i(o){try{return globalThis.document.createElement('<iframe name="'+o+'">')}catch{var c=globalThis.document.createElement("iframe");return c.name=o,c}}function a(){n=globalThis.document.createElement("form"),n.style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",s=globalThis.document.createElement("textarea"),s.name="d",n.appendChild(s),globalThis.document.body.appendChild(n)}return Z2=function(o,c,d){n||a();var h="a"+r.string(8);n.target=h,n.action=e.addQuery(e.addPath(o,"/jsonp_send"),"i="+h);var g=i(h);g.id=h,g.style.display="none",n.appendChild(g);try{s.value=c}catch{}n.submit();var y=function(b){g.onerror&&(g.onreadystatechange=g.onerror=g.onload=null,setTimeout(function(){g.parentNode.removeChild(g),g=null},500),s.value="",d(b))};return g.onerror=function(){y()},g.onload=function(){y()},g.onreadystatechange=function(b){t("onreadystatechange",h,g.readyState),g.readyState==="complete"&&y()},function(){y(new Error("Aborted"))}},Z2}var eN,n6;function pZ(){if(n6)return eN;n6=1;var r=qt(),e=w7(),t=hZ(),n=fZ();function s(i){if(!s.enabled())throw new Error("Transport created when disabled");e.call(this,i,"/jsonp",n,t)}return r(s,e),s.enabled=function(){return!!globalThis.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,eN=s,eN}var tN,r6;function mZ(){return r6||(r6=1,tN=[iZ(),lZ(),C7(),UR(),W2()(UR()),KR(),W2()(KR()),QR(),dZ(),W2()(QR()),pZ()]),tN}var s6={},i6;function gZ(){if(i6)return s6;i6=1;var r=Array.prototype,e=Object.prototype,t=Function.prototype,n=String.prototype,s=r.slice,i=e.toString,a=function(P){return e.toString.call(P)==="[object Function]"},o=function(F){return i.call(F)==="[object Array]"},c=function(F){return i.call(F)==="[object String]"},d=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),h;d?h=function(P,F,H,ee){!ee&&F in P||Object.defineProperty(P,F,{configurable:!0,enumerable:!1,writable:!0,value:H})}:h=function(P,F,H,ee){!ee&&F in P||(P[F]=H)};var g=function(P,F,H){for(var ee in F)e.hasOwnProperty.call(F,ee)&&h(P,ee,F[ee],H)},y=function(P){if(P==null)throw new TypeError("can't convert "+P+" to object");return Object(P)};function b(P){var F=+P;return F!==F?F=0:F!==0&&F!==1/0&&F!==-1/0&&(F=(F>0||-1)*Math.floor(Math.abs(F))),F}function v(P){return P>>>0}function w(){}g(t,{bind:function(F){var H=this;if(!a(H))throw new TypeError("Function.prototype.bind called on incompatible "+H);for(var ee=s.call(arguments,1),G=function(){if(this instanceof K){var q=H.apply(this,ee.concat(s.call(arguments)));return Object(q)===q?q:this}else return H.apply(F,ee.concat(s.call(arguments)))},J=Math.max(0,H.length-ee.length),V=[],X=0;X<J;X++)V.push("$"+X);var K=Function("binder","return function ("+V.join(",")+"){ return binder.apply(this, arguments); }")(G);return H.prototype&&(w.prototype=H.prototype,K.prototype=new w,w.prototype=null),K}}),g(Array,{isArray:o});var E=Object("a"),C=E[0]!=="a"||!(0 in E),N=function(F){var H=!0,ee=!0;return F&&(F.call("foo",function(G,J,V){typeof V!="object"&&(H=!1)}),F.call([1],function(){ee=typeof this=="string"},"x")),!!F&&H&&ee};g(r,{forEach:function(F){var H=y(this),ee=C&&c(this)?this.split(""):H,G=arguments[1],J=-1,V=ee.length>>>0;if(!a(F))throw new TypeError;for(;++J<V;)J in ee&&F.call(G,ee[J],J,H)}},!N(r.forEach));var A=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;g(r,{indexOf:function(F){var H=C&&c(this)?this.split(""):y(this),ee=H.length>>>0;if(!ee)return-1;var G=0;for(arguments.length>1&&(G=b(arguments[1])),G=G>=0?G:Math.max(0,ee+G);G<ee;G++)if(G in H&&H[G]===F)return G;return-1}},A);var k=n.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var P=/()??/.exec("")[1]===void 0;n.split=function(F,H){var ee=this;if(F===void 0&&H===0)return[];if(i.call(F)!=="[object RegExp]")return k.call(this,F,H);var G=[],J=(F.ignoreCase?"i":"")+(F.multiline?"m":"")+(F.extended?"x":"")+(F.sticky?"y":""),V=0,X,K,q,Z;for(F=new RegExp(F.source,J+"g"),ee+="",P||(X=new RegExp("^"+F.source+"$(?!\\s)",J)),H=H===void 0?-1>>>0:v(H);(K=F.exec(ee))&&(q=K.index+K[0].length,!(q>V&&(G.push(ee.slice(V,K.index)),!P&&K.length>1&&K[0].replace(X,function(){for(var he=1;he<arguments.length-2;he++)arguments[he]===void 0&&(K[he]=void 0)}),K.length>1&&K.index<ee.length&&r.push.apply(G,K.slice(1)),Z=K[0].length,V=q,G.length>=H)));)F.lastIndex===K.index&&F.lastIndex++;return V===ee.length?(Z||!F.test(""))&&G.push(""):G.push(ee.slice(V)),G.length>H?G.slice(0,H):G}})():"0".split(void 0,0).length&&(n.split=function(F,H){return F===void 0&&H===0?[]:k.call(this,F,H)});var M=n.substr,O="".substr&&"0b".substr(-1)!=="b";return g(n,{substr:function(F,H){return M.call(this,F<0&&(F=this.length+F)<0?0:F,H)}},O),s6}var nN,a6;function yZ(){if(a6)return nN;a6=1;var r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,e,t=function(n){var s,i={},a=[];for(s=0;s<65536;s++)a.push(String.fromCharCode(s));return n.lastIndex=0,a.join("").replace(n,function(o){return i[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,i};return nN={quote:function(n){var s=JSON.stringify(n);return r.lastIndex=0,r.test(s)?(e||(e=t(r)),s.replace(r,function(i){return e[i]})):s}},nN}var rN,o6;function xZ(){if(o6)return rN;o6=1;var r=function(){};return rN=function(e){return{filterToEnabled:function(t,n){var s={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(i){if(i&&!(i.transportName==="websocket"&&n.websocket===!1)){if(t.length&&t.indexOf(i.transportName)===-1){r("not in whitelist",i.transportName);return}i.enabled(n)?(r("enabled",i.transportName),s.main.push(i),i.facadeTransport&&s.facade.push(i.facadeTransport)):r("disabled",i.transportName)}}),s}}},rN}var sN,l6;function bZ(){if(l6)return sN;l6=1;var r={};return["log","debug","warn"].forEach(function(e){var t;try{t=globalThis.console&&globalThis.console[e]&&globalThis.console[e].apply}catch{}r[e]=t?function(){return globalThis.console[e].apply(globalThis.console,arguments)}:e==="log"?function(){}:r.log}),sN=r,sN}var iN,c6;function p_(){if(c6)return iN;c6=1;function r(e){this.type=e}return r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,iN=r,iN}var aN,u6;function N7(){return u6||(u6=1,aN=globalThis.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),aN}var oN,d6;function vZ(){if(d6)return oN;d6=1;var r=qt(),e=p_();function t(){e.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return r(t,e),oN=t,oN}var lN,h6;function wZ(){if(h6)return lN;h6=1;var r=qt(),e=p_();function t(n){e.call(this),this.initEvent("message",!1,!1),this.data=n}return r(t,e),lN=t,lN}var cN,f6;function SZ(){if(f6)return cN;f6=1;var r=Xs().EventEmitter,e=qt();function t(){var n=this;r.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},t.timeout)}return e(t,r),t.prototype.close=function(){clearTimeout(this.to)},t.timeout=2e3,cN=t,cN}var uN,p6;function k7(){if(p6)return uN;p6=1;var r=Xs().EventEmitter,e=qt(),t=f_();function n(s,i){r.call(this);var a=this,o=+new Date;this.xo=new i("GET",s),this.xo.once("finish",function(c,d){var h,g;if(c===200){if(g=+new Date-o,d)try{h=JSON.parse(d)}catch{}t.isObject(h)||(h={})}a.emit("finish",h,g),a.removeAllListeners()})}return e(n,r),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},uN=n,uN}var dN,m6;function M7(){if(m6)return dN;m6=1;var r=qt(),e=Xs().EventEmitter,t=Ab(),n=k7();function s(i){var a=this;e.call(this),this.ir=new n(i,t),this.ir.once("finish",function(o,c){a.ir=null,a.emit("message",JSON.stringify([o,c]))})}return r(s,e),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},dN=s,dN}var hN,g6;function CZ(){if(g6)return hN;g6=1;var r=Xs().EventEmitter,e=qt(),t=Bd(),n=A7(),s=M7();function i(a,o){var c=this;r.call(this);var d=function(){var h=c.ifr=new n(s.transportName,o,a);h.once("message",function(g){if(g){var y;try{y=JSON.parse(g)}catch{c.emit("finish"),c.close();return}var b=y[0],v=y[1];c.emit("finish",b,v)}c.close()}),h.once("close",function(){c.emit("finish"),c.close()})};globalThis.document.body?d():t.attachEvent("load",d)}return e(i,r),i.enabled=function(){return n.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},hN=i,hN}var fN,y6;function EZ(){if(y6)return fN;y6=1;var r=Xs().EventEmitter,e=qt(),t=Fa(),n=h_(),s=mE(),i=Ab(),a=SZ(),o=CZ(),c=k7();function d(h,g){var y=this;r.call(this),setTimeout(function(){y.doXhr(h,g)},0)}return e(d,r),d._getReceiver=function(h,g,y){return y.sameOrigin?new c(g,i):s.enabled?new c(g,s):n.enabled&&y.sameScheme?new c(g,n):o.enabled()?new o(h,g):new c(g,a)},d.prototype.doXhr=function(h,g){var y=this,b=t.addPath(h,"/info");this.xo=d._getReceiver(h,b,g),this.timeoutRef=setTimeout(function(){y._cleanup(!1),y.emit("finish")},d.timeout),this.xo.once("finish",function(v,w){y._cleanup(!0),y.emit("finish",v,w)})},d.prototype._cleanup=function(h){clearTimeout(this.timeoutRef),this.timeoutRef=null,!h&&this.xo&&this.xo.close(),this.xo=null},d.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},d.timeout=8e3,fN=d,fN}var pN,x6;function TZ(){if(x6)return pN;x6=1;var r=kb();function e(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(t,n){r.postMessage("c",JSON.stringify([t,n]))},e.prototype._transportMessage=function(t){r.postMessage("t",t)},e.prototype._send=function(t){this._transport.send(t)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},pN=e,pN}var mN,b6;function AZ(){if(b6)return mN;b6=1;var r=Fa(),e=Bd(),t=TZ(),n=M7(),s=kb(),i=N7(),a=function(){};return mN=function(o,c){var d={};c.forEach(function(g){g.facadeTransport&&(d[g.facadeTransport.transportName]=g.facadeTransport)}),d[n.transportName]=n;var h;o.bootstrap_iframe=function(){var g;s.currentWindowId=i.hash.slice(1);var y=function(b){if(b.source===parent&&(typeof h>"u"&&(h=b.origin),b.origin===h)){var v;try{v=JSON.parse(b.data)}catch{a("bad json",b.data);return}if(v.windowId===s.currentWindowId)switch(v.type){case"s":var w;try{w=JSON.parse(v.data)}catch{a("bad json",v.data);break}var E=w[0],C=w[1],N=w[2],A=w[3];if(E!==o.version)throw new Error('Incompatible SockJS! Main site uses: "'+E+'", the iframe: "'+o.version+'".');if(!r.isOriginEqual(N,i.href)||!r.isOriginEqual(A,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+N+", "+A+")");g=new t(new d[C](N,A));break;case"m":g._send(v.data);break;case"c":g&&g._close(),g=null;break}}};e.attachEvent("message",y),s.postMessage("s")}},mN}var gN,v6;function NZ(){if(v6)return gN;v6=1,gZ();var r=b7(),e=qt(),t=l0(),n=yZ(),s=Fa(),i=Bd(),a=xZ(),o=f_(),c=Nb(),d=bZ(),h=p_(),g=v7(),y=N7(),b=vZ(),v=wZ(),w=EZ(),E=function(){},C;function N(k,M,O){if(!(this instanceof N))return new N(k,M,O);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=N.CONNECTING,this.extensions="",this.protocol="",O=O||{},O.protocols_whitelist&&d.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=O.transports,this._transportOptions=O.transportOptions||{},this._timeout=O.timeout||0;var P=O.sessionId||8;if(typeof P=="function")this._generateSessionId=P;else if(typeof P=="number")this._generateSessionId=function(){return t.string(P)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=O.server||t.numberString(1e3);var F=new r(k);if(!F.host||!F.protocol)throw new SyntaxError("The URL '"+k+"' is invalid");if(F.hash)throw new SyntaxError("The URL must not contain a fragment");if(F.protocol!=="http:"&&F.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+F.protocol+"' is not allowed.");var H=F.protocol==="https:";if(y.protocol==="https:"&&!H&&!s.isLoopbackAddr(F.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");M?Array.isArray(M)||(M=[M]):M=[];var ee=M.sort();ee.forEach(function(J,V){if(!J)throw new SyntaxError("The protocols entry '"+J+"' is invalid.");if(V<ee.length-1&&J===ee[V+1])throw new SyntaxError("The protocols entry '"+J+"' is duplicated.")});var G=s.getOrigin(y.href);this._origin=G?G.toLowerCase():null,F.set("pathname",F.pathname.replace(/\/+$/,"")),this.url=F.href,E("using url",this.url),this._urlInfo={nullOrigin:!c.hasDomain(),sameOrigin:s.isOriginEqual(this.url,y.href),sameScheme:s.isSchemeEqual(this.url,y.href)},this._ir=new w(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}e(N,g);function A(k){return k===1e3||k>=3e3&&k<=4999}return N.prototype.close=function(k,M){if(k&&!A(k))throw new Error("InvalidAccessError: Invalid code");if(M&&M.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===N.CLOSING||this.readyState===N.CLOSED)){var O=!0;this._close(k||1e3,M||"Normal closure",O)}},N.prototype.send=function(k){if(typeof k!="string"&&(k=""+k),this.readyState===N.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===N.OPEN&&this._transport.send(n.quote(k))},N.version=T7(),N.CONNECTING=0,N.OPEN=1,N.CLOSING=2,N.CLOSED=3,N.prototype._receiveInfo=function(k,M){if(this._ir=null,!k){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(M),this._transUrl=k.base_url?k.base_url:this.url,k=o.extend(k,this._urlInfo);var O=C.filterToEnabled(this._transportsWhitelist,k);this._transports=O.main,E(this._transports.length+" enabled transports"),this._connect()},N.prototype._connect=function(){for(var k=this._transports.shift();k;k=this._transports.shift()){if(E("attempt",k.transportName),k.needBody&&(!globalThis.document.body||typeof globalThis.document.readyState<"u"&&globalThis.document.readyState!=="complete"&&globalThis.document.readyState!=="interactive")){this._transports.unshift(k),i.attachEvent("load",this._connect.bind(this));return}var M=Math.max(this._timeout,this._rto*k.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),M);var O=s.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),P=this._transportOptions[k.transportName],F=new k(O,this._transUrl,P);F.on("message",this._transportMessage.bind(this)),F.once("close",this._transportClose.bind(this)),F.transportName=k.transportName,this._transport=F;return}this._close(2e3,"All transports failed",!1)},N.prototype._transportTimeout=function(){this.readyState===N.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},N.prototype._transportMessage=function(k){var M=this,O=k.slice(0,1),P=k.slice(1),F;switch(O){case"o":this._open();return;case"h":this.dispatchEvent(new h("heartbeat")),E("heartbeat",this.transport);return}if(P)try{F=JSON.parse(P)}catch{}if(!(typeof F>"u"))switch(O){case"a":Array.isArray(F)&&F.forEach(function(H){E("message",M.transport),M.dispatchEvent(new v(H))});break;case"m":E("message",this.transport),this.dispatchEvent(new v(F));break;case"c":Array.isArray(F)&&F.length===2&&this._close(F[0],F[1],!0);break}},N.prototype._transportClose=function(k,M){if(E("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!A(k)&&k!==2e3&&this.readyState===N.CONNECTING){this._connect();return}this._close(k,M)},N.prototype._open=function(){E("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===N.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=N.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new h("open")),E("connected",this.transport)):this._close(1006,"Server lost session")},N.prototype._close=function(k,M,O){E("_close",this.transport,k,M,O,this.readyState);var P=!1;if(this._ir&&(P=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===N.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=N.CLOSING,setTimeout((function(){this.readyState=N.CLOSED,P&&this.dispatchEvent(new h("error"));var F=new b("close");F.wasClean=O||!1,F.code=k||1e3,F.reason=M,this.dispatchEvent(F),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},N.prototype.countRTO=function(k){return k>100?4*k:300+k},gN=function(k){return C=a(k),AZ()(N,k),N},gN}var yN,w6;function kZ(){if(w6)return yN;w6=1;var r=mZ();return yN=NZ()(r),"_sockjs_onload"in globalThis&&setTimeout(globalThis._sockjs_onload,1),yN}var MZ=kZ();const _7=Qf(MZ);function _Z(r,e){r.terminate=function(){const t=()=>{};this.onerror=t,this.onmessage=t,this.onopen=t;const n=new Date,s=Math.random().toString().substring(2,8),i=this.onclose;this.onclose=a=>{const o=new Date().getTime()-n.getTime();e(`Discarded socket (#${s})  closed after ${o}ms, with code/reason: ${a.code}/${a.reason}`)},this.close(),i==null||i.call(r,{code:4001,reason:`Quick discarding socket (#${s}) without waiting for the shutdown sequence.`,wasClean:!1})}}const $y={LF:`
`,NULL:"\0"};class Cu{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){const{command:t,headers:n,body:s,binaryBody:i,escapeHeaderValues:a,skipContentLengthHeader:o}=e;this.command=t,this.headers=Object.assign({},n||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=s||"",this.isBinaryBody=!1),this.escapeHeaderValues=a||!1,this.skipContentLengthHeader=o||!1}static fromRawFrame(e,t){const n={},s=i=>i.replace(/^\s+|\s+$/g,"");for(const i of e.headers.reverse()){i.indexOf(":");const a=s(i[0]);let o=s(i[1]);t&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(o=Cu.hdrValueUnEscape(o)),n[a]=o}return new Cu({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?Cu.toUnit8Array(e,this._binaryBody).buffer:e+this._body+$y.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const n=this.headers[t];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${t}:${Cu.hdrValueEscape(`${n}`)}`):e.push(`${t}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join($y.LF)+$y.LF+$y.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,t){const n=new TextEncoder().encode(e),s=new Uint8Array([0]),i=new Uint8Array(n.length+t.length+s.length);return i.set(n),i.set(t,n.length),i.set(s,n.length+t.length),i}static marshall(e){return new Cu(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const S6=0,gw=10,yw=13,jZ=58;class DZ{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let n;if(typeof e=="string"?n=this._encoder.encode(e):n=new Uint8Array(e),t&&n[n.length-1]!==0){const s=new Uint8Array(n.length+1);s.set(n,0),s[n.length]=0,n=s}for(let s=0;s<n.length;s++){const i=n[s];this._onByte(i)}}_collectFrame(e){if(e!==S6&&e!==yw){if(e===gw){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==yw){if(e===gw){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==yw){if(e===gw){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===jZ){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==yw){if(e===gw){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){const e=this._results.headers.filter(t=>t[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===S6){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Eu;(function(r){r[r.CONNECTING=0]="CONNECTING",r[r.OPEN=1]="OPEN",r[r.CLOSING=2]="CLOSING",r[r.CLOSED=3]="CLOSED"})(Eu||(Eu={}));var Xa;(function(r){r[r.ACTIVE=0]="ACTIVE",r[r.DEACTIVATING=1]="DEACTIVATING",r[r.INACTIVE=2]="INACTIVE"})(Xa||(Xa={}));var $S;(function(r){r[r.LINEAR=0]="LINEAR",r[r.EXPONENTIAL=1]="EXPONENTIAL"})($S||($S={}));var Ex;(function(r){r.Interval="interval",r.Worker="worker"})(Ex||(Ex={}));class OZ{constructor(e,t=Ex.Interval,n){this._interval=e,this._strategy=t,this._debug=n,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===Ex.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const t=Date.now();this._timer=setInterval(()=>{e(Date.now()-t)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class $s{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}$s.V1_0="1.0";$s.V1_1="1.1";$s.V1_2="1.2";$s.default=new $s([$s.V1_2,$s.V1_1,$s.V1_0]);class RZ{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,n){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:s=>{this.debug(`connected to server ${s.headers.server}`),this._connected=!0,this._connectedVersion=s.headers.version,this._connectedVersion===$s.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(s.headers),this.onConnect(s)},MESSAGE:s=>{const i=s.headers.subscription,a=this._subscriptions[i]||this.onUnhandledMessage,o=s,c=this,d=this._connectedVersion===$s.V1_2?o.headers.ack:o.headers["message-id"];o.ack=(h={})=>c.ack(d,i,h),o.nack=(h={})=>c.nack(d,i,h),a(o)},RECEIPT:s=>{const i=this._receiptWatchers[s.headers["receipt-id"]];i?(i(s),delete this._receiptWatchers[s.headers["receipt-id"]]):this.onUnhandledReceipt(s)},ERROR:s=>{this.onStompError(s)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatToleranceMultiplier=n.heartbeatGracePeriods,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame,this.onHeartbeatReceived=n.onHeartbeatReceived,this.onHeartbeatLost=n.onHeartbeatLost}start(){const e=new DZ(t=>{const n=Cu.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${n}`),(this._serverFrameHandlers[n.command]||this.onUnhandledFrame)(n)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const n=t.data instanceof ArrayBuffer?new TextDecoder().decode(t.data):t.data;this.debug(`<<< ${n}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{const t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(e){if(e.version!==$s.V1_1&&e.version!==$s.V1_2||!e["heart-beat"])return;const[t,n]=e["heart-beat"].split(",").map(s=>parseInt(s,10));if(this.heartbeatOutgoing!==0&&n!==0){const s=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${s}ms`),this._pinger=new OZ(s,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Eu.OPEN&&(this._webSocket.send($y.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&t!==0){const s=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${s}ms`),this._ponger=setInterval(()=>{const i=Date.now()-this._lastServerActivityTS;i>s*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${i}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},s)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Eu.CONNECTING||this._webSocket.readyState===Eu.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&_Z(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){const{command:t,headers:n,body:s,binaryBody:i,skipContentLengthHeader:a}=e,o=new Cu({command:t,headers:n,body:s,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:a});let c=o.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${o}`),this.forceBinaryWSFrames&&typeof c=="string"&&(c=new TextEncoder().encode(c)),typeof c!="string"||!this.splitLargeFrames)this._webSocket.send(c);else{let d=c;for(;d.length>0;){const h=d.substring(0,this.maxWebSocketChunkSize);d=d.substring(this.maxWebSocketChunkSize),this._webSocket.send(h),this.debug(`chunk sent = ${h.length}, remaining = ${d.length}`)}}}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===Eu.CONNECTING||this._webSocket.readyState===Eu.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:n,body:s,binaryBody:i,skipContentLengthHeader:a}=e,o=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:o,body:s,binaryBody:i,skipContentLengthHeader:a})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,n={}){n=Object.assign({},n),n.id||(n.id=`sub-${this._counter++}`),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});const s=this;return{id:n.id,unsubscribe(i){return s.unsubscribe(n.id,i)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:t}});const n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,n={}){n=Object.assign({},n),this._connectedVersion===$s.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t,n={}){return n=Object.assign({},n),this._connectedVersion===$s.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}}class j7{get webSocket(){var e;return(e=this._stompHandler)==null?void 0:e._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Xa.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=$s.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=$S.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=Ex.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Xa.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onHeartbeatReceived=t,this.onHeartbeatLost=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Xa.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Xa.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new RZ(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===Xa.DEACTIVATING&&this._changeState(Xa.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===$S.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(e={}){var i;const t=e.force||!1,n=this.active;let s;if(this.state===Xa.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Xa.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Eu.CLOSED){const a=this._stompHandler.onWebSocketClose;s=new Promise((o,c)=>{this._stompHandler.onWebSocketClose=d=>{a(d),o()}})}else return this._changeState(Xa.INACTIVE),Promise.resolve();return t?(i=this._stompHandler)==null||i.discardWebsocket():n&&this._disposeStompHandler(),s}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,n={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,n)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,n={}){this._checkConnection(),this._stompHandler.ack(e,t,n)}nack(e,t,n={}){this._checkConnection(),this._stompHandler.nack(e,t,n)}}function C6(){const r=(()=>{try{return JSON.parse(localStorage.getItem("userData")||"{}")}catch{return{}}})(),e=String((r==null?void 0:r.id)??(r==null?void 0:r.userId)??""),[t,n]=I.useState(!1),[s,i]=I.useState([]),[a,o]=I.useState(null),[c,d]=I.useState({}),[h,g]=I.useState(""),y=I.useRef({}),b=I.useRef({}),v=I.useRef(null),w=I.useRef(null),E=I.useRef(1),C=I.useRef(null),N=(G,J)=>{const V=Number(G),X=Number(J);if(!Number.isNaN(V)&&!Number.isNaN(X))return V<X?`${V}-${X}`:`${X}-${V}`;const K=String(G),q=String(J);return K<q?`${K}-${q}`:`${q}-${K}`},A=G=>(y.current[G]||(y.current[G]=new Set),y.current[G]),k=async G=>{if(e)try{await fetch(`${zt}public/chat/contacts?u1=${encodeURIComponent(e)}&u2=${encodeURIComponent(String(G))}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}})}catch(J){console.error("Failed to add user to chat list",J)}};I.useEffect(()=>{const G=J=>{var X;const V=(X=J==null?void 0:J.detail)==null?void 0:X.toId;V&&(n(!0),o(String(V)),k(V))};return window.addEventListener("app:open-chat",G),()=>window.removeEventListener("app:open-chat",G)},[]),I.useEffect(()=>{if(!t||!e)return;let G=!1;return(async()=>{try{const J=await fetch(`${zt}public/chat/contacts?u=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}});if(!J.ok)throw new Error(await J.text()||"Failed to load contacts");const V=await J.json();if(G)return;const X=(V||[]).map(K=>{var q,Z,he,te,pe,W,ne;return{id:String(((q=K==null?void 0:K.user)==null?void 0:q.id)??(K==null?void 0:K.id)??(K==null?void 0:K.userId)??(K==null?void 0:K.contactId)),avatar:((Z=K==null?void 0:K.user)==null?void 0:Z.imageUrl)||`https://ui-avatars.com/api/?name=${encodeURIComponent(((he=K==null?void 0:K.user)==null?void 0:he.username)||(K==null?void 0:K.name)||"User")}`,alt:((te=K==null?void 0:K.user)==null?void 0:te.username)||(K==null?void 0:K.name)||"Contact",title:((pe=K==null?void 0:K.user)==null?void 0:pe.username)||(K==null?void 0:K.name)||"Contact",subtitle:((W=K==null?void 0:K.lastMessage)==null?void 0:W.content)??(K==null?void 0:K.lastMessage)??"",date:(ne=K==null?void 0:K.lastMessage)!=null&&ne.timestamp?new Date(K.lastMessage.timestamp):void 0,unread:Number((K==null?void 0:K.unread)??(K==null?void 0:K.unreadCount)??0)}});i(X)}catch(J){console.error("Load contacts failed",J)}})(),()=>{G=!0}},[t,e]);const M=G=>{var V;if(!v.current||!v.current.connected||!G)return;try{(V=w.current)==null||V.unsubscribe()}catch(X){console.warn("unsubscribe error",X)}const J=`/topic/chat/${N(e,G)}`;w.current=v.current.subscribe(J,X=>{var K;try{const q=JSON.parse(X.body),Z=String(q.fromId??((K=q.from)==null?void 0:K.id)??""),he={id:q.id??`srv-${q.timestamp??Date.now()}`,clientId:q.clientId,position:Z===e?"right":"left",type:"text",text:q.content,date:new Date(q.timestamp??Date.now())};d(te=>{const pe=te[G]||[],W=A(G),ne=pe.findIndex(me=>he.clientId&&me.clientId===he.clientId||he.id&&me.id===he.id);if(ne!==-1){const me=[...pe];return me[ne]={...me[ne],...he},he.id&&W.add(he.id),he.clientId&&W.add(he.clientId),{...te,[G]:me}}return he.id&&W.has(he.id)||he.clientId&&W.has(he.clientId)?te:(he.id&&W.add(he.id),he.clientId&&W.add(he.clientId),{...te,[G]:[...pe,he]})})}catch(q){console.error("Invalid frame",q)}})},O=()=>{var G;if((G=v.current)!=null&&G.connected)try{const J=localStorage.getItem("chat.pendingSend");if(!J)return;const V=JSON.parse(J);if(!(V!=null&&V.fromId)||!(V!=null&&V.toId)||!(V!=null&&V.content)){localStorage.removeItem("chat.pendingSend");return}v.current.publish({destination:"/app/chat.direct",body:JSON.stringify(V)}),localStorage.removeItem("chat.pendingSend")}catch(J){console.warn("flushPendingSend failed",J)}};I.useEffect(()=>{if(!t||v.current)return;const G=new j7({webSocketFactory:()=>new _7("http://localhost:8080/ws"),reconnectDelay:3e3,onConnect:()=>{a&&M(a),O()},onStompError:J=>{var V;return console.error("Broker error:",(V=J.headers)==null?void 0:V.message,J.body)}});return G.activate(),v.current=G,()=>{var J;try{(J=w.current)==null||J.unsubscribe()}catch(V){console.warn("unsubscribe error",V)}G.deactivate(),v.current=null,w.current=null}},[t,a]),I.useEffect(()=>{if(!a||!e)return;let G=!1;return(async()=>{var J,V;if(b.current[a]){(J=v.current)!=null&&J.connected&&M(a);return}try{const X=`${zt}public/chat/direct?u1=${encodeURIComponent(e)}&u2=${encodeURIComponent(a)}&page=0&size=50`,K=await fetch(X,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")||""}`}});if(!K.ok)throw new Error(await K.text()||"Failed to load chat history");const q=await K.json();if(G)return;const Z=A(a),he=(q||[]).map(te=>{var pe;return{id:te.id??`srv-${te.timestamp??Date.now()}`,clientId:te.clientId,position:String(((pe=te.from)==null?void 0:pe.id)??te.fromId??"")===e?"right":"left",type:"text",text:te.content,date:new Date(te.timestamp??Date.now())}});he.forEach(te=>{te.id&&Z.add(te.id),te.clientId&&Z.add(te.clientId)}),d(te=>({...te,[a]:he})),b.current[a]=!0,(V=v.current)!=null&&V.connected&&M(a)}catch(X){console.error("Load history failed",X)}})(),()=>{var J;G=!0;try{(J=w.current)==null||J.unsubscribe()}catch(V){console.warn("unsubscribe error",V)}w.current=null}},[a,e]);const P=c[a]||[];I.useEffect(()=>{const G=C.current;G&&(G.scrollTop=G.scrollHeight)},[t,a]),I.useEffect(()=>{const G=C.current;if(!G)return;G.scrollHeight-G.scrollTop-G.clientHeight<60&&(G.scrollTop=G.scrollHeight)},[P]);const F=G=>o(G==null?void 0:G.id),H=()=>o(null),ee=()=>{if(!a||!h.trim()||!e)return;const G=h.trim(),J=`local-${e}-${Date.now()}-${E.current++}`;g("");const V={id:J,clientId:J,position:"right",type:"text",text:G,date:new Date};d(q=>({...q,[a]:[...q[a]||[],V]}));const X=v.current,K={fromId:e,toId:a,content:G,clientId:J};if(X&&X.connected)try{X.publish({destination:"/app/chat.direct",body:JSON.stringify(K)})}catch(q){console.error("publish error",q)}else localStorage.setItem("chat.pendingSend",JSON.stringify(K)),console.warn("Not connected to chat server, will send when connected")};return f.jsxs(f.Fragment,{children:[!t&&f.jsx("button",{type:"button",onClick:()=>n(!0),className:"fixed bottom-6 right-6 z-[1000] w-14 h-14 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg flex items-center justify-center","aria-label":"Open chat",children:f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:f.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V6a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v9z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t&&f.jsxs("div",{className:"fixed bottom-24 right-6 z-[1000] w-[360px] max-w-[95vw] h-[520px] bg-white border border-gray-200 rounded-xl shadow-2xl flex flex-col",children:[f.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b",children:[f.jsx("div",{className:"font-medium text-gray-800",children:a?"Conversation":"Messages"}),f.jsxs("div",{className:"flex items-center gap-2",children:[a&&f.jsx("button",{onClick:H,className:"text-sm text-gray-600 hover:text-gray-800 px-2 py-1 rounded","aria-label":"Back to chats",children:"Back"}),f.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-800","aria-label":"Close chat",children:"✕"})]})]}),a?f.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[f.jsx("div",{ref:C,className:"flex-1 min-h-0 overflow-y-auto",children:f.jsx(QQ,{className:"!p-3",dataSource:P,lockable:!0,toBottomHeight:"100%"})}),f.jsx("div",{className:"border-t p-2",children:f.jsx(eZ,{placeholder:"Type a message...",value:h,onChange:G=>g(G.target.value),rightButtons:f.jsx("button",{onClick:ee,className:"bg-blue-600 text-white px-3 py-1 rounded",children:"Send"})})})]}):f.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:f.jsx(KQ,{className:"!h-full",dataSource:s,onClick:F})})]})]})}function LZ(){const[r,e]=I.useState({text:"",location:""}),[t,n]=I.useState(null),[s,i]=I.useState([]),[a,o]=I.useState(!1),[c,d]=I.useState(null),[h,g]=I.useState([]),[y,b]=I.useState(!1);function v(w){const E=w.target.value;e(A=>({...A,text:E}));const C=JSON.parse(localStorage.getItem("DoctorsList")||"[]");i(C);const N=C.filter(A=>A.fullName&&A.fullName.toLowerCase().includes(E.trim().toLowerCase()));g(N),i(N),b(E!=="")}return f.jsxs("div",{className:"w-full flex flex-col min-h-screen bg-[#F5F5F5]",children:[f.jsxs("div",{className:"w-full h-[800px] bg-[#4B34DD] relative overflow-hidden",children:[f.jsx(Xy,{}),f.jsxs("div",{className:`pt-2 pl-6\r
                    md:pl-[8%] md:pt-32\r
                    text-[#C0D2FF]  relative z-10`,children:[f.jsx("div",{className:"text-3xl md:text-5xl font-normal tracking-tight OutlineText",children:"Feel better about"}),f.jsx("div",{className:"text-3xl md:text-5xl font-normal tracking-tight OutlineText",children:"finding healthcare"}),f.jsx("div",{className:`text-[0.8rem] pt-5 text-[#A7EFFF] font-light\r
            md:text-2xl md:pt-20 `,children:"At Healthgrades , we take the guesswork out of finding "}),f.jsx("div",{className:`text-[0.8rem] font-light text-[#A7EFFF]\r
             md:text-2xl`,children:"the right doctors , clinic and care for your family. "}),f.jsxs("div",{className:"flex space-x-15 pt-20",children:[f.jsxs("div",{className:"w-[260px] h-[60px] bg-[#2C2C2C] rounded-xl flex",children:[f.jsxs("svg",{width:"47",height:"43",viewBox:"0 0 47 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"17px",marginLeft:"20px"},children:[f.jsx("path",{d:"M0 38H47V43H0V38Z",fill:"#FFCCFA"}),f.jsx("path",{d:"M29 26.25V23.75C29 22.4239 28.4732 21.1521 27.5355 20.2145C26.5979 19.2768 25.3261 18.75 24 18.75H15.25C13.9239 18.75 12.6521 19.2768 11.7145 20.2145C10.7768 21.1521 10.25 22.4239 10.25 23.75V26.25M31.5 10L37.75 16.25M37.75 10L31.5 16.25M24.625 8.75C24.625 11.5114 22.3864 13.75 19.625 13.75C16.8636 13.75 14.625 11.5114 14.625 8.75C14.625 5.98858 16.8636 3.75 19.625 3.75C22.3864 3.75 24.625 5.98858 24.625 8.75Z",stroke:"#95D2FF",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),f.jsxs("div",{className:"pl-6 pt-1",children:[f.jsx("p",{className:"italic font-light text-[#F5F5F5] leading-none font-[Inter] text-[1rem] pt-2 ",children:"Profiles for Every"}),f.jsx("p",{className:"italic font-light text-[#F5F5F5] font-[Inter] text-[1rem] ",children:"Doctor in Egypt"})]})]}),f.jsxs("div",{className:"w-[260px] h-[60px] bg-[#2C2C2C] rounded-xl flex",children:[f.jsxs("svg",{width:"47",height:"45",viewBox:"0 0 47 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginTop:"15px",marginLeft:"20px"},children:[f.jsx("path",{d:"M0 40H47V45H0V40Z",fill:"#FFCCFA"}),f.jsx("path",{d:"M18 22.5L23 18.6875L28 22.5L26.125 16.3125L31.125 12.75H25L23 6.25L21 12.75H14.875L19.875 16.3125L18 22.5ZM23 27.5C21.2708 27.5 19.6458 27.1719 18.125 26.5156C16.6042 25.8594 15.2812 24.9688 14.1562 23.8438C13.0312 22.7188 12.1406 21.3958 11.4844 19.875C10.8281 18.3542 10.5 16.7292 10.5 15C10.5 13.2708 10.8281 11.6458 11.4844 10.125C12.1406 8.60417 13.0312 7.28125 14.1562 6.15625C15.2812 5.03125 16.6042 4.14063 18.125 3.48438C19.6458 2.82812 21.2708 2.5 23 2.5C24.7292 2.5 26.3542 2.82812 27.875 3.48438C29.3958 4.14063 30.7188 5.03125 31.8438 6.15625C32.9688 7.28125 33.8594 8.60417 34.5156 10.125C35.1719 11.6458 35.5 13.2708 35.5 15C35.5 16.7292 35.1719 18.3542 34.5156 19.875C33.8594 21.3958 32.9688 22.7188 31.8438 23.8438C30.7188 24.9688 29.3958 25.8594 27.875 26.5156C26.3542 27.1719 24.7292 27.5 23 27.5Z",fill:"#95D2FF"})]}),f.jsxs("div",{className:"pl-6 pt-1",children:[f.jsx("p",{className:"italic font-light text-[#F5F5F5] leading-none font-[Inter] text-[1rem] pt-2 ",children:"More than 10 Million"}),f.jsx("p",{className:"italic font-light text-[#F5F5F5]  font-[Inter] text-[1rem] ",children:"patient Ratings"})]})]})]})]}),f.jsx("img",{src:"/images/Main%20doc.png",alt:"Hero",className:`absolute top-[40] right-4\r
                        md:top-25 md:right-[5%] w-1/2 md:w-3xl\r
                        object-contain z-0`})]}),f.jsxs("div",{className:`grid grid-cols-7 gap-[4vw] w-[72.9vw] ${h.length<4&&h.length!==0?"h-[144px]":"h-[110px]"}
                bg-[#F5F5F5] absolute top-[calc(800px-50px)]
                left-[27vw] transform -translate-x-[13.54vw]
                rounded-2xl items-start justify-center pt-6 shadow-xl`,children:[f.jsxs("div",{className:"pl-10 col-span-3",children:[f.jsx(MB,{text:"Search Doctor",Input:r.text,change:v,width:"28vw"}),f.jsx("div",{className:"flex flex-row space-x-3 mt-3",children:h.length<4&&h.map(w=>f.jsx("button",{type:"button",onClick:()=>{e(C=>({...C,text:w.fullName}));const E=s.filter(C=>C.fullName===w.fullName);i(E),console.log(`clicked name :${w.fullName}`)},className:"bg-white rounded-lg px-2 py-1 text-[#4A498C] hover:bg-blue-500",children:w.fullName}))})]}),f.jsx("div",{className:"col-span-3 pl-5",children:f.jsx(_B,{location:"Set your location",width:"28vw"})}),f.jsxs("svg",{width:"56",height:"59",viewBox:"0 0 56 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"col-span-1",children:[f.jsx("path",{d:"M0 10C0 4.47715 4.47715 0 10 0H46C51.5229 0 56 4.47715 56 10V49C56 54.5228 51.5229 59 46 59H10C4.47715 59 0 54.5228 0 49V10Z",fill:"#4A498C"}),f.jsx("path",{d:"M37.625 40.5L32.7312 35.425M35.375 28.8333C35.375 33.988 31.3456 38.1667 26.375 38.1667C21.4044 38.1667 17.375 33.988 17.375 28.8333C17.375 23.6787 21.4044 19.5 26.375 19.5C31.3456 19.5 35.375 23.6787 35.375 28.8333Z",stroke:"#EBFFEE",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),f.jsxs("div",{className:"flex-1 w-full",children:[f.jsx("div",{className:"font-[Montserrat Alternates] pt-30 pl-[14vw] text-[#525252] font-medium text-xl",children:"Specialties"}),f.jsx(eQ,{setActiveIndex:n,activeIndex:t,setDoctorsList:i}),a?f.jsx(EK,{selectedDoctor:c,setSelectedDoctor:d,setIsPopupOpen:o,setDoctorsList:i}):null,t!==null||y===!0?f.jsx(f.Fragment,{children:s.length>0?f.jsx("div",{className:"justify-center items-center grid grid-cols-[600px_600px] gap-10 pt-20",children:f.jsx(sQ,{setIsPopupOpen:o,selectedDoctor:c,setSelectedDoctor:d,Doctors:s})}):f.jsxs("div",{className:"flex space-x-8 justify-center items-center w-full h-40",children:[f.jsx("div",{className:"loader"}),f.jsx("p",{children:" We are trying to contact servers "})]})}):f.jsx(tQ,{})]}),f.jsxs("footer",{className:"mt-20 bg-[#1F2937] text-gray-200",children:[f.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 grid gap-10 md:grid-cols-4",children:[f.jsxs("div",{className:"md:col-span-2 space-y-3",children:[f.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-[#A7EFFF]",children:"Medicare"}),f.jsx("p",{className:"text-sm text-gray-300 max-w-md",children:"We help you find the right doctors, clinics, and care for your family with trusted profiles and real patient ratings."}),f.jsx("p",{className:"text-xs text-gray-400",children:"Available 24/7 – wherever you are in Egypt."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-[#C0D2FF] mb-3",children:"Quick Links"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#top",className:"hover:text-[#A7EFFF] transition-colors",children:"Search doctors"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"My profile"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"My reservations"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"Medical history"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-[#C0D2FF] mb-3",children:"Contact & Support"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{className:"text-gray-300",children:"support@medicare.eg"}),f.jsx("li",{className:"text-gray-300",children:"+20 (0) 123 456 789"}),f.jsx("li",{className:"text-gray-400 text-xs",children:"Sun – Thu, 9:00 AM – 9:00 PM"})]})]})]}),f.jsx("div",{className:"border-t border-gray-700",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row items-center justify-between text-xs text-gray-400",children:[f.jsxs("p",{children:["© ",new Date().getFullYear()," Medicare. All rights reserved."]}),f.jsxs("div",{className:"space-x-4 mt-2 md:mt-0",children:[f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Privacy"}),f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Terms"}),f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Cookies"})]})]})})]})]})}const PZ=()=>{const r=yo(),[e,t]=I.useState(!1),[n,s]=I.useState(""),[i,a]=I.useState(!1),[o,c]=I.useState({userName:"",email:"",fullName:"",password:"",confirmPassword:"",gender:"male",bloodType:"",dateOfBirth:"",address:"",phoneNumber:"",nationalId:"",cityId:1,age:"",role:["User"],emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:""}),d=b=>{const{name:v,value:w}=b.target;c({...o,[v]:w})},h=b=>{c({...o,role:[b.target.value]})},g=()=>!o.userName||!o.email||!o.fullName||!o.password?(s("Please fill in all required fields"),!1):o.password!==o.confirmPassword?(s("Passwords do not match"),!1):o.password.length<6?(s("Password must be at least 6 characters"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)?!0:(s("Please enter a valid email address"),!1),y=async b=>{var w,E;if(b.preventDefault(),!g())return;t(!0),s("");const v={...o};delete v.confirmPassword;try{await Lf.signup(v),a("Account created successfully! You can now login."),c({userName:"",email:"",fullName:"",role:["Admin"],password:"",confirmPassword:"",gender:"male",bloodType:"",dateOfBirth:"",address:"",phoneNumber:"",nationalId:"",cityId:1,age:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:""}),await Lf.login({username:v.userName,password:v.password}),r("/")}catch(C){const N=((E=(w=C==null?void 0:C.response)==null?void 0:w.data)==null?void 0:E.message)||(C==null?void 0:C.message)||"An error occurred during signup";s(N)}finally{t(!1)}};return f.jsx("div",{className:"signup-container",children:f.jsxs("div",{className:"signup-form-wrapper",children:[f.jsx("h2",{children:"Create Your Medicare Account"}),f.jsxs("form",{onSubmit:y,className:"signup-form",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),f.jsx("input",{type:"text",id:"fullName",name:"fullName",value:o.fullName,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"userName",children:"Username *"}),f.jsx("input",{type:"text",id:"userName",name:"userName",value:o.userName,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email Address *"}),f.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password *"}),f.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),f.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:d,required:!0})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"gender",children:"Gender"}),f.jsxs("select",{id:"gender",name:"gender",value:o.gender,onChange:d,children:[f.jsx("option",{value:"male",children:"Male"}),f.jsx("option",{value:"female",children:"Female"}),f.jsx("option",{value:"other",children:"Other"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"age",children:"Age"}),f.jsx("input",{type:"number",id:"age",name:"age",min:"0",max:"120",value:o.age,onChange:d})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"bloodType",children:"Blood Type"}),f.jsxs("select",{id:"bloodType",name:"bloodType",value:o.bloodType,onChange:d,children:[f.jsx("option",{value:"",children:"Select Blood Type"}),f.jsx("option",{value:"A_POSITIVE",children:"A+"}),f.jsx("option",{value:"A_NEGATIVE",children:"A-"}),f.jsx("option",{value:"B_POSITIVE",children:"B+"}),f.jsx("option",{value:"B_NEGATIVE",children:"B-"}),f.jsx("option",{value:"AB_POSITIVE",children:"AB+"}),f.jsx("option",{value:"AB_NEGATIVE",children:"AB-"}),f.jsx("option",{value:"O_POSITIVE",children:"O+"}),f.jsx("option",{value:"O_NEGATIVE",children:"O-"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"dateOfBirth",children:"Date of Birth"}),f.jsx("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:o.dateOfBirth,onChange:d})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"address",children:"Address"}),f.jsx("input",{type:"text",id:"address",name:"address",value:o.address,onChange:d})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"nationalId",children:"National ID *"}),f.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:o.nationalId,onChange:d,required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phoneNumber",children:"phone number *"}),f.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",value:o.phoneNumber,onChange:d,required:!0})]}),f.jsx("h3",{style:{marginTop:"1.5rem",marginBottom:"1rem",color:"#2c3e50"},children:"Emergency Contact"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"emergencyContactName",children:"Emergency Contact Name"}),f.jsx("input",{type:"text",id:"emergencyContactName",name:"emergencyContactName",value:o.emergencyContactName,onChange:d})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"emergencyContactPhone",children:"Emergency Contact Phone"}),f.jsx("input",{type:"text",id:"emergencyContactPhone",name:"emergencyContactPhone",value:o.emergencyContactPhone,onChange:d})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"emergencyContactRelation",children:"Relation"}),f.jsxs("select",{id:"emergencyContactRelation",name:"emergencyContactRelation",value:o.emergencyContactRelation,onChange:d,children:[f.jsx("option",{value:"",children:"Select Relation"}),f.jsx("option",{value:"Parent",children:"Parent"}),f.jsx("option",{value:"Spouse",children:"Spouse"}),f.jsx("option",{value:"Sibling",children:"Sibling"}),f.jsx("option",{value:"Child",children:"Child"}),f.jsx("option",{value:"Friend",children:"Friend"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"cityId",children:"City"}),f.jsx("select",{id:"cityId",name:"cityId",value:o.cityId,onChange:d,children:kB.map((b,v)=>f.jsxs("option",{value:v+1,children:[" ",b]},b))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"role",children:"Account Type"}),f.jsxs("select",{id:"role",name:"role",value:o.role[0],onChange:h,children:[f.jsx("option",{value:"User",children:"Patient"}),f.jsx("option",{value:"Doctor",children:"Doctor"}),f.jsx("option",{value:"Admin",children:"Administrator"})]})]}),n&&f.jsx("div",{className:"error-message",children:n}),f.jsx("div",{className:"form-actions",children:f.jsx("button",{type:"submit",className:"signup-button",disabled:e,children:e?"Creating Account...":"Create Account"})}),f.jsxs("div",{className:"login-link",children:["Already have an account? ",f.jsx("a",{href:"/login",children:"Login here"})]})]})]})})},IZ=()=>f.jsx("div",{className:"signup-page",children:f.jsx(PZ,{})}),BZ=({children:r})=>{var a;const e=yo(),t=localStorage.getItem("userData"),n=t?JSON.parse(t):null;return!localStorage.getItem("authToken")?(I.useEffect(()=>{e("/login",{replace:!0})},[e]),null):((a=n==null?void 0:n.roles)==null?void 0:a.some(o=>o.name==="ROLE_ADMIN"))?r:f.jsx(fB,{to:"/",replace:!0})},FZ=({children:r})=>{var a;const e=yo(),t=localStorage.getItem("userData"),n=t?JSON.parse(t):null;return!localStorage.getItem("authToken")?(I.useEffect(()=>{e("/login",{replace:!0})},[e]),null):((a=n==null?void 0:n.roles)==null?void 0:a.some(o=>o.name==="ROLE_DOCTOR"))?r:f.jsx(fB,{to:"/",replace:!0})};function D7({appointments:r,onDateSelect:e,user:t,formData:n,setFormData:s,enableVacation:i,setEnableVacation:a}){const o=()=>{const O=localStorage.getItem("lastMonth");return O?new Date(O):new Date},c=()=>{const O=localStorage.getItem("SelectedDate");return O?new Date(O):new Date},[d,h]=I.useState(o),[g,y]=I.useState([]),[b,v]=I.useState(c);I.useEffect(()=>{localStorage.setItem("lastMonth",d.toISOString())},[d]),I.useEffect(()=>{localStorage.setItem("SelectedDate",b.toISOString())},[b]),I.useEffect(()=>{w(d)},[d,r,t,n]);function w(O){const P=O.getFullYear(),F=O.getMonth(),H=[],ee=new Date(P,F,1),J=new Date(P,F+1,0).getDate(),V=ee.getDay(),X=new Date(P,F,0).getDate();for(let q=V-1;q>=0;q--){const Z=X-q;H.push({date:new Date(P,F-1,Z),day:Z,isPreviousMonth:!0,status:"unavailable"})}for(let q=1;q<=J;q++){const Z=new Date(P,F,q),he=E(Z),te=new Date(P,F,q+1).toISOString().split("T")[0];let pe=he;r.find(ne=>ne.date.split("T")[0]===te)&&(pe="booked");const W=Z.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase();Array.isArray(n.vacations)&&n.vacations.some(ne=>{if(typeof ne=="string"){if(/^(SUN|MON|TUE|WED|THU|FRI|SAT)$/i.test(ne))return ne.toUpperCase()===W;if(/^\d{4}-\d{2}-\d{2}/.test(ne))return ne.split("T")[0]===te}return!1})&&(pe="onVacation"),H.push({date:Z,day:q,isCurrentMonth:!0,status:pe})}const K=42-H.length;for(let q=1;q<=K;q++)H.push({date:new Date(P,F+1,q),day:q,isNextMonth:!0,status:"unavailable"});y(H)}function E(O,P){return t.doctor.workingDays.includes(O.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase())?"available":"unavailable"}const C=()=>{h(new Date(d.getFullYear(),d.getMonth()-1,1))},N=()=>{h(new Date(d.getFullYear(),d.getMonth()+1,1))},A=O=>O.toLocaleDateString("en-US",{month:"long",year:"numeric"}),k=O=>{console.log(O.date.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase()),v(O.date),e&&e(O.date);const P=new Date(O.date.getTime()+1440*60*1e3);i===!0&&(n.vacations.includes(P.toISOString().split("T")[0])?s({...n,vacations:n.vacations.filter(F=>F!==P.toISOString().split("T")[0])}):s({...n,vacations:[...n.vacations,P.toISOString().split("T")[0]]})),console.log(n.vacation),console.log(O.date.toISOString().split("T")[0])},M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return f.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[f.jsx("div",{className:"bg-gray-50/50 p-5 ",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Calendar"}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200",onClick:C,children:"◀"}),f.jsx("span",{className:"font-medium",children:A(d)}),f.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200",onClick:N,children:"▶"})]})]})}),f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:M.map(O=>f.jsx("div",{className:"text-sm font-medium text-gray-500",children:O},O))}),f.jsx("div",{className:"grid grid-cols-7 gap-1",children:g.map((O,P)=>{let F="bg-blue-100";O.status==="booked"&&(F="bg-[#14B8A6]/90"),O.status==="unavailable"&&(F="bg-gray-200"),O.status==="onVacation"&&(F="bg-red-100"),(O.isPreviousMonth||O.isNextMonth)&&(F="bg-gray-100");const H=new Date,ee=O.date.getDate()===H.getDate()&&O.date.getMonth()===H.getMonth()&&O.date.getFullYear()===H.getFullYear(),G=O.date.getDate()===b.getDate()&&O.date.getMonth()===b.getMonth()&&O.date.getFullYear()===b.getFullYear();return f.jsx("button",{className:`
                  ${F} rounded-full h-10 w-10 flex items-center justify-center mx-auto
                  ${ee?"ring-2 ring-blue-500":""}
                  ${G?"ring-2 ring-indigo-600":""}
                  ${O.isPreviousMonth||O.isNextMonth?"text-gray-400":O.status==="booked"?"text-white":O.status==="onVacation"?"text-red-800":O.status==="unavailable"?"text-gray-500":"text-blue-800"}
                  hover:opacity-80 transition-opacity
                `,onClick:()=>k(O),disabled:O.status==="unavailable"&&i===!1,children:O.day},P)})}),f.jsxs("div",{className:"mt-4 flex justify-around text-sm",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-100 mr-1"}),f.jsx("span",{className:"text-gray-600",children:"Available"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-200 mr-1"}),f.jsx("span",{className:"text-gray-600",children:"Unavailable"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-3 w-3 rounded-full bg-[#14B8A6] mr-1"}),f.jsx("span",{className:"text-gray-600",children:"Booked"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-3 w-3 rounded-full bg-red-100 mr-1"}),f.jsx("span",{className:"text-gray-600",children:"onVacation"})]})]})]})]})}/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HZ=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),E6=r=>{const e=HZ(r);return e.charAt(0).toUpperCase()+e.slice(1)},O7=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),UZ=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Z={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=I.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...o},c)=>I.createElement("svg",{ref:c,...$Z,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:O7("lucide",s),...!i&&!UZ(o)&&{"aria-hidden":"true"},...o},[...a.map(([d,h])=>I.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=(r,e)=>{const t=I.forwardRef(({className:n,...s},i)=>I.createElement(VZ,{ref:i,iconNode:e,className:O7(`lucide-${zZ(E6(r))}`,`lucide-${r}`,n),...s}));return t.displayName=E6(r),t};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],GZ=rp("calendar",qZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gy=rp("chevron-right",WZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],If=rp("loader-circle",YZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],R7=rp("plus",XZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],T6=rp("send",KZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],QZ=rp("trash",JZ);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],A6=rp("x",ZZ);var xN={exports:{}},bN,N6;function eee(){if(N6)return bN;N6=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return bN=r,bN}var vN,k6;function tee(){if(k6)return vN;k6=1;var r=eee();function e(){}function t(){}return t.resetWarningCache=e,vN=function(){function n(a,o,c,d,h,g){if(g!==r){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},vN}var M6;function L7(){return M6||(M6=1,xN.exports=tee()()),xN.exports}function _6({fileList:r,setFileList:e}){const t=I.useRef(null),n=()=>t.current.classList.add("dragover"),s=()=>t.current.classList.remove("dragover"),i=()=>t.current.classList.remove("dragover"),a=h=>{const g=h.target.files[0];if(g){const y=[...r,g];e(y)}},o=h=>{const g=[...r],y=g.indexOf(h);y>-1&&g.splice(y,1),e(g)},c=h=>{var y,b;const g=(b=(y=h==null?void 0:h.type)==null?void 0:y.split("/"))==null?void 0:b[1];return g?g.toLowerCase():typeof h=="string"?(h.split("?")[0].split("#")[0].split(".").pop()||"default").toLowerCase():"default"},d=h=>h!=null&&h.name?h.name:typeof h=="string"?h.split("/").pop():"file";return f.jsxs("div",{className:"flex flex-col w-full",children:[f.jsxs("div",{ref:t,className:"relative group cursor-pointer w-full",onDragEnter:n,onDragLeave:s,onDrop:i,children:[f.jsx("div",{className:"flex items-center justify-center w-full px-4 py-4 border-2 border-dashed border-gray-200 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-primary/40 transition-all",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 rounded-lg group-hover:scale-110 transition-transform duration-300",children:f.jsx("span",{className:"material-icons-round",children:"cloud_upload"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Click to upload or drag & drop"}),f.jsx("p",{className:"text-xs text-gray-400",children:"PDF, PNG, JPG (max. 10MB)"})]})]})}),f.jsx("input",{type:"file",value:"",onChange:a,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),Array.isArray(r)&&r.length>0?f.jsx("div",{className:"flex flex-row space-x-6 items-center mt-2 px-4",children:r.map((h,g)=>{const y=c(h),b=d(h),v=IS[y]||IS.default;return f.jsxs("div",{className:"group flex-col flex items-center justify-center",children:[f.jsx("img",{className:"object-contain w-10 h-10",src:v,alt:""}),f.jsx("span",{className:"overflow-hidden text-ellipsis text-[11px] line-clamp-2 whitespace-pre-line group-hover:line-clamp-none",children:b}),f.jsx("span",{className:"absolute z-10 rounded-full bg-red-300 p-1 mt-14 hidden group-hover:inline-flex cursor-pointer",onClick:()=>o(h),children:f.jsx(QZ,{className:"w-4"})})]},g)})}):null]})}function nee({url:r,close:e}){const[t,n]=I.useState(null),[s,i]=I.useState(2),[a,o]=I.useState(null),c=encodeURI(r);function d({numPages:g}){n(g)}function h(g){console.error(g),o("Failed to load PDF.")}return f.jsx("div",{className:"fixed inset-0 bg-[rgba(64,64,64,61%)] flex flex-col justify-center items-center z-10",children:f.jsxs("div",{className:"rounded-2xl",style:{height:"90vh",width:"60vw",overflowY:"auto",background:"white",borderRadius:8,padding:16,alignItems:"center",display:"flex",flexDirection:"column"},children:[f.jsx("button",{className:"fixed right-0 px-4  z-11 mr-[20vw] rounded-full bg-red-500 text-white p-2 transform translate-x-2 -translate-y-5",onClick:()=>e(!1),children:"x"}),f.jsxs("div",{style:{marginBottom:10},children:[f.jsx("button",{onClick:()=>i(g=>Math.min(g+.2,3)),children:"Zoom In"}),f.jsx("button",{onClick:()=>i(g=>Math.max(g-.2,.5)),style:{marginLeft:8},children:"Zoom Out"}),f.jsxs("span",{style:{marginLeft:12},children:["Zoom: ",Math.round(s*100),"%"]})]}),a&&f.jsx("div",{className:"text-red-600 text-sm mb-2",children:a}),f.jsx(aq,{file:c,onLoadSuccess:d,onLoadError:h,children:t?Array.from({length:t},(g,y)=>f.jsx(gq,{pageNumber:y+1,scale:s},`page_${y+1}`)):null})]})})}var wN={exports:{}},SN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j6;function ree(){if(j6)return SN;j6=1;var r=tp();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,s=r.useEffect,i=r.useLayoutEffect,a=r.useDebugValue;function o(g,y){var b=y(),v=n({inst:{value:b,getSnapshot:y}}),w=v[0].inst,E=v[1];return i(function(){w.value=b,w.getSnapshot=y,c(w)&&E({inst:w})},[g,b,y]),s(function(){return c(w)&&E({inst:w}),g(function(){c(w)&&E({inst:w})})},[g]),a(b),b}function c(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!t(g,b)}catch{return!0}}function d(g,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return SN.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:h,SN}var D6;function P7(){return D6||(D6=1,wN.exports=ree()),wN.exports}var I7=P7();function ps(r){this.content=r}ps.prototype={constructor:ps,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,s=n.find(r),i=n.content.slice();return s==-1?i.push(t||r,e):(i[s+1]=e,t&&(i[s]=t)),new ps(i)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new ps(t)},addToStart:function(r,e){return new ps([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new ps(t)},addBefore:function(r,e,t){var n=this.remove(e),s=n.content.slice(),i=n.find(r);return s.splice(i==-1?s.length:i,0,e,t),new ps(s)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=ps.from(r),r.size?new ps(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=ps.from(r),r.size?new ps(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=ps.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};ps.from=function(r){if(r instanceof ps)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new ps(e)};function B7(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let s=r.child(n),i=e.child(n);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let a=0;s.text[a]==i.text[a];a++)t++;return t}if(s.content.size||i.content.size){let a=B7(s.content,i.content,t+1);if(a!=null)return a}t+=s.nodeSize}}function F7(r,e,t,n){for(let s=r.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:n};let a=r.child(--s),o=e.child(--i),c=a.nodeSize;if(a==o){t-=c,n-=c;continue}if(!a.sameMarkup(o))return{a:t,b:n};if(a.isText&&a.text!=o.text){let d=0,h=Math.min(a.text.length,o.text.length);for(;d<h&&a.text[a.text.length-d-1]==o.text[o.text.length-d-1];)d++,t--,n--;return{a:t,b:n}}if(a.content.size||o.content.size){let d=F7(a.content,o.content,t-1,n-1);if(d)return d}t-=c,n-=c}}class Ee{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,s=0,i){for(let a=0,o=0;o<t;a++){let c=this.content[a],d=o+c.nodeSize;if(d>e&&n(c,s+o,i||null,a)!==!1&&c.content.size){let h=o+1;c.nodesBetween(Math.max(0,e-h),Math.min(c.content.size,t-h),n,s+h)}o=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,s){let i="",a=!0;return this.nodesBetween(e,t,(o,c)=>{let d=o.isText?o.text.slice(Math.max(e,c)-c,t-c):o.isLeaf?s?typeof s=="function"?s(o):s:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&d||o.isTextblock)&&n&&(a?a=!1:i+=n),i+=d},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(s[s.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new Ee(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],s=0;if(t>e)for(let i=0,a=0;a<t;i++){let o=this.content[i],c=a+o.nodeSize;c>e&&((a<e||c>t)&&(o.isText?o=o.cut(Math.max(0,e-a),Math.min(o.text.length,t-a)):o=o.cut(Math.max(0,e-a-1),Math.min(o.content.size,t-a-1))),n.push(o),s+=o.nodeSize),a=c}return new Ee(n,s)}cutByIndex(e,t){return e==t?Ee.empty:e==0&&t==this.content.length?this:new Ee(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return s[e]=t,new Ee(s,i)}addToStart(e){return new Ee([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ee(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let s=this.content[t];e(s,n,t),n+=s.nodeSize}}findDiffStart(e,t=0){return B7(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return F7(this,e,t,n)}findIndex(e){if(e==0)return xw(0,e);if(e==this.size)return xw(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let s=this.child(t),i=n+s.nodeSize;if(i>=e)return i==e?xw(t+1,i):xw(t,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Ee.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ee(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ee.empty;let t,n=0;for(let s=0;s<e.length;s++){let i=e[s];n+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new Ee(t||e,n)}static from(e){if(!e)return Ee.empty;if(e instanceof Ee)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ee([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ee.empty=new Ee([],0);const CN={index:0,offset:0};function xw(r,e){return CN.index=r,CN.offset=e,CN}function VS(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!VS(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!VS(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}let Sn=class Z3{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&VS(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=n.create(t.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Z3.none;if(e instanceof Z3)return[e];let t=e.slice();return t.sort((n,s)=>n.type.rank-s.type.rank),t}};Sn.none=[];class qS extends Error{}class De{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=H7(this.content,e+this.openStart,t);return n&&new De(n,this.openStart,this.openEnd)}removeBetween(e,t){return new De(z7(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return De.empty;let n=t.openStart||0,s=t.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new De(Ee.fromJSON(e,t.content),n,s)}static maxOpen(e,t=!0){let n=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new De(e,n,s)}}De.empty=new De(Ee.empty,0,0);function z7(r,e,t){let{index:n,offset:s}=r.findIndex(e),i=r.maybeChild(n),{index:a,offset:o}=r.findIndex(t);if(s==e||i.isText){if(o!=t&&!r.child(a).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=a)throw new RangeError("Removing non-flat range");return r.replaceChild(n,i.copy(z7(i.content,e-s-1,t-s-1)))}function H7(r,e,t,n){let{index:s,offset:i}=r.findIndex(e),a=r.maybeChild(s);if(i==e||a.isText)return n&&!n.canReplace(s,s,t)?null:r.cut(0,e).append(t).append(r.cut(e));let o=H7(a.content,e-i-1,t,a);return o&&r.replaceChild(s,a.copy(o))}function see(r,e,t){if(t.openStart>r.depth)throw new qS("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new qS("Inconsistent open depths");return U7(r,e,t,0)}function U7(r,e,t,n){let s=r.index(n),i=r.node(n);if(s==e.index(n)&&n<r.depth-t.openStart){let a=U7(r,e,t,n+1);return i.copy(i.content.replaceChild(s,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let a=r.parent,o=a.content;return Ff(a,o.cut(0,r.parentOffset).append(t.content).append(o.cut(e.parentOffset)))}else{let{start:a,end:o}=iee(t,r);return Ff(i,V7(r,a,o,e,n))}else return Ff(i,GS(r,e,n))}function $7(r,e){if(!e.type.compatibleContent(r.type))throw new qS("Cannot join "+e.type.name+" onto "+r.type.name)}function eM(r,e,t){let n=r.node(t);return $7(n,e.node(t)),n}function Bf(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function sx(r,e,t,n){let s=(e||r).node(t),i=0,a=e?e.index(t):s.childCount;r&&(i=r.index(t),r.depth>t?i++:r.textOffset&&(Bf(r.nodeAfter,n),i++));for(let o=i;o<a;o++)Bf(s.child(o),n);e&&e.depth==t&&e.textOffset&&Bf(e.nodeBefore,n)}function Ff(r,e){return r.type.checkContent(e),r.copy(e)}function V7(r,e,t,n,s){let i=r.depth>s&&eM(r,e,s+1),a=n.depth>s&&eM(t,n,s+1),o=[];return sx(null,r,s,o),i&&a&&e.index(s)==t.index(s)?($7(i,a),Bf(Ff(i,V7(r,e,t,n,s+1)),o)):(i&&Bf(Ff(i,GS(r,e,s+1)),o),sx(e,t,s,o),a&&Bf(Ff(a,GS(t,n,s+1)),o)),sx(n,null,s,o),new Ee(o)}function GS(r,e,t){let n=[];if(sx(null,r,t,n),r.depth>t){let s=eM(r,e,t+1);Bf(Ff(s,GS(r,e,t+1)),n)}return sx(e,null,t,n),new Ee(n)}function iee(r,e){let t=e.depth-r.openStart,s=e.node(t).copy(r.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(Ee.from(s));return{start:s.resolveNoCache(r.openStart+t),end:s.resolveNoCache(s.content.size-r.openEnd-t)}}class Tx{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(t);return n?e.child(t).cut(n):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=n.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Sn.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),s=e.maybeChild(t);if(!n){let o=n;n=s,s=o}let i=n.marks;for(var a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!s||!i[a].isInSet(s.marks))&&(i=i[a--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!s||!n[i].isInSet(s.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new WS(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],s=0,i=t;for(let a=e;;){let{index:o,offset:c}=a.content.findIndex(i),d=i-c;if(n.push(a,o,s+c),!d||(a=a.child(o),a.isText))break;i=d-1,s+=c+1}return new Tx(t,n,i)}static resolveCached(e,t){let n=O6.get(e);if(n)for(let i=0;i<n.elts.length;i++){let a=n.elts[i];if(a.pos==t)return a}else O6.set(e,n=new aee);let s=n.elts[n.i]=Tx.resolve(e,t);return n.i=(n.i+1)%oee,s}}class aee{constructor(){this.elts=[],this.i=0}}const oee=12,O6=new WeakMap;class WS{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const lee=Object.create(null);let Td=class tM{constructor(e,t,n,s=Sn.none){this.type=e,this.attrs=t,this.marks=s,this.content=n||Ee.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,s=0){this.content.nodesBetween(e,t,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,s){return this.content.textBetween(e,t,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&VS(this.attrs,t||e.defaultAttrs||lee)&&Sn.sameSet(this.marks,n||Sn.none)}copy(e=null){return e==this.content?this:new tM(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new tM(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return De.empty;let s=this.resolve(e),i=this.resolve(t),a=n?0:s.sharedDepth(t),o=s.start(a),d=s.node(a).content.cut(s.pos-o,i.pos-o);return new De(d,s.depth-a,i.depth-a)}replace(e,t,n){return see(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let s=this.content.child(t-1);return{node:s,index:t-1,offset:n-s.nodeSize}}resolve(e){return Tx.resolveCached(this,e)}resolveNoCache(e){return Tx.resolve(this,e)}rangeHasMark(e,t,n){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(n.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),q7(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=Ee.empty,s=0,i=n.childCount){let a=this.contentMatchAt(e).matchFragment(n,s,i),o=a&&a.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let c=s;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(e,t,n,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(n),a=i&&i.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Sn.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Sn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let s=Ee.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,n);return i.type.checkAttrs(i.attrs),i}};Td.prototype.text=void 0;class YS extends Td{constructor(e,t,n,s){if(super(e,t,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):q7(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new YS(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new YS(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function q7(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Wf{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new cee(e,t);if(n.next==null)return Wf.empty;let s=G7(n);n.next&&n.err("Unexpected trailing text");let i=gee(mee(s));return yee(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let s=this;for(let i=t;s&&i<n;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let s=[this];function i(a,o){let c=a.matchFragment(e,n);if(c&&(!t||c.validEnd))return Ee.from(o.map(d=>d.createAndFill()));for(let d=0;d<a.next.length;d++){let{type:h,next:g}=a.next[d];if(!(h.isText||h.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let y=i(g,o.concat(h));if(y)return y}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),i=s.match;if(i.matchType(e)){let a=[];for(let o=s;o.type;o=o.via)a.push(o.type);return a.reverse()}for(let a=0;a<i.next.length;a++){let{type:o,next:c}=i.next[a];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in t)&&(!s.type||c.validEnd)&&(n.push({match:o.contentMatch,type:o,via:s}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&t(n.next[s].next)}return t(this),e.map((n,s)=>{let i=s+(n.validEnd?"*":" ")+" ";for(let a=0;a<n.next.length;a++)i+=(a?", ":"")+n.next[a].type.name+"->"+e.indexOf(n.next[a].next);return i}).join(`
`)}}Wf.empty=new Wf(!0);class cee{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function G7(r){let e=[];do e.push(uee(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function uee(r){let e=[];do e.push(dee(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function dee(r){let e=pee(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=hee(r,e);else break;return e}function R6(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function hee(r,e){let t=R6(r),n=t;return r.eat(",")&&(r.next!="}"?n=R6(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function fee(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let s=[];for(let i in t){let a=t[i];a.isInGroup(e)&&s.push(a)}return s.length==0&&r.err("No node type or group '"+e+"' found"),s}function pee(r){if(r.eat("(")){let e=G7(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=fee(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function mee(r){let e=[[]];return s(i(r,0),t()),e;function t(){return e.push([])-1}function n(a,o,c){let d={term:c,to:o};return e[a].push(d),d}function s(a,o){a.forEach(c=>c.to=o)}function i(a,o){if(a.type=="choice")return a.exprs.reduce((c,d)=>c.concat(i(d,o)),[]);if(a.type=="seq")for(let c=0;;c++){let d=i(a.exprs[c],o);if(c==a.exprs.length-1)return d;s(d,o=t())}else if(a.type=="star"){let c=t();return n(o,c),s(i(a.expr,c),c),[n(c)]}else if(a.type=="plus"){let c=t();return s(i(a.expr,o),c),s(i(a.expr,c),c),[n(c)]}else{if(a.type=="opt")return[n(o)].concat(i(a.expr,o));if(a.type=="range"){let c=o;for(let d=0;d<a.min;d++){let h=t();s(i(a.expr,c),h),c=h}if(a.max==-1)s(i(a.expr,c),c);else for(let d=a.min;d<a.max;d++){let h=t();n(c,h),s(i(a.expr,c),h),c=h}return[n(c)]}else{if(a.type=="name")return[n(o,void 0,a.value)];throw new Error("Unknown expr type")}}}}function W7(r,e){return e-r}function L6(r,e){let t=[];return n(e),t.sort(W7);function n(s){let i=r[s];if(i.length==1&&!i[0].term)return n(i[0].to);t.push(s);for(let a=0;a<i.length;a++){let{term:o,to:c}=i[a];!o&&t.indexOf(c)==-1&&n(c)}}}function gee(r){let e=Object.create(null);return t(L6(r,0));function t(n){let s=[];n.forEach(a=>{r[a].forEach(({term:o,to:c})=>{if(!o)return;let d;for(let h=0;h<s.length;h++)s[h][0]==o&&(d=s[h][1]);L6(r,c).forEach(h=>{d||s.push([o,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let i=e[n.join(",")]=new Wf(n.indexOf(r.length-1)>-1);for(let a=0;a<s.length;a++){let o=s[a][1].sort(W7);i.next.push({type:s[a][0],next:e[o.join(",")]||t(o)})}return i}}function yee(r,e){for(let t=0,n=[r];t<n.length;t++){let s=n[t],i=!s.validEnd,a=[];for(let o=0;o<s.next.length;o++){let{type:c,next:d}=s.next[o];a.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),n.indexOf(d)==-1&&n.push(d)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Y7(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function X7(r,e){let t=Object.create(null);for(let n in r){let s=e&&e[n];if(s===void 0){let i=r[n];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=s}return t}function K7(r,e,t,n){for(let s in e)if(!(s in r))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in r){let i=r[s];i.validate&&i.validate(e[s])}}function J7(r,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new bee(r,n,e[n]);return t}let P6=class Q7{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=J7(e,n.attrs),this.defaultAttrs=Y7(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:X7(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Td(this,this.computeAttrs(e),Ee.from(t),Sn.setFrom(n))}createChecked(e=null,t,n){return t=Ee.from(t),this.checkContent(t),new Td(this,this.computeAttrs(e),t,Sn.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=Ee.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(Ee.empty,!0);return i?new Td(this,e,t.append(i),Sn.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){K7(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:Sn.none:e}static compile(e,t){let n=Object.create(null);e.forEach((i,a)=>n[i]=new Q7(i,t,a));let s=t.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function xee(r,e,t){let n=t.split("|");return s=>{let i=s===null?"null":typeof s;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${r}, got ${i}`)}}class bee{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?xee(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class gE{constructor(e,t,n,s){this.name=e,this.rank=t,this.schema=n,this.spec=s,this.attrs=J7(e,s.attrs),this.excluded=null;let i=Y7(this.attrs);this.instance=i?new Sn(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Sn(this,X7(this.attrs,e))}static compile(e,t){let n=Object.create(null),s=0;return e.forEach((i,a)=>n[i]=new gE(i,s++,t,a)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){K7(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Z7{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=ps.from(e.nodes),t.marks=ps.from(e.marks||{}),this.nodes=P6.compile(this.spec.nodes,this),this.marks=gE.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],a=i.spec.content||"",o=i.spec.marks;if(i.contentMatch=n[a]||(n[a]=Wf.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=o=="_"?null:o?I6(this,o.split(" ")):o==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],a=i.spec.excludes;i.excluded=a==null?[i]:a==""?[]:I6(this,a.split(" "))}this.nodeFromJSON=s=>Td.fromJSON(this,s),this.markFromJSON=s=>Sn.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof P6){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,s)}text(e,t){let n=this.nodes.text;return new YS(n,n.defaultAttrs,e,Sn.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function I6(r,e){let t=[];for(let n=0;n<e.length;n++){let s=e[n],i=r.marks[s],a=i;if(i)t.push(i);else for(let o in r.marks){let c=r.marks[o];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&t.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function vee(r){return r.tag!=null}function wee(r){return r.style!=null}class Ad{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(s=>{if(vee(s))this.tags.push(s);else if(wee(s)){let i=/[^=]*/.exec(s.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let n=new F6(this,t,!1);return n.addAll(e,Sn.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new F6(this,t,!0);return n.addAll(e,Sn.none,t.from,t.to),De.maxOpen(n.finish())}matchTag(e,t,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(Eee(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let a=i.getAttrs(e);if(a===!1)continue;i.attrs=a||void 0}return i}}}matchStyle(e,t,n,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let a=this.styles[i],o=a.style;if(!(o.indexOf(e)!=0||a.context&&!n.matchesContext(a.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=t))){if(a.getAttrs){let c=a.getAttrs(t);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let t=[];function n(s){let i=s.priority==null?50:s.priority,a=0;for(;a<t.length;a++){let o=t[a];if((o.priority==null?50:o.priority)<i)break}t.splice(a,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(a=>{n(a=z6(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(a=>{n(a=z6(a)),a.node||a.ignore||a.mark||(a.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ad(e,Ad.schemaRules(e)))}}const eF={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},See={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tF={ol:!0,ul:!0},Ax=1,nM=2,ix=4;function B6(r,e,t){return e!=null?(e?Ax:0)|(e==="full"?nM:0):r&&r.whitespace=="pre"?Ax|nM:t&~ix}class bw{constructor(e,t,n,s,i,a){this.type=e,this.attrs=t,this.marks=n,this.solid=s,this.options=a,this.content=[],this.activeMarks=Sn.none,this.match=i||(a&ix?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Ee.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ax)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=Ee.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Ee.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!eF.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class F6{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=t.topNode,i,a=B6(null,t.preserveWhitespace,0)|(n?ix:0);s?i=new bw(s.type,s.attrs,Sn.none,!0,t.topMatch||s.type.contentMatch,a):n?i=new bw(null,null,Sn.none,!0,null,a):i=new bw(e.schema.topNodeType,null,Sn.none,!0,null,a),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,s=this.top,i=s.options&nM?"full":this.localPreserveWS||(s.options&Ax)>0,{schema:a}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(a.linebreakReplacement.create())){let o=n.split(/\r?\n|\r/);for(let c=0;c<o.length;c++)c&&this.insertNode(a.linebreakReplacement.create(),t,!0),o[c]&&this.insertNode(a.text(o[c]),t,!/\S/.test(o[c]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],c=e.previousSibling;(!o||c&&c.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(a.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),o;tF.hasOwnProperty(a)&&this.parser.normalizeLists&&Cee(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));e:if(c?c.ignore:See.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,h=this.needsBlock;if(eF.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=c&&c.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),d&&this.sync(i),this.needsBlock=h}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,c,d,c.consuming===!1?o:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],a=n.getPropertyValue(i);if(a)for(let o=void 0;;){let c=this.parser.matchStyle(i,a,this,o);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(d=>!c.clearMark(d)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)o=c;else break}}return t}addElementByRule(e,t,n,s){let i,a;if(t.node)if(a=this.parser.schema.nodes[t.node],a.isLeaf)this.insertNode(a.create(t.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let c=this.enter(a,t.attrs||null,n,t.preserveWhitespace);c&&(i=!0,n=c)}else{let c=this.parser.schema.marks[t.mark];n=n.concat(c.create(t.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}i&&this.sync(o)&&this.open--}addAll(e,t,n,s){let i=n||0;for(let a=n?e.childNodes[n]:e.firstChild,o=s==null?null:e.childNodes[s];a!=o;a=a.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(a,t);this.findAtPoint(e,i)}findPlace(e,t,n){let s,i;for(let a=this.open,o=0;a>=0;a--){let c=this.nodes[a],d=c.findWrapping(e);if(d&&(!s||s.length>d.length+o)&&(s=d,i=c,!d.length))break;if(c.solid){if(n)break;o+=2}}if(!s)return null;this.sync(i);for(let a=0;a<s.length;a++)t=this.enterInner(s[a],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let s=this.findPlace(e,t,n);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let a=Sn.none;for(let o of s.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):H6(o.type,e.type))&&(a=o.addToSet(a));return i.content.push(e.mark(a)),!0}return!1}enter(e,t,n,s){let i=this.findPlace(e.create(t),n,!1);return i&&(i=this.enterInner(e,t,n,!0,s)),i}enterInner(e,t,n,s=!1,i){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let o=B6(e,i,a.options);a.options&ix&&a.content.length==0&&(o|=ix);let c=Sn.none;return n=n.filter(d=>(a.type?a.type.allowsMarkType(d.type):H6(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new bw(e,t,c,s,null,o)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Ax)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(s?0:1),a=(o,c)=>{for(;o>=0;o--){let d=t[o];if(d==""){if(o==t.length-1||o==0)continue;for(;c>=i;c--)if(a(o-1,c))return!0;return!1}else{let h=c>0||c==0&&s?this.nodes[c].type:n&&c>=i?n.node(c-i).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;c--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}}function Cee(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&tF.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function Eee(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function z6(r){let e={};for(let t in r)e[t]=r[t];return e}function H6(r,e){let t=e.schema.nodes;for(let n in t){let s=t[n];if(!s.allowsMarkType(r))continue;let i=[],a=o=>{i.push(o);for(let c=0;c<o.edgeCount;c++){let{type:d,next:h}=o.edge(c);if(d==e||i.indexOf(h)<0&&a(h))return!0}};if(a(s.contentMatch))return!0}}class sp{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=EN(t).createDocumentFragment());let s=n,i=[];return e.forEach(a=>{if(i.length||a.marks.length){let o=0,c=0;for(;o<i.length&&c<a.marks.length;){let d=a.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(i[o][0])||d.type.spec.spanning===!1)break;o++,c++}for(;o<i.length;)s=i.pop()[1];for(;c<a.marks.length;){let d=a.marks[c++],h=this.serializeMark(d,a.isInline,t);h&&(i.push([d,s]),s.appendChild(h.dom),s=h.contentDOM||h.dom)}}s.appendChild(this.serializeNodeInner(a,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:s}=gS(EN(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let s=this.marks[e.type.name];return s&&gS(EN(n),s(e,t),null,e.attrs)}static renderSpec(e,t,n=null,s){return gS(e,t,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new sp(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=U6(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return U6(e.marks)}}function U6(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function EN(r){return r.document||window.document}const $6=new WeakMap;function Tee(r){let e=$6.get(r);return e===void 0&&$6.set(r,e=Aee(r)),e}function Aee(r){let e=null;function t(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)t(n[s]);else for(let s in n)t(n[s])}return t(r),e}function gS(r,e,t,n){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=Tee(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=s.indexOf(" ");a>0&&(t=s.slice(0,a),s=s.slice(a+1));let o,c=t?r.createElementNS(t,s):r.createElement(s),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let g in d)if(d[g]!=null){let y=g.indexOf(" ");y>0?c.setAttributeNS(g.slice(0,y),g.slice(y+1),d[g]):g=="style"&&c.style?c.style.cssText=d[g]:c.setAttribute(g,d[g])}}for(let g=h;g<e.length;g++){let y=e[g];if(y===0){if(g<e.length-1||g>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:b,contentDOM:v}=gS(r,y,t,n);if(c.appendChild(b),v){if(o)throw new RangeError("Multiple content holes");o=v}}}return{dom:c,contentDOM:o}}const nF=65535,rF=Math.pow(2,16);function Nee(r,e){return r+e*rF}function V6(r){return r&nF}function kee(r){return(r-(r&nF))/rF}const sF=1,iF=2,yS=4,aF=8;class rM{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&aF)>0}get deletedBefore(){return(this.delInfo&(sF|yS))>0}get deletedAfter(){return(this.delInfo&(iF|yS))>0}get deletedAcross(){return(this.delInfo&yS)>0}}class Xi{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Xi.empty)return Xi.empty}recover(e){let t=0,n=V6(e);if(!this.inverted)for(let s=0;s<n;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+t+kee(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let s=0,i=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?s:0);if(c>e)break;let d=this.ranges[o+i],h=this.ranges[o+a],g=c+d;if(e<=g){let y=d?e==c?-1:e==g?1:t:t,b=c+s+(y<0?0:h);if(n)return b;let v=e==(t<0?c:g)?null:Nee(o/3,e-c),w=e==c?iF:e==g?sF:yS;return(t<0?e!=c:e!=g)&&(w|=aF),new rM(b,w,v)}s+=h-d}return n?e+s:new rM(e+s,0,null)}touches(e,t){let n=0,s=V6(t),i=this.inverted?2:1,a=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let c=this.ranges[o]-(this.inverted?n:0);if(c>e)break;let d=this.ranges[o+i],h=c+d;if(e<=h&&o==s*3)return!0;n+=this.ranges[o+a]-d}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let a=this.ranges[s],o=a-(this.inverted?i:0),c=a+(this.inverted?0:i),d=this.ranges[s+t],h=this.ranges[s+n];e(o,o+d,c,c+h),i+=h-d}}invert(){return new Xi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Xi.empty:new Xi(e<0?[0,-e,0]:[0,0,e])}}Xi.empty=new Xi([]);class Nx{constructor(e,t,n=0,s=e?e.length:0){this.mirror=t,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Nx(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?n+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?n-s-1:void 0)}}invert(){let e=new Nx;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let s=0;for(let i=this.from;i<this.to;i++){let a=this._maps[i],o=a.mapResult(e,t);if(o.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,e=this._maps[c].recover(o.recover);continue}}s|=o.delInfo,e=o.pos}return n?e:new rM(e,s,null)}}const TN=Object.create(null);class Os{getMap(){return Xi.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=TN[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in TN)throw new RangeError("Duplicate use of step JSON ID "+e);return TN[e]=t,t.prototype.jsonID=e,t}}class Er{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Er(e,null)}static fail(e){return new Er(null,e)}static fromReplace(e,t,n,s){try{return Er.ok(e.replace(t,n,s))}catch(i){if(i instanceof qS)return Er.fail(i.message);throw i}}}function m_(r,e,t){let n=[];for(let s=0;s<r.childCount;s++){let i=r.child(s);i.content.size&&(i=i.copy(m_(i.content,e,i))),i.isInline&&(i=e(i,t,s)),n.push(i)}return Ee.fromArray(n)}class Sd extends Os{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),i=new De(m_(t.content,(a,o)=>!a.isAtom||!o.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),s),t.openStart,t.openEnd);return Er.fromReplace(e,this.from,this.to,i)}invert(){return new ho(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Sd(t.pos,n.pos,this.mark)}merge(e){return e instanceof Sd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Sd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Sd(t.from,t.to,e.markFromJSON(t.mark))}}Os.jsonID("addMark",Sd);class ho extends Os{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new De(m_(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return Er.fromReplace(e,this.from,this.to,n)}invert(){return new Sd(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new ho(t.pos,n.pos,this.mark)}merge(e){return e instanceof ho&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ho(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ho(t.from,t.to,e.markFromJSON(t.mark))}}Os.jsonID("removeMark",ho);class Cd extends Os{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Er.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Er.fromReplace(e,this.pos,this.pos+1,new De(Ee.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(n))return new Cd(this.pos,t.marks[s]);return new Cd(this.pos,this.mark)}}return new Yf(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Cd(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Cd(t.pos,e.markFromJSON(t.mark))}}Os.jsonID("addNodeMark",Cd);class Yf extends Os{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Er.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Er.fromReplace(e,this.pos,this.pos+1,new De(Ee.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Cd(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yf(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yf(t.pos,e.markFromJSON(t.mark))}}Os.jsonID("removeNodeMark",Yf);class Qr extends Os{constructor(e,t,n,s=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=s}apply(e){return this.structure&&sM(e,this.from,this.to)?Er.fail("Structure replace would overwrite content"):Er.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Qr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Qr(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Qr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?De.empty:new De(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Qr(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?De.empty:new De(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Qr(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Qr(t.from,t.to,De.fromJSON(e,t.slice),!!t.structure)}}Os.jsonID("replace",Qr);class ts extends Os{constructor(e,t,n,s,i,a,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=s,this.slice=i,this.insert=a,this.structure=o}apply(e){if(this.structure&&(sM(e,this.from,this.gapFrom)||sM(e,this.gapTo,this.to)))return Er.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Er.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Er.fromReplace(e,this.from,this.to,n):Er.fail("Content does not fit in gap")}getMap(){return new Xi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ts(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||s<t.pos||i>n.pos?null:new ts(t.pos,n.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ts(t.from,t.to,t.gapFrom,t.gapTo,De.fromJSON(e,t.slice),t.insert,!!t.structure)}}Os.jsonID("replaceAround",ts);function sM(r,e,t){let n=r.resolve(e),s=t-e,i=n.depth;for(;s>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,s--;if(s>0){let a=n.node(i).maybeChild(n.indexAfter(i));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function Mee(r,e,t,n){let s=[],i=[],a,o;r.doc.nodesBetween(e,t,(c,d,h)=>{if(!c.isInline)return;let g=c.marks;if(!n.isInSet(g)&&h.type.allowsMarkType(n.type)){let y=Math.max(d,e),b=Math.min(d+c.nodeSize,t),v=n.addToSet(g);for(let w=0;w<g.length;w++)g[w].isInSet(v)||(a&&a.to==y&&a.mark.eq(g[w])?a.to=b:s.push(a=new ho(y,b,g[w])));o&&o.to==y?o.to=b:i.push(o=new Sd(y,b,n))}}),s.forEach(c=>r.step(c)),i.forEach(c=>r.step(c))}function _ee(r,e,t,n){let s=[],i=0;r.doc.nodesBetween(e,t,(a,o)=>{if(!a.isInline)return;i++;let c=null;if(n instanceof gE){let d=a.marks,h;for(;h=n.isInSet(d);)(c||(c=[])).push(h),d=h.removeFromSet(d)}else n?n.isInSet(a.marks)&&(c=[n]):c=a.marks;if(c&&c.length){let d=Math.min(o+a.nodeSize,t);for(let h=0;h<c.length;h++){let g=c[h],y;for(let b=0;b<s.length;b++){let v=s[b];v.step==i-1&&g.eq(s[b].style)&&(y=v)}y?(y.to=d,y.step=i):s.push({style:g,from:Math.max(o,e),to:d,step:i})}}}),s.forEach(a=>r.step(new ho(a.from,a.to,a.style)))}function g_(r,e,t,n=t.contentMatch,s=!0){let i=r.doc.nodeAt(e),a=[],o=e+1;for(let c=0;c<i.childCount;c++){let d=i.child(c),h=o+d.nodeSize,g=n.matchType(d.type);if(!g)a.push(new Qr(o,h,De.empty));else{n=g;for(let y=0;y<d.marks.length;y++)t.allowsMarkType(d.marks[y].type)||r.step(new ho(o,h,d.marks[y]));if(s&&d.isText&&t.whitespace!="pre"){let y,b=/\r?\n|\r/g,v;for(;y=b.exec(d.text);)v||(v=new De(Ee.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),a.push(new Qr(o+y.index,o+y.index+y[0].length,v))}}o=h}if(!n.validEnd){let c=n.fillBefore(Ee.empty,!0);r.replace(o,o,new De(c,0,0))}for(let c=a.length-1;c>=0;c--)r.step(a[c])}function jee(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function u0(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth,s=0,i=0;;--n){let a=r.$from.node(n),o=r.$from.index(n)+s,c=r.$to.indexAfter(n)-i;if(n<r.depth&&a.canReplace(o,c,t))return n;if(n==0||a.type.spec.isolating||!jee(a,o,c))break;o&&(s=1),c<a.childCount&&(i=1)}return null}function Dee(r,e,t){let{$from:n,$to:s,depth:i}=e,a=n.before(i+1),o=s.after(i+1),c=a,d=o,h=Ee.empty,g=0;for(let v=i,w=!1;v>t;v--)w||n.index(v)>0?(w=!0,h=Ee.from(n.node(v).copy(h)),g++):c--;let y=Ee.empty,b=0;for(let v=i,w=!1;v>t;v--)w||s.after(v+1)<s.end(v)?(w=!0,y=Ee.from(s.node(v).copy(y)),b++):d++;r.step(new ts(c,d,a,o,new De(h.append(y),g,b),h.size-g,!0))}function y_(r,e,t=null,n=r){let s=Oee(r,e),i=s&&Ree(n,e);return i?s.map(q6).concat({type:e,attrs:t}).concat(i.map(q6)):null}function q6(r){return{type:r,attrs:null}}function Oee(r,e){let{parent:t,startIndex:n,endIndex:s}=r,i=t.contentMatchAt(n).findWrapping(e);if(!i)return null;let a=i.length?i[0]:e;return t.canReplaceWith(n,s,a)?i:null}function Ree(r,e){let{parent:t,startIndex:n,endIndex:s}=r,i=t.child(n),a=e.contentMatch.findWrapping(i.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let d=n;c&&d<s;d++)c=c.matchType(t.child(d).type);return!c||!c.validEnd?null:a}function Lee(r,e,t){let n=Ee.empty;for(let a=t.length-1;a>=0;a--){if(n.size){let o=t[a].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Ee.from(t[a].type.create(t[a].attrs,n))}let s=e.start,i=e.end;r.step(new ts(s,i,s,i,new De(n,0,0),t.length,!0))}function Pee(r,e,t,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=r.steps.length;r.doc.nodesBetween(e,t,(a,o)=>{let c=typeof s=="function"?s(a):s;if(a.isTextblock&&!a.hasMarkup(n,c)&&Iee(r.doc,r.mapping.slice(i).map(o),n)){let d=null;if(n.schema.linebreakReplacement){let b=n.whitespace=="pre",v=!!n.contentMatch.matchType(n.schema.linebreakReplacement);b&&!v?d=!1:!b&&v&&(d=!0)}d===!1&&lF(r,a,o,i),g_(r,r.mapping.slice(i).map(o,1),n,void 0,d===null);let h=r.mapping.slice(i),g=h.map(o,1),y=h.map(o+a.nodeSize,1);return r.step(new ts(g,y,g+1,y-1,new De(Ee.from(n.create(c,null,a.marks)),0,0),1,!0)),d===!0&&oF(r,a,o,i),!1}})}function oF(r,e,t,n){e.forEach((s,i)=>{if(s.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(s.text);){let c=r.mapping.slice(n).map(t+1+i+a.index);r.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function lF(r,e,t,n){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let a=r.mapping.slice(n).map(t+1+i);r.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function Iee(r,e,t){let n=r.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,t)}function Bee(r,e,t,n,s){let i=r.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let a=t.create(n,null,s||i.marks);if(i.isLeaf)return r.replaceWith(e,e+i.nodeSize,a);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new ts(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new De(Ee.from(a),0,0),1,!0))}function Nc(r,e,t=1,n){let s=r.resolve(e),i=s.depth-t,a=n&&n[n.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,h=t-2;d>i;d--,h--){let g=s.node(d),y=s.index(d);if(g.type.spec.isolating)return!1;let b=g.content.cutByIndex(y,g.childCount),v=n&&n[h+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let w=n&&n[h]||g;if(!g.canReplace(y+1,g.childCount)||!w.type.validContent(b))return!1}let o=s.indexAfter(i),c=n&&n[0];return s.node(i).canReplaceWith(o,o,c?c.type:s.node(i+1).type)}function Fee(r,e,t=1,n){let s=r.doc.resolve(e),i=Ee.empty,a=Ee.empty;for(let o=s.depth,c=s.depth-t,d=t-1;o>c;o--,d--){i=Ee.from(s.node(o).copy(i));let h=n&&n[d];a=Ee.from(h?h.type.create(h.attrs,a):s.node(o).copy(a))}r.step(new Qr(e,e,new De(i.append(a),t,t),!0))}function Fd(r,e){let t=r.resolve(e),n=t.index();return cF(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function zee(r,e){e.content.size||r.type.compatibleContent(e.type);let t=r.contentMatchAt(r.childCount),{linebreakReplacement:n}=r.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),a=i.type==n?r.type.schema.nodes.text:i.type;if(t=t.matchType(a),!t||!r.type.allowsMarks(i.marks))return!1}return t.validEnd}function cF(r,e){return!!(r&&e&&!r.isLeaf&&zee(r,e))}function yE(r,e,t=-1){let n=r.resolve(e);for(let s=n.depth;;s--){let i,a,o=n.index(s);if(s==n.depth?(i=n.nodeBefore,a=n.nodeAfter):t>0?(i=n.node(s+1),o++,a=n.node(s).maybeChild(o)):(i=n.node(s).maybeChild(o-1),a=n.node(s+1)),i&&!i.isTextblock&&cF(i,a)&&n.node(s).canReplace(o,o+1))return e;if(s==0)break;e=t<0?n.before(s):n.after(s)}}function Hee(r,e,t){let n=null,{linebreakReplacement:s}=r.doc.type.schema,i=r.doc.resolve(e-t),a=i.node().type;if(s&&a.inlineContent){let h=a.whitespace=="pre",g=!!a.contentMatch.matchType(s);h&&!g?n=!1:!h&&g&&(n=!0)}let o=r.steps.length;if(n===!1){let h=r.doc.resolve(e+t);lF(r,h.node(),h.before(),o)}a.inlineContent&&g_(r,e+t-1,a,i.node().contentMatchAt(i.index()),n==null);let c=r.mapping.slice(o),d=c.map(e-t);if(r.step(new Qr(d,c.map(e+t,-1),De.empty,!0)),n===!0){let h=r.doc.resolve(d);oF(r,h.node(),h.before(),r.steps.length)}return r}function Uee(r,e,t){let n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let i=n.index(s);if(n.node(s).canReplaceWith(i,i,t))return n.before(s+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let i=n.indexAfter(s);if(n.node(s).canReplaceWith(i,i,t))return n.after(s+1);if(i<n.node(s).childCount)return null}return null}function uF(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let a=n.depth;a>=0;a--){let o=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(o>0?1:0),d=n.node(a),h=!1;if(i==1)h=d.canReplace(c,c,s);else{let g=d.contentMatchAt(c).findWrapping(s.firstChild.type);h=g&&d.canReplaceWith(c,c,g[0])}if(h)return o==0?n.pos:o<0?n.before(a+1):n.after(a+1)}return null}function xE(r,e,t=e,n=De.empty){if(e==t&&!n.size)return null;let s=r.resolve(e),i=r.resolve(t);return dF(s,i,n)?new Qr(e,t,n):new $ee(s,i,n).fit()}function dF(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class $ee{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=Ee.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Ee.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let i=this.placed,a=n.depth,o=s.depth;for(;a&&o&&i.childCount==1;)i=i.firstChild.content,a--,o--;let c=new De(i,a,o);return e>-1?new ts(n.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||n.pos!=this.$to.pos?new Qr(n.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let s,i=null;n?(i=AN(this.unplaced.content,n-1).firstChild,s=i.content):s=this.unplaced.content;let a=s.firstChild;for(let o=this.depth;o>=0;o--){let{type:c,match:d}=this.frontier[o],h,g=null;if(t==1&&(a?d.matchType(a.type)||(g=d.fillBefore(Ee.from(a),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:o,parent:i,inject:g};if(t==2&&a&&(h=d.findWrapping(a.type)))return{sliceDepth:n,frontierDepth:o,parent:i,wrap:h};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=AN(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new De(e,t+1,Math.max(n,s.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=AN(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new De(Vy(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new De(Vy(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let w=0;w<i.length;w++)this.openFrontierNode(i[w]);let a=this.unplaced,o=n?n.content:a.content,c=a.openStart-e,d=0,h=[],{match:g,type:y}=this.frontier[t];if(s){for(let w=0;w<s.childCount;w++)h.push(s.child(w));g=g.matchFragment(s)}let b=o.size+e-(a.content.size-a.openEnd);for(;d<o.childCount;){let w=o.child(d),E=g.matchType(w.type);if(!E)break;d++,(d>1||c==0||w.content.size)&&(g=E,h.push(hF(w.mark(y.allowedMarks(w.marks)),d==1?c:0,d==o.childCount?b:-1)))}let v=d==o.childCount;v||(b=-1),this.placed=qy(this.placed,t,Ee.from(h)),this.frontier[t].match=g,v&&b<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,E=o;w<b;w++){let C=E.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),E=C.content}this.unplaced=v?e==0?De.empty:new De(Vy(a.content,e-1,1),e-1,b<0?a.openEnd:e-1):new De(Vy(a.content,e,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!NN(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=NN(e,t,s,n,i);if(a){for(let o=t-1;o>=0;o--){let{match:c,type:d}=this.frontier[o],h=NN(e,o,d,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=qy(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let s=e.node(n),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=qy(this.placed,this.depth,Ee.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Ee.empty,!0);t.childCount&&(this.placed=qy(this.placed,this.frontier.length,t))}}function Vy(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(Vy(r.firstChild.content,e-1,t)))}function qy(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(qy(r.lastChild.content,e-1,t)))}function AN(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function hF(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,hF(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(Ee.empty,!0)))),r.copy(n)}function NN(r,e,t,n,s){let i=r.node(e),a=s?r.indexAfter(e):r.index(e);if(a==i.childCount&&!t.compatibleContent(i.type))return null;let o=n.fillBefore(i.content,!0,a);return o&&!Vee(t,i.content,a)?o:null}function Vee(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function qee(r){return r.spec.defining||r.spec.definingForContent}function Gee(r,e,t,n){if(!n.size)return r.deleteRange(e,t);let s=r.doc.resolve(e),i=r.doc.resolve(t);if(dF(s,i,n))return r.step(new Qr(e,t,n));let a=pF(s,i);a[a.length-1]==0&&a.pop();let o=-(s.depth+1);a.unshift(o);for(let y=s.depth,b=s.pos-1;y>0;y--,b--){let v=s.node(y).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;a.indexOf(y)>-1?o=y:s.before(y)==b&&a.splice(1,0,-y)}let c=a.indexOf(o),d=[],h=n.openStart;for(let y=n.content,b=0;;b++){let v=y.firstChild;if(d.push(v),b==n.openStart)break;y=v.content}for(let y=h-1;y>=0;y--){let b=d[y],v=qee(b.type);if(v&&!b.sameMarkup(s.node(Math.abs(o)-1)))h=y;else if(v||!b.type.isTextblock)break}for(let y=n.openStart;y>=0;y--){let b=(y+h+1)%(n.openStart+1),v=d[b];if(v)for(let w=0;w<a.length;w++){let E=a[(w+c)%a.length],C=!0;E<0&&(C=!1,E=-E);let N=s.node(E-1),A=s.index(E-1);if(N.canReplaceWith(A,A,v.type,v.marks))return r.replace(s.before(E),C?i.after(E):t,new De(fF(n.content,0,n.openStart,b),b,n.openEnd))}}let g=r.steps.length;for(let y=a.length-1;y>=0&&(r.replace(e,t,n),!(r.steps.length>g));y--){let b=a[y];b<0||(e=s.before(b),t=i.after(b))}}function fF(r,e,t,n,s){if(e<t){let i=r.firstChild;r=r.replaceChild(0,i.copy(fF(i.content,e+1,t,n,i)))}if(e>n){let i=s.contentMatchAt(0),a=i.fillBefore(r).append(r);r=a.append(i.matchFragment(a).fillBefore(Ee.empty,!0))}return r}function Wee(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let s=Uee(r.doc,e,n.type);s!=null&&(e=t=s)}r.replaceRange(e,t,new De(Ee.from(n),0,0))}function Yee(r,e,t){let n=r.doc.resolve(e),s=r.doc.resolve(t),i=pF(n,s);for(let a=0;a<i.length;a++){let o=i[a],c=a==i.length-1;if(c&&o==0||n.node(o).type.contentMatch.validEnd)return r.delete(n.start(o),s.end(o));if(o>0&&(c||n.node(o-1).canReplace(n.index(o-1),s.indexAfter(o-1))))return r.delete(n.before(o),s.after(o))}for(let a=1;a<=n.depth&&a<=s.depth;a++)if(e-n.start(a)==n.depth-a&&t>n.end(a)&&s.end(a)-t!=s.depth-a&&n.start(a-1)==s.start(a-1)&&n.node(a-1).canReplace(n.index(a-1),s.index(a-1)))return r.delete(n.before(a),t);r.delete(e,t)}function pF(r,e){let t=[],n=Math.min(r.depth,e.depth);for(let s=n;s>=0;s--){let i=r.start(s);if(i<r.pos-(r.depth-s)||e.end(s)>e.pos+(e.depth-s)||r.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==r.depth&&s==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class gm extends Os{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Er.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let s=t.type.create(n,null,t.marks);return Er.fromReplace(e,this.pos,this.pos+1,new De(Ee.from(s),0,t.isLeaf?0:1))}getMap(){return Xi.empty}invert(e){return new gm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new gm(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new gm(t.pos,t.attr,t.value)}}Os.jsonID("attr",gm);class kx extends Os{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Er.ok(n)}getMap(){return Xi.empty}invert(e){return new kx(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new kx(t.attr,t.value)}}Os.jsonID("docAttr",kx);let Yg=class extends Error{};Yg=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};Yg.prototype=Object.create(Error.prototype);Yg.prototype.constructor=Yg;Yg.prototype.name="TransformError";class mF{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Nx}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Yg(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=De.empty){let s=xE(this.doc,e,t,n);return s&&this.step(s),this}replaceWith(e,t,n){return this.replace(e,t,new De(Ee.from(n),0,0))}delete(e,t){return this.replace(e,t,De.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return Gee(this,e,t,n),this}replaceRangeWith(e,t,n){return Wee(this,e,t,n),this}deleteRange(e,t){return Yee(this,e,t),this}lift(e,t){return Dee(this,e,t),this}join(e,t=1){return Hee(this,e,t),this}wrap(e,t){return Lee(this,e,t),this}setBlockType(e,t=e,n,s=null){return Pee(this,e,t,n,s),this}setNodeMarkup(e,t,n=null,s){return Bee(this,e,t,n,s),this}setNodeAttribute(e,t,n){return this.step(new gm(e,t,n)),this}setDocAttribute(e,t){return this.step(new kx(e,t)),this}addNodeMark(e,t){return this.step(new Cd(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof Sn)t.isInSet(n.marks)&&this.step(new Yf(e,t));else{let s=n.marks,i,a=[];for(;i=t.isInSet(s);)a.push(new Yf(e,i)),s=i.removeFromSet(s);for(let o=a.length-1;o>=0;o--)this.step(a[o])}return this}split(e,t=1,n){return Fee(this,e,t,n),this}addMark(e,t,n){return Mee(this,e,t,n),this}removeMark(e,t,n){return _ee(this,e,t,n),this}clearIncompatible(e,t,n){return g_(this,e,t,n),this}}const kN=Object.create(null);class bt{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Xee(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=De.empty){let n=t.content.lastChild,s=null;for(let o=0;o<t.openEnd;o++)s=n,n=n.lastChild;let i=e.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:c,$to:d}=a[o],h=e.mapping.slice(i);e.replaceRange(h.map(c.pos),h.map(d.pos),o?De.empty:t),o==0&&Y6(e,i,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:a,$to:o}=s[i],c=e.mapping.slice(n),d=c.map(a.pos),h=c.map(o.pos);i?e.deleteRange(d,h):(e.replaceRangeWith(d,h,t),Y6(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let s=e.parent.inlineContent?new nt(e):tm(e.node(0),e.parent,e.pos,e.index(),t,n);if(s)return s;for(let i=e.depth-1;i>=0;i--){let a=t<0?tm(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):tm(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Ki(e.node(0))}static atStart(e){return tm(e,e,0,0,1)||new Ki(e)}static atEnd(e){return tm(e,e,e.content.size,e.childCount,-1)||new Ki(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=kN[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in kN)throw new RangeError("Duplicate use of selection JSON ID "+e);return kN[e]=t,t.prototype.jsonID=e,t}getBookmark(){return nt.between(this.$anchor,this.$head).getBookmark()}}bt.prototype.visible=!0;class Xee{constructor(e,t){this.$from=e,this.$to=t}}let G6=!1;function W6(r){!G6&&!r.parent.inlineContent&&(G6=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class nt extends bt{constructor(e,t=e){W6(e),W6(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return bt.near(n);let s=e.resolve(t.map(this.anchor));return new nt(s.parent.inlineContent?s:n,n)}replace(e,t=De.empty){if(super.replace(e,t),t==De.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof nt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new bE(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new nt(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let s=e.resolve(t);return new this(s,n==t?s:e.resolve(n))}static between(e,t,n){let s=e.pos-t.pos;if((!n||s)&&(n=s>=0?1:-1),!t.parent.inlineContent){let i=bt.findFrom(t,n,!0)||bt.findFrom(t,-n,!0);if(i)t=i.$head;else return bt.near(t,n)}return e.parent.inlineContent||(s==0?e=t:(e=(bt.findFrom(e,-n,!0)||bt.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new nt(e,t)}}bt.jsonID("text",nt);class bE{constructor(e,t){this.anchor=e,this.head=t}map(e){return new bE(e.map(this.anchor),e.map(this.head))}resolve(e){return nt.between(e.resolve(this.anchor),e.resolve(this.head))}}class We extends bt{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return n?bt.near(i):new We(i)}content(){return new De(Ee.from(this.node),0,0)}eq(e){return e instanceof We&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new x_(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new We(e.resolve(t.anchor))}static create(e,t){return new We(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}We.prototype.visible=!1;bt.jsonID("node",We);class x_{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new bE(n,n):new x_(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&We.isSelectable(n)?new We(t):bt.near(t)}}class Ki extends bt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=De.empty){if(t==De.empty){e.delete(0,e.doc.content.size);let n=bt.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ki(e)}map(e){return new Ki(e)}eq(e){return e instanceof Ki}getBookmark(){return Kee}}bt.jsonID("all",Ki);const Kee={map(){return this},resolve(r){return new Ki(r)}};function tm(r,e,t,n,s,i=!1){if(e.inlineContent)return nt.create(r,t);for(let a=n-(s>0?0:1);s>0?a<e.childCount:a>=0;a+=s){let o=e.child(a);if(o.isAtom){if(!i&&We.isSelectable(o))return We.create(r,t-(s<0?o.nodeSize:0))}else{let c=tm(r,o,t+s,s<0?o.childCount:0,s,i);if(c)return c}t+=o.nodeSize*s}return null}function Y6(r,e,t){let n=r.steps.length-1;if(n<e)return;let s=r.steps[n];if(!(s instanceof Qr||s instanceof ts))return;let i=r.mapping.maps[n],a;i.forEach((o,c,d,h)=>{a==null&&(a=h)}),r.setSelection(bt.near(r.doc.resolve(a),t))}const X6=1,vw=2,K6=4;class Jee extends mF{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|X6)&~vw,this.storedMarks=null,this}get selectionSet(){return(this.updated&X6)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vw,this}ensureMarks(e){return Sn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vw)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~vw,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Sn.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let a=this.doc.resolve(t);i=n==t?a.marks():a.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,s.text(e,i)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(bt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=K6,this}get scrolledIntoView(){return(this.updated&K6)>0}}function J6(r,e){return!e||!r?r:r.bind(e)}class Gy{constructor(e,t,n){this.name=e,this.init=J6(t.init,n),this.apply=J6(t.apply,n)}}const Qee=[new Gy("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new Gy("selection",{init(r,e){return r.selection||bt.atStart(e.doc)},apply(r){return r.selection}}),new Gy("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new Gy("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class MN{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Qee.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Gy(n.key,n.spec.state,n))})}}class om{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),s=null;for(;;){let i=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let c=s?s[a].n:0,d=s?s[a].state:this,h=c<t.length&&o.spec.appendTransaction.call(o,c?t.slice(c):t,d,n);if(h&&n.filterTransaction(h,a)){if(h.setMeta("appendedTransaction",e),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<a?{state:n,n:t.length}:{state:this,n:0})}t.push(h),n=n.applyInner(h),i=!0}s&&(s[a]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new om(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let i=n[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new Jee(this)}static create(e){let t=new MN(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new om(t);for(let s=0;s<t.fields.length;s++)n[t.fields[s].name]=t.fields[s].init(e,n);return n}reconfigure(e){let t=new MN(this.schema,e.plugins),n=t.fields,s=new om(t);for(let i=0;i<n.length;i++){let a=n[i].name;s[a]=this.hasOwnProperty(a)?this[a]:n[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],i=s.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new MN(e.schema,e.plugins),i=new om(s);return s.fields.forEach(a=>{if(a.name=="doc")i.doc=Td.fromJSON(e.schema,t.doc);else if(a.name=="selection")i.selection=bt.fromJSON(i.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let c=n[o],d=c.spec.state;if(c.key==a.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,o)){i[a.name]=d.fromJSON.call(c,e,t[o],i);return}}i[a.name]=a.init(e,i)}}),i}}function gF(r,e,t){for(let n in r){let s=r[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=gF(s,e,{})),t[n]=s}return t}class Wn{constructor(e){this.spec=e,this.props={},e.props&&gF(e.props,this,this.props),this.key=e.key?e.key.key:yF("plugin")}getState(e){return e[this.key]}}const _N=Object.create(null);function yF(r){return r in _N?r+"$"+ ++_N[r]:(_N[r]=0,r+"$")}class Br{constructor(e="key"){this.key=yF(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const b_=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function xF(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const bF=(r,e,t)=>{let n=xF(r,t);if(!n)return!1;let s=v_(n);if(!s){let a=n.blockRange(),o=a&&u0(a);return o==null?!1:(e&&e(r.tr.lift(a,o).scrollIntoView()),!0)}let i=s.nodeBefore;if(kF(r,s,e,-1))return!0;if(n.parent.content.size==0&&(Xg(i,"end")||We.isSelectable(i)))for(let a=n.depth;;a--){let o=xE(r.doc,n.before(a),n.after(a),De.empty);if(o&&o.slice.size<o.to-o.from){if(e){let c=r.tr.step(o);c.setSelection(Xg(i,"end")?bt.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):We.create(c.doc,s.pos-i.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||n.node(a-1).childCount>1)break}return i.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},Zee=(r,e,t)=>{let n=xF(r,t);if(!n)return!1;let s=v_(n);return s?vF(r,s,e):!1},ete=(r,e,t)=>{let n=SF(r,t);if(!n)return!1;let s=w_(n);return s?vF(r,s,e):!1};function vF(r,e,t){let n=e.nodeBefore,s=n,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let h=s.lastChild;if(!h)return!1;s=h}let a=e.nodeAfter,o=a,c=e.pos+1;for(;!o.isTextblock;c++){if(o.type.spec.isolating)return!1;let h=o.firstChild;if(!h)return!1;o=h}let d=xE(r.doc,i,c,De.empty);if(!d||d.from!=i||d instanceof Qr&&d.slice.size>=c-i)return!1;if(t){let h=r.tr.step(d);h.setSelection(nt.create(h.doc,i)),t(h.scrollIntoView())}return!0}function Xg(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const wF=(r,e,t)=>{let{$head:n,empty:s}=r.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;i=v_(n)}let a=i&&i.nodeBefore;return!a||!We.isSelectable(a)?!1:(e&&e(r.tr.setSelection(We.create(r.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)};function v_(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function SF(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const CF=(r,e,t)=>{let n=SF(r,t);if(!n)return!1;let s=w_(n);if(!s)return!1;let i=s.nodeAfter;if(kF(r,s,e,1))return!0;if(n.parent.content.size==0&&(Xg(i,"start")||We.isSelectable(i))){let a=xE(r.doc,n.before(),n.after(),De.empty);if(a&&a.slice.size<a.to-a.from){if(e){let o=r.tr.step(a);o.setSelection(Xg(i,"start")?bt.findFrom(o.doc.resolve(o.mapping.map(s.pos)),1):We.create(o.doc,o.mapping.map(s.pos))),e(o.scrollIntoView())}return!0}}return i.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},EF=(r,e,t)=>{let{$head:n,empty:s}=r.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;i=w_(n)}let a=i&&i.nodeAfter;return!a||!We.isSelectable(a)?!1:(e&&e(r.tr.setSelection(We.create(r.doc,i.pos)).scrollIntoView()),!0)};function w_(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const tte=(r,e)=>{let t=r.selection,n=t instanceof We,s;if(n){if(t.node.isTextblock||!Fd(r.doc,t.from))return!1;s=t.from}else if(s=yE(r.doc,t.from,-1),s==null)return!1;if(e){let i=r.tr.join(s);n&&i.setSelection(We.create(i.doc,s-r.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},nte=(r,e)=>{let t=r.selection,n;if(t instanceof We){if(t.node.isTextblock||!Fd(r.doc,t.to))return!1;n=t.to}else if(n=yE(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},rte=(r,e)=>{let{$from:t,$to:n}=r.selection,s=t.blockRange(n),i=s&&u0(s);return i==null?!1:(e&&e(r.tr.lift(s,i).scrollIntoView()),!0)},TF=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function S_(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const ste=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let s=t.node(-1),i=t.indexAfter(-1),a=S_(s.contentMatchAt(i));if(!a||!s.canReplaceWith(i,i,a))return!1;if(e){let o=t.after(),c=r.tr.replaceWith(o,o,a.createAndFill());c.setSelection(bt.near(c.doc.resolve(o),1)),e(c.scrollIntoView())}return!0},AF=(r,e)=>{let t=r.selection,{$from:n,$to:s}=t;if(t instanceof Ki||n.parent.inlineContent||s.parent.inlineContent)return!1;let i=S_(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let a=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,o=r.tr.insert(a,i.createAndFill());o.setSelection(nt.create(o.doc,a+1)),e(o.scrollIntoView())}return!0},NF=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(Nc(r.doc,i))return e&&e(r.tr.split(i).scrollIntoView()),!0}let n=t.blockRange(),s=n&&u0(n);return s==null?!1:(e&&e(r.tr.lift(n,s).scrollIntoView()),!0)};function ite(r){return(e,t)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof We&&e.selection.node.isBlock)return!n.parentOffset||!Nc(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],a,o,c=!1,d=!1;for(let b=n.depth;;b--)if(n.node(b).isBlock){c=n.end(b)==n.pos+(n.depth-b),d=n.start(b)==n.pos-(n.depth-b),o=S_(n.node(b-1).contentMatchAt(n.indexAfter(b-1))),i.unshift(c&&o?{type:o}:null),a=b;break}else{if(b==1)return!1;i.unshift(null)}let h=e.tr;(e.selection instanceof nt||e.selection instanceof Ki)&&h.deleteSelection();let g=h.mapping.map(n.pos),y=Nc(h.doc,g,i.length,i);if(y||(i[0]=o?{type:o}:null,y=Nc(h.doc,g,i.length,i)),!y)return!1;if(h.split(g,i.length,i),!c&&d&&n.node(a).type!=o){let b=h.mapping.map(n.before(a)),v=h.doc.resolve(b);o&&n.node(a-1).canReplaceWith(v.index(),v.index()+1,o)&&h.setNodeMarkup(h.mapping.map(n.before(a)),o)}return t&&t(h.scrollIntoView()),!0}}const ate=ite(),ote=(r,e)=>{let{$from:t,to:n}=r.selection,s,i=t.sharedDepth(n);return i==0?!1:(s=t.before(i),e&&e(r.tr.setSelection(We.create(r.doc,s))),!0)};function lte(r,e,t){let n=e.nodeBefore,s=e.nodeAfter,i=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Fd(r.doc,e.pos))?!1:(t&&t(r.tr.join(e.pos).scrollIntoView()),!0)}function kF(r,e,t,n){let s=e.nodeBefore,i=e.nodeAfter,a,o,c=s.type.spec.isolating||i.type.spec.isolating;if(!c&&lte(r,e,t))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(a=(o=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&o.matchType(a[0]||i.type).validEnd){if(t){let b=e.pos+i.nodeSize,v=Ee.empty;for(let C=a.length-1;C>=0;C--)v=Ee.from(a[C].create(null,v));v=Ee.from(s.copy(v));let w=r.tr.step(new ts(e.pos-1,b,e.pos,b,new De(v,1,0),a.length,!0)),E=w.doc.resolve(b+2*a.length);E.nodeAfter&&E.nodeAfter.type==s.type&&Fd(w.doc,E.pos)&&w.join(E.pos),t(w.scrollIntoView())}return!0}let h=i.type.spec.isolating||n>0&&c?null:bt.findFrom(e,1),g=h&&h.$from.blockRange(h.$to),y=g&&u0(g);if(y!=null&&y>=e.depth)return t&&t(r.tr.lift(g,y).scrollIntoView()),!0;if(d&&Xg(i,"start",!0)&&Xg(s,"end")){let b=s,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let w=i,E=1;for(;!w.isTextblock;w=w.firstChild)E++;if(b.canReplace(b.childCount,b.childCount,w.content)){if(t){let C=Ee.empty;for(let A=v.length-1;A>=0;A--)C=Ee.from(v[A].copy(C));let N=r.tr.step(new ts(e.pos-v.length,e.pos+i.nodeSize,e.pos+E,e.pos+i.nodeSize-E,new De(C,v.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function MF(r){return function(e,t){let n=e.selection,s=r<0?n.$from:n.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(nt.create(e.doc,r<0?s.start(i):s.end(i)))),!0):!1}}const cte=MF(-1),ute=MF(1);function dte(r,e=null){return function(t,n){let{$from:s,$to:i}=t.selection,a=s.blockRange(i),o=a&&y_(a,r,e);return o?(n&&n(t.tr.wrap(a,o).scrollIntoView()),!0):!1}}function Q6(r,e=null){return function(t,n){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:a},$to:{pos:o}}=t.selection.ranges[i];t.doc.nodesBetween(a,o,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(r,e)))if(c.type==r)s=!0;else{let h=t.doc.resolve(d),g=h.index();s=h.parent.canReplaceWith(g,g+1,r)}})}if(!s)return!1;if(n){let i=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:o},$to:{pos:c}}=t.selection.ranges[a];i.setBlockType(o,c,r,e)}n(i.scrollIntoView())}return!0}}function C_(...r){return function(e,t,n){for(let s=0;s<r.length;s++)if(r[s](e,t,n))return!0;return!1}}C_(b_,bF,wF);C_(b_,CF,EF);C_(TF,AF,NF,ate);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function hte(r,e=null){return function(t,n){let{$from:s,$to:i}=t.selection,a=s.blockRange(i);if(!a)return!1;let o=n?t.tr:null;return fte(o,a,r,e)?(n&&n(o.scrollIntoView()),!0):!1}}function fte(r,e,t,n=null){let s=!1,i=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);i=new WS(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new WS(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let o=y_(i,t,n,e);return o?(r&&pte(r,e,o,s,t),!0):!1}function pte(r,e,t,n,s){let i=Ee.empty;for(let h=t.length-1;h>=0;h--)i=Ee.from(t[h].type.create(t[h].attrs,i));r.step(new ts(e.start-(n?2:0),e.end,e.start,e.end,new De(i,0,0),t.length,!0));let a=0;for(let h=0;h<t.length;h++)t[h].type==s&&(a=h+1);let o=t.length-a,c=e.start+t.length-(n?2:0),d=e.parent;for(let h=e.startIndex,g=e.endIndex,y=!0;h<g;h++,y=!1)!y&&Nc(r.doc,c,o)&&(r.split(c,o),c+=2*o),c+=d.child(h).nodeSize;return r}function mte(r){return function(e,t){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,a=>a.childCount>0&&a.firstChild.type==r);return i?t?n.node(i.depth-1).type==r?gte(e,t,r,i):yte(e,t,i):!0:!1}}function gte(r,e,t,n){let s=r.tr,i=n.end,a=n.$to.end(n.depth);i<a&&(s.step(new ts(i-1,a,i,a,new De(Ee.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new WS(s.doc.resolve(n.$from.pos),s.doc.resolve(a),n.depth));const o=u0(n);if(o==null)return!1;s.lift(n,o);let c=s.doc.resolve(s.mapping.map(i,-1)-1);return Fd(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),e(s.scrollIntoView()),!0}function yte(r,e,t){let n=r.tr,s=t.parent;for(let b=t.end,v=t.endIndex-1,w=t.startIndex;v>w;v--)b-=s.child(v).nodeSize,n.delete(b-1,b+1);let i=n.doc.resolve(t.start),a=i.nodeAfter;if(n.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let o=t.startIndex==0,c=t.endIndex==s.childCount,d=i.node(-1),h=i.index(-1);if(!d.canReplace(h+(o?0:1),h+1,a.content.append(c?Ee.empty:Ee.from(s))))return!1;let g=i.pos,y=g+a.nodeSize;return n.step(new ts(g-(o?1:0),y+(c?1:0),g+1,y-1,new De((o?Ee.empty:Ee.from(s.copy(Ee.empty))).append(c?Ee.empty:Ee.from(s.copy(Ee.empty))),o?0:1,c?0:1),o?0:1)),e(n.scrollIntoView()),!0}function xte(r){return function(e,t){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,d=>d.childCount>0&&d.firstChild.type==r);if(!i)return!1;let a=i.startIndex;if(a==0)return!1;let o=i.parent,c=o.child(a-1);if(c.type!=r)return!1;if(t){let d=c.lastChild&&c.lastChild.type==o.type,h=Ee.from(d?r.create():null),g=new De(Ee.from(r.create(null,Ee.from(o.type.create(null,h)))),d?3:1,0),y=i.start,b=i.end;t(e.tr.step(new ts(y-(d?3:1),b,y,b,g,1,!0)).scrollIntoView())}return!0}}const ys=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Kg=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let iM=null;const Hl=function(r,e,t){let n=iM||(iM=document.createRange());return n.setEnd(r,t??r.nodeValue.length),n.setStart(r,e||0),n},bte=function(){iM=null},Xf=function(r,e,t,n){return t&&(Z6(r,e,t,n,-1)||Z6(r,e,t,n,1))},vte=/^(img|br|input|textarea|hr)$/i;function Z6(r,e,t,n,s){for(var i;;){if(r==t&&e==n)return!0;if(e==(s<0?0:Oa(r))){let a=r.parentNode;if(!a||a.nodeType!=1||Mb(r)||vte.test(r.nodeName)||r.contentEditable=="false")return!1;e=ys(r)+(s<0?0:1),r=a}else if(r.nodeType==1){let a=r.childNodes[e+(s<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((i=a.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else r=a,e=s<0?Oa(r):0}else return!1}}function Oa(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function wte(r,e){for(;;){if(r.nodeType==3&&e)return r;if(r.nodeType==1&&e>0){if(r.contentEditable=="false")return null;r=r.childNodes[e-1],e=Oa(r)}else if(r.parentNode&&!Mb(r))e=ys(r),r=r.parentNode;else return null}}function Ste(r,e){for(;;){if(r.nodeType==3&&e<r.nodeValue.length)return r;if(r.nodeType==1&&e<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[e],e=0}else if(r.parentNode&&!Mb(r))e=ys(r)+1,r=r.parentNode;else return null}}function Cte(r,e,t){for(let n=e==0,s=e==Oa(r);n||s;){if(r==t)return!0;let i=ys(r);if(r=r.parentNode,!r)return!1;n=n&&i==0,s=s&&i==Oa(r)}}function Mb(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const vE=function(r){return r.focusNode&&Xf(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function ph(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function Ete(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Tte(r,e,t){if(r.caretPositionFromPoint)try{let n=r.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:Math.min(Oa(n.offsetNode),n.offset)}}catch{}if(r.caretRangeFromPoint){let n=r.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:Math.min(Oa(n.startContainer),n.startOffset)}}}const ll=typeof navigator<"u"?navigator:null,eL=typeof document<"u"?document:null,zd=ll&&ll.userAgent||"",aM=/Edge\/(\d+)/.exec(zd),_F=/MSIE \d/.exec(zd),oM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zd),mi=!!(_F||oM||aM),Nd=_F?document.documentMode:oM?+oM[1]:aM?+aM[1]:0,La=!mi&&/gecko\/(\d+)/i.test(zd);La&&+(/Firefox\/(\d+)/.exec(zd)||[0,0])[1];const lM=!mi&&/Chrome\/(\d+)/.exec(zd),Zr=!!lM,jF=lM?+lM[1]:0,Ds=!mi&&!!ll&&/Apple Computer/.test(ll.vendor),Jg=Ds&&(/Mobile\/\w+/.test(zd)||!!ll&&ll.maxTouchPoints>2),ja=Jg||(ll?/Mac/.test(ll.platform):!1),DF=ll?/Win/.test(ll.platform):!1,Ec=/Android \d/.test(zd),_b=!!eL&&"webkitFontSmoothing"in eL.documentElement.style,Ate=_b?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Nte(r){let e=r.defaultView&&r.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function _l(r,e){return typeof r=="number"?r:r[e]}function kte(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function tL(r,e,t){let n=r.someProp("scrollThreshold")||0,s=r.someProp("scrollMargin")||5,i=r.dom.ownerDocument;for(let a=t||r.dom;a;){if(a.nodeType!=1){a=Kg(a);continue}let o=a,c=o==i.body,d=c?Nte(i):kte(o),h=0,g=0;if(e.top<d.top+_l(n,"top")?g=-(d.top-e.top+_l(s,"top")):e.bottom>d.bottom-_l(n,"bottom")&&(g=e.bottom-e.top>d.bottom-d.top?e.top+_l(s,"top")-d.top:e.bottom-d.bottom+_l(s,"bottom")),e.left<d.left+_l(n,"left")?h=-(d.left-e.left+_l(s,"left")):e.right>d.right-_l(n,"right")&&(h=e.right-d.right+_l(s,"right")),h||g)if(c)i.defaultView.scrollBy(h,g);else{let b=o.scrollLeft,v=o.scrollTop;g&&(o.scrollTop+=g),h&&(o.scrollLeft+=h);let w=o.scrollLeft-b,E=o.scrollTop-v;e={left:e.left-w,top:e.top-E,right:e.right-w,bottom:e.bottom-E}}let y=c?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(y))break;a=y=="absolute"?a.offsetParent:Kg(a)}}function Mte(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,s;for(let i=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let o=r.root.elementFromPoint(i,a);if(!o||o==r.dom||!r.dom.contains(o))continue;let c=o.getBoundingClientRect();if(c.top>=t-20){n=o,s=c.top;break}}return{refDOM:n,refTop:s,stack:OF(r.dom)}}function OF(r){let e=[],t=r.ownerDocument;for(let n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=Kg(n));return e}function _te({refDOM:r,refTop:e,stack:t}){let n=r?r.getBoundingClientRect().top:0;RF(t,n==0?0:n-e)}function RF(r,e){for(let t=0;t<r.length;t++){let{dom:n,top:s,left:i}=r[t];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let $p=null;function jte(r){if(r.setActive)return r.setActive();if($p)return r.focus($p);let e=OF(r);r.focus($p==null?{get preventScroll(){return $p={preventScroll:!0},!0}}:void 0),$p||($p=!1,RF(e,0))}function LF(r,e){let t,n=2e8,s,i=0,a=e.top,o=e.top,c,d;for(let h=r.firstChild,g=0;h;h=h.nextSibling,g++){let y;if(h.nodeType==1)y=h.getClientRects();else if(h.nodeType==3)y=Hl(h).getClientRects();else continue;for(let b=0;b<y.length;b++){let v=y[b];if(v.top<=a&&v.bottom>=o){a=Math.max(v.bottom,a),o=Math.min(v.top,o);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<n){t=h,n=w,s=w&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,h.nodeType==1&&w&&(i=g+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=h,d={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=g+1)}}return!t&&c&&(t=c,s=d,n=0),t&&t.nodeType==3?Dte(t,s):!t||n&&t.nodeType==1?{node:r,offset:i}:LF(t,s)}function Dte(r,e){let t=r.nodeValue.length,n=document.createRange(),s;for(let i=0;i<t;i++){n.setEnd(r,i+1),n.setStart(r,i);let a=yu(n,1);if(a.top!=a.bottom&&E_(e,a)){s={node:r,offset:i+(e.left>=(a.left+a.right)/2?1:0)};break}}return n.detach(),s||{node:r,offset:0}}function E_(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function Ote(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function Rte(r,e,t){let{node:n,offset:s}=LF(e,t),i=-1;if(n.nodeType==1&&!n.firstChild){let a=n.getBoundingClientRect();i=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return r.docView.posFromDOM(n,s,i)}function Lte(r,e,t,n){let s=-1;for(let i=e,a=!1;i!=r.dom;){let o=r.docView.nearestDesc(i,!0),c;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((c=o.dom.getBoundingClientRect()).width||c.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!a&&c.left>n.left||c.top>n.top?s=o.posBefore:(!a&&c.right<n.left||c.bottom<n.top)&&(s=o.posAfter),a=!0),!o.contentDOM&&s<0&&!o.node.isText))return(o.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?o.posBefore:o.posAfter;i=o.dom.parentNode}return s>-1?s:r.docView.posFromDOM(e,t,-1)}function PF(r,e,t){let n=r.childNodes.length;if(n&&t.top<t.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let a=r.childNodes[i];if(a.nodeType==1){let o=a.getClientRects();for(let c=0;c<o.length;c++){let d=o[c];if(E_(e,d))return PF(a,e,d)}}if((i=(i+1)%n)==s)break}return r}function Pte(r,e){let t=r.dom.ownerDocument,n,s=0,i=Tte(t,e.left,e.top);i&&({node:n,offset:s}=i);let a=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),o;if(!a||!r.dom.contains(a.nodeType!=1?a.parentNode:a)){let d=r.dom.getBoundingClientRect();if(!E_(e,d)||(a=PF(r.dom,e,d),!a))return null}if(Ds)for(let d=a;n&&d;d=Kg(d))d.draggable&&(n=void 0);if(a=Ote(a,e),n){if(La&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let h=n.childNodes[s],g;h.nodeName=="IMG"&&(g=h.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&s++}let d;_b&&s&&n.nodeType==1&&(d=n.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&s--,n==r.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?o=r.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(o=Lte(r,n,s,e))}o==null&&(o=Rte(r,a,e));let c=r.docView.nearestDesc(a,!0);return{pos:o,inside:c?c.posAtStart-c.border:-1}}function nL(r){return r.top<r.bottom||r.left<r.right}function yu(r,e){let t=r.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(nL(n))return n}return Array.prototype.find.call(t,nL)||r.getBoundingClientRect()}const Ite=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function IF(r,e,t){let{node:n,offset:s,atom:i}=r.docView.domFromPos(e,t<0?-1:1),a=_b||La;if(n.nodeType==3)if(a&&(Ite.test(n.nodeValue)||(t<0?!s:s==n.nodeValue.length))){let c=yu(Hl(n,s,s),t);if(La&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let d=yu(Hl(n,s-1,s-1),-1);if(d.top==c.top){let h=yu(Hl(n,s,s+1),-1);if(h.top!=c.top)return yy(h,h.left<d.left)}}return c}else{let c=s,d=s,h=t<0?1:-1;return t<0&&!s?(d++,h=-1):t>=0&&s==n.nodeValue.length?(c--,h=1):t<0?c--:d++,yy(yu(Hl(n,c,d),h),h<0)}if(!r.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==Oa(n))){let c=n.childNodes[s-1];if(c.nodeType==1)return jN(c.getBoundingClientRect(),!1)}if(i==null&&s<Oa(n)){let c=n.childNodes[s];if(c.nodeType==1)return jN(c.getBoundingClientRect(),!0)}return jN(n.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==Oa(n))){let c=n.childNodes[s-1],d=c.nodeType==3?Hl(c,Oa(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return yy(yu(d,1),!1)}if(i==null&&s<Oa(n)){let c=n.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Hl(c,0,a?0:1):c.nodeType==1?c:null:null;if(d)return yy(yu(d,-1),!0)}return yy(yu(n.nodeType==3?Hl(n):n,-t),t>=0)}function yy(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function jN(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function BF(r,e,t){let n=r.state,s=r.root.activeElement;n!=e&&r.updateState(e),s!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),s!=r.dom&&s&&s.focus()}}function Bte(r,e,t){let n=e.selection,s=t=="up"?n.$from:n.$to;return BF(r,e,()=>{let{node:i}=r.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let o=r.docView.nearestDesc(i,!0);if(!o)break;if(o.node.isBlock){i=o.contentDOM||o.dom;break}i=o.dom.parentNode}let a=IF(r,s.pos,1);for(let o=i.firstChild;o;o=o.nextSibling){let c;if(o.nodeType==1)c=o.getClientRects();else if(o.nodeType==3)c=Hl(o,0,o.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let h=c[d];if(h.bottom>h.top+1&&(t=="up"?a.top-h.top>(h.bottom-a.top)*2:h.bottom-a.bottom>(a.bottom-h.top)*2))return!1}}return!0})}const Fte=/[\u0590-\u08ac]/;function zte(r,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,i=!s,a=s==n.parent.content.size,o=r.domSelection();return o?!Fte.test(n.parent.textContent)||!o.modify?t=="left"||t=="backward"?i:a:BF(r,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:h,anchorOffset:g}=r.domSelectionRange(),y=o.caretBidiLevel;o.modify("move",t,"character");let b=n.depth?r.docView.domAfterPos(n.before()):r.dom,{focusNode:v,focusOffset:w}=r.domSelectionRange(),E=v&&!b.contains(v.nodeType==1?v:v.parentNode)||c==v&&d==w;try{o.collapse(h,g),c&&(c!=h||d!=g)&&o.extend&&o.extend(c,d)}catch{}return y!=null&&(o.caretBidiLevel=y),E}):n.pos==n.start()||n.pos==n.end()}let rL=null,sL=null,iL=!1;function Hte(r,e,t){return rL==e&&sL==t?iL:(rL=e,sL=t,iL=t=="up"||t=="down"?Bte(r,e,t):zte(r,e,t))}const Pa=0,aL=1,xh=2,cl=3;class jb{constructor(e,t,n,s){this.parent=e,this.children=t,this.dom=n,this.contentDOM=s,this.dirty=Pa,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let s=this.children[t];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,a;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(a)+a.size:this.posAtStart}else{let i,a;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>ys(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),a;if(i&&(!t||i.node))if(n&&(a=i.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))n=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let s=this.children[t],i=n+s.size;if(n==e&&i!=n){for(;!s.border&&s.children.length;)for(let a=0;a<s.children.length;a++){let o=s.children[a];if(o.size){s=o;break}}return s}if(e<i)return s.descAt(e-n-s.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let i=0;n<this.children.length;n++){let a=this.children[n],o=i+a.size;if(o>e||a instanceof zF){s=e-i;break}i=o}if(s)return this.children[n].domFromPos(s-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof FF&&i.side>=0;n--);if(t<=0){let i,a=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,a=!1);return i&&t&&a&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?ys(i.dom)+1:0}}else{let i,a=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,a=!1);return i&&a&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?ys(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let a=n,o=0;;o++){let c=this.children[o],d=a+c.size;if(s==-1&&e<=d){let h=a+c.border;if(e>=h&&t<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,h);e=a;for(let g=o;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){s=ys(y.dom)+1;break}e-=y.size}s==-1&&(s=0)}if(s>-1&&(d>t||o==this.children.length-1)){t=d;for(let h=o+1;h<this.children.length;h++){let g=this.children[h];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){i=ys(g.dom);break}t+=g.size}i==-1&&(i=this.contentDOM.childNodes.length);break}a=d}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,s=!1){let i=Math.min(e,t),a=Math.max(e,t);for(let b=0,v=0;b<this.children.length;b++){let w=this.children[b],E=v+w.size;if(i>v&&a<E)return w.setSelection(e-v-w.border,t-v-w.border,n,s);v=E}let o=this.domFromPos(e,e?-1:1),c=t==e?o:this.domFromPos(t,t?-1:1),d=n.root.getSelection(),h=n.domSelectionRange(),g=!1;if((La||Ds)&&e==t){let{node:b,offset:v}=o;if(b.nodeType==3){if(g=!!(v&&b.nodeValue[v-1]==`
`),g&&v==b.nodeValue.length)for(let w=b,E;w;w=w.parentNode){if(E=w.nextSibling){E.nodeName=="BR"&&(o=c={node:E.parentNode,offset:ys(E)+1});break}let C=w.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let w=b.childNodes[v-1];g=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(La&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let b=h.focusNode.childNodes[h.focusOffset];b&&b.contentEditable=="false"&&(s=!0)}if(!(s||g&&Ds)&&Xf(o.node,o.offset,h.anchorNode,h.anchorOffset)&&Xf(c.node,c.offset,h.focusNode,h.focusOffset))return;let y=!1;if((d.extend||e==t)&&!(g&&La)){d.collapse(o.node,o.offset);try{e!=t&&d.extend(c.node,c.offset),y=!0}catch{}}if(!y){if(e>t){let v=o;o=c,c=v}let b=document.createRange();b.setEnd(c.node,c.offset),b.setStart(o.node,o.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,s=0;s<this.children.length;s++){let i=this.children[s],a=n+i.size;if(n==a?e<=a&&t>=n:e<a&&t>n){let o=n+i.border,c=a-i.border;if(e>=o&&t<=c){this.dirty=e==n||t==a?xh:aL,e==o&&t==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=cl:i.markDirty(e-o,t-o);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?xh:cl}n=a}this.dirty=xh}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?xh:aL;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class FF extends jb{constructor(e,t,n,s){let i,a=t.type.toDOM;if(typeof a=="function"&&(a=a(n,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(a.nodeType!=1){let o=document.createElement("span");o.appendChild(a),a=o}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==Pa&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Ute extends jb{constructor(e,t,n,s){super(e,[],t,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Kf extends jb{constructor(e,t,n,s,i){super(e,[],n,s),this.mark=t,this.spec=i}static create(e,t,n,s){let i=s.nodeViews[t.type.name],a=i&&i(t,s,n);return(!a||!a.dom)&&(a=sp.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new Kf(e,t,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&cl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=cl&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Pa){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Pa}}slice(e,t,n){let s=Kf.create(this.parent,this.mark,!0,n),i=this.children,a=this.size;t<a&&(i=uM(i,t,a,n)),e>0&&(i=uM(i,0,e,n));for(let o=0;o<i.length;o++)i[o].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class kd extends jb{constructor(e,t,n,s,i,a,o,c,d){super(e,[],i,a),this.node=t,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=o}static create(e,t,n,s,i,a){let o=i.nodeViews[t.type.name],c,d=o&&o(t,i,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},n,s),h=d&&d.dom,g=d&&d.contentDOM;if(t.isText){if(!h)h=document.createTextNode(t.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:g}=sp.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),t.type.spec.draggable&&(h.draggable=!0));let y=h;return h=$F(h,n,t),d?c=new $te(e,t,n,s,h,g||null,y,d,i,a+1):t.isText?new wE(e,t,n,s,h,y,i):new kd(e,t,n,s,h,g||null,y,i,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ee.empty)}return e}matchesNode(e,t,n){return this.dirty==Pa&&e.eq(this.node)&&XS(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,a=i&&i.pos>-1?i:null,o=i&&i.pos<0,c=new qte(this,a&&a.node,e);Yte(this.node,this.innerDeco,(d,h,g)=>{d.spec.marks?c.syncToMarks(d.spec.marks,n,e):d.type.side>=0&&!g&&c.syncToMarks(h==this.node.childCount?Sn.none:this.node.child(h).marks,n,e),c.placeWidget(d,e,s)},(d,h,g,y)=>{c.syncToMarks(d.marks,n,e);let b;c.findNodeMatch(d,h,g,y)||o&&e.state.selection.from>s&&e.state.selection.to<s+d.nodeSize&&(b=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(d,h,g,b,e)||c.updateNextNode(d,h,g,e,y,s)||c.addNode(d,h,g,e,s),s+=d.nodeSize}),c.syncToMarks([],n,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==xh)&&(a&&this.protectLocalComposition(e,a),HF(this.contentDOM,this.children,e),Jg&&Xte(this.dom))}localCompositionInfo(e,t){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof nt)||n<t||s>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let a=i.nodeValue,o=Kte(this.node.content,a,n-t,s-t);return o<0?null:{node:i,pos:o,text:a}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let a=new Ute(this,i,t,s);e.input.compositionNodes.push(a),this.children=uM(this.children,n,n+s.length,e,a)}update(e,t,n,s){return this.dirty==cl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,s),!0)}updateInner(e,t,n,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Pa}updateOuterDeco(e){if(XS(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=UF(this.dom,this.nodeDOM,cM(this.outerDeco,this.node,t),cM(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function oL(r,e,t,n,s){$F(n,e,r);let i=new kd(void 0,r,e,t,n,n,n,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class wE extends kd{constructor(e,t,n,s,i,a,o){super(e,t,n,s,i,null,a,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,s){return this.dirty==cl||this.dirty!=Pa&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Pa||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Pa,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new wE(this.parent,s,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=cl)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zF extends jb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Pa&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class $te extends kd{constructor(e,t,n,s,i,a,o,c,d,h){super(e,t,n,s,i,a,o,d,h),this.spec=c}update(e,t,n,s){if(this.dirty==cl)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,s){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function HF(r,e,t){let n=r.firstChild,s=!1;for(let i=0;i<e.length;i++){let a=e[i],o=a.dom;if(o.parentNode==r){for(;o!=n;)n=lL(n),s=!0;n=n.nextSibling}else s=!0,r.insertBefore(o,n);if(a instanceof Kf){let c=n?n.previousSibling:r.lastChild;HF(a.contentDOM,a.children,t),n=c?c.nextSibling:r.firstChild}}for(;n;)n=lL(n),s=!0;s&&t.trackWrites==r&&(t.trackWrites=null)}const ax=function(r){r&&(this.nodeName=r)};ax.prototype=Object.create(null);const bh=[new ax];function cM(r,e,t){if(r.length==0)return bh;let n=t?bh[0]:new ax,s=[n];for(let i=0;i<r.length;i++){let a=r[i].type.attrs;if(a){a.nodeName&&s.push(n=new ax(a.nodeName));for(let o in a){let c=a[o];c!=null&&(t&&s.length==1&&s.push(n=new ax(e.isInline?"span":"div")),o=="class"?n.class=(n.class?n.class+" ":"")+c:o=="style"?n.style=(n.style?n.style+";":"")+c:o!="nodeName"&&(n[o]=c))}}}return s}function UF(r,e,t,n){if(t==bh&&n==bh)return e;let s=e;for(let i=0;i<n.length;i++){let a=n[i],o=t[i];if(i){let c;o&&o.nodeName==a.nodeName&&s!=r&&(c=s.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(s),o=bh[0]),s=c}Vte(s,o||bh[0],a)}return s}function Vte(r,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&r.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)s.indexOf(n[i])==-1&&r.classList.remove(n[i]);for(let i=0;i<s.length;i++)n.indexOf(s[i])==-1&&r.classList.add(s[i]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)r.style.removeProperty(s[1])}t.style&&(r.style.cssText+=t.style)}}function $F(r,e,t){return UF(r,r,bh,cM(e,t,r.nodeType!=1))}function XS(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function lL(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class qte{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Gte(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let s=0,i=this.stack.length>>1,a=Math.min(i,e.length);for(;s<a&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=Pa,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){o=c;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let c=Kf.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,s){let i=-1,a;if(s>=this.preMatch.index&&(a=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,n))i=this.top.children.indexOf(a,this.index);else for(let o=this.index,c=Math.min(this.top.children.length,o+5);o<c;o++){let d=this.top.children[o];if(d.matchesNode(e,t,n)&&!this.preMatch.matched.has(d)){i=o;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,s,i){let a=this.top.children[s];return a.dirty==cl&&a.dom==a.contentDOM&&(a.dirty=xh),a.update(e,t,n,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=t}}updateNextNode(e,t,n,s,i,a){for(let o=this.index;o<this.top.children.length;o++){let c=this.top.children[o];if(c instanceof kd){let d=this.preMatch.matched.get(c);if(d!=null&&d!=i)return!1;let h=c.dom,g,y=this.isLocked(h)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=cl&&XS(t,c.outerDeco));if(!y&&c.update(e,t,n,s))return this.destroyBetween(this.index,o),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(c,e,t,n,s,a)))return this.destroyBetween(this.index,o),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=xh,g.updateChildren(s,a+1),g.dirty=Pa),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,s,i,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!XS(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let o=kd.create(this.top,t,n,s,i,a);if(o.contentDOM){o.children=e.children,e.children=[];for(let c of o.children)c.parent=o}return e.destroy(),o}addNode(e,t,n,s,i){let a=kd.create(this.top,e,t,n,s,i);a.contentDOM&&a.updateChildren(s,i+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new FF(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Kf;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof wE)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ds||Zr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new zF(this.top,[],n,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Gte(r,e){let t=e,n=t.children.length,s=r.childCount,i=new Map,a=[];e:for(;s>0;){let o;for(;;)if(n){let d=t.children[n-1];if(d instanceof Kf)t=d,n=d.children.length;else{o=d,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let c=o.node;if(c){if(c!=r.child(s-1))break;--s,i.set(o,s),a.push(o)}}return{index:s,matched:i,matches:a.reverse()}}function Wte(r,e){return r.type.side-e.type.side}function Yte(r,e,t,n){let s=e.locals(r),i=0;if(s.length==0){for(let d=0;d<r.childCount;d++){let h=r.child(d);n(h,s,e.forChild(i,h),d),i+=h.nodeSize}return}let a=0,o=[],c=null;for(let d=0;;){let h,g;for(;a<s.length&&s[a].to==i;){let E=s[a++];E.widget&&(h?(g||(g=[h])).push(E):h=E)}if(h)if(g){g.sort(Wte);for(let E=0;E<g.length;E++)t(g[E],d,!!c)}else t(h,d,!!c);let y,b;if(c)b=-1,y=c,c=null;else if(d<r.childCount)b=d,y=r.child(d++);else break;for(let E=0;E<o.length;E++)o[E].to<=i&&o.splice(E--,1);for(;a<s.length&&s[a].from<=i&&s[a].to>i;)o.push(s[a++]);let v=i+y.nodeSize;if(y.isText){let E=v;a<s.length&&s[a].from<E&&(E=s[a].from);for(let C=0;C<o.length;C++)o[C].to<E&&(E=o[C].to);E<v&&(c=y.cut(E-i),y=y.cut(0,E-i),v=E,b=-1)}else for(;a<s.length&&s[a].to<v;)a++;let w=y.isInline&&!y.isLeaf?o.filter(E=>!E.inline):o.slice();n(y,w,e.forChild(i,y),b),i=v}}function Xte(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function Kte(r,e,t,n){for(let s=0,i=0;s<r.childCount&&i<=n;){let a=r.child(s++),o=i;if(i+=a.nodeSize,!a.isText)continue;let c=a.text;for(;s<r.childCount;){let d=r.child(s++);if(i+=d.nodeSize,!d.isText)break;c+=d.text}if(i>=t){if(i>=n&&c.slice(n-e.length-o,n-o)==e)return n-e.length;let d=o<n?c.lastIndexOf(e,n-o-1):-1;if(d>=0&&d+e.length+o>=t)return o+d;if(t==n&&c.length>=n+e.length-o&&c.slice(n-o,n-o+e.length)==e)return n}}return-1}function uM(r,e,t,n,s){let i=[];for(let a=0,o=0;a<r.length;a++){let c=r[a],d=o,h=o+=c.size;d>=t||h<=e?i.push(c):(d<e&&i.push(c.slice(0,e-d,n)),s&&(i.push(s),s=void 0),h>t&&i.push(c.slice(t-d,c.size,n)))}return i}function T_(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let s=r.docView.nearestDesc(t.focusNode),i=s&&s.size==0,a=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let o=n.resolve(a),c,d;if(vE(t)){for(c=a;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&We.isSelectable(g)&&s.parent&&!(g.isInline&&Cte(t.focusNode,t.focusOffset,s.dom))){let y=s.posBefore;d=new We(a==y?o:n.resolve(y))}}else{if(t instanceof r.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=a,y=a;for(let b=0;b<t.rangeCount;b++){let v=t.getRangeAt(b);g=Math.min(g,r.docView.posFromDOM(v.startContainer,v.startOffset,1)),y=Math.max(y,r.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(g<0)return null;[c,a]=y==r.state.selection.anchor?[y,g]:[g,y],o=n.resolve(a)}else c=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let h=n.resolve(c);if(!d){let g=e=="pointer"||r.state.selection.head<o.pos&&!i?1:-1;d=A_(r,h,o,g)}return d}function VF(r){return r.editable?r.hasFocus():GF(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function kc(r,e=!1){let t=r.state.selection;if(qF(r,t),!!VF(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Zr){let n=r.domSelectionRange(),s=r.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Xf(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)Qte(r);else{let{anchor:n,head:s}=t,i,a;cL&&!(t instanceof nt)&&(t.$from.parent.inlineContent||(i=uL(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=uL(r,t.to))),r.docView.setSelection(n,s,r,e),cL&&(i&&dL(i),a&&dL(a)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Jte(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const cL=Ds||Zr&&jF<63;function uL(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),s=n<t.childNodes.length?t.childNodes[n]:null,i=n?t.childNodes[n-1]:null;if(Ds&&s&&s.contentEditable=="false")return DN(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return DN(s);if(i)return DN(i)}}function DN(r){return r.contentEditable="true",Ds&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function dL(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Jte(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!VF(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function Qte(r){let e=r.domSelection();if(!e)return;let t=r.cursorWrapper.dom,n=t.nodeName=="IMG";n?e.collapse(t.parentNode,ys(t)+1):e.collapse(t,0),!n&&!r.state.selection.visible&&mi&&Nd<=11&&(t.disabled=!0,t.disabled=!1)}function qF(r,e){if(e instanceof We){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(hL(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else hL(r)}function hL(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function A_(r,e,t,n){return r.someProp("createSelectionBetween",s=>s(r,e,t))||nt.between(e,t,n)}function fL(r){return r.editable&&!r.hasFocus()?!1:GF(r)}function GF(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Zte(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return Xf(e.node,e.offset,t.anchorNode,t.anchorOffset)}function dM(r,e){let{$anchor:t,$head:n}=r.selection,s=e>0?t.max(n):t.min(n),i=s.parent.inlineContent?s.depth?r.doc.resolve(e>0?s.after():s.before()):null:s;return i&&bt.findFrom(i,e)}function bu(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function pL(r,e,t){let n=r.state.selection;if(n instanceof nt)if(t.indexOf("s")>-1){let{$head:s}=n,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let a=r.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return bu(r,new nt(n.$anchor,a))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let s=dM(r.state,e);return s&&s instanceof We?bu(r,s):!1}else if(!(ja&&t.indexOf("m")>-1)){let s=n.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,a;if(!i||i.isText)return!1;let o=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(a=r.docView.descAt(o))&&!a.contentDOM?We.isSelectable(i)?bu(r,new We(e<0?r.state.doc.resolve(s.pos-i.nodeSize):s)):_b?bu(r,new nt(r.state.doc.resolve(e<0?o:o+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof We&&n.node.isInline)return bu(r,new nt(e>0?n.$to:n.$from));{let s=dM(r.state,e);return s?bu(r,s):!1}}}function KS(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function ox(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Vp(r,e){return e<0?ene(r):tne(r)}function ene(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s,i,a=!1;for(La&&t.nodeType==1&&n<KS(t)&&ox(t.childNodes[n],-1)&&(a=!0);;)if(n>0){if(t.nodeType!=1)break;{let o=t.childNodes[n-1];if(ox(o,-1))s=t,i=--n;else if(o.nodeType==3)t=o,n=t.nodeValue.length;else break}}else{if(WF(t))break;{let o=t.previousSibling;for(;o&&ox(o,-1);)s=t.parentNode,i=ys(o),o=o.previousSibling;if(o)t=o,n=KS(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}a?hM(r,t,n):s&&hM(r,s,i)}function tne(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s=KS(t),i,a;for(;;)if(n<s){if(t.nodeType!=1)break;let o=t.childNodes[n];if(ox(o,1))i=t,a=++n;else break}else{if(WF(t))break;{let o=t.nextSibling;for(;o&&ox(o,1);)i=o.parentNode,a=ys(o)+1,o=o.nextSibling;if(o)t=o,n=0,s=KS(t);else{if(t=t.parentNode,t==r.dom)break;n=s=0}}}i&&hM(r,i,a)}function WF(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function nne(r,e){for(;r&&e==r.childNodes.length&&!Mb(r);)e=ys(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function rne(r,e){for(;r&&!e&&!Mb(r);)e=ys(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function hM(r,e,t){if(e.nodeType!=3){let i,a;(a=nne(e,t))?(e=a,t=0):(i=rne(e,t))&&(e=i,t=i.nodeValue.length)}let n=r.domSelection();if(!n)return;if(vE(n)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:s}=r;setTimeout(()=>{r.state==s&&kc(r)},50)}function mL(r,e){let t=r.state.doc.resolve(e);if(!(Zr||DF)&&t.parent.inlineContent){let s=r.coordsAtPos(e);if(e>t.start()){let i=r.coordsAtPos(e-1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=r.coordsAtPos(e+1),a=(i.top+i.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function gL(r,e,t){let n=r.state.selection;if(n instanceof nt&&!n.empty||t.indexOf("s")>-1||ja&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=n;if(!s.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let a=dM(r.state,e);if(a&&a instanceof We)return bu(r,a)}if(!s.parent.inlineContent){let a=e<0?s:i,o=n instanceof Ki?bt.near(a,e):bt.findFrom(a,e);return o?bu(r,o):!1}return!1}function yL(r,e){if(!(r.state.selection instanceof nt))return!0;let{$head:t,$anchor:n,empty:s}=r.state.selection;if(!t.sameParent(n))return!0;if(!s)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let a=r.state.tr;return e<0?a.delete(t.pos-i.nodeSize,t.pos):a.delete(t.pos,t.pos+i.nodeSize),r.dispatch(a),!0}return!1}function xL(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function sne(r){if(!Ds||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;xL(r,n,"true"),setTimeout(()=>xL(r,n,"false"),20)}return!1}function ine(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function ane(r,e){let t=e.keyCode,n=ine(e);if(t==8||ja&&t==72&&n=="c")return yL(r,-1)||Vp(r,-1);if(t==46&&!e.shiftKey||ja&&t==68&&n=="c")return yL(r,1)||Vp(r,1);if(t==13||t==27)return!0;if(t==37||ja&&t==66&&n=="c"){let s=t==37?mL(r,r.state.selection.from)=="ltr"?-1:1:-1;return pL(r,s,n)||Vp(r,s)}else if(t==39||ja&&t==70&&n=="c"){let s=t==39?mL(r,r.state.selection.from)=="ltr"?1:-1:1;return pL(r,s,n)||Vp(r,s)}else{if(t==38||ja&&t==80&&n=="c")return gL(r,-1,n)||Vp(r,-1);if(t==40||ja&&t==78&&n=="c")return sne(r)||gL(r,1,n)||Vp(r,1);if(n==(ja?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function N_(r,e){r.someProp("transformCopied",b=>{e=b(e,r)});let t=[],{content:n,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,i--;let b=n.firstChild;t.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),n=b.content}let a=r.someProp("clipboardSerializer")||sp.fromSchema(r.state.schema),o=ZF(),c=o.createElement("div");c.appendChild(a.serializeFragment(n,{document:o}));let d=c.firstChild,h,g=0;for(;d&&d.nodeType==1&&(h=QF[d.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let v=o.createElement(h[b]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),g++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${i}${g?` -${g}`:""} ${JSON.stringify(t)}`);let y=r.someProp("clipboardTextSerializer",b=>b(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:y,slice:e}}function YF(r,e,t,n,s){let i=s.parent.type.spec.code,a,o;if(!t&&!e)return null;let c=!!e&&(n||i||!t);if(c){if(r.someProp("transformPastedText",y=>{e=y(e,i||n,r)}),i)return o=new De(Ee.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),r.someProp("transformPasted",y=>{o=y(o,r,!0)}),o;let g=r.someProp("clipboardTextParser",y=>y(e,s,n,r));if(g)o=g;else{let y=s.marks(),{schema:b}=r.state,v=sp.fromSchema(b);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let E=a.appendChild(document.createElement("p"));w&&E.appendChild(v.serializeNode(b.text(w,y)))})}}else r.someProp("transformPastedHTML",g=>{t=g(t,r)}),a=une(t),_b&&dne(a);let d=a&&a.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let g=+h[3];g>0;g--){let y=a.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;a=y}if(o||(o=(r.someProp("clipboardParser")||r.someProp("domParser")||Ad.fromSchema(r.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||h),context:s,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!one.test(y.parentNode.nodeName)?{ignore:!0}:null}})),h)o=hne(bL(o,+h[1],+h[2]),h[4]);else if(o=De.maxOpen(lne(o.content,s),!0),o.openStart||o.openEnd){let g=0,y=0;for(let b=o.content.firstChild;g<o.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(let b=o.content.lastChild;y<o.openEnd&&!b.type.spec.isolating;y++,b=b.lastChild);o=bL(o,g,y)}return r.someProp("transformPasted",g=>{o=g(o,r,c)}),o}const one=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function lne(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,a=[];if(r.forEach(o=>{if(!a)return;let c=s.findWrapping(o.type),d;if(!c)return a=null;if(d=a.length&&i.length&&KF(c,i,o,a[a.length-1],0))a[a.length-1]=d;else{a.length&&(a[a.length-1]=JF(a[a.length-1],i.length));let h=XF(o,c);a.push(h),s=s.matchType(h.type),i=c}}),a)return Ee.from(a)}return r}function XF(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,Ee.from(r));return r}function KF(r,e,t,n,s){if(s<r.length&&s<e.length&&r[s]==e[s]){let i=KF(r,e,t,n.lastChild,s+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(s==r.length-1?t.type:r[s+1]))return n.copy(n.content.append(Ee.from(XF(t,r,s+1))))}}function JF(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,JF(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(Ee.empty,!0);return r.copy(t.append(n))}function fM(r,e,t,n,s,i){let a=e<0?r.firstChild:r.lastChild,o=a.content;return r.childCount>1&&(i=0),s<n-1&&(o=fM(o,e,t,n,s+1,i)),s>=t&&(o=e<0?a.contentMatchAt(0).fillBefore(o,i<=s).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(Ee.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,a.copy(o))}function bL(r,e,t){return e<r.openStart&&(r=new De(fM(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new De(fM(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const QF={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vL=null;function ZF(){return vL||(vL=document.implementation.createHTMLDocument("title"))}let ON=null;function cne(r){let e=window.trustedTypes;return e?(ON||(ON=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ON.createHTML(r)):r}function une(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=ZF().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),s;if((s=n&&QF[n[1].toLowerCase()])&&(r=s.map(i=>"<"+i+">").join("")+r+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=cne(r),s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function dne(r){let e=r.querySelectorAll(Zr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function hne(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:s,openStart:i,openEnd:a}=r;for(let o=n.length-2;o>=0;o-=2){let c=t.nodes[n[o]];if(!c||c.hasRequiredAttrs())break;s=Ee.from(c.create(n[o+1],s)),i++,a++}return new De(s,i,a)}const Ws={},Ys={},fne={touchstart:!0,touchmove:!0};class pne{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function mne(r){for(let e in Ws){let t=Ws[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=n=>{yne(r,n)&&!k_(r,n)&&(r.editable||!(n.type in Ys))&&t(r,n)},fne[e]?{passive:!0}:void 0)}Ds&&r.dom.addEventListener("input",()=>null),pM(r)}function Ed(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function gne(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function pM(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=n=>k_(r,n))})}function k_(r,e){return r.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function yne(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function xne(r,e){!k_(r,e)&&Ws[e.type]&&(r.editable||!(e.type in Ys))&&Ws[e.type](r,e)}Ys.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!t9(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(Ec&&Zr&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),Jg&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",s=>s(r,ph(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||ane(r,t)?t.preventDefault():Ed(r,"key")};Ys.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};Ys.keypress=(r,e)=>{let t=e;if(t9(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||ja&&t.metaKey)return;if(r.someProp("handleKeyPress",s=>s(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof nt)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(t.charCode),i=()=>r.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!r.someProp("handleTextInput",a=>a(r,n.$from.pos,n.$to.pos,s,i))&&r.dispatch(i()),t.preventDefault()}};function SE(r){return{left:r.clientX,top:r.clientY}}function bne(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function M_(r,e,t,n,s){if(n==-1)return!1;let i=r.state.doc.resolve(n);for(let a=i.depth+1;a>0;a--)if(r.someProp(e,o=>a>i.depth?o(r,t,i.nodeAfter,i.before(a),s,!0):o(r,t,i.node(a),i.before(a),s,!1)))return!0;return!1}function ym(r,e,t){if(r.focused||r.focus(),r.state.selection.eq(e))return;let n=r.state.tr.setSelection(e);n.setMeta("pointer",!0),r.dispatch(n)}function vne(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&We.isSelectable(n)?(ym(r,new We(t)),!0):!1}function wne(r,e){if(e==-1)return!1;let t=r.state.selection,n,s;t instanceof We&&(n=t.node);let i=r.state.doc.resolve(e);for(let a=i.depth+1;a>0;a--){let o=a>i.depth?i.nodeAfter:i.node(a);if(We.isSelectable(o)){n&&t.$from.depth>0&&a>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(a);break}}return s!=null?(ym(r,We.create(r.state.doc,s)),!0):!1}function Sne(r,e,t,n,s){return M_(r,"handleClickOn",e,t,n)||r.someProp("handleClick",i=>i(r,e,n))||(s?wne(r,t):vne(r,t))}function Cne(r,e,t,n){return M_(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",s=>s(r,e,n))}function Ene(r,e,t,n){return M_(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",s=>s(r,e,n))||Tne(r,t,n)}function Tne(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(ym(r,nt.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i),o=s.before(i);if(a.inlineContent)ym(r,nt.create(n,o+1,o+1+a.content.size));else if(We.isSelectable(a))ym(r,We.create(n,o));else continue;return!0}}function __(r){return JS(r)}const e9=ja?"metaKey":"ctrlKey";Ws.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=__(r),s=Date.now(),i="singleClick";s-r.input.lastClick.time<500&&bne(t,r.input.lastClick)&&!t[e9]&&r.input.lastClick.button==t.button&&(r.input.lastClick.type=="singleClick"?i="doubleClick":r.input.lastClick.type=="doubleClick"&&(i="tripleClick")),r.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i,button:t.button};let a=r.posAtCoords(SE(t));a&&(i=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new Ane(r,a,t,!!n)):(i=="doubleClick"?Cne:Ene)(r,a.pos,a.inside,t)?t.preventDefault():Ed(r,"pointer"))};class Ane{constructor(e,t,n,s){this.view=e,this.pos=t,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[e9],this.allowDefault=n.shiftKey;let i,a;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{let h=e.state.doc.resolve(t.pos);i=h.parent,a=h.depth?h.before():0}const o=s?null:n.target,c=o?e.docView.nearestDesc(o,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof We&&d.from<=a&&d.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&La&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ed(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>kc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(SE(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ed(this.view,"pointer"):Sne(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ds&&this.mightDrag&&!this.mightDrag.node.isAtom||Zr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ym(this.view,bt.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ed(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ed(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ws.touchstart=r=>{r.input.lastTouch=Date.now(),__(r),Ed(r,"pointer")};Ws.touchmove=r=>{r.input.lastTouch=Date.now(),Ed(r,"pointer")};Ws.contextmenu=r=>__(r);function t9(r,e){return r.composing?!0:Ds&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const Nne=Ec?5e3:-1;Ys.compositionstart=Ys.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$to;if(e.selection instanceof nt&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||Zr&&DF&&kne(r)))r.markCursor=r.state.storedMarks||t.marks(),JS(r,!0),r.markCursor=null;else if(JS(r,!e.selection.empty),La&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let s=n.focusNode,i=n.focusOffset;s&&s.nodeType==1&&i!=0;){let a=i<0?s.lastChild:s.childNodes[i-1];if(!a)break;if(a.nodeType==3){let o=r.domSelection();o&&o.collapse(a,a.nodeValue.length);break}else s=a,i=-1}}r.input.composing=!0}n9(r,Nne)};function kne(r){let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let n=e.childNodes[t];return n.nodeType==1&&n.contentEditable=="false"}Ys.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,n9(r,20))};function n9(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>JS(r),e))}function r9(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=_ne());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Mne(r){let e=r.domSelectionRange();if(!e.focusNode)return null;let t=wte(e.focusNode,e.focusOffset),n=Ste(e.focusNode,e.focusOffset);if(t&&n&&t!=n){let s=n.pmViewDesc,i=r.domObserver.lastChangedTextNode;if(t==i||n==i)return i;if(!s||!s.isText(n.nodeValue))return n;if(r.input.compositionNode==n){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return n}}return t||n}function _ne(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function JS(r,e=!1){if(!(Ec&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),r9(r),e||r.docView&&r.docView.dirty){let t=T_(r),n=r.state.selection;return t&&!t.eq(n)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function jne(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const Mx=mi&&Nd<15||Jg&&Ate<604;Ws.copy=Ys.cut=(r,e)=>{let t=e,n=r.state.selection,s=t.type=="cut";if(n.empty)return;let i=Mx?null:t.clipboardData,a=n.content(),{dom:o,text:c}=N_(r,a);i?(t.preventDefault(),i.clearData(),i.setData("text/html",o.innerHTML),i.setData("text/plain",c)):jne(r,o),s&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Dne(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function One(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?_x(r,n.value,null,s,e):_x(r,n.textContent,n.innerHTML,s,e)},50)}function _x(r,e,t,n,s){let i=YF(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",c=>c(r,s,i||De.empty)))return!0;if(!i)return!1;let a=Dne(i),o=a?r.state.tr.replaceSelectionWith(a,n):r.state.tr.replaceSelection(i);return r.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function s9(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ys.paste=(r,e)=>{let t=e;if(r.composing&&!Ec)return;let n=Mx?null:t.clipboardData,s=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&_x(r,s9(n),n.getData("text/html"),s,t)?t.preventDefault():One(r,t)};class i9{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Rne=ja?"altKey":"ctrlKey";function a9(r,e){let t=r.someProp("dragCopies",n=>!n(e));return t??!e[Rne]}Ws.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let s=r.state.selection,i=s.empty?null:r.posAtCoords(SE(t)),a;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof We?s.to-1:s.to))){if(n&&n.mightDrag)a=We.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=r.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=r.docView&&(a=We.create(r.state.doc,g.posBefore))}}let o=(a||r.state.selection).content(),{dom:c,text:d,slice:h}=N_(r,o);(!t.dataTransfer.files.length||!Zr||jF>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Mx?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",Mx||t.dataTransfer.setData("text/plain",d),r.dragging=new i9(h,a9(r,t),a)};Ws.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};Ys.dragover=Ys.dragenter=(r,e)=>e.preventDefault();Ys.drop=(r,e)=>{try{Lne(r,e,r.dragging)}finally{r.dragging=null}};function Lne(r,e,t){if(!e.dataTransfer)return;let n=r.posAtCoords(SE(e));if(!n)return;let s=r.state.doc.resolve(n.pos),i=t&&t.slice;i?r.someProp("transformPasted",b=>{i=b(i,r,!1)}):i=YF(r,s9(e.dataTransfer),Mx?null:e.dataTransfer.getData("text/html"),!1,s);let a=!!(t&&a9(r,e));if(r.someProp("handleDrop",b=>b(r,e,i||De.empty,a))){e.preventDefault();return}if(!i)return;e.preventDefault();let o=i?uF(r.state.doc,s.pos,i):s.pos;o==null&&(o=s.pos);let c=r.state.tr;if(a){let{node:b}=t;b?b.replace(c):c.deleteSelection()}let d=c.mapping.map(o),h=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,g=c.doc;if(h?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(g))return;let y=c.doc.resolve(d);if(h&&We.isSelectable(i.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new We(y));else{let b=c.mapping.map(o);c.mapping.maps[c.mapping.maps.length-1].forEach((v,w,E,C)=>b=C),c.setSelection(A_(r,y,c.doc.resolve(b)))}r.focus(),r.dispatch(c.setMeta("uiEvent","drop"))}Ws.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&kc(r)},20))};Ws.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};Ws.beforeinput=(r,e)=>{if(Zr&&Ec&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",i=>i(r,ph(8,"Backspace")))))return;let{$cursor:s}=r.state.selection;s&&s.pos>0&&r.dispatch(r.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let r in Ys)Ws[r]=Ys[r];function jx(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class QS{constructor(e,t){this.toDOM=e,this.spec=t||zf,this.side=this.spec.side||0}map(e,t,n,s){let{pos:i,deleted:a}=e.mapResult(t.from+s,this.side<0?-1:1);return a?null:new Vs(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof QS&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&jx(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Md{constructor(e,t){this.attrs=e,this.spec=t||zf}map(e,t,n,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-n,a=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-n;return i>=a?null:new Vs(i,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Md&&jx(this.attrs,e.attrs)&&jx(this.spec,e.spec)}static is(e){return e.type instanceof Md}destroy(){}}class j_{constructor(e,t){this.attrs=e,this.spec=t||zf}map(e,t,n,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let a=e.mapResult(t.to+s,-1);return a.deleted||a.pos<=i.pos?null:new Vs(i.pos-n,a.pos-n,this)}valid(e,t){let{index:n,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(n)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof j_&&jx(this.attrs,e.attrs)&&jx(this.spec,e.spec)}destroy(){}}class Vs{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Vs(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Vs(e,e,new QS(t,n))}static inline(e,t,n,s){return new Vs(e,t,new Md(n,s))}static node(e,t,n,s){return new Vs(e,t,new j_(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Md}get widget(){return this.type instanceof QS}}const nm=[],zf={};class Vn{constructor(e,t){this.local=e.length?e:nm,this.children=t.length?t:nm}static create(e,t){return t.length?ZS(t,e,0,zf):_s}find(e,t,n){let s=[];return this.findInner(e??0,t??1e9,s,0,n),s}findInner(e,t,n,s,i){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=t&&o.to>=e&&(!i||i(o.spec))&&n.push(o.copy(o.from+s,o.to+s))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let o=this.children[a]+1;this.children[a+2].findInner(e-o,t-o,n,s+o,i)}}map(e,t,n){return this==_s||e.maps.length==0?this:this.mapInner(e,t,0,0,n||zf)}mapInner(e,t,n,s,i){let a;for(let o=0;o<this.local.length;o++){let c=this.local[o].map(e,n,s);c&&c.type.valid(t,c)?(a||(a=[])).push(c):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?Pne(this.children,a||[],e,t,n,s,i):a?new Vn(a.sort(Hf),nm):_s}add(e,t){return t.length?this==_s?Vn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let s,i=0;e.forEach((o,c)=>{let d=c+n,h;if(h=l9(t,o,d)){for(s||(s=this.children.slice());i<s.length&&s[i]<c;)i+=3;s[i]==c?s[i+2]=s[i+2].addInner(o,h,d+1):s.splice(i,0,c,c+o.nodeSize,ZS(h,o,d+1,zf)),i+=3}});let a=o9(i?c9(t):t,-n);for(let o=0;o<a.length;o++)a[o].type.valid(e,a[o])||a.splice(o--,1);return new Vn(a.length?this.local.concat(a).sort(Hf):this.local,s||this.children)}remove(e){return e.length==0||this==_s?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,s=this.local;for(let i=0;i<n.length;i+=3){let a,o=n[i]+t,c=n[i+1]+t;for(let h=0,g;h<e.length;h++)(g=e[h])&&g.from>o&&g.to<c&&(e[h]=null,(a||(a=[])).push(g));if(!a)continue;n==this.children&&(n=this.children.slice());let d=n[i+2].removeInner(a,o+1);d!=_s?n[i+2]=d:(n.splice(i,3),i-=3)}if(s.length){for(let i=0,a;i<e.length;i++)if(a=e[i])for(let o=0;o<s.length;o++)s[o].eq(a,t)&&(s==this.local&&(s=this.local.slice()),s.splice(o--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new Vn(s,n):_s}forChild(e,t){if(this==_s)return this;if(t.isLeaf)return Vn.empty;let n,s;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}let i=e+1,a=i+t.content.size;for(let o=0;o<this.local.length;o++){let c=this.local[o];if(c.from<a&&c.to>i&&c.type instanceof Md){let d=Math.max(i,c.from)-i,h=Math.min(a,c.to)-i;d<h&&(s||(s=[])).push(c.copy(d,h))}}if(s){let o=new Vn(s.sort(Hf),nm);return n?new Tu([o,n]):o}return n||_s}eq(e){if(this==e)return!0;if(!(e instanceof Vn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return D_(this.localsInner(e))}localsInner(e){if(this==_s)return nm;if(e.inlineContent||!this.local.some(Md.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Md||t.push(this.local[n]);return t}forEachSet(e){e(this)}}Vn.empty=new Vn([],[]);Vn.removeOverlap=D_;const _s=Vn.empty;class Tu{constructor(e){this.members=e}map(e,t){const n=this.members.map(s=>s.map(e,t,zf));return Tu.from(n)}forChild(e,t){if(t.isLeaf)return Vn.empty;let n=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=_s&&(i instanceof Tu?n=n.concat(i.members):n.push(i))}return Tu.from(n)}eq(e){if(!(e instanceof Tu)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{n&&(t=t.slice(),n=!1);for(let a=0;a<i.length;a++)t.push(i[a])}}return t?D_(n?t:t.sort(Hf)):nm}static from(e){switch(e.length){case 0:return _s;case 1:return e[0];default:return new Tu(e.every(t=>t instanceof Vn)?e:e.reduce((t,n)=>t.concat(n instanceof Vn?n:n.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Pne(r,e,t,n,s,i,a){let o=r.slice();for(let d=0,h=i;d<t.maps.length;d++){let g=0;t.maps[d].forEach((y,b,v,w)=>{let E=w-v-(b-y);for(let C=0;C<o.length;C+=3){let N=o[C+1];if(N<0||y>N+h-g)continue;let A=o[C]+h-g;b>=A?o[C+1]=y<=A?-2:-1:y>=h&&E&&(o[C]+=E,o[C+1]+=E)}g+=E}),h=t.maps[d].map(h,-1)}let c=!1;for(let d=0;d<o.length;d+=3)if(o[d+1]<0){if(o[d+1]==-2){c=!0,o[d+1]=-1;continue}let h=t.map(r[d]+i),g=h-s;if(g<0||g>=n.content.size){c=!0;continue}let y=t.map(r[d+1]+i,-1),b=y-s,{index:v,offset:w}=n.content.findIndex(g),E=n.maybeChild(v);if(E&&w==g&&w+E.nodeSize==b){let C=o[d+2].mapInner(t,E,h+1,r[d]+i+1,a);C!=_s?(o[d]=g,o[d+1]=b,o[d+2]=C):(o[d+1]=-2,c=!0)}else c=!0}if(c){let d=Ine(o,r,e,t,s,i,a),h=ZS(d,n,0,a);e=h.local;for(let g=0;g<o.length;g+=3)o[g+1]<0&&(o.splice(g,3),g-=3);for(let g=0,y=0;g<h.children.length;g+=3){let b=h.children[g];for(;y<o.length&&o[y]<b;)y+=3;o.splice(y,0,h.children[g],h.children[g+1],h.children[g+2])}}return new Vn(e.sort(Hf),o)}function o9(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let s=r[n];t.push(new Vs(s.from+e,s.to+e,s.type))}return t}function Ine(r,e,t,n,s,i,a){function o(c,d){for(let h=0;h<c.local.length;h++){let g=c.local[h].map(n,s,d);g?t.push(g):a.onRemove&&a.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)o(c.children[h+2],c.children[h]+d+1)}for(let c=0;c<r.length;c+=3)r[c+1]==-1&&o(r[c+2],e[c]+i+1);return t}function l9(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,s=null;for(let i=0,a;i<r.length;i++)(a=r[i])&&a.from>t&&a.to<n&&((s||(s=[])).push(a),r[i]=null);return s}function c9(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function ZS(r,e,t,n){let s=[],i=!1;e.forEach((o,c)=>{let d=l9(r,o,c+t);if(d){i=!0;let h=ZS(d,o,t+c+1,n);h!=_s&&s.push(c,c+o.nodeSize,h)}});let a=o9(i?c9(r):r,-t).sort(Hf);for(let o=0;o<a.length;o++)a[o].type.valid(e,a[o])||(n.onRemove&&n.onRemove(a[o].spec),a.splice(o--,1));return a.length||s.length?new Vn(a,s):_s}function Hf(r,e){return r.from-e.from||r.to-e.to}function D_(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==n.from){i.to!=n.to&&(e==r&&(e=r.slice()),e[s]=i.copy(i.from,n.to),wL(e,s+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,i.from),wL(e,s,n.copy(i.from,n.to)));break}}}return e}function wL(r,e,t){for(;e<r.length&&Hf(t,r[e])>0;)e++;r.splice(e,0,t)}function RN(r){let e=[];return r.someProp("decorations",t=>{let n=t(r.state);n&&n!=_s&&e.push(n)}),r.cursorWrapper&&e.push(Vn.create(r.state.doc,[r.cursorWrapper.deco])),Tu.from(e)}const Bne={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Fne=mi&&Nd<=11;class zne{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Hne{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zne,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);mi&&Nd<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Fne&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Bne)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(fL(this.view)){if(this.suppressingSelectionUpdates)return kc(this.view);if(mi&&Nd<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let i=e.focusNode;i;i=Kg(i))t.add(i);for(let i=e.anchorNode;i;i=Kg(i))if(t.has(i)){n=i;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&fL(e)&&!this.ignoreSelectionChange(n),i=-1,a=-1,o=!1,c=[];if(e.editable)for(let h=0;h<t.length;h++){let g=this.registerMutation(t[h],c);g&&(i=i<0?g.from:Math.min(g.from,i),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(o=!0))}if(La&&c.length){let h=c.filter(g=>g.nodeName=="BR");if(h.length==2){let[g,y]=h;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of h){let b=y.parentNode;b&&b.nodeName=="LI"&&(!g||Vne(e,g)!=b)&&y.remove()}}}else if((Zr||Ds)&&c.some(h=>h.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let h of c)if(h.nodeName=="BR"&&h.parentNode){let g=h.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&h.parentNode.removeChild(h)}}let d=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&vE(n)&&(d=T_(e))&&d.eq(bt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,kc(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,a),Une(e)),this.handleDOMChange(i,a,o,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||kc(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let g=e.addedNodes[h];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,i=e.nextSibling;if(mi&&Nd<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:g,nextSibling:y}=e.addedNodes[h];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y)}let a=s&&s.parentNode==e.target?ys(s)+1:0,o=n.localPosFromDOM(e.target,a,-1),c=i&&i.parentNode==e.target?ys(i):e.target.childNodes.length,d=n.localPosFromDOM(e.target,c,1);return{from:o,to:d}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let SL=new WeakMap,CL=!1;function Une(r){if(!SL.has(r)&&(SL.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=La,CL)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),CL=!0}}function EL(r,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset,a=r.domAtPos(r.state.selection.anchor);return Xf(a.node,a.offset,s,i)&&([t,n,s,i]=[s,i,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:i}}function $ne(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return EL(r,s)}let t;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return r.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",n,!0),t?EL(r,t):null}function Vne(r,e){for(let t=e.parentNode;t&&t!=r.dom;t=t.parentNode){let n=r.docView.nearestDesc(t,!0);if(n&&n.node.isBlock)return t}return null}function qne(r,e,t){let{node:n,fromOffset:s,toOffset:i,from:a,to:o}=r.docView.parseRange(e,t),c=r.domSelectionRange(),d,h=c.anchorNode;if(h&&r.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:c.anchorOffset}],vE(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Zr&&r.input.lastKeyCode===8)for(let E=i;E>s;E--){let C=n.childNodes[E-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){i=E;break}if(!N||N.size)break}let g=r.state.doc,y=r.someProp("domParser")||Ad.fromSchema(r.state.schema),b=g.resolve(a),v=null,w=y.parse(n,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:s,to:i,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Gne,context:b});if(d&&d[0].pos!=null){let E=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=E),v={anchor:E+a,head:C+a}}return{doc:w,sel:v,from:a,to:o}}function Gne(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(Ds&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||Ds&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Wne=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Yne(r,e,t,n,s){let i=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let P=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,F=T_(r,P);if(F&&!r.state.selection.eq(F)){if(Zr&&Ec&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",ee=>ee(r,ph(13,"Enter"))))return;let H=r.state.tr.setSelection(F);P=="pointer"?H.setMeta("pointer",!0):P=="key"&&H.scrollIntoView(),i&&H.setMeta("composition",i),r.dispatch(H)}return}let a=r.state.doc.resolve(e),o=a.sharedDepth(t);e=a.before(o+1),t=r.state.doc.resolve(t).after(o+1);let c=r.state.selection,d=qne(r,e,t),h=r.state.doc,g=h.slice(d.from,d.to),y,b;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(y=r.state.selection.to,b="end"):(y=r.state.selection.from,b="start"),r.input.lastKeyCode=null;let v=Jne(g.content,d.doc.content,d.from,y,b);if(v&&r.input.domChangeCount++,(Jg&&r.input.lastIOSEnter>Date.now()-225||Ec)&&s.some(P=>P.nodeType==1&&!Wne.test(P.nodeName))&&(!v||v.endA>=v.endB)&&r.someProp("handleKeyDown",P=>P(r,ph(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!v)if(n&&c instanceof nt&&!c.empty&&c.$head.sameParent(c.$anchor)&&!r.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let P=TL(r,r.state.doc,d.sel);if(P&&!P.eq(r.state.selection)){let F=r.state.tr.setSelection(P);i&&F.setMeta("composition",i),r.dispatch(F)}}return}r.state.selection.from<r.state.selection.to&&v.start==v.endB&&r.state.selection instanceof nt&&(v.start>r.state.selection.from&&v.start<=r.state.selection.from+2&&r.state.selection.from>=d.from?v.start=r.state.selection.from:v.endA<r.state.selection.to&&v.endA>=r.state.selection.to-2&&r.state.selection.to<=d.to&&(v.endB+=r.state.selection.to-v.endA,v.endA=r.state.selection.to)),mi&&Nd<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let w=d.doc.resolveNoCache(v.start-d.from),E=d.doc.resolveNoCache(v.endB-d.from),C=h.resolve(v.start),N=w.sameParent(E)&&w.parent.inlineContent&&C.end()>=v.endA;if((Jg&&r.input.lastIOSEnter>Date.now()-225&&(!N||s.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!N&&w.pos<d.doc.content.size&&(!w.sameParent(E)||!w.parent.inlineContent)&&w.pos<E.pos&&!/\S/.test(d.doc.textBetween(w.pos,E.pos,"","")))&&r.someProp("handleKeyDown",P=>P(r,ph(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>v.start&&Kne(h,v.start,v.endA,w,E)&&r.someProp("handleKeyDown",P=>P(r,ph(8,"Backspace")))){Ec&&Zr&&r.domObserver.suppressSelectionUpdates();return}Zr&&v.endB==v.start&&(r.input.lastChromeDelete=Date.now()),Ec&&!N&&w.start()!=E.start()&&E.parentOffset==0&&w.depth==E.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,E=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{r.someProp("handleKeyDown",function(P){return P(r,ph(13,"Enter"))})},20));let A=v.start,k=v.endA,M=P=>{let F=P||r.state.tr.replace(A,k,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let H=TL(r,F.doc,d.sel);H&&!(Zr&&r.composing&&H.empty&&(v.start!=v.endB||r.input.lastChromeDelete<Date.now()-100)&&(H.head==A||H.head==F.mapping.map(k)-1)||mi&&H.empty&&H.head==A)&&F.setSelection(H)}return i&&F.setMeta("composition",i),F.scrollIntoView()},O;if(N)if(w.pos==E.pos){mi&&Nd<=11&&w.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>kc(r),20));let P=M(r.state.tr.delete(A,k)),F=h.resolve(v.start).marksAcross(h.resolve(v.endA));F&&P.ensureMarks(F),r.dispatch(P)}else if(v.endA==v.endB&&(O=Xne(w.parent.content.cut(w.parentOffset,E.parentOffset),C.parent.content.cut(C.parentOffset,v.endA-C.start())))){let P=M(r.state.tr);O.type=="add"?P.addMark(A,k,O.mark):P.removeMark(A,k,O.mark),r.dispatch(P)}else if(w.parent.child(w.index()).isText&&w.index()==E.index()-(E.textOffset?0:1)){let P=w.parent.textBetween(w.parentOffset,E.parentOffset),F=()=>M(r.state.tr.insertText(P,A,k));r.someProp("handleTextInput",H=>H(r,A,k,P,F))||r.dispatch(F())}else r.dispatch(M());else r.dispatch(M())}function TL(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:A_(r,e.resolve(t.anchor),e.resolve(t.head))}function Xne(r,e){let t=r.firstChild.marks,n=e.firstChild.marks,s=t,i=n,a,o,c;for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);for(let h=0;h<t.length;h++)i=t[h].removeFromSet(i);if(s.length==1&&i.length==0)o=s[0],a="add",c=h=>h.mark(o.addToSet(h.marks));else if(s.length==0&&i.length==1)o=i[0],a="remove",c=h=>h.mark(o.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(c(e.child(h)));if(Ee.from(d).eq(r))return{mark:o,type:a}}function Kne(r,e,t,n,s){if(t-e<=s.pos-n.pos||LN(n,!0,!1)<s.pos)return!1;let i=r.resolve(e);if(!n.parent.isTextblock){let o=i.nodeAfter;return o!=null&&t==e+o.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let a=r.resolve(LN(i,!0,!0));return!a.parent.isTextblock||a.pos>t||LN(a,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(a.parent.content)}function LN(r,e,t){let n=r.depth,s=e?r.end():r.pos;for(;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,s++,e=!1;if(t){let i=r.node(n).maybeChild(r.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function Jne(r,e,t,n,s){let i=r.findDiffStart(e,t);if(i==null)return null;let{a,b:o}=r.findDiffEnd(e,t+r.size,t+e.size);if(s=="end"){let c=Math.max(0,i-Math.min(a,o));n-=a+c-i}if(a<i&&r.size<e.size){let c=n<=i&&n>=a?i-n:0;i-=c,i&&i<e.size&&AL(e.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-a),a=i}else if(o<i){let c=n<=i&&n>=o?i-n:0;i-=c,i&&i<r.size&&AL(r.textBetween(i-1,i+1))&&(i+=c?1:-1),a=i+(a-o),o=i}return{start:i,endA:a,endB:o}}function AL(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class u9{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new pne,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(jL),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ML(this),kL(this),this.nodeViews=_L(this),this.docView=oL(this.state.doc,NL(this),RN(this),this.dom,this),this.domObserver=new Hne(this,(n,s,i,a)=>Yne(this,n,s,i,a)),this.domObserver.start(),mne(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&pM(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(jL),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let s=this.state,i=!1,a=!1;e.storedMarks&&this.composing&&(r9(this),a=!0),this.state=e;let o=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let b=_L(this);Zne(b,this.nodeViews)&&(this.nodeViews=b,i=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&pM(this),this.editable=ML(this),kL(this);let c=RN(this),d=NL(this),h=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=i||!this.docView.matchesNode(e.doc,d,c);(g||!e.selection.eq(s.selection))&&(a=!0);let y=h=="preserve"&&a&&this.dom.style.overflowAnchor==null&&Mte(this);if(a){this.domObserver.stop();let b=g&&(mi||Zr)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&Qne(s.selection,e.selection);if(g){let v=Zr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Mne(this)),(i||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=oL(e.doc,d,c,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Zte(this))?kc(this,b):(qF(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():y&&_te(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof We){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&tL(this,t.getBoundingClientRect(),e)}else tL(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let i=n.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(s=i)}this.dragging=new i9(e.slice,e.move,s<0?void 0:We.create(this.state.doc,s))}someProp(e,t){let n=this._props&&this._props[e],s;if(n!=null&&(s=t?t(n):n))return s;for(let a=0;a<this.directPlugins.length;a++){let o=this.directPlugins[a].props[e];if(o!=null&&(s=t?t(o):o))return s}let i=this.state.plugins;if(i)for(let a=0;a<i.length;a++){let o=i[a].props[e];if(o!=null&&(s=t?t(o):o))return s}}hasFocus(){if(mi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&jte(this.dom),kc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Pte(this,e)}coordsAtPos(e,t=1){return IF(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let s=this.docView.posFromDOM(e,t,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return Hte(this,t||this.state,e)}pasteHTML(e,t){return _x(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return _x(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return N_(this,e)}destroy(){this.docView&&(gne(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],RN(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,bte())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return xne(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ds&&this.root.nodeType===11&&Ete(this.dom.ownerDocument)==this.dom&&$ne(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}u9.prototype.dispatch=function(r){let e=this._props.dispatchTransaction;e?e.call(this,r):this.updateState(this.state.apply(r))};function NL(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[Vs.node(0,r.state.doc.content.size,e)]}function kL(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:Vs.widget(r.state.selection.from,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function ML(r){return!r.someProp("editable",e=>e(r.state)===!1)}function Qne(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function _L(r){let e=Object.create(null);function t(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function Zne(r,e){let t=0,n=0;for(let s in r){if(r[s]!=e[s])return!0;t++}for(let s in e)n++;return t!=n}function jL(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Od={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},eC={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ere=typeof navigator<"u"&&/Mac/.test(navigator.platform),tre=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xs=0;xs<10;xs++)Od[48+xs]=Od[96+xs]=String(xs);for(var xs=1;xs<=24;xs++)Od[xs+111]="F"+xs;for(var xs=65;xs<=90;xs++)Od[xs]=String.fromCharCode(xs+32),eC[xs]=String.fromCharCode(xs);for(var PN in Od)eC.hasOwnProperty(PN)||(eC[PN]=Od[PN]);function nre(r){var e=ere&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||tre&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?eC:Od)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const rre=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),sre=typeof navigator<"u"&&/Win/.test(navigator.platform);function ire(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,s,i,a;for(let o=0;o<e.length-1;o++){let c=e[o];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))rre?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(t="Alt-"+t),s&&(t="Ctrl-"+t),a&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function are(r){let e=Object.create(null);for(let t in r)e[ire(t)]=r[t];return e}function IN(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function ore(r){return new Wn({props:{handleKeyDown:d9(r)}})}function d9(r){let e=are(r);return function(t,n){let s=nre(n),i,a=e[IN(s,n)];if(a&&a(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let o=e[IN(s,n,!1)];if(o&&o(t.state,t.dispatch,t))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(sre&&n.ctrlKey&&n.altKey)&&(i=Od[n.keyCode])&&i!=s){let o=e[IN(i,n)];if(o&&o(t.state,t.dispatch,t))return!0}}return!1}}var lre=Object.defineProperty,O_=(r,e)=>{for(var t in e)lre(r,t,{get:e[t],enumerable:!0})};function CE(r){const{state:e,transaction:t}=r;let{selection:n}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return s},get tr(){return n=t.selection,s=t.doc,i=t.storedMarks,t}}}var EE=class{constructor(r){this.editor=r.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=r.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:r,editor:e,state:t}=this,{view:n}=e,{tr:s}=t,i=this.buildProps(s);return Object.fromEntries(Object.entries(r).map(([a,o])=>[a,(...d)=>{const h=o(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(r,e=!0){const{rawCommands:t,editor:n,state:s}=this,{view:i}=n,a=[],o=!!r,c=r||s.tr,d=()=>(!o&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(g=>g===!0)),h={...Object.fromEntries(Object.entries(t).map(([g,y])=>[g,(...v)=>{const w=this.buildProps(c,e),E=y(...v)(w);return a.push(E),h}])),run:d};return h}createCan(r){const{rawCommands:e,state:t}=this,n=!1,s=r||t.tr,i=this.buildProps(s,n);return{...Object.fromEntries(Object.entries(e).map(([o,c])=>[o,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,n)}}buildProps(r,e=!0){const{rawCommands:t,editor:n,state:s}=this,{view:i}=n,a={tr:r,editor:n,view:i,state:CE({state:s,transaction:r}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(r,e),can:()=>this.createCan(r),get commands(){return Object.fromEntries(Object.entries(t).map(([o,c])=>[o,(...d)=>c(...d)(a)]))}};return a}},h9={};O_(h9,{blur:()=>cre,clearContent:()=>ure,clearNodes:()=>dre,command:()=>hre,createParagraphNear:()=>fre,cut:()=>pre,deleteCurrentNode:()=>mre,deleteNode:()=>gre,deleteRange:()=>yre,deleteSelection:()=>xre,enter:()=>bre,exitCode:()=>vre,extendMarkRange:()=>wre,first:()=>Sre,focus:()=>Ere,forEach:()=>Tre,insertContent:()=>Are,insertContentAt:()=>Mre,joinBackward:()=>Dre,joinDown:()=>jre,joinForward:()=>Ore,joinItemBackward:()=>Rre,joinItemForward:()=>Lre,joinTextblockBackward:()=>Pre,joinTextblockForward:()=>Ire,joinUp:()=>_re,keyboardShortcut:()=>Fre,lift:()=>zre,liftEmptyBlock:()=>Hre,liftListItem:()=>Ure,newlineInCode:()=>$re,resetAttributes:()=>Vre,scrollIntoView:()=>qre,selectAll:()=>Gre,selectNodeBackward:()=>Wre,selectNodeForward:()=>Yre,selectParentNode:()=>Xre,selectTextblockEnd:()=>Kre,selectTextblockStart:()=>Jre,setContent:()=>Qre,setMark:()=>xse,setMeta:()=>bse,setNode:()=>vse,setNodeSelection:()=>wse,setTextDirection:()=>Sse,setTextSelection:()=>Cse,sinkListItem:()=>Ese,splitBlock:()=>Tse,splitListItem:()=>Ase,toggleList:()=>Nse,toggleMark:()=>kse,toggleNode:()=>Mse,toggleWrap:()=>_se,undoInputRule:()=>jse,unsetAllMarks:()=>Dse,unsetMark:()=>Ose,unsetTextDirection:()=>Rse,updateAttributes:()=>Lse,wrapIn:()=>Pse,wrapInList:()=>Ise});var cre=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),ure=(r=!0)=>({commands:e})=>e.setContent("",{emitUpdate:r}),dre=()=>({state:r,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:s}=n;return t&&s.forEach(({$from:i,$to:a})=>{r.doc.nodesBetween(i.pos,a.pos,(o,c)=>{if(o.type.isText)return;const{doc:d,mapping:h}=e,g=d.resolve(h.map(c)),y=d.resolve(h.map(c+o.nodeSize)),b=g.blockRange(y);if(!b)return;const v=u0(b);if(o.type.isTextblock){const{defaultType:w}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(b.start,w)}(v||v===0)&&e.lift(b,v)})}),!0},hre=r=>e=>r(e),fre=()=>({state:r,dispatch:e})=>AF(r,e),pre=(r,e)=>({editor:t,tr:n})=>{const{state:s}=t,i=s.doc.slice(r.from,r.to);n.deleteRange(r.from,r.to);const a=n.mapping.map(e);return n.insert(a,i.content),n.setSelection(new nt(n.doc.resolve(Math.max(a-1,0)))),!0},mre=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;const s=r.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===n.type){if(e){const o=s.before(i),c=s.after(i);r.delete(o,c).scrollIntoView()}return!0}return!1};function Ar(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}var gre=r=>({tr:e,state:t,dispatch:n})=>{const s=Ar(r,t.schema),i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===s){if(n){const c=i.before(a),d=i.after(a);e.delete(c,d).scrollIntoView()}return!0}return!1},yre=r=>({tr:e,dispatch:t})=>{const{from:n,to:s}=r;return t&&e.delete(n,s),!0},xre=()=>({state:r,dispatch:e})=>b_(r,e),bre=()=>({commands:r})=>r.keyboardShortcut("Enter"),vre=()=>({state:r,dispatch:e})=>ste(r,e);function R_(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function tC(r,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>t.strict?e[s]===r[s]:R_(e[s])?e[s].test(r[s]):e[s]===r[s]):!0}function f9(r,e,t={}){return r.find(n=>n.type===e&&tC(Object.fromEntries(Object.keys(t).map(s=>[s,n.attrs[s]])),t))}function DL(r,e,t={}){return!!f9(r,e,t)}function L_(r,e,t){var n;if(!r||!e)return;let s=r.parent.childAfter(r.parentOffset);if((!s.node||!s.node.marks.some(h=>h.type===e))&&(s=r.parent.childBefore(r.parentOffset)),!s.node||!s.node.marks.some(h=>h.type===e)||(t=t||((n=s.node.marks[0])==null?void 0:n.attrs),!f9([...s.node.marks],e,t)))return;let a=s.index,o=r.start()+s.offset,c=a+1,d=o+s.node.nodeSize;for(;a>0&&DL([...r.parent.child(a-1).marks],e,t);)a-=1,o-=r.parent.child(a).nodeSize;for(;c<r.parent.childCount&&DL([...r.parent.child(c).marks],e,t);)d+=r.parent.child(c).nodeSize,c+=1;return{from:o,to:d}}function Bc(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}var wre=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const i=Bc(r,n.schema),{doc:a,selection:o}=t,{$from:c,from:d,to:h}=o;if(s){const g=L_(c,i,e);if(g&&g.from<=d&&g.to>=h){const y=nt.create(a,g.from,g.to);t.setSelection(y)}}return!0},Sre=r=>e=>{const t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function p9(r){return r instanceof nt}function vh(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function m9(r,e=null){if(!e)return null;const t=bt.atStart(r),n=bt.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;const s=t.from,i=n.to;return e==="all"?nt.create(r,vh(0,s,i),vh(r.content.size,s,i)):nt.create(r,vh(e,s,i),vh(e,s,i))}function Cre(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function P_(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Ere=(r=null,e={})=>({editor:t,view:n,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const a=()=>{(P_()||Cre())&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(i&&r===null&&!p9(t.state.selection))return a(),!0;const o=m9(s.doc,r)||t.state.selection,c=t.state.selection.eq(o);return i&&(c||s.setSelection(o),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},Tre=(r,e)=>t=>r.every((n,s)=>e(n,{...t,index:s})),Are=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),g9=r=>{const e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){const n=e[t];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?r.removeChild(n):n.nodeType===1&&g9(n)}return r};function ww(r){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return g9(t)}function Dx(r,e,t){if(r instanceof Td||r instanceof Ee)return r;t={slice:!0,parseOptions:{},...t};const n=typeof r=="object"&&r!==null,s=typeof r=="string";if(n)try{if(Array.isArray(r)&&r.length>0)return Ee.fromArray(r.map(o=>e.nodeFromJSON(o)));const a=e.nodeFromJSON(r);return t.errorOnInvalidContent&&a.check(),a}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",i),Dx("",e,t)}if(s){if(t.errorOnInvalidContent){let a=!1,o="";const c=new Z7({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(a=!0,o=typeof d=="string"?d:d.outerHTML,null)}]}})});if(t.slice?Ad.fromSchema(c).parseSlice(ww(r),t.parseOptions):Ad.fromSchema(c).parse(ww(r),t.parseOptions),t.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const i=Ad.fromSchema(e);return t.slice?i.parseSlice(ww(r),t.parseOptions).content:i.parse(ww(r),t.parseOptions)}return Dx("",e,t)}function Nre(r,e,t){const n=r.steps.length-1;if(n<e)return;const s=r.steps[n];if(!(s instanceof Qr||s instanceof ts))return;const i=r.mapping.maps[n];let a=0;i.forEach((o,c,d,h)=>{a===0&&(a=h)}),r.setSelection(bt.near(r.doc.resolve(a),t))}var kre=r=>!("type"in r),Mre=(r,e,t)=>({tr:n,dispatch:s,editor:i})=>{var a;if(s){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let o;const c=E=>{i.emit("contentError",{editor:i,error:E,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Dx(e,i.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(E){c(E)}try{o=Dx(e,i.schema,{parseOptions:d,errorOnInvalidContent:(a=t.errorOnInvalidContent)!=null?a:i.options.enableContentCheck})}catch(E){return c(E),!1}let{from:h,to:g}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},y=!0,b=!0;if((kre(o)?o:[o]).forEach(E=>{E.check(),y=y?E.isText&&E.marks.length===0:!1,b=b?E.isBlock:!1}),h===g&&b){const{parent:E}=n.doc.resolve(h);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(h-=1,g+=1)}let w;if(y){if(Array.isArray(e))w=e.map(E=>E.text||"").join("");else if(e instanceof Ee){let E="";e.forEach(C=>{C.text&&(E+=C.text)}),w=E}else typeof e=="object"&&e&&e.text?w=e.text:w=e;n.insertText(w,h,g)}else{w=o;const E=n.doc.resolve(h),C=E.node(),N=E.parentOffset===0,A=C.isText||C.isTextblock,k=C.content.size>0;N&&A&&k&&(h=Math.max(0,h-1)),n.replaceWith(h,g,w)}t.updateSelection&&Nre(n,n.steps.length-1,-1),t.applyInputRules&&n.setMeta("applyInputRules",{from:h,text:w}),t.applyPasteRules&&n.setMeta("applyPasteRules",{from:h,text:w})}return!0},_re=()=>({state:r,dispatch:e})=>tte(r,e),jre=()=>({state:r,dispatch:e})=>nte(r,e),Dre=()=>({state:r,dispatch:e})=>bF(r,e),Ore=()=>({state:r,dispatch:e})=>CF(r,e),Rre=()=>({state:r,dispatch:e,tr:t})=>{try{const n=yE(r.doc,r.selection.$from.pos,-1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},Lre=()=>({state:r,dispatch:e,tr:t})=>{try{const n=yE(r.doc,r.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},Pre=()=>({state:r,dispatch:e})=>Zee(r,e),Ire=()=>({state:r,dispatch:e})=>ete(r,e);function y9(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Bre(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,s,i,a;for(let o=0;o<e.length-1;o+=1){const c=e[o];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))P_()||y9()?a=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),a&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}var Fre=r=>({editor:e,view:t,tr:n,dispatch:s})=>{const i=Bre(r).split(/-(?!$)/),a=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),o=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,o))});return c==null||c.steps.forEach(d=>{const h=d.map(n.mapping);h&&s&&n.maybeStep(h)}),!0};function Rd(r,e,t={}){const{from:n,to:s,empty:i}=r.selection,a=e?Ar(e,r.schema):null,o=[];r.doc.nodesBetween(n,s,(g,y)=>{if(g.isText)return;const b=Math.max(n,y),v=Math.min(s,y+g.nodeSize);o.push({node:g,from:b,to:v})});const c=s-n,d=o.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>tC(g.node.attrs,t,{strict:!1}));return i?!!d.length:d.reduce((g,y)=>g+y.to-y.from,0)>=c}var zre=(r,e={})=>({state:t,dispatch:n})=>{const s=Ar(r,t.schema);return Rd(t,s,e)?rte(t,n):!1},Hre=()=>({state:r,dispatch:e})=>NF(r,e),Ure=r=>({state:e,dispatch:t})=>{const n=Ar(r,e.schema);return mte(n)(e,t)},$re=()=>({state:r,dispatch:e})=>TF(r,e);function TE(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function OL(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,s)=>(t.includes(s)||(n[s]=r[s]),n),{})}var Vre=(r,e)=>({tr:t,state:n,dispatch:s})=>{let i=null,a=null;const o=TE(typeof r=="string"?r:r.name,n.schema);if(!o)return!1;o==="node"&&(i=Ar(r,n.schema)),o==="mark"&&(a=Bc(r,n.schema));let c=!1;return t.selection.ranges.forEach(d=>{n.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,g)=>{i&&i===h.type&&(c=!0,s&&t.setNodeMarkup(g,void 0,OL(h.attrs,e))),a&&h.marks.length&&h.marks.forEach(y=>{a===y.type&&(c=!0,s&&t.addMark(g,g+h.nodeSize,a.create(OL(y.attrs,e))))})})}),c},qre=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),Gre=()=>({tr:r,dispatch:e})=>{if(e){const t=new Ki(r.doc);r.setSelection(t)}return!0},Wre=()=>({state:r,dispatch:e})=>wF(r,e),Yre=()=>({state:r,dispatch:e})=>EF(r,e),Xre=()=>({state:r,dispatch:e})=>ote(r,e),Kre=()=>({state:r,dispatch:e})=>ute(r,e),Jre=()=>({state:r,dispatch:e})=>cte(r,e);function mM(r,e,t={},n={}){return Dx(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:n.errorOnInvalidContent})}var Qre=(r,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:n={}}={})=>({editor:s,tr:i,dispatch:a,commands:o})=>{const{doc:c}=i;if(n.preserveWhitespace!=="full"){const d=mM(r,s.schema,n,{errorOnInvalidContent:e??s.options.enableContentCheck});return a&&i.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!t),!0}return a&&i.setMeta("preventUpdate",!t),o.insertContentAt({from:0,to:c.content.size},r,{parseOptions:n,errorOnInvalidContent:e??s.options.enableContentCheck})};function x9(r,e){const t=Bc(e,r.schema),{from:n,to:s,empty:i}=r.selection,a=[];i?(r.storedMarks&&a.push(...r.storedMarks),a.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,s,c=>{a.push(...c.marks)});const o=a.find(c=>c.type.name===t.name);return o?{...o.attrs}:{}}function b9(r,e){const t=new mF(r);return e.forEach(n=>{n.steps.forEach(s=>{t.step(s)})}),t}function Zre(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function ese(r,e,t){const n=[];return r.nodesBetween(e.from,e.to,(s,i)=>{t(s)&&n.push({node:s,pos:i})}),n}function tse(r,e){for(let t=r.depth;t>0;t-=1){const n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function AE(r){return e=>tse(e.$from,r)}function qe(r,e,t){return r.config[e]===void 0&&r.parent?qe(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?qe(r.parent,e,t):null}):r.config[e]}function I_(r){return r.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},n=qe(e,"addExtensions",t);return n?[e,...I_(n())]:e}).flat(10)}function B_(r,e){const t=sp.fromSchema(e).serializeFragment(r),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function v9(r){return typeof r=="function"}function nn(r,e=void 0,...t){return v9(r)?e?r.bind(e)(...t):r(...t):r}function nse(r={}){return Object.keys(r).length===0&&r.constructor===Object}function Qg(r){const e=r.filter(s=>s.type==="extension"),t=r.filter(s=>s.type==="node"),n=r.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function w9(r){const e=[],{nodeExtensions:t,markExtensions:n}=Qg(r),s=[...t,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage,extensions:s},c=qe(a,"addGlobalAttributes",o);if(!c)return;c().forEach(h=>{h.types.forEach(g=>{Object.entries(h.attributes).forEach(([y,b])=>{e.push({type:g,name:y,attribute:{...i,...b}})})})})}),s.forEach(a=>{const o={name:a.name,options:a.options,storage:a.storage},c=qe(a,"addAttributes",o);if(!c)return;const d=c();Object.entries(d).forEach(([h,g])=>{const y={...i,...g};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:a.name,name:h,attribute:y})})}),e}function mr(...r){return r.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([s,i])=>{if(!n[s]){n[s]=i;return}if(s==="class"){const o=i?String(i).split(" "):[],c=n[s]?n[s].split(" "):[],d=o.filter(h=>!c.includes(h));n[s]=[...c,...d].join(" ")}else if(s==="style"){const o=i?i.split(";").map(h=>h.trim()).filter(Boolean):[],c=n[s]?n[s].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;c.forEach(h=>{const[g,y]=h.split(":").map(b=>b.trim());d.set(g,y)}),o.forEach(h=>{const[g,y]=h.split(":").map(b=>b.trim());d.set(g,y)}),n[s]=Array.from(d.entries()).map(([h,g])=>`${h}: ${g}`).join("; ")}else n[s]=i}),n},{})}function nC(r,e){return e.filter(t=>t.type===r.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>mr(t,n),{})}function rse(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function RL(r,e){return"style"in r?r:{...r,getAttrs:t=>{const n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;const s=e.reduce((i,a)=>{const o=a.attribute.parseHTML?a.attribute.parseHTML(t):rse(t.getAttribute(a.name));return o==null?i:{...i,[a.name]:o}},{});return{...n,...s}}}}function LL(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&nse(t)?!1:t!=null))}function PL(r){var e,t;const n={};return!((e=r==null?void 0:r.attribute)!=null&&e.isRequired)&&"default"in((r==null?void 0:r.attribute)||{})&&(n.default=r.attribute.default),((t=r==null?void 0:r.attribute)==null?void 0:t.validate)!==void 0&&(n.validate=r.attribute.validate),[r.name,n]}function sse(r,e){var t;const n=w9(r),{nodeExtensions:s,markExtensions:i}=Qg(r),a=(t=s.find(d=>qe(d,"topNode")))==null?void 0:t.name,o=Object.fromEntries(s.map(d=>{const h=n.filter(C=>C.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:e},y=r.reduce((C,N)=>{const A=qe(N,"extendNodeSchema",g);return{...C,...A?A(d):{}}},{}),b=LL({...y,content:nn(qe(d,"content",g)),marks:nn(qe(d,"marks",g)),group:nn(qe(d,"group",g)),inline:nn(qe(d,"inline",g)),atom:nn(qe(d,"atom",g)),selectable:nn(qe(d,"selectable",g)),draggable:nn(qe(d,"draggable",g)),code:nn(qe(d,"code",g)),whitespace:nn(qe(d,"whitespace",g)),linebreakReplacement:nn(qe(d,"linebreakReplacement",g)),defining:nn(qe(d,"defining",g)),isolating:nn(qe(d,"isolating",g)),attrs:Object.fromEntries(h.map(PL))}),v=nn(qe(d,"parseHTML",g));v&&(b.parseDOM=v.map(C=>RL(C,h)));const w=qe(d,"renderHTML",g);w&&(b.toDOM=C=>w({node:C,HTMLAttributes:nC(C,h)}));const E=qe(d,"renderText",g);return E&&(b.toText=E),[d.name,b]})),c=Object.fromEntries(i.map(d=>{const h=n.filter(E=>E.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:e},y=r.reduce((E,C)=>{const N=qe(C,"extendMarkSchema",g);return{...E,...N?N(d):{}}},{}),b=LL({...y,inclusive:nn(qe(d,"inclusive",g)),excludes:nn(qe(d,"excludes",g)),group:nn(qe(d,"group",g)),spanning:nn(qe(d,"spanning",g)),code:nn(qe(d,"code",g)),attrs:Object.fromEntries(h.map(PL))}),v=nn(qe(d,"parseHTML",g));v&&(b.parseDOM=v.map(E=>RL(E,h)));const w=qe(d,"renderHTML",g);return w&&(b.toDOM=E=>w({mark:E,HTMLAttributes:nC(E,h)})),[d.name,b]}));return new Z7({topNode:a,nodes:o,marks:c})}function ise(r){const e=r.filter((t,n)=>r.indexOf(t)!==n);return Array.from(new Set(e))}function F_(r){return r.sort((t,n)=>{const s=qe(t,"priority")||100,i=qe(n,"priority")||100;return s>i?-1:s<i?1:0})}function S9(r){const e=F_(I_(r)),t=ise(e.map(n=>n.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function C9(r,e,t){const{from:n,to:s}=e,{blockSeparator:i=`

`,textSerializers:a={}}=t||{};let o="";return r.nodesBetween(n,s,(c,d,h,g)=>{var y;c.isBlock&&d>n&&(o+=i);const b=a==null?void 0:a[c.type.name];if(b)return h&&(o+=b({node:c,pos:d,parent:h,index:g,range:e})),!1;c.isText&&(o+=(y=c==null?void 0:c.text)==null?void 0:y.slice(Math.max(n,d)-d,s-d))}),o}function ase(r,e){const t={from:0,to:r.content.size};return C9(r,t,e)}function E9(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function ose(r,e){const t=Ar(e,r.schema),{from:n,to:s}=r.selection,i=[];r.doc.nodesBetween(n,s,o=>{i.push(o)});const a=i.reverse().find(o=>o.type.name===t.name);return a?{...a.attrs}:{}}function T9(r,e){const t=TE(typeof e=="string"?e:e.name,r.schema);return t==="node"?ose(r,e):t==="mark"?x9(r,e):{}}function lse(r,e=JSON.stringify){const t={};return r.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function cse(r){const e=lse(r);return e.length===1?e:e.filter((t,n)=>!e.filter((i,a)=>a!==n).some(i=>t.oldRange.from>=i.oldRange.from&&t.oldRange.to<=i.oldRange.to&&t.newRange.from>=i.newRange.from&&t.newRange.to<=i.newRange.to))}function A9(r){const{mapping:e,steps:t}=r,n=[];return e.maps.forEach((s,i)=>{const a=[];if(s.ranges.length)s.forEach((o,c)=>{a.push({from:o,to:c})});else{const{from:o,to:c}=t[i];if(o===void 0||c===void 0)return;a.push({from:o,to:c})}a.forEach(({from:o,to:c})=>{const d=e.slice(i).map(o,-1),h=e.slice(i).map(c),g=e.invert().map(d,-1),y=e.invert().map(h);n.push({oldRange:{from:g,to:y},newRange:{from:d,to:h}})})}),cse(n)}function z_(r,e,t){const n=[];return r===e?t.resolve(r).marks().forEach(s=>{const i=t.resolve(r),a=L_(i,s.type);a&&n.push({mark:s,...a})}):t.nodesBetween(r,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(a=>({from:i,to:i+s.nodeSize,mark:a})))}),n}var use=(r,e,t,n=20)=>{const s=r.doc.resolve(t);let i=n,a=null;for(;i>0&&a===null;){const o=s.node(i);(o==null?void 0:o.type.name)===e?a=o:i-=1}return[a,i]};function BN(r,e){return e.nodes[r]||e.marks[r]||null}function xS(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const s=r.find(i=>i.type===e&&i.name===n);return s?s.attribute.keepOnSplit:!1}))}var dse=(r,e=500)=>{let t="";const n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(s,i,a,o)=>{var c,d;const h=((d=(c=s.type.spec).toText)==null?void 0:d.call(c,{node:s,pos:i,parent:a,index:o}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?h:h.slice(0,Math.max(0,n-i))}),t};function gM(r,e,t={}){const{empty:n,ranges:s}=r.selection,i=e?Bc(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(g=>i?i.name===g.type.name:!0).find(g=>tC(g.attrs,t,{strict:!1}));let a=0;const o=[];if(s.forEach(({$from:g,$to:y})=>{const b=g.pos,v=y.pos;r.doc.nodesBetween(b,v,(w,E)=>{if(!w.isText&&!w.marks.length)return;const C=Math.max(b,E),N=Math.min(v,E+w.nodeSize),A=N-C;a+=A,o.push(...w.marks.map(k=>({mark:k,from:C,to:N})))})}),a===0)return!1;const c=o.filter(g=>i?i.name===g.mark.type.name:!0).filter(g=>tC(g.mark.attrs,t,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),d=o.filter(g=>i?g.mark.type!==i&&g.mark.type.excludes(i):!0).reduce((g,y)=>g+y.to-y.from,0);return(c>0?c+d:c)>=a}function hse(r,e,t={}){if(!e)return Rd(r,null,t)||gM(r,null,t);const n=TE(e,r.schema);return n==="node"?Rd(r,e,t):n==="mark"?gM(r,e,t):!1}var fse=(r,e)=>{const{$from:t,$to:n,$anchor:s}=r.selection;if(e){const i=AE(o=>o.type.name===e)(r.selection);if(!i)return!1;const a=r.doc.resolve(i.pos+1);return s.pos+1===a.end()}return!(n.parentOffset<n.parent.nodeSize-2||t.pos!==n.pos)},pse=r=>{const{$from:e,$to:t}=r.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function IL(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}function BL(r,e){const{nodeExtensions:t}=Qg(e),n=t.find(a=>a.name===r);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},i=nn(qe(n,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function NE(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var n;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((n=r.text)!=null?n:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let s=!0;return r.content.forEach(i=>{s!==!1&&(NE(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function N9(r){return r instanceof We}var k9=class M9{constructor(e){this.position=e}static fromJSON(e){return new M9(e.position)}toJSON(){return{position:this.position}}};function mse(r,e){const t=e.mapping.mapResult(r.position);return{position:new k9(t.pos),mapResult:t}}function gse(r){return new k9(r)}function yse(r,e,t){var n;const{selection:s}=e;let i=null;if(p9(s)&&(i=s.$cursor),i){const o=(n=r.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(t)&&(!!t.isInSet(o)||!o.some(d=>d.type.excludes(t)))}const{ranges:a}=s;return a.some(({$from:o,$to:c})=>{let d=o.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(o.pos,c.pos,(h,g,y)=>{if(d)return!1;if(h.isInline){const b=!y||y.type.allowsMarkType(t),v=!!t.isInSet(h.marks)||!h.marks.some(w=>w.type.excludes(t));d=b&&v}return!d}),d})}var xse=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const{selection:i}=t,{empty:a,ranges:o}=i,c=Bc(r,n.schema);if(s)if(a){const d=x9(n,c);t.addStoredMark(c.create({...d,...e}))}else o.forEach(d=>{const h=d.$from.pos,g=d.$to.pos;n.doc.nodesBetween(h,g,(y,b)=>{const v=Math.max(b,h),w=Math.min(b+y.nodeSize,g);y.marks.find(C=>C.type===c)?y.marks.forEach(C=>{c===C.type&&t.addMark(v,w,c.create({...C.attrs,...e}))}):t.addMark(v,w,c.create(e))})});return yse(n,t,c)},bse=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),vse=(r,e={})=>({state:t,dispatch:n,chain:s})=>{const i=Ar(r,t.schema);let a;return t.selection.$anchor.sameParent(t.selection.$head)&&(a=t.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:o})=>Q6(i,{...a,...e})(t)?!0:o.clearNodes()).command(({state:o})=>Q6(i,{...a,...e})(o,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},wse=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,s=vh(r,0,n.content.size),i=We.create(n,s);e.setSelection(i)}return!0},Sse=(r,e)=>({tr:t,state:n,dispatch:s})=>{const{selection:i}=n;let a,o;return typeof e=="number"?(a=e,o=e):e&&"from"in e&&"to"in e?(a=e.from,o=e.to):(a=i.from,o=i.to),s&&t.doc.nodesBetween(a,o,(c,d)=>{c.isText||t.setNodeMarkup(d,void 0,{...c.attrs,dir:r})}),!0},Cse=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:s,to:i}=typeof r=="number"?{from:r,to:r}:r,a=nt.atStart(n).from,o=nt.atEnd(n).to,c=vh(s,a,o),d=vh(i,a,o),h=nt.create(n,c,d);e.setSelection(h)}return!0},Ese=r=>({state:e,dispatch:t})=>{const n=Ar(r,e.schema);return xte(n)(e,t)};function FL(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const n=t.filter(s=>e==null?void 0:e.includes(s.type.name));r.tr.ensureMarks(n)}}var Tse=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:s})=>{const{selection:i,doc:a}=e,{$from:o,$to:c}=i,d=s.extensionManager.attributes,h=xS(d,o.node().type.name,o.node().attrs);if(i instanceof We&&i.node.isBlock)return!o.parentOffset||!Nc(a,o.pos)?!1:(n&&(r&&FL(t,s.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,y=o.depth===0?void 0:Zre(o.node(-1).contentMatchAt(o.indexAfter(-1)));let b=g&&y?[{type:y,attrs:h}]:void 0,v=Nc(e.doc,e.mapping.map(o.pos),1,b);if(!b&&!v&&Nc(e.doc,e.mapping.map(o.pos),1,y?[{type:y}]:void 0)&&(v=!0,b=y?[{type:y,attrs:h}]:void 0),n){if(v&&(i instanceof nt&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,b),y&&!g&&!o.parentOffset&&o.parent.type!==y)){const w=e.mapping.map(o.before()),E=e.doc.resolve(w);o.node(-1).canReplaceWith(E.index(),E.index()+1,y)&&e.setNodeMarkup(e.mapping.map(o.before()),y)}r&&FL(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return v},Ase=(r,e={})=>({tr:t,state:n,dispatch:s,editor:i})=>{var a;const o=Ar(r,n.schema),{$from:c,$to:d}=n.selection,h=n.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(d))return!1;const g=c.node(-1);if(g.type!==o)return!1;const y=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==o||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let C=Ee.empty;const N=c.index(-1)?1:c.index(-2)?2:3;for(let F=c.depth-N;F>=c.depth-3;F-=1)C=Ee.from(c.node(F).copy(C));const A=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,k={...xS(y,c.node().type.name,c.node().attrs),...e},M=((a=o.contentMatch.defaultType)==null?void 0:a.createAndFill(k))||void 0;C=C.append(Ee.from(o.createAndFill(null,M)||void 0));const O=c.before(c.depth-(N-1));t.replace(O,c.after(-A),new De(C,4-N,0));let P=-1;t.doc.nodesBetween(O,t.doc.content.size,(F,H)=>{if(P>-1)return!1;F.isTextblock&&F.content.size===0&&(P=H+1)}),P>-1&&t.setSelection(nt.near(t.doc.resolve(P))),t.scrollIntoView()}return!0}const b=d.pos===c.end()?g.contentMatchAt(0).defaultType:null,v={...xS(y,g.type.name,g.attrs),...e},w={...xS(y,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,d.pos);const E=b?[{type:o,attrs:v},{type:b,attrs:w}]:[{type:o,attrs:v}];if(!Nc(t.doc,c.pos,2))return!1;if(s){const{selection:C,storedMarks:N}=n,{splittableMarks:A}=i.extensionManager,k=N||C.$to.parentOffset&&C.$from.marks();if(t.split(c.pos,2,E).scrollIntoView(),!k||!s)return!0;const M=k.filter(O=>A.includes(O.type.name));t.ensureMarks(M)}return!0},FN=(r,e)=>{const t=AE(a=>a.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===(s==null?void 0:s.type)&&Fd(r.doc,t.pos)&&r.join(t.pos),!0},zN=(r,e)=>{const t=AE(a=>a.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===(s==null?void 0:s.type)&&Fd(r.doc,n)&&r.join(n),!0},Nse=(r,e,t,n={})=>({editor:s,tr:i,state:a,dispatch:o,chain:c,commands:d,can:h})=>{const{extensions:g,splittableMarks:y}=s.extensionManager,b=Ar(r,a.schema),v=Ar(e,a.schema),{selection:w,storedMarks:E}=a,{$from:C,$to:N}=w,A=C.blockRange(N),k=E||w.$to.parentOffset&&w.$from.marks();if(!A)return!1;const M=AE(O=>BL(O.type.name,g))(w);if(A.depth>=1&&M&&A.depth-M.depth<=1){if(M.node.type===b)return d.liftListItem(v);if(BL(M.node.type.name,g)&&b.validContent(M.node.content)&&o)return c().command(()=>(i.setNodeMarkup(M.pos,b),!0)).command(()=>FN(i,b)).command(()=>zN(i,b)).run()}return!t||!k||!o?c().command(()=>h().wrapInList(b,n)?!0:d.clearNodes()).wrapInList(b,n).command(()=>FN(i,b)).command(()=>zN(i,b)).run():c().command(()=>{const O=h().wrapInList(b,n),P=k.filter(F=>y.includes(F.type.name));return i.ensureMarks(P),O?!0:d.clearNodes()}).wrapInList(b,n).command(()=>FN(i,b)).command(()=>zN(i,b)).run()},kse=(r,e={},t={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,a=Bc(r,n.schema);return gM(n,a,e)?s.unsetMark(a,{extendEmptyMarkRange:i}):s.setMark(a,e)},Mse=(r,e,t={})=>({state:n,commands:s})=>{const i=Ar(r,n.schema),a=Ar(e,n.schema),o=Rd(n,i,t);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),o?s.setNode(a,c):s.setNode(i,{...c,...t})},_se=(r,e={})=>({state:t,commands:n})=>{const s=Ar(r,t.schema);return Rd(t,s,e)?n.lift(s):n.wrapIn(s,e)},jse=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let n=0;n<t.length;n+=1){const s=t[n];let i;if(s.spec.isInputRules&&(i=s.getState(r))){if(e){const a=r.tr,o=i.transform;for(let c=o.steps.length-1;c>=0;c-=1)a.step(o.steps[c].invert(o.docs[c]));if(i.text){const c=a.doc.resolve(i.from).marks();a.replaceWith(i.from,i.to,r.schema.text(i.text,c))}else a.delete(i.from,i.to)}return!0}}return!1},Dse=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:n,ranges:s}=t;return n||e&&s.forEach(i=>{r.removeMark(i.$from.pos,i.$to.pos)}),!0},Ose=(r,e={})=>({tr:t,state:n,dispatch:s})=>{var i;const{extendEmptyMarkRange:a=!1}=e,{selection:o}=t,c=Bc(r,n.schema),{$from:d,empty:h,ranges:g}=o;if(!s)return!0;if(h&&a){let{from:y,to:b}=o;const v=(i=d.marks().find(E=>E.type===c))==null?void 0:i.attrs,w=L_(d,c,v);w&&(y=w.from,b=w.to),t.removeMark(y,b,c)}else g.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,c)});return t.removeStoredMark(c),!0},Rse=r=>({tr:e,state:t,dispatch:n})=>{const{selection:s}=t;let i,a;return typeof r=="number"?(i=r,a=r):r&&"from"in r&&"to"in r?(i=r.from,a=r.to):(i=s.from,a=s.to),n&&e.doc.nodesBetween(i,a,(o,c)=>{if(o.isText)return;const d={...o.attrs};delete d.dir,e.setNodeMarkup(c,void 0,d)}),!0},Lse=(r,e={})=>({tr:t,state:n,dispatch:s})=>{let i=null,a=null;const o=TE(typeof r=="string"?r:r.name,n.schema);if(!o)return!1;o==="node"&&(i=Ar(r,n.schema)),o==="mark"&&(a=Bc(r,n.schema));let c=!1;return t.selection.ranges.forEach(d=>{const h=d.$from.pos,g=d.$to.pos;let y,b,v,w;t.selection.empty?n.doc.nodesBetween(h,g,(E,C)=>{i&&i===E.type&&(c=!0,v=Math.max(C,h),w=Math.min(C+E.nodeSize,g),y=C,b=E)}):n.doc.nodesBetween(h,g,(E,C)=>{C<h&&i&&i===E.type&&(c=!0,v=Math.max(C,h),w=Math.min(C+E.nodeSize,g),y=C,b=E),C>=h&&C<=g&&(i&&i===E.type&&(c=!0,s&&t.setNodeMarkup(C,void 0,{...E.attrs,...e})),a&&E.marks.length&&E.marks.forEach(N=>{if(a===N.type&&(c=!0,s)){const A=Math.max(C,h),k=Math.min(C+E.nodeSize,g);t.addMark(A,k,a.create({...N.attrs,...e}))}}))}),b&&(y!==void 0&&s&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),a&&b.marks.length&&b.marks.forEach(E=>{a===E.type&&s&&t.addMark(v,w,a.create({...E.attrs,...e}))}))}),c},Pse=(r,e={})=>({state:t,dispatch:n})=>{const s=Ar(r,t.schema);return dte(s,e)(t,n)},Ise=(r,e={})=>({state:t,dispatch:n})=>{const s=Ar(r,t.schema);return hte(s,e)(t,n)},Bse=class{constructor(){this.callbacks={}}on(r,e){return this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(e),this}emit(r,...e){const t=this.callbacks[r];return t&&t.forEach(n=>n.apply(this,e)),this}off(r,e){const t=this.callbacks[r];return t&&(e?this.callbacks[r]=t.filter(n=>n!==e):delete this.callbacks[r]),this}once(r,e){const t=(...n)=>{this.off(r,t),e.apply(this,n)};return this.on(r,t)}removeAllListeners(){this.callbacks={}}},kE=class{constructor(r){var e;this.find=r.find,this.handler=r.handler,this.undoable=(e=r.undoable)!=null?e:!0}},Fse=(r,e)=>{if(R_(e))return e.exec(r);const t=e(r);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function Sw(r){var e;const{editor:t,from:n,to:s,text:i,rules:a,plugin:o}=r,{view:c}=t;if(c.composing)return!1;const d=c.state.doc.resolve(n);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(y=>y.type.spec.code))return!1;let h=!1;const g=dse(d)+i;return a.forEach(y=>{if(h)return;const b=Fse(g,y.find);if(!b)return;const v=c.state.tr,w=CE({state:c.state,transaction:v}),E={from:n-(b[0].length-i.length),to:s},{commands:C,chain:N,can:A}=new EE({editor:t,state:w});y.handler({state:w,range:E,match:b,commands:C,chain:N,can:A})===null||!v.steps.length||(y.undoable&&v.setMeta(o,{transform:v,from:n,to:s,text:i}),c.dispatch(v),h=!0)}),h}function zse(r){const{editor:e,rules:t}=r,n=new Wn({state:{init(){return null},apply(s,i,a){const o=s.getMeta(n);if(o)return o;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=B_(Ee.from(h),a.schema);const{from:g}=c,y=g+h.length;Sw({editor:e,from:g,to:y,text:h,rules:t,plugin:n})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,a,o){return Sw({editor:e,from:i,to:a,text:o,rules:t,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Sw({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:a}=s.state.selection;return a?Sw({editor:e,from:a.pos,to:a.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function Hse(r){return Object.prototype.toString.call(r).slice(8,-1)}function Cw(r){return Hse(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function _9(r,e){const t={...r};return Cw(r)&&Cw(e)&&Object.keys(e).forEach(n=>{Cw(e[n])&&Cw(r[n])?t[n]=_9(r[n],e[n]):t[n]=e[n]}),t}var H_=class{constructor(r={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...r},this.name=this.config.name}get options(){return{...nn(qe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...nn(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(r={}){const e=this.extend({...this.config,addOptions:()=>_9(this.options,r)});return e.name=this.name,e.parent=this.parent,e}extend(r={}){const e=new this.constructor({...this.config,...r});return e.parent=this,this.child=e,e.name="name"in r?r.name:e.parent.name,e}},Hd=class j9 extends H_{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new j9(t)}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const a=s.marks();if(!!!a.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const c=a.find(d=>(d==null?void 0:d.type.name)===t.name);return c&&n.removeStoredMark(c),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Use(r){return typeof r=="number"}var $se=class{constructor(r){this.find=r.find,this.handler=r.handler}},Vse=(r,e,t)=>{if(R_(e))return[...r.matchAll(e)];const n=e(r,t);return n?n.map(s=>{const i=[s.text];return i.index=s.index,i.input=r,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function qse(r){const{editor:e,state:t,from:n,to:s,rule:i,pasteEvent:a,dropEvent:o}=r,{commands:c,chain:d,can:h}=new EE({editor:e,state:t}),g=[];return t.doc.nodesBetween(n,s,(b,v)=>{var w,E,C,N,A;if((E=(w=b.type)==null?void 0:w.spec)!=null&&E.code||!(b.isText||b.isTextblock||b.isInline))return;const k=(A=(N=(C=b.content)==null?void 0:C.size)!=null?N:b.nodeSize)!=null?A:0,M=Math.max(n,v),O=Math.min(s,v+k);if(M>=O)return;const P=b.isText?b.text||"":b.textBetween(M-v,O-v,void 0,"￼");Vse(P,i.find,a).forEach(H=>{if(H.index===void 0)return;const ee=M+H.index+1,G=ee+H[0].length,J={from:t.tr.mapping.map(ee),to:t.tr.mapping.map(G)},V=i.handler({state:t,range:J,match:H,commands:c,chain:d,can:h,pasteEvent:a,dropEvent:o});g.push(V)})}),g.every(b=>b!==null)}var Ew=null,Gse=r=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",r),t};function Wse(r){const{editor:e,rules:t}=r;let n=null,s=!1,i=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const c=({state:h,from:g,to:y,rule:b,pasteEvt:v})=>{const w=h.tr,E=CE({state:h,transaction:w});if(!(!qse({editor:e,state:E,from:Math.max(g-1,0),to:y.b-1,rule:b,pasteEvent:v,dropEvent:o})||!w.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(h=>new Wn({view(g){const y=v=>{var w;n=(w=g.dom.parentElement)!=null&&w.contains(v.target)?g.dom.parentElement:null,n&&(Ew=e)},b=()=>{Ew&&(Ew=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(g,y)=>{if(i=n===g.dom.parentElement,o=y,!i){const b=Ew;b!=null&&b.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(g,y)=>{var b;const v=(b=y.clipboardData)==null?void 0:b.getData("text/html");return a=y,s=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(g,y,b)=>{const v=g[0],w=v.getMeta("uiEvent")==="paste"&&!s,E=v.getMeta("uiEvent")==="drop"&&!i,C=v.getMeta("applyPasteRules"),N=!!C;if(!w&&!E&&!N)return;if(N){let{text:M}=C;typeof M=="string"?M=M:M=B_(Ee.from(M),b.schema);const{from:O}=C,P=O+M.length,F=Gse(M);return c({rule:h,state:b,from:O,to:{b:P},pasteEvt:F})}const A=y.doc.content.findDiffStart(b.doc.content),k=y.doc.content.findDiffEnd(b.doc.content);if(!(!Use(A)||!k||A===k.b))return c({rule:h,state:b,from:A,to:k,pasteEvt:a})}}))}var ME=class{constructor(r,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=r,this.extensions=S9(r),this.schema=sse(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((r,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:BN(e.name,this.schema)},n=qe(e,"addCommands",t);return n?{...r,...n()}:r},{})}get plugins(){const{editor:r}=this;return F_([...this.extensions].reverse()).flatMap(n=>{const s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:r,type:BN(n.name,this.schema)},i=[],a=qe(n,"addKeyboardShortcuts",s);let o={};if(n.type==="mark"&&qe(n,"exitable",s)&&(o.ArrowRight=()=>Hd.handleExit({editor:r,mark:n})),a){const y=Object.fromEntries(Object.entries(a()).map(([b,v])=>[b,()=>v({editor:r})]));o={...o,...y}}const c=ore(o);i.push(c);const d=qe(n,"addInputRules",s);if(IL(n,r.options.enableInputRules)&&d){const y=d();if(y&&y.length){const b=zse({editor:r,rules:y}),v=Array.isArray(b)?b:[b];i.push(...v)}}const h=qe(n,"addPasteRules",s);if(IL(n,r.options.enablePasteRules)&&h){const y=h();if(y&&y.length){const b=Wse({editor:r,rules:y});i.push(...b)}}const g=qe(n,"addProseMirrorPlugins",s);if(g){const y=g();i.push(...y)}return i})}get attributes(){return w9(this.extensions)}get nodeViews(){const{editor:r}=this,{nodeExtensions:e}=Qg(this.extensions);return Object.fromEntries(e.filter(t=>!!qe(t,"addNodeView")).map(t=>{const n=this.attributes.filter(c=>c.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:Ar(t.name,this.schema)},i=qe(t,"addNodeView",s);if(!i)return[];const a=i();if(!a)return[];const o=(c,d,h,g,y)=>{const b=nC(c,n);return a({node:c,view:d,getPos:h,decorations:g,innerDecorations:y,editor:r,extension:t,HTMLAttributes:b})};return[t.name,o]}))}get markViews(){const{editor:r}=this,{markExtensions:e}=Qg(this.extensions);return Object.fromEntries(e.filter(t=>!!qe(t,"addMarkView")).map(t=>{const n=this.attributes.filter(o=>o.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:Bc(t.name,this.schema)},i=qe(t,"addMarkView",s);if(!i)return[];const a=(o,c,d)=>{const h=nC(o,n);return i()({mark:o,view:c,inline:d,editor:r,extension:t,HTMLAttributes:h,updateAttributes:g=>{oie(o,r,g)}})};return[t.name,a]}))}setupExtensions(){const r=this.extensions;this.editor.extensionStorage=Object.fromEntries(r.map(e=>[e.name,e.storage])),r.forEach(e=>{var t;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:BN(e.name,this.schema)};e.type==="mark"&&((t=nn(qe(e,"keepOnSplit",n)))==null||t)&&this.splittableMarks.push(e.name);const s=qe(e,"onBeforeCreate",n),i=qe(e,"onCreate",n),a=qe(e,"onUpdate",n),o=qe(e,"onSelectionUpdate",n),c=qe(e,"onTransaction",n),d=qe(e,"onFocus",n),h=qe(e,"onBlur",n),g=qe(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),g&&this.editor.on("destroy",g)})}};ME.resolve=S9;ME.sort=F_;ME.flatten=I_;var Yse={};O_(Yse,{ClipboardTextSerializer:()=>O9,Commands:()=>R9,Delete:()=>L9,Drop:()=>P9,Editable:()=>I9,FocusEvents:()=>F9,Keymap:()=>z9,Paste:()=>H9,Tabindex:()=>U9,TextDirection:()=>$9,focusEventsPluginKey:()=>B9});var sn=class D9 extends H_{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new D9(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},O9=sn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wn({key:new Br("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:s}=e,{ranges:i}=s,a=Math.min(...i.map(h=>h.$from.pos)),o=Math.max(...i.map(h=>h.$to.pos)),c=E9(t);return C9(n,{from:a,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),R9=sn.create({name:"commands",addCommands(){return{...h9}}}),L9=sn.create({name:"delete",onUpdate({transaction:r,appendedTransactions:e}){var t,n,s;const i=()=>{var a,o,c,d;if((d=(c=(o=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:o.filterTransaction)==null?void 0:c.call(o,r))!=null?d:r.getMeta("y-sync$"))return;const h=b9(r.before,[r,...e]);A9(h).forEach(b=>{h.mapping.mapResult(b.oldRange.from).deletedAfter&&h.mapping.mapResult(b.oldRange.to).deletedBefore&&h.before.nodesBetween(b.oldRange.from,b.oldRange.to,(v,w)=>{const E=w+v.nodeSize-2,C=b.oldRange.from<=w&&E<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:w,to:E,newFrom:h.mapping.map(w),newTo:h.mapping.map(E),deletedRange:b.oldRange,newRange:b.newRange,partial:!C,editor:this.editor,transaction:r,combinedTransform:h})})});const y=h.mapping;h.steps.forEach((b,v)=>{var w,E;if(b instanceof ho){const C=y.slice(v).map(b.from,-1),N=y.slice(v).map(b.to),A=y.invert().map(C,-1),k=y.invert().map(N),M=(w=h.doc.nodeAt(C-1))==null?void 0:w.marks.some(P=>P.eq(b.mark)),O=(E=h.doc.nodeAt(N))==null?void 0:E.marks.some(P=>P.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:A,to:k},newRange:{from:C,to:N},partial:!!(O||M),editor:this.editor,transaction:r,combinedTransform:h})}})};(s=(n=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:n.async)==null||s?setTimeout(i,0):i()}}),P9=sn.create({name:"drop",addProseMirrorPlugins(){return[new Wn({key:new Br("tiptapDrop"),props:{handleDrop:(r,e,t,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:n})}}})]}}),I9=sn.create({name:"editable",addProseMirrorPlugins(){return[new Wn({key:new Br("editable"),props:{editable:()=>this.editor.options.editable}})]}}),B9=new Br("focusEvents"),F9=sn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new Wn({key:B9,props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),z9=sn.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:o})=>{const{selection:c,doc:d}=o,{empty:h,$anchor:g}=c,{pos:y,parent:b}=g,v=g.parent.isTextblock&&y>0?o.doc.resolve(y-1):g,w=v.parent.type.spec.isolating,E=g.pos-g.parentOffset,C=w&&v.parent.childCount===1?E===g.pos:bt.atStart(d).from===y;return!h||!b.type.isTextblock||b.textContent.length||!C||C&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},i={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return P_()||y9()?i:s},addProseMirrorPlugins(){return[new Wn({key:new Br("clearDocument"),appendTransaction:(r,e,t)=>{if(r.some(w=>w.getMeta("composition")))return;const n=r.some(w=>w.docChanged)&&!e.doc.eq(t.doc),s=r.some(w=>w.getMeta("preventClearDocument"));if(!n||s)return;const{empty:i,from:a,to:o}=e.selection,c=bt.atStart(e.doc).from,d=bt.atEnd(e.doc).to;if(i||!(a===c&&o===d)||!NE(t.doc))return;const y=t.tr,b=CE({state:t,transaction:y}),{commands:v}=new EE({editor:this.editor,state:b});if(v.clearNodes(),!!y.steps.length)return y}})]}}),H9=sn.create({name:"paste",addProseMirrorPlugins(){return[new Wn({key:new Br("tiptapPaste"),props:{handlePaste:(r,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),U9=sn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wn({key:new Br("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),$9=sn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:r}=Qg(this.extensions);return[{types:r.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Wn({key:new Br("textDirection"),props:{attributes:()=>{const r=this.options.direction;return r?{dir:r}:{}}}})]}}),Xse=class rm{constructor(e,t,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new rm(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new rm(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new rm(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const s=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,a=this.pos+n+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(a);if(!s&&o.depth<=this.depth)return;const c=new rm(o,this.editor,s,s?t:null);s&&(c.actualDepth=this.depth+1),e.push(new rm(o,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===e)if(Object.keys(t).length>0){const i=s.node.attrs,a=Object.keys(t);for(let o=0;o<a.length;o+=1){const c=a[o];if(i[c]!==t[c])break}}else n=s;s=s.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(t);return this.children.forEach(a=>{n&&s.length>0||(a.node.type.name===e&&i.every(c=>t[c]===a.node.attrs[c])&&s.push(a),!(n&&s.length>0)&&(s=s.concat(a.querySelectorAll(e,t,n))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},Kse=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Jse(r,e,t){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(s),s}var Qse=class extends Bse{constructor(r={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:mse,createMappablePosition:gse},this.setOptions(r),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:s,moved:i})=>this.options.onDrop(n,s,i)),this.on("paste",({event:n,slice:s})=>this.options.onPaste(n,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=m9(e,this.options.autofocus);this.editorState=om.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(r){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(r),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const r=this.editorView.dom;r!=null&&r.editor&&delete r.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(r){console.warn("Failed to remove CSS element:",r)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Jse(Kse,this.options.injectNonce))}setOptions(r={}){this.options={...this.options,...r},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(r,e=!0){this.setOptions({editable:r}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:r=>{this.editorState=r},dispatch:r=>{this.dispatchTransaction(r)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(r,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in r)return Reflect.get(r,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(r,e){const t=v9(e)?e(r,[...this.state.plugins]):[...this.state.plugins,r],n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}unregisterPlugin(r){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(r).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;t=t.filter(a=>!a.key.startsWith(i))}),e.length===t.length)return;const n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}createExtensionManager(){var r,e;const n=[...this.options.enableCoreExtensions?[I9,O9.configure({blockSeparator:(e=(r=this.options.coreExtensionOptions)==null?void 0:r.clipboardTextSerializer)==null?void 0:e.blockSeparator}),R9,F9,z9,U9,P9,H9,L9,$9.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new ME(n,this)}createCommandManager(){this.commandManager=new EE({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let r;try{r=mM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),r=mM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return r}createView(r){var e;this.editorView=new u9(r,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(r){this.isCapturingTransaction=!0,r(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(r){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=r;return}r.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:e,transactions:t}=this.state.applyTransaction(r),n=!this.state.selection.eq(e.selection),s=t.includes(r),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:r,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:r,appendedTransactions:t.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:r});const a=t.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),o=a==null?void 0:a.getMeta("focus"),c=a==null?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),c&&this.emit("blur",{editor:this,event:c.event,transaction:a}),!(r.getMeta("preventUpdate")||!t.some(d=>d.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:r,appendedTransactions:t.slice(1)})}getAttributes(r){return T9(this.state,r)}isActive(r,e){const t=typeof r=="string"?r:null,n=typeof r=="string"?e:r;return hse(this.state,t,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return B_(this.state.doc.content,this.schema)}getText(r){const{blockSeparator:e=`

`,textSerializers:t={}}=r||{};return ase(this.state.doc,{blockSeparator:e,textSerializers:{...E9(this.schema),...t}})}get isEmpty(){return NE(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var r,e;return(e=(r=this.editorView)==null?void 0:r.isDestroyed)!=null?e:!0}$node(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(r,e))||null}$nodes(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(r,e))||null}$pos(r){const e=this.state.doc.resolve(r);return new Xse(e,this)}get $doc(){return this.$pos(0)}};function Zg(r){return new kE({find:r.find,handler:({state:e,range:t,match:n})=>{const s=nn(r.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:i}=e,a=n[n.length-1],o=n[0];if(a){const c=o.search(/\S/),d=t.from+o.indexOf(a),h=d+a.length;if(z_(t.from,t.to,e.doc).filter(b=>b.mark.type.excluded.find(w=>w===r.type&&w!==b.mark.type)).filter(b=>b.to>d).length)return null;h<t.to&&i.delete(h,t.to),d>t.from&&i.delete(t.from+c,d);const y=t.from+c+a.length;i.addMark(t.from+c,y,r.type.create(s||{})),i.removeStoredMark(r.type)}},undoable:r.undoable})}function Zse(r){return new kE({find:r.find,handler:({state:e,range:t,match:n})=>{const s=nn(r.getAttributes,void 0,n)||{},{tr:i}=e,a=t.from;let o=t.to;const c=r.type.create(s);if(n[1]){const d=n[0].lastIndexOf(n[1]);let h=a+d;h>o?h=o:o=h+n[1].length;const g=n[0][n[0].length-1];i.insertText(g,a+n[0].length-1),i.replaceWith(h,o,c)}else if(n[0]){const d=r.type.isInline?a:a-1;i.insert(d,r.type.create(s)).delete(i.mapping.map(a),i.mapping.map(o))}i.scrollIntoView()},undoable:r.undoable})}function yM(r){return new kE({find:r.find,handler:({state:e,range:t,match:n})=>{const s=e.doc.resolve(t.from),i=nn(r.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,i)},undoable:r.undoable})}function e0(r){return new kE({find:r.find,handler:({state:e,range:t,match:n,chain:s})=>{const i=nn(r.getAttributes,void 0,n)||{},a=e.tr.delete(t.from,t.to),c=a.doc.resolve(t.from).blockRange(),d=c&&y_(c,r.type,i);if(!d)return null;if(a.wrap(c,d),r.keepMarks&&r.editor){const{selection:g,storedMarks:y}=e,{splittableMarks:b}=r.editor.extensionManager,v=y||g.$to.parentOffset&&g.$from.marks();if(v){const w=v.filter(E=>b.includes(E.type.name));a.ensureMarks(w)}}if(r.keepAttributes){const g=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,i).run()}const h=a.doc.resolve(t.from-1).nodeBefore;h&&h.type===r.type&&Fd(a.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,h))&&a.join(t.from-1)},undoable:r.undoable})}function eie(r,e){const{selection:t}=r,{$from:n}=t;if(t instanceof We){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let s=n.depth;for(;s>=0;){const i=n.index(s);if(n.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var tie={};O_(tie,{createAtomBlockMarkdownSpec:()=>nie,createBlockMarkdownSpec:()=>rie,createInlineMarkdownSpec:()=>aie,parseAttributes:()=>U_,parseIndentedBlocks:()=>xM,renderNestedMarkdownContent:()=>V_,serializeAttributes:()=>$_});function U_(r){if(!(r!=null&&r.trim()))return{};const e={},t=[],n=r.replace(/["']([^"']*)["']/g,d=>(t.push(d),`__QUOTED_${t.length-1}__`)),s=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const d=s.map(h=>h.trim().slice(1));e.class=d.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(a)).forEach(([,d,h])=>{var g;const y=parseInt(((g=h.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),b=t[y];b&&(e[d]=b.slice(1,-1))});const c=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function $_(r){if(!r||Object.keys(r).length===0)return"";const e=[];return r.class&&String(r.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),r.id&&e.push(`#${r.id}`),Object.entries(r).forEach(([t,n])=>{t==="class"||t==="id"||(n===!0?e.push(t):n!==!1&&n!=null&&e.push(`${t}="${String(n)}"`))}),e.join(" ")}function nie(r){const{nodeName:e,name:t,parseAttributes:n=U_,serializeAttributes:s=$_,defaultAttributes:i={},requiredAttributes:a=[],allowedAttributes:o}=r,c=t||e,d=h=>{if(!o)return h;const g={};return o.forEach(y=>{y in h&&(g[y]=h[y])}),g};return{parseMarkdown:(h,g)=>{const y={...i,...h.attributes};return g.createNode(e,y,[])},markdownTokenizer:{name:e,level:"block",start(h){var g;const y=new RegExp(`^:::${c}(?:\\s|$)`,"m"),b=(g=h.match(y))==null?void 0:g.index;return b!==void 0?b:-1},tokenize(h,g,y){const b=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=h.match(b);if(!v)return;const w=v[1]||"",E=n(w);if(!a.find(N=>!(N in E)))return{type:e,raw:v[0],attributes:E}}},renderMarkdown:h=>{const g=d(h.attrs||{}),y=s(g),b=y?` {${y}}`:"";return`:::${c}${b} :::`}}}function rie(r){const{nodeName:e,name:t,getContent:n,parseAttributes:s=U_,serializeAttributes:i=$_,defaultAttributes:a={},content:o="block",allowedAttributes:c}=r,d=t||e,h=g=>{if(!c)return g;const y={};return c.forEach(b=>{b in g&&(y[b]=g[b])}),y};return{parseMarkdown:(g,y)=>{let b;if(n){const w=n(g);b=typeof w=="string"?[{type:"text",text:w}]:w}else o==="block"?b=y.parseChildren(g.tokens||[]):b=y.parseInline(g.tokens||[]);const v={...a,...g.attributes};return y.createNode(e,v,b)},markdownTokenizer:{name:e,level:"block",start(g){var y;const b=new RegExp(`^:::${d}`,"m"),v=(y=g.match(b))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(g,y,b){var v;const w=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=g.match(w);if(!E)return;const[C,N=""]=E,A=s(N);let k=1;const M=C.length;let O="";const P=/^:::([\w-]*)(\s.*)?/gm,F=g.slice(M);for(P.lastIndex=0;;){const H=P.exec(F);if(H===null)break;const ee=H.index,G=H[1];if(!((v=H[2])!=null&&v.endsWith(":::"))){if(G)k+=1;else if(k-=1,k===0){const J=F.slice(0,ee);O=J.trim();const V=g.slice(0,M+ee+H[0].length);let X=[];if(O)if(o==="block")for(X=b.blockTokens(J),X.forEach(K=>{K.text&&(!K.tokens||K.tokens.length===0)&&(K.tokens=b.inlineTokens(K.text))});X.length>0;){const K=X[X.length-1];if(K.type==="paragraph"&&(!K.text||K.text.trim()===""))X.pop();else break}else X=b.inlineTokens(O);return{type:e,raw:V,attributes:A,content:O,tokens:X}}}}}},renderMarkdown:(g,y)=>{const b=h(g.attrs||{}),v=i(b),w=v?` {${v}}`:"",E=y.renderChildren(g.content||[],`

`);return`:::${d}${w}

${E}

:::`}}}function sie(r){if(!r.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=t.exec(r);for(;n!==null;){const[,s,i,a]=n;e[s]=i||a,n=t.exec(r)}return e}function iie(r){return Object.entries(r).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function aie(r){const{nodeName:e,name:t,getContent:n,parseAttributes:s=sie,serializeAttributes:i=iie,defaultAttributes:a={},selfClosing:o=!1,allowedAttributes:c}=r,d=t||e,h=y=>{if(!c)return y;const b={};return c.forEach(v=>{const w=typeof v=="string"?v:v.name,E=typeof v=="string"?void 0:v.skipIfDefault;if(w in y){const C=y[w];if(E!==void 0&&C===E)return;b[w]=C}}),b},g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,b)=>{const v={...a,...y.attributes};if(o)return b.createNode(e,v);const w=n?n(y):y.content||"";return w?b.createNode(e,v,[b.createTextNode(w)]):b.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(y){const b=o?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),v=y.match(b),w=v==null?void 0:v.index;return w!==void 0?w:-1},tokenize(y,b,v){const w=o?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),E=y.match(w);if(!E)return;let C="",N="";if(o){const[,k]=E;N=k}else{const[,k,M]=E;N=k,C=M||""}const A=s(N.trim());return{type:e,raw:E[0],content:C.trim(),attributes:A}}},renderMarkdown:y=>{let b="";n?b=n(y):y.content&&y.content.length>0&&(b=y.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const v=h(y.attrs||{}),w=i(v),E=w?` ${w}`:"";return o?`[${d}${E}]`:`[${d}${E}]${b}[/${d}]`}}}function xM(r,e,t){var n,s,i,a;const o=r.split(`
`),c=[];let d="",h=0;const g=e.baseIndentSize||2;for(;h<o.length;){const y=o[h],b=y.match(e.itemPattern);if(!b){if(c.length>0)break;if(y.trim()===""){h+=1,d=`${d}${y}
`;continue}else return}const v=e.extractItemData(b),{indentLevel:w,mainContent:E}=v;d=`${d}${y}
`;const C=[E];for(h+=1;h<o.length;){const M=o[h];if(M.trim()===""){const P=o.slice(h+1).findIndex(ee=>ee.trim()!=="");if(P===-1)break;if((((s=(n=o[h+1+P].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:s.length)||0)>w){C.push(M),d=`${d}${M}
`,h+=1;continue}else break}if((((a=(i=M.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:a.length)||0)>w)C.push(M),d=`${d}${M}
`,h+=1;else break}let N;const A=C.slice(1);if(A.length>0){const M=A.map(O=>O.slice(w+g)).join(`
`);M.trim()&&(e.customNestedParser?N=e.customNestedParser(M):N=t.blockTokens(M))}const k=e.createToken(v,N);c.push(k)}if(c.length!==0)return{items:c,raw:d}}function V_(r,e,t,n){if(!r||!Array.isArray(r.content))return"";const s=typeof t=="function"?t(n):t,[i,...a]=r.content,o=e.renderChildren([i]),c=[`${s}${o}`];return a&&a.length>0&&a.forEach(d=>{const h=e.renderChildren([d]);if(h){const g=h.split(`
`).map(y=>y?e.indent(y):"").join(`
`);c.push(g)}}),c.join(`
`)}function oie(r,e,t={}){const{state:n}=e,{doc:s,tr:i}=n,a=r;s.descendants((o,c)=>{const d=i.mapping.map(c),h=i.mapping.map(c)+o.nodeSize;let g=null;if(o.marks.forEach(b=>{if(b!==a)return!1;g=b}),!g)return;let y=!1;if(Object.keys(t).forEach(b=>{t[b]!==g.attrs[b]&&(y=!0)}),y){const b=r.type.create({...r.attrs,...t});i.removeMark(d,h,r.type),i.addMark(d,h,b)}}),i.docChanged&&e.view.dispatch(i)}var ta=class V9 extends H_{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new V9(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Jf(r){return new $se({find:r.find,handler:({state:e,range:t,match:n,pasteEvent:s})=>{const i=nn(r.getAttributes,void 0,n,s);if(i===!1||i===null)return null;const{tr:a}=e,o=n[n.length-1],c=n[0];let d=t.to;if(o){const h=c.search(/\S/),g=t.from+c.indexOf(o),y=g+o.length;if(z_(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===r.type&&E!==v.mark.type)).filter(v=>v.to>g).length)return null;y<t.to&&a.delete(y,t.to),g>t.from&&a.delete(t.from+h,g),d=t.from+h+o.length,a.addMark(t.from+h,d,r.type.create(i||{})),a.removeStoredMark(r.type)}}})}const{getOwnPropertyNames:lie,getOwnPropertySymbols:cie}=Object,{hasOwnProperty:uie}=Object.prototype;function HN(r,e){return function(n,s,i){return r(n,s,i)&&e(n,s,i)}}function Tw(r){return function(t,n,s){if(!t||!n||typeof t!="object"||typeof n!="object")return r(t,n,s);const{cache:i}=s,a=i.get(t),o=i.get(n);if(a&&o)return a===n&&o===t;i.set(t,n),i.set(n,t);const c=r(t,n,s);return i.delete(t),i.delete(n),c}}function die(r){return r!=null?r[Symbol.toStringTag]:void 0}function zL(r){return lie(r).concat(cie(r))}const hie=Object.hasOwn||((r,e)=>uie.call(r,e));function ip(r,e){return r===e||!r&&!e&&r!==r&&e!==e}const fie="__v",pie="__o",mie="_owner",{getOwnPropertyDescriptor:HL,keys:UL}=Object;function gie(r,e){return r.byteLength===e.byteLength&&rC(new Uint8Array(r),new Uint8Array(e))}function yie(r,e,t){let n=r.length;if(e.length!==n)return!1;for(;n-- >0;)if(!t.equals(r[n],e[n],n,n,r,e,t))return!1;return!0}function xie(r,e){return r.byteLength===e.byteLength&&rC(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function bie(r,e){return ip(r.getTime(),e.getTime())}function vie(r,e){return r.name===e.name&&r.message===e.message&&r.cause===e.cause&&r.stack===e.stack}function wie(r,e){return r===e}function $L(r,e,t){const n=r.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=r.entries();let a,o,c=0;for(;(a=i.next())&&!a.done;){const d=e.entries();let h=!1,g=0;for(;(o=d.next())&&!o.done;){if(s[g]){g++;continue}const y=a.value,b=o.value;if(t.equals(y[0],b[0],c,g,r,e,t)&&t.equals(y[1],b[1],y[0],b[0],r,e,t)){h=s[g]=!0;break}g++}if(!h)return!1;c++}return!0}const Sie=ip;function Cie(r,e,t){const n=UL(r);let s=n.length;if(UL(e).length!==s)return!1;for(;s-- >0;)if(!q9(r,e,t,n[s]))return!1;return!0}function xy(r,e,t){const n=zL(r);let s=n.length;if(zL(e).length!==s)return!1;let i,a,o;for(;s-- >0;)if(i=n[s],!q9(r,e,t,i)||(a=HL(r,i),o=HL(e,i),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function Eie(r,e){return ip(r.valueOf(),e.valueOf())}function Tie(r,e){return r.source===e.source&&r.flags===e.flags}function VL(r,e,t){const n=r.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=r.values();let a,o;for(;(a=i.next())&&!a.done;){const c=e.values();let d=!1,h=0;for(;(o=c.next())&&!o.done;){if(!s[h]&&t.equals(a.value,o.value,a.value,o.value,r,e,t)){d=s[h]=!0;break}h++}if(!d)return!1}return!0}function rC(r,e){let t=r.byteLength;if(e.byteLength!==t||r.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}function Aie(r,e){return r.hostname===e.hostname&&r.pathname===e.pathname&&r.protocol===e.protocol&&r.port===e.port&&r.hash===e.hash&&r.username===e.username&&r.password===e.password}function q9(r,e,t,n){return(n===mie||n===pie||n===fie)&&(r.$$typeof||e.$$typeof)?!0:hie(e,n)&&t.equals(r[n],e[n],n,n,r,e,t)}const Nie="[object ArrayBuffer]",kie="[object Arguments]",Mie="[object Boolean]",_ie="[object DataView]",jie="[object Date]",Die="[object Error]",Oie="[object Map]",Rie="[object Number]",Lie="[object Object]",Pie="[object RegExp]",Iie="[object Set]",Bie="[object String]",Fie={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},zie="[object URL]",Hie=Object.prototype.toString;function Uie({areArrayBuffersEqual:r,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:a,areNumbersEqual:o,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:h,areSetsEqual:g,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:v}){return function(E,C,N){if(E===C)return!0;if(E==null||C==null)return!1;const A=typeof E;if(A!==typeof C)return!1;if(A!=="object")return A==="number"?o(E,C,N):A==="function"?i(E,C,N):!1;const k=E.constructor;if(k!==C.constructor)return!1;if(k===Object)return c(E,C,N);if(Array.isArray(E))return e(E,C,N);if(k===Date)return n(E,C,N);if(k===RegExp)return h(E,C,N);if(k===Map)return a(E,C,N);if(k===Set)return g(E,C,N);const M=Hie.call(E);if(M===jie)return n(E,C,N);if(M===Pie)return h(E,C,N);if(M===Oie)return a(E,C,N);if(M===Iie)return g(E,C,N);if(M===Lie)return typeof E.then!="function"&&typeof C.then!="function"&&c(E,C,N);if(M===zie)return b(E,C,N);if(M===Die)return s(E,C,N);if(M===kie)return c(E,C,N);if(Fie[M])return y(E,C,N);if(M===Nie)return r(E,C,N);if(M===_ie)return t(E,C,N);if(M===Mie||M===Rie||M===Bie)return d(E,C,N);if(v){let O=v[M];if(!O){const P=die(E);P&&(O=v[P])}if(O)return O(E,C,N)}return!1}}function $ie({circular:r,createCustomConfig:e,strict:t}){let n={areArrayBuffersEqual:gie,areArraysEqual:t?xy:yie,areDataViewsEqual:xie,areDatesEqual:bie,areErrorsEqual:vie,areFunctionsEqual:wie,areMapsEqual:t?HN($L,xy):$L,areNumbersEqual:Sie,areObjectsEqual:t?xy:Cie,arePrimitiveWrappersEqual:Eie,areRegExpsEqual:Tie,areSetsEqual:t?HN(VL,xy):VL,areTypedArraysEqual:t?HN(rC,xy):rC,areUrlsEqual:Aie,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),r){const s=Tw(n.areArraysEqual),i=Tw(n.areMapsEqual),a=Tw(n.areObjectsEqual),o=Tw(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:o})}return n}function Vie(r){return function(e,t,n,s,i,a,o){return r(e,t,o)}}function qie({circular:r,comparator:e,createState:t,equals:n,strict:s}){if(t)return function(o,c){const{cache:d=r?new WeakMap:void 0,meta:h}=t();return e(o,c,{cache:d,equals:n,meta:h,strict:s})};if(r)return function(o,c){return e(o,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(o,c){return e(o,c,i)}}const Gie=Ud();Ud({strict:!0});Ud({circular:!0});Ud({circular:!0,strict:!0});Ud({createInternalComparator:()=>ip});Ud({strict:!0,createInternalComparator:()=>ip});Ud({circular:!0,createInternalComparator:()=>ip});Ud({circular:!0,createInternalComparator:()=>ip,strict:!0});function Ud(r={}){const{circular:e=!1,createInternalComparator:t,createState:n,strict:s=!1}=r,i=$ie(r),a=Uie(i),o=t?t(a):Vie(a);return qie({circular:e,comparator:a,createState:n,equals:o,strict:s})}var UN={exports:{}},$N={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qL;function Wie(){if(qL)return $N;qL=1;var r=tp(),e=P7();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,i=r.useRef,a=r.useEffect,o=r.useMemo,c=r.useDebugValue;return $N.useSyncExternalStoreWithSelector=function(d,h,g,y,b){var v=i(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=o(function(){function C(O){if(!N){if(N=!0,A=O,O=y(O),b!==void 0&&w.hasValue){var P=w.value;if(b(P,O))return k=P}return k=O}if(P=k,n(A,O))return P;var F=y(O);return b!==void 0&&b(P,F)?(A=O,P):(A=O,k=F)}var N=!1,A,k,M=g===void 0?null:g;return[function(){return C(h())},M===null?void 0:function(){return C(M())}]},[h,g,y,b]);var E=s(d,v[0],v[1]);return a(function(){w.hasValue=!0,w.value=E},[E]),c(E),E},$N}var GL;function Yie(){return GL||(GL=1,UN.exports=Wie()),UN.exports}var Xie=Yie(),Kie=(...r)=>e=>{r.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Jie=({contentComponent:r})=>{const e=I7.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getServerSnapshot);return f.jsx(f.Fragment,{children:Object.values(e)})};function Qie(){const r=new Set;let e={};return{subscribe(t){return r.add(t),()=>{r.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,n){e={...e,[t]:tW.createPortal(n.reactElement,n.element,t)},r.forEach(s=>s())},removeRenderer(t){const n={...e};delete n[t],e=n,r.forEach(s=>s())}}}var Zie=class extends Wt.Component{constructor(r){var e;super(r),this.editorContentRef=Wt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=r.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var r;const e=this.props.editor;if(e&&!e.isDestroyed&&((r=e.view.dom)!=null&&r.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=Qie(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var r;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((r=e.view.dom)!=null&&r.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:r,innerRef:e,...t}=this.props;return f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:Kie(e,this.editorContentRef),...t}),(r==null?void 0:r.contentComponent)&&f.jsx(Jie,{contentComponent:r.contentComponent})]})}},eae=I.forwardRef((r,e)=>{const t=Wt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[r.editor]);return Wt.createElement(Zie,{key:t,innerRef:e,...r})}),G9=Wt.memo(eae),tae=typeof window<"u"?I.useLayoutEffect:I.useEffect,nae=class{constructor(r){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=r,this.lastSnapshot={editor:r,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(r){return this.subscribers.add(r),()=>{this.subscribers.delete(r)}}watch(r){if(this.editor=r,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function rae(r){var e;const[t]=I.useState(()=>new nae(r.editor)),n=Xie.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,r.selector,(e=r.equalityFn)!=null?e:Gie);return tae(()=>t.watch(r.editor),[r.editor,t]),I.useDebugValue(n),n}var sae=!1,bM=typeof window>"u",iae=bM||!!(typeof window<"u"&&window.next),aae=class W9{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?bM||iae?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...n)},onBlur:(...n)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...n)},onCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...n)},onDestroy:(...n)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...n)},onFocus:(...n)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...n)},onSelectionUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...n)},onTransaction:(...n)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...n)},onUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...n)},onContentError:(...n)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...n)},onDrop:(...n)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...n)},onPaste:(...n)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...n)},onDelete:(...n)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...n)}};return new Qse(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,i)=>{var a;return s===((a=t.extensions)==null?void 0:a[i])}):e[n]===t[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?W9.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,s)=>n===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function VN(r={},e=[]){const t=I.useRef(r);t.current=r;const[n]=I.useState(()=>new aae(t)),s=I7.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return I.useDebugValue(s),I.useEffect(n.onRender(e)),rae({editor:s,selector:({transactionNumber:i})=>r.shouldRerenderOnTransaction===!1||r.shouldRerenderOnTransaction===void 0?null:r.immediatelyRender&&i===0?0:i+1}),s}var oae=I.createContext({editor:null});oae.Consumer;var lae=I.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),cae=()=>I.useContext(lae);Wt.forwardRef((r,e)=>{const{onDragStart:t}=cae(),n=r.as||"div";return f.jsx(n,{...r,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...r.style}})});Wt.createContext({markViewContentRef:()=>{}});var sC=(r,e)=>{if(r==="slot")return 0;if(r instanceof Function)return r(e);const{children:t,...n}=e??{};if(r==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[r,n,t]},uae=/^\s*>\s$/,dae=ta.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return sC("blockquote",{...mr(this.options.HTMLAttributes,r),children:sC("slot",{})})},parseMarkdown:(r,e)=>e.createNode("blockquote",void 0,e.parseChildren(r.tokens||[])),renderMarkdown:(r,e)=>{if(!r.content)return"";const t=">",n=[];return r.content.forEach(s=>{const o=e.renderChildren([s]).split(`
`).map(c=>c.trim()===""?t:`${t} ${c}`);n.push(o.join(`
`))}),n.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[e0({find:uae,type:this.type})]}}),hae=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,fae=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,pae=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,mae=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,gae=Hd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name===this.name},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return sC("strong",{...mr(this.options.HTMLAttributes,r),children:sC("slot",{})})},markdownTokenName:"strong",parseMarkdown:(r,e)=>e.applyMark("bold",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`**${e.renderChildren(r)}**`,addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Zg({find:hae,type:this.type}),Zg({find:pae,type:this.type})]},addPasteRules(){return[Jf({find:fae,type:this.type}),Jf({find:mae,type:this.type})]}}),yae=/(^|[^`])`([^`]+)`(?!`)$/,xae=/(^|[^`])`([^`]+)`(?!`)/g,bae=Hd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",mr(this.options.HTMLAttributes,r),0]},markdownTokenName:"codespan",parseMarkdown:(r,e)=>e.applyMark("code",[{type:"text",text:r.text||""}]),renderMarkdown:(r,e)=>r.content?`\`${e.renderChildren(r.content)}\``:"",addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Zg({find:yae,type:this.type})]},addPasteRules(){return[Jf({find:xae,type:this.type})]}}),qN=4,vae=/^```([a-z]+)?[\s\n]$/,wae=/^~~~([a-z]+)?[\s\n]$/,Sae=ta.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:qN,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const i=[...((e=r.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(t)).map(a=>a.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",mr(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(r,e)=>{var t;return((t=r.raw)==null?void 0:t.startsWith("```"))===!1&&r.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:r.lang||null},r.text?[e.createTextNode(r.text)]:[])},renderMarkdown:(r,e)=>{var t;let n="";const s=((t=r.attrs)==null?void 0:t.language)||"";return r.content?n=[`\`\`\`${s}`,e.renderChildren(r.content),"```"].join(`
`):n=`\`\`\`${s}

\`\`\``,n},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:r})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:qN,{state:n}=r,{selection:s}=n,{$from:i,empty:a}=s;if(i.parent.type!==this.type)return!1;const o=" ".repeat(t);return a?r.commands.insertContent(o):r.commands.command(({tr:c})=>{const{from:d,to:h}=s,b=n.doc.textBetween(d,h,`
`,`
`).split(`
`).map(v=>o+v).join(`
`);return c.replaceWith(d,h,n.schema.text(b)),!0})},"Shift-Tab":({editor:r})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:qN,{state:n}=r,{selection:s}=n,{$from:i,empty:a}=s;return i.parent.type!==this.type?!1:a?r.commands.command(({tr:o})=>{var c;const{pos:d}=i,h=i.start(),g=i.end(),b=n.doc.textBetween(h,g,`
`,`
`).split(`
`);let v=0,w=0;const E=d-h;for(let O=0;O<b.length;O+=1){if(w+b[O].length>=E){v=O;break}w+=b[O].length+1}const N=((c=b[v].match(/^ */))==null?void 0:c[0])||"",A=Math.min(N.length,t);if(A===0)return!0;let k=h;for(let O=0;O<v;O+=1)k+=b[O].length+1;return o.delete(k,k+A),d-k<=A&&o.setSelection(nt.create(o.doc,k)),!0}):r.commands.command(({tr:o})=>{const{from:c,to:d}=s,y=n.doc.textBetween(c,d,`
`,`
`).split(`
`).map(b=>{var v;const w=((v=b.match(/^ */))==null?void 0:v[0])||"",E=Math.min(w.length,t);return b.slice(E)}).join(`
`);return o.replaceWith(c,d,n.schema.text(y)),!0})},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:n,empty:s}=t;if(!s||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,a=n.parent.textContent.endsWith(`

`);return!i||!a?!1:r.chain().command(({tr:o})=>(o.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:n}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const o=s.after();return o===void 0?!1:n.nodeAt(o)?r.commands.command(({tr:d})=>(d.setSelection(bt.near(n.resolve(o))),!0)):r.commands.exitCode()}}},addInputRules(){return[yM({find:vae,type:this.type,getAttributes:r=>({language:r[1]})}),yM({find:wae,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new Wn({key:new Br("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:a,schema:o}=r.state,c=o.text(t.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:i},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(nt.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),r.dispatch(a),!0}}})]}}),Cae=ta.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`

`):""}),Eae=ta.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",mr(this.options.HTMLAttributes,r)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:o}=n.extensionManager,c=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&c&&a){const g=c.filter(y=>o.includes(y.type.name));d.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Tae=ta.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,mr(this.options.HTMLAttributes,e),0]},parseMarkdown:(r,e)=>e.createNode("heading",{level:r.depth||1},e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>{var t;const n=(t=r.attrs)!=null&&t.level?parseInt(r.attrs.level,10):1,s="#".repeat(n);return r.content?`${s} ${e.renderChildren(r.content)}`:""},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>yM({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}}),Aae=ta.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",mr(this.options.HTMLAttributes,r)]},markdownTokenName:"hr",parseMarkdown:(r,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{if(!eie(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:n}=t,s=r();return N9(t)?s.insertContentAt(n.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:a,dispatch:o})=>{if(o){const{$to:c}=a.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?a.setSelection(nt.create(a.doc,c.pos+1)):c.nodeAfter.isBlock?a.setSelection(We.create(a.doc,c.pos)):a.setSelection(nt.create(a.doc,c.pos));else{const h=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,g=h==null?void 0:h.create();g&&(a.insert(d,g),a.setSelection(nt.create(a.doc,d+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Zse({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Nae=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,kae=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Mae=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,_ae=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jae=Hd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:r=>r.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",mr(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(r,e)=>e.applyMark("italic",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`*${e.renderChildren(r)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Zg({find:Nae,type:this.type}),Zg({find:Mae,type:this.type})]},addPasteRules(){return[Jf({find:kae,type:this.type}),Jf({find:_ae,type:this.type})]}});const Dae="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Oae="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",vM="numeric",wM="ascii",SM="alpha",lx="asciinumeric",Wy="alphanumeric",CM="domain",Y9="emoji",Rae="scheme",Lae="slashscheme",GN="whitespace";function Pae(r,e){return r in e||(e[r]=[]),e[r]}function wh(r,e,t){e[vM]&&(e[lx]=!0,e[Wy]=!0),e[wM]&&(e[lx]=!0,e[SM]=!0),e[lx]&&(e[Wy]=!0),e[SM]&&(e[Wy]=!0),e[Wy]&&(e[CM]=!0),e[Y9]&&(e[CM]=!0);for(const n in e){const s=Pae(n,t);s.indexOf(r)<0&&s.push(r)}}function Iae(r,e){const t={};for(const n in e)e[n].indexOf(r)>=0&&(t[n]=!0);return t}function pi(r=null){this.j={},this.jr=[],this.jd=null,this.t=r}pi.groups={};pi.prototype={accepts(){return!!this.t},go(r){const e=this,t=e.j[r];if(t)return t;for(let n=0;n<e.jr.length;n++){const s=e.jr[n][0],i=e.jr[n][1];if(i&&s.test(r))return i}return e.jd},has(r,e=!1){return e?r in this.j:!!this.go(r)},ta(r,e,t,n){for(let s=0;s<r.length;s++)this.tt(r[s],e,t,n)},tr(r,e,t,n){n=n||pi.groups;let s;return e&&e.j?s=e:(s=new pi(e),t&&n&&wh(e,t,n)),this.jr.push([r,s]),s},ts(r,e,t,n){let s=this;const i=r.length;if(!i)return s;for(let a=0;a<i-1;a++)s=s.tt(r[a]);return s.tt(r[i-1],e,t,n)},tt(r,e,t,n){n=n||pi.groups;const s=this;if(e&&e.j)return s.j[r]=e,e;const i=e;let a,o=s.go(r);if(o?(a=new pi,Object.assign(a.j,o.j),a.jr.push.apply(a.jr,o.jr),a.jd=o.jd,a.t=o.t):a=new pi,i){if(n)if(a.t&&typeof a.t=="string"){const c=Object.assign(Iae(a.t,n),t);wh(i,c,n)}else t&&wh(i,t,n);a.t=i}return s.j[r]=a,a}};const xt=(r,e,t,n,s)=>r.ta(e,t,n,s),Qn=(r,e,t,n,s)=>r.tr(e,t,n,s),WL=(r,e,t,n,s)=>r.ts(e,t,n,s),Ae=(r,e,t,n,s)=>r.tt(e,t,n,s),Il="WORD",EM="UWORD",X9="ASCIINUMERICAL",K9="ALPHANUMERICAL",Ox="LOCALHOST",TM="TLD",AM="UTLD",bS="SCHEME",sm="SLASH_SCHEME",q_="NUM",NM="WS",G_="NL",cx="OPENBRACE",ux="CLOSEBRACE",iC="OPENBRACKET",aC="CLOSEBRACKET",oC="OPENPAREN",lC="CLOSEPAREN",cC="OPENANGLEBRACKET",uC="CLOSEANGLEBRACKET",dC="FULLWIDTHLEFTPAREN",hC="FULLWIDTHRIGHTPAREN",fC="LEFTCORNERBRACKET",pC="RIGHTCORNERBRACKET",mC="LEFTWHITECORNERBRACKET",gC="RIGHTWHITECORNERBRACKET",yC="FULLWIDTHLESSTHAN",xC="FULLWIDTHGREATERTHAN",bC="AMPERSAND",vC="APOSTROPHE",wC="ASTERISK",vu="AT",SC="BACKSLASH",CC="BACKTICK",EC="CARET",Au="COLON",W_="COMMA",TC="DOLLAR",_o="DOT",AC="EQUALS",Y_="EXCLAMATION",ba="HYPHEN",dx="PERCENT",NC="PIPE",kC="PLUS",MC="POUND",hx="QUERY",X_="QUOTE",J9="FULLWIDTHMIDDLEDOT",K_="SEMI",jo="SLASH",fx="TILDE",_C="UNDERSCORE",Q9="EMOJI",jC="SYM";var Z9=Object.freeze({__proto__:null,ALPHANUMERICAL:K9,AMPERSAND:bC,APOSTROPHE:vC,ASCIINUMERICAL:X9,ASTERISK:wC,AT:vu,BACKSLASH:SC,BACKTICK:CC,CARET:EC,CLOSEANGLEBRACKET:uC,CLOSEBRACE:ux,CLOSEBRACKET:aC,CLOSEPAREN:lC,COLON:Au,COMMA:W_,DOLLAR:TC,DOT:_o,EMOJI:Q9,EQUALS:AC,EXCLAMATION:Y_,FULLWIDTHGREATERTHAN:xC,FULLWIDTHLEFTPAREN:dC,FULLWIDTHLESSTHAN:yC,FULLWIDTHMIDDLEDOT:J9,FULLWIDTHRIGHTPAREN:hC,HYPHEN:ba,LEFTCORNERBRACKET:fC,LEFTWHITECORNERBRACKET:mC,LOCALHOST:Ox,NL:G_,NUM:q_,OPENANGLEBRACKET:cC,OPENBRACE:cx,OPENBRACKET:iC,OPENPAREN:oC,PERCENT:dx,PIPE:NC,PLUS:kC,POUND:MC,QUERY:hx,QUOTE:X_,RIGHTCORNERBRACKET:pC,RIGHTWHITECORNERBRACKET:gC,SCHEME:bS,SEMI:K_,SLASH:jo,SLASH_SCHEME:sm,SYM:jC,TILDE:fx,TLD:TM,UNDERSCORE:_C,UTLD:AM,UWORD:EM,WORD:Il,WS:NM});const jl=/[a-z]/,by=new RegExp("\\p{L}","u"),WN=new RegExp("\\p{Emoji}","u"),Dl=/\d/,YN=/\s/,YL="\r",XN=`
`,Bae="️",Fae="‍",KN="￼";let Aw=null,Nw=null;function zae(r=[]){const e={};pi.groups=e;const t=new pi;Aw==null&&(Aw=XL(Dae)),Nw==null&&(Nw=XL(Oae)),Ae(t,"'",vC),Ae(t,"{",cx),Ae(t,"}",ux),Ae(t,"[",iC),Ae(t,"]",aC),Ae(t,"(",oC),Ae(t,")",lC),Ae(t,"<",cC),Ae(t,">",uC),Ae(t,"（",dC),Ae(t,"）",hC),Ae(t,"「",fC),Ae(t,"」",pC),Ae(t,"『",mC),Ae(t,"』",gC),Ae(t,"＜",yC),Ae(t,"＞",xC),Ae(t,"&",bC),Ae(t,"*",wC),Ae(t,"@",vu),Ae(t,"`",CC),Ae(t,"^",EC),Ae(t,":",Au),Ae(t,",",W_),Ae(t,"$",TC),Ae(t,".",_o),Ae(t,"=",AC),Ae(t,"!",Y_),Ae(t,"-",ba),Ae(t,"%",dx),Ae(t,"|",NC),Ae(t,"+",kC),Ae(t,"#",MC),Ae(t,"?",hx),Ae(t,'"',X_),Ae(t,"/",jo),Ae(t,";",K_),Ae(t,"~",fx),Ae(t,"_",_C),Ae(t,"\\",SC),Ae(t,"・",J9);const n=Qn(t,Dl,q_,{[vM]:!0});Qn(n,Dl,n);const s=Qn(n,jl,X9,{[lx]:!0}),i=Qn(n,by,K9,{[Wy]:!0}),a=Qn(t,jl,Il,{[wM]:!0});Qn(a,Dl,s),Qn(a,jl,a),Qn(s,Dl,s),Qn(s,jl,s);const o=Qn(t,by,EM,{[SM]:!0});Qn(o,jl),Qn(o,Dl,i),Qn(o,by,o),Qn(i,Dl,i),Qn(i,jl),Qn(i,by,i);const c=Ae(t,XN,G_,{[GN]:!0}),d=Ae(t,YL,NM,{[GN]:!0}),h=Qn(t,YN,NM,{[GN]:!0});Ae(t,KN,h),Ae(d,XN,c),Ae(d,KN,h),Qn(d,YN,h),Ae(h,YL),Ae(h,XN),Qn(h,YN,h),Ae(h,KN,h);const g=Qn(t,WN,Q9,{[Y9]:!0});Ae(g,"#"),Qn(g,WN,g),Ae(g,Bae,g);const y=Ae(g,Fae);Ae(y,"#"),Qn(y,WN,g);const b=[[jl,a],[Dl,s]],v=[[jl,null],[by,o],[Dl,i]];for(let w=0;w<Aw.length;w++)mu(t,Aw[w],TM,Il,b);for(let w=0;w<Nw.length;w++)mu(t,Nw[w],AM,EM,v);wh(TM,{tld:!0,ascii:!0},e),wh(AM,{utld:!0,alpha:!0},e),mu(t,"file",bS,Il,b),mu(t,"mailto",bS,Il,b),mu(t,"http",sm,Il,b),mu(t,"https",sm,Il,b),mu(t,"ftp",sm,Il,b),mu(t,"ftps",sm,Il,b),wh(bS,{scheme:!0,ascii:!0},e),wh(sm,{slashscheme:!0,ascii:!0},e),r=r.sort((w,E)=>w[0]>E[0]?1:-1);for(let w=0;w<r.length;w++){const E=r[w][0],N=r[w][1]?{[Rae]:!0}:{[Lae]:!0};E.indexOf("-")>=0?N[CM]=!0:jl.test(E)?Dl.test(E)?N[lx]=!0:N[wM]=!0:N[vM]=!0,WL(t,E,E,N)}return WL(t,"localhost",Ox,{ascii:!0}),t.jd=new pi(jC),{start:t,tokens:Object.assign({groups:e},Z9)}}function ez(r,e){const t=Hae(e.replace(/[A-Z]/g,o=>o.toLowerCase())),n=t.length,s=[];let i=0,a=0;for(;a<n;){let o=r,c=null,d=0,h=null,g=-1,y=-1;for(;a<n&&(c=o.go(t[a]));)o=c,o.accepts()?(g=0,y=0,h=o):g>=0&&(g+=t[a].length,y++),d+=t[a].length,i+=t[a].length,a++;i-=g,a-=y,d-=g,s.push({t:h.t,v:e.slice(i-d,i),s:i-d,e:i})}return s}function Hae(r){const e=[],t=r.length;let n=0;for(;n<t;){let s=r.charCodeAt(n),i,a=s<55296||s>56319||n+1===t||(i=r.charCodeAt(n+1))<56320||i>57343?r[n]:r.slice(n,n+2);e.push(a),n+=a.length}return e}function mu(r,e,t,n,s){let i;const a=e.length;for(let o=0;o<a-1;o++){const c=e[o];r.j[c]?i=r.j[c]:(i=new pi(n),i.jr=s.slice(),r.j[c]=i),r=i}return i=new pi(t),i.jr=s.slice(),r.j[e[a-1]]=i,i}function XL(r){const e=[],t=[];let n=0,s="0123456789";for(;n<r.length;){let i=0;for(;s.indexOf(r[n+i])>=0;)i++;if(i>0){e.push(t.join(""));for(let a=parseInt(r.substring(n,n+i),10);a>0;a--)t.pop();n+=i}else t.push(r[n]),n++}return e}const Rx={defaultProtocol:"http",events:null,format:KL,formatHref:KL,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function J_(r,e=null){let t=Object.assign({},Rx);r&&(t=Object.assign(t,r instanceof J_?r.o:r));const n=t.ignoreTags,s=[];for(let i=0;i<n.length;i++)s.push(n[i].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}J_.prototype={o:Rx,ignoreTags:[],defaultRender(r){return r},check(r){return this.get("validate",r.toString(),r)},get(r,e,t){const n=e!=null;let s=this.o[r];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:Rx[r],typeof s=="function"&&n&&(s=s(e,t))):typeof s=="function"&&n&&(s=s(e,t.t,t)),s)},getObj(r,e,t){let n=this.o[r];return typeof n=="function"&&e!=null&&(n=n(e,t.t,t)),n},render(r){const e=r.render(this);return(this.get("render",null,r)||this.defaultRender)(e,r.t,r)}};function KL(r){return r}function tz(r,e){this.t="token",this.v=r,this.tk=e}tz.prototype={isLink:!1,toString(){return this.v},toHref(r){return this.toString()},toFormattedString(r){const e=this.toString(),t=r.get("truncate",e,this),n=r.get("format",e,this);return t&&n.length>t?n.substring(0,t)+"…":n},toFormattedHref(r){return r.get("formatHref",this.toHref(r.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(r=Rx.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(r),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(r){return{type:this.t,value:this.toFormattedString(r),isLink:this.isLink,href:this.toFormattedHref(r),start:this.startIndex(),end:this.endIndex()}},validate(r){return r.get("validate",this.toString(),this)},render(r){const e=this,t=this.toHref(r.get("defaultProtocol")),n=r.get("formatHref",t,this),s=r.get("tagName",t,e),i=this.toFormattedString(r),a={},o=r.get("className",t,e),c=r.get("target",t,e),d=r.get("rel",t,e),h=r.getObj("attributes",t,e),g=r.getObj("events",t,e);return a.href=n,o&&(a.class=o),c&&(a.target=c),d&&(a.rel=d),h&&Object.assign(a,h),{tagName:s,attributes:a,content:i,eventListeners:g}}};function _E(r,e){class t extends tz{constructor(s,i){super(s,i),this.t=r}}for(const n in e)t.prototype[n]=e[n];return t.t=r,t}const JL=_E("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),QL=_E("text"),Uae=_E("nl"),kw=_E("url",{isLink:!0,toHref(r=Rx.defaultProtocol){return this.hasProtocol()?this.v:`${r}://${this.v}`},hasProtocol(){const r=this.tk;return r.length>=2&&r[0].t!==Ox&&r[1].t===Au}}),ga=r=>new pi(r);function $ae({groups:r}){const e=r.domain.concat([bC,wC,vu,SC,CC,EC,TC,AC,ba,q_,dx,NC,kC,MC,jo,jC,fx,_C]),t=[vC,Au,W_,_o,Y_,dx,hx,X_,K_,cC,uC,cx,ux,aC,iC,oC,lC,dC,hC,fC,pC,mC,gC,yC,xC],n=[bC,vC,wC,SC,CC,EC,TC,AC,ba,cx,ux,dx,NC,kC,MC,hx,jo,jC,fx,_C],s=ga(),i=Ae(s,fx);xt(i,n,i),xt(i,r.domain,i);const a=ga(),o=ga(),c=ga();xt(s,r.domain,a),xt(s,r.scheme,o),xt(s,r.slashscheme,c),xt(a,n,i),xt(a,r.domain,a);const d=Ae(a,vu);Ae(i,vu,d),Ae(o,vu,d),Ae(c,vu,d);const h=Ae(i,_o);xt(h,n,i),xt(h,r.domain,i);const g=ga();xt(d,r.domain,g),xt(g,r.domain,g);const y=Ae(g,_o);xt(y,r.domain,g);const b=ga(JL);xt(y,r.tld,b),xt(y,r.utld,b),Ae(d,Ox,b);const v=Ae(g,ba);Ae(v,ba,v),xt(v,r.domain,g),xt(b,r.domain,g),Ae(b,_o,y),Ae(b,ba,v);const w=Ae(b,Au);xt(w,r.numeric,JL);const E=Ae(a,ba),C=Ae(a,_o);Ae(E,ba,E),xt(E,r.domain,a),xt(C,n,i),xt(C,r.domain,a);const N=ga(kw);xt(C,r.tld,N),xt(C,r.utld,N),xt(N,r.domain,a),xt(N,n,i),Ae(N,_o,C),Ae(N,ba,E),Ae(N,vu,d);const A=Ae(N,Au),k=ga(kw);xt(A,r.numeric,k);const M=ga(kw),O=ga();xt(M,e,M),xt(M,t,O),xt(O,e,M),xt(O,t,O),Ae(N,jo,M),Ae(k,jo,M);const P=Ae(o,Au),F=Ae(c,Au),H=Ae(F,jo),ee=Ae(H,jo);xt(o,r.domain,a),Ae(o,_o,C),Ae(o,ba,E),xt(c,r.domain,a),Ae(c,_o,C),Ae(c,ba,E),xt(P,r.domain,M),Ae(P,jo,M),Ae(P,hx,M),xt(ee,r.domain,M),xt(ee,e,M),Ae(ee,jo,M);const G=[[cx,ux],[iC,aC],[oC,lC],[cC,uC],[dC,hC],[fC,pC],[mC,gC],[yC,xC]];for(let J=0;J<G.length;J++){const[V,X]=G[J],K=Ae(M,V);Ae(O,V,K),Ae(K,X,M);const q=ga(kw);xt(K,e,q);const Z=ga();xt(K,t),xt(q,e,q),xt(q,t,Z),xt(Z,e,q),xt(Z,t,Z),Ae(q,X,M),Ae(Z,X,M)}return Ae(s,Ox,N),Ae(s,G_,Uae),{start:s,tokens:Z9}}function Vae(r,e,t){let n=t.length,s=0,i=[],a=[];for(;s<n;){let o=r,c=null,d=null,h=0,g=null,y=-1;for(;s<n&&!(c=o.go(t[s].t));)a.push(t[s++]);for(;s<n&&(d=c||o.go(t[s].t));)c=null,o=d,o.accepts()?(y=0,g=o):y>=0&&y++,s++,h++;if(y<0)s-=h,s<n&&(a.push(t[s]),s++);else{a.length>0&&(i.push(JN(QL,e,a)),a=[]),s-=y,h-=y;const b=g.t,v=t.slice(s-h,s);i.push(JN(b,e,v))}}return a.length>0&&i.push(JN(QL,e,a)),i}function JN(r,e,t){const n=t[0].s,s=t[t.length-1].e,i=e.slice(n,s);return new r(i,t)}const qae=typeof console<"u"&&console&&console.warn||(()=>{}),Gae="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",On={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Wae(){return pi.groups={},On.scanner=null,On.parser=null,On.tokenQueue=[],On.pluginQueue=[],On.customSchemes=[],On.initialized=!1,On}function ZL(r,e=!1){if(On.initialized&&qae(`linkifyjs: already initialized - will not register custom scheme "${r}" ${Gae}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(r))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);On.customSchemes.push([r,e])}function Yae(){On.scanner=zae(On.customSchemes);for(let r=0;r<On.tokenQueue.length;r++)On.tokenQueue[r][1]({scanner:On.scanner});On.parser=$ae(On.scanner.tokens);for(let r=0;r<On.pluginQueue.length;r++)On.pluginQueue[r][1]({scanner:On.scanner,parser:On.parser});return On.initialized=!0,On}function Q_(r){return On.initialized||Yae(),Vae(On.parser.start,r,ez(On.scanner.start,r))}Q_.scan=ez;function nz(r,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const n=new J_(t),s=Q_(r),i=[];for(let a=0;a<s.length;a++){const o=s[a];o.isLink&&(!e||o.t===e)&&n.check(o)&&i.push(o.toFormattedObject(n))}return i}var Z_="[\0-   ᠎ -\u2029 　]",Xae=new RegExp(Z_),Kae=new RegExp(`${Z_}$`),Jae=new RegExp(Z_,"g");function Qae(r){return r.length===1?r[0].isLink:r.length===3&&r[1].isLink?["()","[]"].includes(r[0].value+r[2].value):!1}function Zae(r){return new Wn({key:new Br("autolink"),appendTransaction:(e,t,n)=>{const s=e.some(d=>d.docChanged)&&!t.doc.eq(n.doc),i=e.some(d=>d.getMeta("preventAutolink"));if(!s||i)return;const{tr:a}=n,o=b9(t.doc,[...e]);if(A9(o).forEach(({newRange:d})=>{const h=ese(n.doc,d,b=>b.isTextblock);let g,y;if(h.length>1)g=h[0],y=n.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(h.length){const b=n.doc.textBetween(d.from,d.to," "," ");if(!Kae.test(b))return;g=h[0],y=n.doc.textBetween(g.pos,d.to,void 0," ")}if(g&&y){const b=y.split(Xae).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],w=g.pos+y.lastIndexOf(v);if(!v)return!1;const E=Q_(v).map(C=>C.toObject(r.defaultProtocol));if(!Qae(E))return!1;E.filter(C=>C.isLink).map(C=>({...C,from:w+C.start+1,to:w+C.end+1})).filter(C=>n.schema.marks.code?!n.doc.rangeHasMark(C.from,C.to,n.schema.marks.code):!0).filter(C=>r.validate(C.value)).filter(C=>r.shouldAutoLink(C.value)).forEach(C=>{z_(C.from,C.to,n.doc).some(N=>N.mark.type===r.type)||a.addMark(C.from,C.to,r.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function eoe(r){return new Wn({key:new Br("handleClickLink"),props:{handleClick:(e,t,n)=>{var s,i;if(n.button!==0||!e.editable)return!1;let a=!1;if(r.enableClickSelection&&(a=r.editor.commands.extendMarkRange(r.type.name)),r.openOnClick){let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{let g=n.target;const y=[];for(;g.nodeName!=="DIV";)y.push(g),g=g.parentNode;o=y.find(b=>b.nodeName==="A")}if(!o)return a;const c=T9(e.state,r.type.name),d=(s=o==null?void 0:o.href)!=null?s:c.href,h=(i=o==null?void 0:o.target)!=null?i:c.target;o&&d&&(window.open(d,h),a=!0)}return a}}})}function toe(r){return new Wn({key:new Br("handlePasteLink"),props:{handlePaste:(e,t,n)=>{const{shouldAutoLink:s}=r,{state:i}=e,{selection:a}=i,{empty:o}=a;if(o)return!1;let c="";n.content.forEach(h=>{c+=h.textContent});const d=nz(c,{defaultProtocol:r.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!d||s!==void 0&&!s(d.href)?!1:r.editor.commands.setMark(r.type,{href:d.href})}}})}function lh(r,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&t.push(s)}),!r||r.replace(Jae,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var noe=Hd.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(r=>{if(typeof r=="string"){ZL(r);return}ZL(r.scheme,r.optionalSlashes)})},onDestroy(){Wae()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(r,e)=>!!lh(r,e.protocols),validate:r=>!!r,shouldAutoLink:r=>!!r}},addAttributes(){return{href:{default:null,parseHTML(r){return r.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:r=>{const e=r.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!lh(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:r}){return this.options.isAllowedUri(r.href,{defaultValidate:e=>!!lh(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mr(this.options.HTMLAttributes,r),0]:["a",mr(this.options.HTMLAttributes,{...r,href:""}),0]},markdownTokenName:"link",parseMarkdown:(r,e)=>e.applyMark("link",e.parseInline(r.tokens||[]),{href:r.href,title:r.title||null}),renderMarkdown:(r,e)=>{var t;const n=((t=r.attrs)==null?void 0:t.href)||"";return`[${e.renderChildren(r)}](${n})`},addCommands(){return{setLink:r=>({chain:e})=>{const{href:t}=r;return this.options.isAllowedUri(t,{defaultValidate:n=>!!lh(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,r).setMeta("preventAutolink",!0).run():!1},toggleLink:r=>({chain:e})=>{const{href:t}=r||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:n=>!!lh(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,r,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:r})=>r().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jf({find:r=>{const e=[];if(r){const{protocols:t,defaultProtocol:n}=this.options,s=nz(r).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:a=>!!lh(a,t),protocols:t,defaultProtocol:n}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:r=>{var e;return{href:(e=r.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const r=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&r.push(Zae({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!lh(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),r.push(eoe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&r.push(toe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),r}}),roe=Object.defineProperty,soe=(r,e)=>{for(var t in e)roe(r,t,{get:e[t],enumerable:!0})},ioe="listItem",eP="textStyle",tP=/^\s*([-+*])\s$/,rz=ta.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",mr(this.options.HTMLAttributes,r),0]},markdownTokenName:"list",parseMarkdown:(r,e)=>r.type!=="list"||r.ordered?[]:{type:"bulletList",content:r.items?e.parseChildren(r.items):[]},renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ioe,this.editor.getAttributes(eP)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=e0({find:tP,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=e0({find:tP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(eP),editor:this.editor})),[r]}}),sz=ta.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",mr(this.options.HTMLAttributes,r),0]},markdownTokenName:"list_item",parseMarkdown:(r,e)=>{if(r.type!=="list_item")return[];let t=[];if(r.tokens&&r.tokens.length>0)if(r.tokens.some(s=>s.type==="paragraph"))t=e.parseChildren(r.tokens);else{const s=r.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(s.tokens)}],r.tokens.length>1){const a=r.tokens.slice(1),o=e.parseChildren(a);t.push(...o)}}else t=e.parseChildren(r.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(r,e,t)=>V_(r,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),aoe={};soe(aoe,{findListItemPos:()=>Db,getNextListDepth:()=>ej,handleBackspace:()=>kM,handleDelete:()=>MM,hasListBefore:()=>iz,hasListItemAfter:()=>ooe,hasListItemBefore:()=>az,listItemHasSubList:()=>oz,nextListIsDeeper:()=>lz,nextListIsHigher:()=>cz});var Db=(r,e)=>{const{$from:t}=e.selection,n=Ar(r,e.schema);let s=null,i=t.depth,a=t.pos,o=null;for(;i>0&&o===null;)s=t.node(i),s.type===n?o=i:(i-=1,a-=1);return o===null?null:{$pos:e.doc.resolve(a),depth:o}},ej=(r,e)=>{const t=Db(r,e);if(!t)return!1;const[,n]=use(e,r,t.$pos.pos+4);return n},iz=(r,e,t)=>{const{$anchor:n}=r.selection,s=Math.max(0,n.pos-2),i=r.doc.resolve(s).node();return!(!i||!t.includes(i.type.name))},az=(r,e)=>{var t;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-2);return!(s.index()===0||((t=s.nodeBefore)==null?void 0:t.type.name)!==r)},oz=(r,e,t)=>{if(!t)return!1;const n=Ar(r,e.schema);let s=!1;return t.descendants(i=>{i.type===n&&(s=!0)}),s},kM=(r,e,t)=>{if(r.commands.undoInputRule())return!0;if(r.state.selection.from!==r.state.selection.to)return!1;if(!Rd(r.state,e)&&iz(r.state,e,t)){const{$anchor:o}=r.state.selection,c=r.state.doc.resolve(o.before()-1),d=[];c.node().descendants((y,b)=>{y.type.name===e&&d.push({node:y,pos:b})});const h=d.at(-1);if(!h)return!1;const g=r.state.doc.resolve(c.start()+h.pos+1);return r.chain().cut({from:o.start()-1,to:o.end()+1},g.end()).joinForward().run()}if(!Rd(r.state,e)||!pse(r.state))return!1;const n=Db(e,r.state);if(!n)return!1;const i=r.state.doc.resolve(n.$pos.pos-2).node(n.depth),a=oz(e,r.state,i);return az(e,r.state)&&!a?r.commands.joinItemBackward():r.chain().liftListItem(e).run()},lz=(r,e)=>{const t=ej(r,e),n=Db(r,e);return!n||!t?!1:t>n.depth},cz=(r,e)=>{const t=ej(r,e),n=Db(r,e);return!n||!t?!1:t<n.depth},MM=(r,e)=>{if(!Rd(r.state,e)||!fse(r.state,e))return!1;const{selection:t}=r.state,{$from:n,$to:s}=t;return!t.empty&&n.sameParent(s)?!1:lz(e,r.state)?r.chain().focus(r.state.selection.from+4).lift(e).joinBackward().run():cz(e,r.state)?r.chain().joinForward().joinBackward().run():r.commands.joinItemForward()},ooe=(r,e)=>{var t;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-n.parentOffset-2);return!(s.index()===s.parent.childCount-1||((t=s.nodeAfter)==null?void 0:t.type.name)!==r)},uz=sn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&MM(r,t)&&(e=!0)}),e},"Mod-Delete":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&MM(r,t)&&(e=!0)}),e},Backspace:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&kM(r,t,n)&&(e=!0)}),e},"Mod-Backspace":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&kM(r,t,n)&&(e=!0)}),e}}}}),nP=/^(\s*)(\d+)\.\s+(.*)$/,loe=/^\s/;function coe(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t],i=s.match(nP);if(!i)break;const[,a,o,c]=i,d=a.length;let h=c,g=t+1;const y=[s];for(;g<r.length;){const b=r[g];if(b.match(nP))break;if(b.trim()==="")y.push(b),h+=`
`,g+=1;else if(b.match(loe))y.push(b),h+=`
${b.slice(d+2)}`,g+=1;else break}e.push({indent:d,number:parseInt(o,10),content:h.trim(),raw:y.join(`
`)}),n=g,t=g}return[e,n]}function dz(r,e,t){var n;const s=[];let i=0;for(;i<r.length;){const a=r[i];if(a.indent===e){const o=a.content.split(`
`),c=((n=o[0])==null?void 0:n.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:t.inlineTokens(c)});const h=o.slice(1).join(`
`).trim();if(h){const b=t.blockTokens(h);d.push(...b)}let g=i+1;const y=[];for(;g<r.length&&r[g].indent>e;)y.push(r[g]),g+=1;if(y.length>0){const b=Math.min(...y.map(w=>w.indent)),v=dz(y,b,t);d.push({type:"list",ordered:!0,start:y[0].number,items:v,raw:y.map(w=>w.raw).join(`
`)})}s.push({type:"list_item",raw:a.raw,tokens:d}),i=g}else i+=1}return s}function uoe(r,e){return r.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const n=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")n.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var doe="listItem",rP="textStyle",sP=/^(\d+)\.\s$/,hz=ta.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:null,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",mr(this.options.HTMLAttributes,t),0]:["ol",mr(this.options.HTMLAttributes,r),0]},markdownTokenName:"list",parseMarkdown:(r,e)=>{if(r.type!=="list"||!r.ordered)return[];const t=r.start||1,n=r.items?uoe(r.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:n}:{type:"orderedList",content:n}},renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:r=>{const e=r.match(/^(\s*)(\d+)\.\s+/),t=e==null?void 0:e.index;return t!==void 0?t:-1},tokenize:(r,e,t)=>{var n;const s=r.split(`
`),[i,a]=coe(s);if(i.length===0)return;const o=dz(i,0,t);return o.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:o,raw:s.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(doe,this.editor.getAttributes(rP)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=e0({find:sP,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=e0({find:sP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(rP)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),hoe=/^\s*(\[([( |x])?\])\s$/,foe=ta.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:r=>{const e=r.getAttribute("data-checked");return e===""||e==="true"},renderHTML:r=>({"data-checked":r.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:r,HTMLAttributes:e}){return["li",mr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:r.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(r,e)=>{const t=[];if(r.tokens&&r.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(r.tokens))):r.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:r.text})])):t.push(e.createNode("paragraph",{},[])),r.nestedTokens&&r.nestedTokens.length>0){const n=e.parseChildren(r.nestedTokens);t.push(...n)}return e.createNode("taskItem",{checked:r.checked||!1},t)},renderMarkdown:(r,e)=>{var t;const s=`- [${(t=r.attrs)!=null&&t.checked?"x":" "}] `;return V_(r,e,s)},addKeyboardShortcuts(){const r={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...r,Tab:()=>this.editor.commands.sinkListItem(this.name)}:r},addNodeView(){return({node:r,HTMLAttributes:e,getPos:t,editor:n})=>{const s=document.createElement("li"),i=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),c=document.createElement("div"),d=h=>{var g,y;o.ariaLabel=((y=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:y.call(g,h,o.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(r),i.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",h=>h.preventDefault()),o.addEventListener("change",h=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:g}=h.target;n.isEditable&&typeof t=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const b=t();if(typeof b!="number")return!1;const v=y.doc.nodeAt(b);return y.setNodeMarkup(b,void 0,{...v==null?void 0:v.attrs,checked:g}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(r,g)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,g])=>{s.setAttribute(h,g)}),s.dataset.checked=r.attrs.checked,o.checked=r.attrs.checked,i.append(o,a),s.append(i,c),Object.entries(e).forEach(([h,g])=>{s.setAttribute(h,g)}),{dom:s,contentDOM:c,update:h=>h.type!==this.type?!1:(s.dataset.checked=h.attrs.checked,o.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[e0({find:hoe,type:this.type,getAttributes:r=>({checked:r[r.length-1]==="x"})})]}}),poe=ta.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:r}){return["ul",mr(this.options.HTMLAttributes,r,{"data-type":this.name}),0]},parseMarkdown:(r,e)=>e.createNode("taskList",{},e.parseChildren(r.items||[])),renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(r){var e;const t=(e=r.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(r,e,t){const n=i=>{const a=xM(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:n},t);return a?[{type:"taskList",raw:a.raw,items:a.items}]:t.blockTokens(i)},s=xM(r,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,a)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:t.inlineTokens(i.mainContent),nestedTokens:a}),customNestedParser:n},t);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});sn.create({name:"listKit",addExtensions(){const r=[];return this.options.bulletList!==!1&&r.push(rz.configure(this.options.bulletList)),this.options.listItem!==!1&&r.push(sz.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(uz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&r.push(hz.configure(this.options.orderedList)),this.options.taskItem!==!1&&r.push(foe.configure(this.options.taskItem)),this.options.taskList!==!1&&r.push(poe.configure(this.options.taskList)),r}});var moe=ta.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",mr(this.options.HTMLAttributes,r),0]},parseMarkdown:(r,e)=>{const t=r.tokens||[];return t.length===1&&t[0].type==="image"?e.parseChildren([t[0]]):e.createNode("paragraph",void 0,e.parseInline(t))},renderMarkdown:(r,e)=>!r||!Array.isArray(r.content)?"":e.renderChildren(r.content),addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),goe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,yoe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,xoe=Hd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",mr(this.options.HTMLAttributes,r),0]},markdownTokenName:"del",parseMarkdown:(r,e)=>e.applyMark("strike",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`~~${e.renderChildren(r)}~~`,addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Zg({find:goe,type:this.type})]},addPasteRules(){return[Jf({find:yoe,type:this.type})]}}),boe=ta.create({name:"text",group:"inline",parseMarkdown:r=>({type:"text",text:r.text||""}),renderMarkdown:r=>r.text||""}),voe=Hd.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",mr(this.options.HTMLAttributes,r),0]},parseMarkdown(r,e){return e.applyMark(this.name||"underline",e.parseInline(r.tokens||[]))},renderMarkdown(r,e){return`++${e.renderChildren(r)}++`},markdownTokenizer:{name:"underline",level:"inline",start(r){return r.indexOf("++")},tokenize(r,e,t){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(r);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:t.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function woe(r={}){return new Wn({view(e){return new Soe(e,r)}})}class Soe{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=a=>{this[s](a)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n,s=this.editorView.dom,i=s.getBoundingClientRect(),a=i.width/s.offsetWidth,o=i.height/s.offsetHeight;if(t){let g=e.nodeBefore,y=e.nodeAfter;if(g||y){let b=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(b){let v=b.getBoundingClientRect(),w=g?v.bottom:v.top;g&&y&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*o;n={left:v.left,right:v.right,top:w-E,bottom:w+E}}}}if(!n){let g=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*a;n={left:g.left-y,right:g.left+y,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let d,h;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,h=-pageYOffset;else{let g=c.getBoundingClientRect(),y=g.width/c.offsetWidth,b=g.height/c.offsetHeight;d=g.left-c.scrollLeft*y,h=g.top-c.scrollTop*b}this.element.style.left=(n.left-d)/a+"px",this.element.style.top=(n.top-h)/o+"px",this.element.style.width=(n.right-n.left)/a+"px",this.element.style.height=(n.bottom-n.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=n&&n.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let a=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=uF(this.editorView.state.doc,a,this.editorView.dragging.slice);o!=null&&(a=o)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class sr extends bt{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return sr.valid(n)?new sr(n):bt.near(n)}content(){return De.empty}eq(e){return e instanceof sr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new sr(e.resolve(t.pos))}getBookmark(){return new tj(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Coe(e)||!Eoe(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&sr.valid(e))return e;let s=e.pos,i=null;for(let a=e.depth;;a--){let o=e.node(a);if(t>0?e.indexAfter(a)<o.childCount:e.index(a)>0){i=o.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;s+=t;let c=e.doc.resolve(s);if(sr.valid(c))return c}for(;;){let a=t>0?i.firstChild:i.lastChild;if(!a){if(i.isAtom&&!i.isText&&!We.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),n=!1;continue e}break}i=a,s+=t;let o=e.doc.resolve(s);if(sr.valid(o))return o}return null}}}sr.prototype.visible=!1;sr.findFrom=sr.findGapCursorFrom;bt.jsonID("gapcursor",sr);class tj{constructor(e){this.pos=e}map(e){return new tj(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return sr.valid(t)?new sr(t):bt.near(t)}}function fz(r){return r.isAtom||r.spec.isolating||r.spec.createGapCursor}function Coe(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||fz(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Eoe(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||fz(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Toe(){return new Wn({props:{decorations:Moe,createSelectionBetween(r,e,t){return e.pos==t.pos&&sr.valid(t)?new sr(t):null},handleClick:Noe,handleKeyDown:Aoe,handleDOMEvents:{beforeinput:koe}}})}const Aoe=d9({ArrowLeft:Mw("horiz",-1),ArrowRight:Mw("horiz",1),ArrowUp:Mw("vert",-1),ArrowDown:Mw("vert",1)});function Mw(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,i){let a=n.selection,o=e>0?a.$to:a.$from,c=a.empty;if(a instanceof nt){if(!i.endOfTextblock(t)||o.depth==0)return!1;c=!1,o=n.doc.resolve(e>0?o.after():o.before())}let d=sr.findGapCursorFrom(o,e,c);return d?(s&&s(n.tr.setSelection(new sr(d))),!0):!1}}function Noe(r,e,t){if(!r||!r.editable)return!1;let n=r.state.doc.resolve(e);if(!sr.valid(n))return!1;let s=r.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&We.isSelectable(r.state.doc.nodeAt(s.inside))?!1:(r.dispatch(r.state.tr.setSelection(new sr(n))),!0)}function koe(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof sr))return!1;let{$from:t}=r.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;let s=Ee.empty;for(let a=n.length-1;a>=0;a--)s=Ee.from(n[a].createAndFill(null,s));let i=r.state.tr.replace(t.pos,t.pos,new De(s,0,0));return i.setSelection(nt.near(i.doc.resolve(t.pos+1))),r.dispatch(i),!1}function Moe(r){if(!(r.selection instanceof sr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Vn.create(r.doc,[Vs.widget(r.selection.head,e,{key:"gapcursor"})])}var DC=200,ns=function(){};ns.prototype.append=function(e){return e.length?(e=ns.from(e),!this.length&&e||e.length<DC&&this.leafAppend(e)||this.length<DC&&e.leafPrepend(this)||this.appendInner(e)):this};ns.prototype.prepend=function(e){return e.length?ns.from(e).append(this):this};ns.prototype.appendInner=function(e){return new _oe(this,e)};ns.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ns.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ns.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ns.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};ns.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(i,a){return s.push(e(i,a))},t,n),s};ns.from=function(e){return e instanceof ns?e:e&&e.length?new pz(e):ns.empty};var pz=(function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,a,o){for(var c=i;c<a;c++)if(s(this.values[c],o+c)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,a,o){for(var c=i-1;c>=a;c--)if(s(this.values[c],o+c)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=DC)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=DC)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(ns);ns.empty=new pz([]);var _oe=(function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,i,a){var o=this.left.length;if(s<o&&this.left.forEachInner(n,s,Math.min(i,o),a)===!1||i>o&&this.right.forEachInner(n,Math.max(s-o,0),Math.min(this.length,i)-o,a+o)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,i,a){var o=this.left.length;if(s>o&&this.right.forEachInvertedInner(n,s-o,Math.max(i,o)-o,a+o)===!1||i<o&&this.left.forEachInvertedInner(n,Math.min(s,o),i,a)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(n,s):n>=i?this.right.slice(n-i,s-i):this.left.slice(n,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e})(ns);const joe=500;class uo{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,i;t&&(s=this.remapping(n,this.items.length),i=s.maps.length);let a=e.tr,o,c,d=[],h=[];return this.items.forEach((g,y)=>{if(!g.step){s||(s=this.remapping(n,y+1),i=s.maps.length),i--,h.push(g);return}if(s){h.push(new Do(g.map));let b=g.step.map(s.slice(i)),v;b&&a.maybeStep(b).doc&&(v=a.mapping.maps[a.mapping.maps.length-1],d.push(new Do(v,void 0,void 0,d.length+h.length))),i--,v&&s.appendMap(v,i)}else a.maybeStep(g.step);if(g.selection)return o=s?g.selection.map(s.slice(i)):g.selection,c=new uo(this.items.slice(0,n).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:o}}addTransform(e,t,n,s){let i=[],a=this.eventCount,o=this.items,c=!s&&o.length?o.get(o.length-1):null;for(let h=0;h<e.steps.length;h++){let g=e.steps[h].invert(e.docs[h]),y=new Do(e.mapping.maps[h],g,t),b;(b=c&&c.merge(y))&&(y=b,h?i.pop():o=o.slice(0,o.length-1)),i.push(y),t&&(a++,t=void 0),s||(c=y)}let d=a-n.depth;return d>Ooe&&(o=Doe(o,d),a-=d),new uo(o.append(i),a)}remapping(e,t){let n=new Nx;return this.items.forEach((s,i)=>{let a=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,a)},e,t),n}addMaps(e){return this.eventCount==0?this:new uo(this.items.append(e.map(t=>new Do(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-t),i=e.mapping,a=e.steps.length,o=this.eventCount;this.items.forEach(y=>{y.selection&&o--},s);let c=t;this.items.forEach(y=>{let b=i.getMirror(--c);if(b==null)return;a=Math.min(a,b);let v=i.maps[b];if(y.step){let w=e.steps[b].invert(e.docs[b]),E=y.selection&&y.selection.map(i.slice(c+1,b));E&&o++,n.push(new Do(v,w,E))}else n.push(new Do(v))},s);let d=[];for(let y=t;y<a;y++)d.push(new Do(i.maps[y]));let h=this.items.slice(0,s).append(d).append(n),g=new uo(h,o);return g.emptyItemCount()>joe&&(g=g.compress(this.items.length-n.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,s=[],i=0;return this.items.forEach((a,o)=>{if(o>=e)s.push(a),a.selection&&i++;else if(a.step){let c=a.step.map(t.slice(n)),d=c&&c.getMap();if(n--,d&&t.appendMap(d,n),c){let h=a.selection&&a.selection.map(t.slice(n));h&&i++;let g=new Do(d.invert(),c,h),y,b=s.length-1;(y=s.length&&s[b].merge(g))?s[b]=y:s.push(g)}}else a.map&&n--},this.items.length,0),new uo(ns.from(s.reverse()),i)}}uo.empty=new uo(ns.empty,0);function Doe(r,e){let t;return r.forEach((n,s)=>{if(n.selection&&e--==0)return t=s,!1}),r.slice(t)}class Do{constructor(e,t,n,s){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Do(t.getMap().invert(),t,this.selection)}}}class wu{constructor(e,t,n,s,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=s,this.prevComposition=i}}const Ooe=20;function Roe(r,e,t,n){let s=t.getMeta(Uf),i;if(s)return s.historyState;t.getMeta(Ioe)&&(r=new wu(r.done,r.undone,null,0,-1));let a=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(a&&a.getMeta(Uf))return a.getMeta(Uf).redo?new wu(r.done.addTransform(t,void 0,n,vS(e)),r.undone,iP(t.mapping.maps),r.prevTime,r.prevComposition):new wu(r.done,r.undone.addTransform(t,void 0,n,vS(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let o=t.getMeta("composition"),c=r.prevTime==0||!a&&r.prevComposition!=o&&(r.prevTime<(t.time||0)-n.newGroupDelay||!Loe(t,r.prevRanges)),d=a?QN(r.prevRanges,t.mapping):iP(t.mapping.maps);return new wu(r.done.addTransform(t,c?e.selection.getBookmark():void 0,n,vS(e)),uo.empty,d,t.time,o??r.prevComposition)}else return(i=t.getMeta("rebased"))?new wu(r.done.rebased(t,i),r.undone.rebased(t,i),QN(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new wu(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),QN(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function Loe(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((n,s)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function iP(r){let e=[];for(let t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach((n,s,i,a)=>e.push(i,a));return e}function QN(r,e){if(!r)return null;let t=[];for(let n=0;n<r.length;n+=2){let s=e.map(r[n],1),i=e.map(r[n+1],-1);s<=i&&t.push(s,i)}return t}function Poe(r,e,t){let n=vS(e),s=Uf.get(e).spec.config,i=(t?r.undone:r.done).popEvent(e,n);if(!i)return null;let a=i.selection.resolve(i.transform.doc),o=(t?r.done:r.undone).addTransform(i.transform,e.selection.getBookmark(),s,n),c=new wu(t?o:i.remaining,t?i.remaining:o,null,0,-1);return i.transform.setSelection(a).setMeta(Uf,{redo:t,historyState:c})}let ZN=!1,aP=null;function vS(r){let e=r.plugins;if(aP!=e){ZN=!1,aP=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ZN=!0;break}}return ZN}const Uf=new Br("history"),Ioe=new Br("closeHistory");function Boe(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Wn({key:Uf,state:{init(){return new wu(uo.empty,uo.empty,null,0,-1)},apply(e,t,n){return Roe(t,n,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,s=n=="historyUndo"?gz:n=="historyRedo"?yz:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function mz(r,e){return(t,n)=>{let s=Uf.getState(t);if(!s||(r?s.undone:s.done).eventCount==0)return!1;if(n){let i=Poe(s,t,r);i&&n(e?i.scrollIntoView():i)}return!0}}const gz=mz(!1,!0),yz=mz(!0,!0);sn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:r=>r.length,wordCounter:r=>r.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=r=>{const e=(r==null?void 0:r.node)||this.editor.state.doc;if(((r==null?void 0:r.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=r=>{const e=(r==null?void 0:r.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let r=!1;return[new Wn({key:new Br("characterCount"),appendTransaction:(e,t,n)=>{if(r)return;const s=this.options.limit;if(s==null||s===0){r=!0;return}const i=this.storage.characters({node:n.doc});if(i>s){const a=i-s,o=0,c=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const d=n.tr.deleteRange(o,c);return r=!0,d}r=!0},filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const s=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=n||s>n&&i>n&&i<=s)return!0;if(s>n&&i>n&&i>s||!e.getMeta("paste"))return!1;const o=e.selection.$head.pos,c=i-n,d=o-c,h=o;return e.deleteRange(d,h),!(this.storage.characters({node:e.doc})>n)}})]}});var Foe=sn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[woe(this.options)]}});sn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Wn({key:new Br("focus"),props:{decorations:({doc:r,selection:e})=>{const{isEditable:t,isFocused:n}=this.editor,{anchor:s}=e,i=[];if(!t||!n)return Vn.create(r,[]);let a=0;this.options.mode==="deepest"&&r.descendants((c,d)=>{if(c.isText)return;if(!(s>=d&&s<=d+c.nodeSize-1))return!1;a+=1});let o=0;return r.descendants((c,d)=>{if(c.isText||!(s>=d&&s<=d+c.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&a-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";i.push(Vs.node(d,d+c.nodeSize,{class:this.options.className}))}),Vn.create(r,i)}}})]}});var zoe=sn.create({name:"gapCursor",addProseMirrorPlugins(){return[Toe()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=nn(qe(r,"allowGapCursor",t)))!=null?e:null}}});sn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Wn({key:new Br("placeholder"),props:{decorations:({doc:r,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,s=[];if(!t)return null;const i=this.editor.isEmpty;return r.descendants((a,o)=>{const c=n>=o&&n<=o+a.nodeSize,d=!a.isLeaf&&NE(a);if((c||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];i&&h.push(this.options.emptyEditorClass);const g=Vs.node(o,o+a.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:o,hasAnchor:c}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),Vn.create(r,s)}}})]}});sn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:r,options:e}=this;return[new Wn({key:new Br("selection"),props:{decorations(t){return t.selection.empty||r.isFocused||!r.isEditable||N9(t.selection)||r.view.dragging?null:Vn.create(t.doc,[Vs.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function oP({types:r,node:e}){return e&&Array.isArray(r)&&r.includes(e.type)||(e==null?void 0:e.type)===r}var Hoe=sn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var r;const e=new Br(this.name),t=this.options.node||((r=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:r.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(t).includes(s.name));return[new Wn({key:e,appendTransaction:(s,i,a)=>{const{doc:o,tr:c,schema:d}=a,h=e.getState(a),g=o.content.size,y=d.nodes[t];if(h)return c.insert(g,y.create())},state:{init:(s,i)=>{const a=i.tr.doc.lastChild;return!oP({node:a,types:n})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const a=s.doc.lastChild;return!oP({node:a,types:n})}}})]}}),Uoe=sn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>gz(r,e),redo:()=>({state:r,dispatch:e})=>yz(r,e)}},addProseMirrorPlugins(){return[Boe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),$oe=sn.create({name:"starterKit",addExtensions(){var r,e,t,n;const s=[];return this.options.bold!==!1&&s.push(gae.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(dae.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(rz.configure(this.options.bulletList)),this.options.code!==!1&&s.push(bae.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(Sae.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(Cae.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(Foe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(zoe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(Eae.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(Tae.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Uoe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Aae.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(jae.configure(this.options.italic)),this.options.listItem!==!1&&s.push(sz.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(uz.configure((r=this.options)==null?void 0:r.listKeymap)),this.options.link!==!1&&s.push(noe.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(hz.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(moe.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(xoe.configure(this.options.strike)),this.options.text!==!1&&s.push(boe.configure(this.options.text)),this.options.underline!==!1&&s.push(voe.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&s.push(Hoe.configure((n=this.options)==null?void 0:n.trailingNode)),s}}),ek=$oe,Voe=sn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:r=>{const e=r.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:r=>r.textAlign?{style:`text-align: ${r.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:r=>({commands:e})=>this.options.alignments.includes(r)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:r})).some(t=>t):!1,unsetTextAlign:()=>({commands:r})=>this.options.types.map(e=>r.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:r=>({editor:e,commands:t})=>this.options.alignments.includes(r)?e.isActive({textAlign:r})?t.unsetTextAlign():t.setTextAlign(r):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),tk=Voe,qoe=20,xz=(r,e=0)=>{const t=[];return!r.children.length||e>qoe||Array.from(r.children).forEach(n=>{n.tagName==="SPAN"?t.push(n):n.children.length&&t.push(...xz(n,e+1))}),t},Goe=r=>{if(!r.children.length)return;const e=xz(r);e&&e.forEach(t=>{var n,s;const i=t.getAttribute("style"),a=(s=(n=t.parentElement)==null?void 0:n.closest("span"))==null?void 0:s.getAttribute("style");t.setAttribute("style",`${a};${i}`)})},wS=Hd.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:r=>r.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Goe(r),{}):!1}]},renderHTML({HTMLAttributes:r}){return["span",mr(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleTextStyle:r=>({commands:e})=>e.toggleMark(this.name,r),removeEmptyTextStyle:()=>({tr:r})=>{const{selection:e}=r;return r.doc.nodesBetween(e.from,e.to,(t,n)=>{if(t.isTextblock)return!0;t.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||r.removeMark(n,n+t.nodeSize,this.type)}),!0}}}}),Woe=sn.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:r=>{var e;const t=r.getAttribute("style");if(t){const n=t.split(";").map(s=>s.trim()).filter(Boolean);for(let s=n.length-1;s>=0;s-=1){const i=n[s].split(":");if(i.length>=2){const a=i[0].trim().toLowerCase(),o=i.slice(1).join(":").trim();if(a==="background-color")return o.replace(/['"]+/g,"")}}}return(e=r.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.backgroundColor?{style:`background-color: ${r.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:r=>({chain:e})=>e().setMark("textStyle",{backgroundColor:r}).run(),unsetBackgroundColor:()=>({chain:r})=>r().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),SS=sn.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:r=>{var e;const t=r.getAttribute("style");if(t){const n=t.split(";").map(s=>s.trim()).filter(Boolean);for(let s=n.length-1;s>=0;s-=1){const i=n[s].split(":");if(i.length>=2){const a=i[0].trim().toLowerCase(),o=i.slice(1).join(":").trim();if(a==="color")return o.replace(/['"]+/g,"")}}}return(e=r.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.color?{style:`color: ${r.color}`}:{}}}}]},addCommands(){return{setColor:r=>({chain:e})=>e().setMark("textStyle",{color:r}).run(),unsetColor:()=>({chain:r})=>r().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Yoe=sn.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:r=>r.style.fontFamily,renderHTML:r=>r.fontFamily?{style:`font-family: ${r.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:r=>({chain:e})=>e().setMark("textStyle",{fontFamily:r}).run(),unsetFontFamily:()=>({chain:r})=>r().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Xoe=sn.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:r=>r.style.fontSize,renderHTML:r=>r.fontSize?{style:`font-size: ${r.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:r=>({chain:e})=>e().setMark("textStyle",{fontSize:r}).run(),unsetFontSize:()=>({chain:r})=>r().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Koe=sn.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:r=>r.style.lineHeight,renderHTML:r=>r.lineHeight?{style:`line-height: ${r.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:r=>({chain:e})=>e().setMark("textStyle",{lineHeight:r}).run(),unsetLineHeight:()=>({chain:r})=>r().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});sn.create({name:"textStyleKit",addExtensions(){const r=[];return this.options.backgroundColor!==!1&&r.push(Woe.configure(this.options.backgroundColor)),this.options.color!==!1&&r.push(SS.configure(this.options.color)),this.options.fontFamily!==!1&&r.push(Yoe.configure(this.options.fontFamily)),this.options.fontSize!==!1&&r.push(Xoe.configure(this.options.fontSize)),this.options.lineHeight!==!1&&r.push(Koe.configure(this.options.lineHeight)),this.options.textStyle!==!1&&r.push(wS.configure(this.options.textStyle)),r}});function lP({editor:r,className:e=""}){const[t,n]=I.useState(null);if(!r)return null;const s=(c,d)=>{n(h=>h===c?null:c),d==null||d()},i=c=>t===c,a=c=>`material-icons-round text-xl ${c?"text-violet-900":"text-gray-500"}`,o=c=>`px-2 rounded ${c?"bg-white border border-gray-200":""}`;return f.jsxs("div",{className:e,children:[f.jsxs("div",{className:`flex flex-wrap items-center gap-2\r
            m-2 pt-2 pb-2 rounded-md\r
            bg-gray-100 justify-center `,children:[f.jsx("button",{type:"button",className:o(i("bold")),title:"Bold",onClick:()=>s("bold",()=>r.chain().focus().toggleBold().run()),children:f.jsx("span",{className:a(i("bold")),children:"format_bold"})}),f.jsx("button",{type:"button",className:o(i("italic")),title:"Italic",onClick:()=>s("italic",()=>r.chain().focus().toggleItalic().run()),children:f.jsx("span",{className:a(i("italic")),children:"format_italic"})}),f.jsx("button",{type:"button",className:o(i("underline")),title:"Underline",onClick:()=>s("underline",()=>{var c,d;return(d=(c=r.chain().focus()).toggleUnderline)==null?void 0:d.call(c).run()}),children:f.jsx("span",{className:a(i("underline")),children:"format_underlined"})}),f.jsx("button",{type:"button",className:o(i("align-left")),title:"Align Left",onClick:()=>s("align-left",()=>r.chain().focus().setTextAlign("left").run()),children:f.jsx("span",{className:a(i("align-left")),children:"format_align_left"})}),f.jsx("button",{type:"button",className:o(i("align-center")),title:"Align Center",onClick:()=>s("align-center",()=>r.chain().focus().setTextAlign("center").run()),children:f.jsx("span",{className:a(i("align-center")),children:"format_align_center"})}),f.jsx("button",{type:"button",className:o(i("align-right")),title:"Align Right",onClick:()=>s("align-right",()=>r.chain().focus().setTextAlign("right").run()),children:f.jsx("span",{className:a(i("align-right")),children:"format_align_right"})}),f.jsx("button",{type:"button",className:o(i("align-justify")),title:"Justify",onClick:()=>s("align-justify",()=>r.chain().focus().setTextAlign("justify").run()),children:f.jsx("span",{className:a(i("align-justify")),children:"format_align_justify"})}),f.jsx("input",{type:"color",className:"h-8 w-8 mb-1 ",onChange:c=>r.chain().focus().setColor(c.target.value).run(),title:"Text Color"}),f.jsxs("select",{className:"px-2 py-1 mb-1 border rounded text-sm",title:"Font Size",defaultValue:"",onChange:c=>{const d=c.target.value;d===""?r.commands.unsetFontSize():r.commands.setFontSize(d)},children:[f.jsx("option",{value:"",children:"Size"}),f.jsx("option",{value:"12px",children:"12px"}),f.jsx("option",{value:"16px",children:"16px"}),f.jsx("option",{value:"20px",children:"20px"}),f.jsx("option",{value:"28px",children:"28px"})]})]}),f.jsx("div",{className:"flex-1 border border-gray-200 rounded-lg mx-2 mb-2 p-2 cursor-text focus:outline-none focus:ring-0 focus:border-gray-200",onMouseDown:c=>{c.target.closest(".tiptap")||r==null||r.chain().focus().run()},style:{minHeight:"5rem"},children:f.jsx(G9,{editor:r,className:"tiptap min-h-[4rem] focus:outline-none"})})]})}const Joe=sn.create({name:"fontSize",addGlobalAttributes(){return[{types:["textStyle"],attributes:{fontSize:{default:null,parseHTML:r=>{var e;return((e=r.style.fontSize)==null?void 0:e.replace(/['\"]+/g,""))||null},renderHTML:r=>r.fontSize?{style:`font-size: ${r.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:r=>({chain:e})=>e().setMark("textStyle",{fontSize:r}).run(),unsetFontSize:()=>({chain:r})=>r().setMark("textStyle",{fontSize:null}).run()}}});function Qoe({open:r,type:e,value:t,onChange:n,onClose:s,onSave:i,config:a}){const[o,c]=I.useState(!1);if(!r||!e)return null;const d=a[e],h=async v=>{v.preventDefault();try{c(!0),await i()}finally{c(!1)}},g=v=>{const w={name:v.name,value:t[v.name]||"",onChange:n,required:!!v.required,className:"w-full border-2 border-gray-200 rounded-lg p-2",placeholder:v.placeholder||""};return f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-1",children:v.label}),v.type==="select"?f.jsxs("select",{...w,children:[f.jsx("option",{value:"",children:"Select"}),(v.options||[]).map(E=>f.jsx("option",{value:E,children:E},E))]}):v.type==="textarea"?f.jsx("textarea",{...w,rows:v.rows||6,className:w.className+" min-h-32 resize-y"}):f.jsx("input",{type:v.type||"text",...w})]},v.name)},y=(d.fields||[]).filter(v=>(v.group||"single")==="single"),b=(d.fields||[]).filter(v=>v.group==="grid2");return f.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:s}),f.jsxs("div",{className:"relative z-[1001] w-[92vw] max-w-lg rounded-lg bg-white p-5 shadow-xl",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:d.title}),f.jsxs("form",{onSubmit:h,className:"space-y-3",children:[y.map(g),b.length>0&&f.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(g)}),d.helpText&&f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:d.helpText}),f.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[f.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded-lg border border-gray-300",disabled:o,children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg text-white "+(o?"bg-primary/70 cursor-wait":"bg-primary hover:bg-primary-light"),disabled:o,children:o?f.jsxs("span",{className:"inline-flex items-center gap-2",children:[f.jsx(If,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save"})]})]})]})]})}function Zoe({open:r,currentDuration:e,onClose:t,onSave:n}){const[s,i]=I.useState(""),[a,o]=I.useState(e||30),[c,d]=I.useState(!1);if(I.useEffect(()=>{o(e||30),i("")},[e,r]),!r)return null;const h=async()=>{d(!0);try{const g=s?Number(s):Number(a)||30;await n(g),t()}finally{d(!1)}};return f.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:t}),f.jsxs("div",{className:"relative z-[2001] inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsxs("div",{className:"sm:flex sm:items-start",children:[f.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:f.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"schedule"})}),f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Adjust Visit Duration"}),f.jsxs("div",{className:"mt-2",children:[f.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set the default duration for patient visits. This will affect future appointment scheduling."}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"preset-duration",children:"Quick Preset"}),f.jsxs("select",{id:"preset-duration",name:"preset-duration",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md shadow-sm h-10",value:s,onChange:g=>i(g.target.value),children:[f.jsx("option",{value:"",children:"Select..."}),f.jsx("option",{value:"15",children:"15 min"}),f.jsx("option",{value:"30",children:"30 min"}),f.jsx("option",{value:"45",children:"45 min"}),f.jsx("option",{value:"60",children:"60 min"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"duration",children:"Custom Duration"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("input",{id:"duration",name:"duration",type:"number",min:"5",className:"focus:ring-primary focus:border-primary block w-full pl-3 pr-12 sm:text-sm border-gray-300 rounded-md h-10",placeholder:"30",value:a,onChange:g=>o(g.target.value)}),f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:f.jsx("span",{className:"text-gray-500 sm:text-sm",children:"min"})})]})]})]})]})]})]}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-60",onClick:h,disabled:c,children:c?"Saving...":"Save Changes"}),f.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm",onClick:t,children:"Cancel"})]})]})]})}function ele({appointment:r,Index:e,user:t,setUser:n,onAddHistory:s}){var Ht,En,Ge,Ze,Mt;const i=r[e],[a,o]=I.useState(0),[c,d]=I.useState(null),[h,g]=I.useState(!1),[y,b]=I.useState(null),[v,w]=I.useState([]),[E,C]=I.useState(!1),[N,A]=I.useState(!1),[k,M]=I.useState(null),[O,P]=I.useState({}),[F,H]=I.useState(!1),[ee,G]=I.useState({ReportText:"",PatientIssue:r[e].visitPurpose,VisitDurationMinutes:((Ht=r[e])==null?void 0:Ht.visitDurationMinutes)||30}),[J,V]=I.useState(!1),[X,K]=I.useState(i==null?void 0:i.user),q=i==null?void 0:i.id,Z=Wt.useMemo(()=>{var Te;return(((Te=t==null?void 0:t.doctor)==null?void 0:Te.preVisits)||[]).find(Be=>Be.reservationId===q)},[t,q]),he=i==null?void 0:i.patientId,te=Wt.useMemo(()=>{var Te;return(((Te=t==null?void 0:t.doctor)==null?void 0:Te.preVisits)||[]).filter(Be=>Be.patientId===he&&Be.reservationId!==q)},[t,he,q]),pe={drugHistories:{title:"Add New Medication",helpText:"Fill all relevant fields. You can save and add more later.",empty:{drugName:"",dosage:"",route:"",frequency:"",duration:"",prescribingPhysician:""},fields:[{name:"drugName",label:"Medication Name",type:"text",required:!0,placeholder:"e.g., Amoxicillin",group:"single"},{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500 mg",group:"grid2"},{name:"route",label:"Route",type:"select",options:["Oral","IV","IM","Topical"],group:"grid2"},{name:"frequency",label:"Frequency",type:"text",placeholder:"e.g., 3 times/day",group:"grid2"},{name:"duration",label:"Duration",type:"text",placeholder:"e.g., 7 days",group:"grid2"},{name:"prescribingPhysician",label:"Prescribing Physician",type:"text",placeholder:"e.g., Dr. Smith",group:"single"}]},allergies:{title:"Add New Allergy",helpText:"Specify allergen, reaction, and severity.",empty:{allergy:"",reaction:"",severity:""},fields:[{name:"allergy",label:"Allergen",type:"text",required:!0,placeholder:"e.g., Penicillin",group:"single"},{name:"reaction",label:"Reaction",type:"text",placeholder:"e.g., Rash, hives",group:"grid2"},{name:"severity",label:"Severity",type:"select",options:["Mild","Moderate","Severe"],group:"grid2"}]},chronicDiseases:{title:"Add Chronic Disease",helpText:"Enter the disease name and optional notes.",empty:{name:"",description:""},fields:[{name:"name",label:"Disease Name",type:"text",required:!0,placeholder:"e.g., Diabetes Mellitus",group:"single"},{name:"description",label:"Description",type:"text",placeholder:"e.g., Type 2, on Metformin",group:"single"}]},medicalHistories:{title:"Add Medical History",helpText:"Add the event date and description.",empty:{date:"",description:""},fields:[{name:"date",label:"Date",type:"date",required:!0,group:"single"},{name:"description",label:"Description",type:"textarea",required:!0,placeholder:"e.g., Appendectomy",group:"single"}]}},[,W]=I.useState({allergies:Array.isArray((En=i==null?void 0:i.user)==null?void 0:En.allergy)?i.user.allergy:[],chronicDiseases:Array.isArray((Ge=i==null?void 0:i.user)==null?void 0:Ge.chronicDiseases)?i.user.chronicDiseases:[],drugHistories:Array.isArray((Ze=i==null?void 0:i.user)==null?void 0:Ze.drugHistories)?i.user.drugHistories:[],medicalHistories:Array.isArray((Mt=i==null?void 0:i.user)==null?void 0:Mt.medicalHistories)?i.user.medicalHistories:[]}),ne=VN({extensions:[ek,wS,SS,tk.configure({types:["heading","paragraph"]}),Joe],content:ee.ReportText,onUpdate({editor:Te}){const Be=Te.getHTML();G(et=>({...et,ReportText:Be}))}});I.useEffect(()=>{ne&&ne.commands.setContent((Z==null?void 0:Z.reportText)||"")},[ne,Z==null?void 0:Z.reportText]),I.useEffect(()=>{Array.isArray(Z==null?void 0:Z.reportFiles)?w(Z.reportFiles):w([])},[Z==null?void 0:Z.reportFiles]);const me=VN({extensions:[ek,wS,SS,tk.configure({types:["heading","paragraph"]})],content:(Z==null?void 0:Z.reportText)||"",editable:!1});I.useEffect(()=>{me&&me.commands.setContent((Z==null?void 0:Z.reportText)||"")},[me,Z==null?void 0:Z.reportText]);const we=(Te,Be)=>{const et=pe[Te];if(!et)return;const mn=(et.fields||[]).reduce((ar,gn)=>{var an;return ar[gn.name]=Be&&Be[gn.name]!=null?Be[gn.name]:((an=et.empty)==null?void 0:an[gn.name])??"",ar},{});(Be==null?void 0:Be.id)!=null&&(mn.id=Be.id),M(Te),P(mn),A(!0)},Ne=()=>{A(!1),M(null),P({})},je=Te=>{const{name:Be,value:et}=Te.target;P(mn=>({...mn,[Be]:et}))},Me=async()=>{if(!k)return;W(Be=>({...Be,[k]:[...Array.isArray(Be[k])?Be[k]:[],{...O}]}));const Te={patientId:i==null?void 0:i.patientId,[k]:[O]};console.log(Te);try{await Ue.DoctorEditPatientInfo(Te),tt.success("Medical history saved successfully!"),K(Be=>{if(!Be)return Be;const et={...Be};if(Array.isArray(et[k])){const mn=et[k].findIndex(ar=>ar.id===O.id&&O.id!=null);et[k]=mn>=0?[...et[k].slice(0,mn),{...O},...et[k].slice(mn+1)]:[...et[k],{...O}]}return et})}catch(Be){tt.error(Be.message||"Failed to save medical history")}finally{o(Be=>Be+1),A(!1)}},He=()=>c!==0?"0px":F?"75vh":Z?Array.isArray(v)&&v.length>0?"45vh":"39vh":Z?"40vh":Array.isArray(v)&&v.length>0?"35vh":"30vh";function Ye({content:Te}){const Be=VN({extensions:[ek,wS,SS,tk.configure({types:["heading","paragraph"]})],content:Te||"",editable:!1});return f.jsx(G9,{editor:Be})}function Qe({visits:Te=[],maxHeight:Be="40vh",onFileClick:et,formatDate:mn,className:ar=""}){const gn=an=>{et&&et(an)};return f.jsx("div",{className:`overflow-y-auto pr-2 ${ar}`,style:{maxHeight:Be},children:Te.map((an,gi)=>f.jsx("div",{className:"flex flex-row",children:f.jsxs("div",{className:"flex-col w-full px-4 pt-4",children:[f.jsxs("div",{className:"flex-row flex items-center w-full justify-between",children:[f.jsx("p",{className:"text-sm font-medium ml-2",children:mn(an.date)}),f.jsx("div",{className:"w-[55cqw] h-[2px] bg-gray-300/40"})]}),f.jsxs("div",{className:"flex-row flex w-full justify-between items-start mt-2 gap-4",children:[f.jsx("div",{className:"text-sm ml-2 flex-1",children:f.jsx(Ye,{content:an.reportText})}),f.jsx("div",{className:"flex-col flex overflow-y-auto h-[100px] w-[20cqw] border-l-2 border-gray-400 items-center ",children:an.reportFiles.map((Tn,Nr)=>f.jsxs("button",{type:"button",className:"justify-center items-center flex-col flex",onClick:()=>gn(Tn),children:[f.jsx("img",{className:"object-contain w-10",src:IS[Tn.split(".").pop()]||IS.default,alt:""}),f.jsx("span",{className:"text-[11px] w-15",children:Tn.split("/").pop()})]},Nr))})]})]})},gi))})}return f.jsx(f.Fragment,{children:h===!0?f.jsx(nee,{close:g,url:y}):f.jsxs("div",{className:"bg-white h-full rounded-lg shadow p-6 flex flex-col",children:[f.jsxs("div",{className:"flex flex-row",children:[f.jsx("img",{src:i.user.imageUrl!=null?i.user.imageUrl:i.user.gender==="male"?Lc:qf,className:"h-22 w-22 rounded-full object-cover",alt:""}),f.jsxs("div",{className:"flex-col",children:[f.jsxs("p",{className:"flex",children:[f.jsx("span",{className:"font-semibold text-md text-gray-600 ",children:"Name: "}),f.jsx("span",{className:"ml-1 text-md text-gray-500",children:i.user.fullName})]}),f.jsxs("p",{className:"flex",children:[f.jsx("span",{className:"font-semibold text-md text-gray-600 ",children:"Gender: "}),f.jsx("span",{className:"ml-1 text-md text-gray-500",children:i.user.gender})]}),f.jsxs("p",{className:"flex",children:[f.jsx("span",{className:"font-semibold text-md text-gray-600 ",children:"Age: "}),f.jsx("span",{className:"ml-1 text-md text-gray-500",children:i.user.age})]}),f.jsxs("p",{className:"flex",children:[f.jsx("span",{className:"font-semibold text-md text-gray-6ZZzئءٍ00 ",children:"DOB: "}),f.jsx("span",{className:"ml-1 text-md text-gray-500",children:i.user.dateOfBirth})]})]})]}),f.jsxs("button",{type:"button",className:"flex flex-row  mt-5 bg-amber-300 rounded-t-lg py-2",onClick:()=>d(c!==0?0:null),children:[f.jsx("div",{className:`${c===0?"rotate-90":""} duration-300 transition-all ease-in-out`,children:f.jsx(gy,{})}),"VISIT REPORT"]}),f.jsxs("div",{className:`flex flex-col rounded-b-xl duration-300 transition-all ease-in-out @container  
                            ${c!==0?"overflow-hidden":""}`,style:{height:He()},children:[!Z&&f.jsxs("div",{className:"flex flex-col mt-4 gap-3",children:[f.jsx("div",{className:"text-sm ml-2",children:f.jsx(lP,{editor:ne,className:""})}),f.jsx(_6,{fileList:v,setFileList:w}),f.jsx("button",{type:"button",className:"self-end h-10 bg-blue-500 text-white rounded-lg px-4 hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:E,onClick:async()=>{C(!0);try{const Te=new FormData;Te.append("ReportText",ee.ReportText),Te.append("ReservationId",q),v.forEach(et=>Te.append("file",et)),await Ue.uploadDocument(Te,r[e].patientId);const Be=await Ue.GetCurrentUser();n(Be),tt.success("Report updated successfully!")}catch(Te){tt.error(Te.message||"Failed to update report")}finally{C(!1)}},children:f.jsxs("div",{className:"flex-row flex items-center gap-1",children:[E?f.jsx(If,{className:"w-4 h-4 animate-spin"}):f.jsx(T6,{className:"w-4 h-4"}),E?"Uploading...":"Upload"]})}),Array.isArray(te)&&te?f.jsx("button",{type:"button",className:"text-xs text-gray-600 border-b border-gray-200 px-3 py-1 transition-colors mt-5",onClick:()=>H(Te=>!Te),children:F?"Hide history":"Show history"}):null]}),Z?f.jsx("div",{className:"flex flex-row mt-6",children:f.jsxs("div",{className:"flex-col w-full px-4 pt-2",children:[f.jsxs("div",{className:"flex-row flex items-center w-full justify-between",children:[f.jsx("p",{className:"text-sm font-medium ml-2",children:nk(Z.date)}),f.jsx("div",{className:"w-[55cqw] h-[2px] bg-gray-300/40"})]}),f.jsxs("div",{className:"flex flex-col w-full mt-2 gap-3",children:[f.jsx("div",{className:"text-sm ml-2",children:f.jsx(lP,{editor:ne,className:""})}),f.jsx("p",{className:"text-[11px] text-gray-500 mt-1 ",children:"Selected files will replace existing files for this reservation."}),f.jsx(_6,{fileList:v,setFileList:w}),f.jsx("button",{type:"button",className:"self-end h-10 bg-blue-500 text-white rounded-lg px-4 hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:E,onClick:async()=>{C(!0);try{const Te=new FormData;Te.append("ReportText",ee.ReportText),Te.append("ReservationId",q),v.forEach(et=>Te.append("file",et)),await Ue.uploadDocument(Te,r[e].patientId);const Be=await Ue.GetCurrentUser();n(Be),tt.success("Report updated successfully!")}catch(Te){tt.error(Te.message||"Failed to update report")}finally{C(!1)}},children:f.jsxs("div",{className:"flex-row flex items-center gap-1",children:[E?f.jsx(If,{className:"w-4 h-4 animate-spin"}):f.jsx(T6,{className:"w-4 h-4"}),E?"Saving...":"Save Changes"]})}),Array.isArray(te)&&te?f.jsx("button",{type:"button",className:"text-xs text-gray-600 border-b border-gray-200 px-3 py-1 transition-colors mt-5",onClick:()=>H(Te=>!Te),children:F?"Hide history":"Show history"}):null]}),F?f.jsx(Qe,{visits:(Array.isArray(te)?te:[]).slice().reverse(),maxHeight:"30vh",formatDate:nk,onFileClick:Te=>{b(Te.toString()),g(!0)}}):null]})}):F?f.jsx(Qe,{visits:te.slice().reverse(),maxHeight:"40vh",formatDate:nk,onFileClick:Te=>{b(Te.toString()),g(!0)}}):null]}),f.jsxs("div",{className:"flex flex-row items-center justify-between mt-5 bg-amber-300 rounded-t-lg py-2 pr-2",children:[f.jsxs("button",{type:"button",className:"flex flex-row flex-1",onClick:()=>d(c!==1?1:null),children:[f.jsx("div",{className:`${c===1?"rotate-90":""} duration-300 transition-all ease-in-out`,children:f.jsx(gy,{})}),"MEDICAL HISTORY"]}),s&&c===1&&f.jsxs("button",{type:"button",className:"bg-amber-500 text-white hover:bg-amber-600 px-2 py-1 rounded text-xs flex items-center gap-1 transition-colors",onClick:Te=>{Te.stopPropagation(),s(i)},children:[f.jsx(R7,{size:14})," Add"]})]}),f.jsx("div",{className:`flex flex-col rounded-b-xl duration-300 transition-all ease-in-out overflow-hidden @container ${c===1?"max-h-200":"max-h-0"}`,children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:((X==null?void 0:X.medicalHistories)||[]).map((Te,Be)=>f.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>we("medicalHistories",Te),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Te.date}),f.jsx("td",{className:"px-6 py-4",children:Te.description})]},Te.id??Be))})]})})}),f.jsxs("button",{type:"button",className:"flex flex-row  mt-5 bg-amber-300 rounded-t-lg py-2",onClick:()=>d(c!==2?2:null),children:[f.jsx("div",{className:`${c===2?"rotate-90":""} duration-300 transition-all ease-in-out`,children:f.jsx(gy,{})}),"CHRONIC DISEASE"]}),f.jsx("div",{className:`flex flex-col rounded-b-xl duration-300 transition-all ease-in-out overflow-hidden @container ${c===2?"max-h-200":"max-h-0"}`,children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:((X==null?void 0:X.chronicDiseases)||[]).map((Te,Be)=>f.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>we("chronicDiseases",Te),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Te.name}),f.jsx("td",{className:"px-6 py-4",children:Te.description})]},Te.id??Be))})]})})}),f.jsxs("button",{type:"button",className:"flex flex-row  mt-5 bg-amber-300 rounded-t-lg py-2",onClick:()=>d(c!==3?3:null),children:[f.jsx("div",{className:`${c===3?"rotate-90":""} duration-300 transition-all ease-in-out`,children:f.jsx(gy,{})}),"Allergies"]}),f.jsx("div",{className:`flex flex-col rounded-b-xl duration-300 transition-all ease-in-out overflow-hidden @container ${c===3?"max-h-200":"max-h-0"}`,children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Allergies"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:((X==null?void 0:X.allergies)||[]).map((Te,Be)=>f.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>we("allergies",Te),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Te.allergy}),f.jsx("td",{className:"px-6 py-4",children:Te.description})]},Te.id??Be))})]})})}),f.jsxs("button",{type:"button",className:"flex flex-row  mt-5 bg-amber-300 rounded-t-lg py-2",onClick:()=>d(c!==4?4:null),children:[f.jsx("div",{className:`${c===4?"rotate-90":""} duration-300 transition-all ease-in-out`,children:f.jsx(gy,{})}),"MEDICATIONS"]}),f.jsx("div",{className:`flex flex-col rounded-b-xl duration-300 transition-all ease-in-out overflow-hidden @container ${c===4?"max-h-200":"max-h-0"}`,children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsx("tr",{children:f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MEDICATIONS"})})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:((X==null?void 0:X.drugHistories)||[]).map(Te=>f.jsx("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>we("drugHistories",Te),children:f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Te.drugName})},Te.id??`${Te.drugName}-${Math.random()}`))})]})})}),f.jsx(Qoe,{open:N,type:k,value:O,onChange:je,onClose:Ne,onSave:Me,config:pe}),f.jsx(Zoe,{open:J,currentDuration:ee.VisitDurationMinutes,onClose:()=>V(!1),onSave:async Te=>{G(Be=>({...Be,VisitDurationMinutes:Te}))}})]})})}function nk(r){const e=new Date(r),t=e.toLocaleDateString("en-US",{weekday:"long"}),n=e.toLocaleDateString("en-US",{month:"short"}),s=e.getDate();return`${t}, ${n} ${s}${(a=>{const o=["th","st","nd","rd"],c=a%100;return o[(c-20)%10]||o[c]||o[0]})(s)}`}var qp={},rk,cP;function bz(){return cP||(cP=1,rk={L:1,M:0,Q:3,H:2}),rk}var sk,uP;function vz(){return uP||(uP=1,sk={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),sk}var ik,dP;function tle(){if(dP)return ik;dP=1;var r=vz();function e(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var n=0;n<this.data.length;n++)t.put(this.data.charCodeAt(n),8)}},ik=e,ik}var ak,hP;function nle(){if(hP)return ak;hP=1;var r=bz();function e(t,n){this.totalCount=t,this.dataCount=n}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,n){var s=e.getRsBlockTable(t,n);if(s==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+n);for(var i=s.length/3,a=new Array,o=0;o<i;o++)for(var c=s[o*3+0],d=s[o*3+1],h=s[o*3+2],g=0;g<c;g++)a.push(new e(d,h));return a},e.getRsBlockTable=function(t,n){switch(n){case r.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},ak=e,ak}var ok,fP;function rle(){if(fP)return ok;fP=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ok=r,ok}var lk,pP;function wz(){if(pP)return lk;pP=1;for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)r.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)r.EXP_TABLE[e]=r.EXP_TABLE[e-4]^r.EXP_TABLE[e-5]^r.EXP_TABLE[e-6]^r.EXP_TABLE[e-8];for(var e=0;e<255;e++)r.LOG_TABLE[r.EXP_TABLE[e]]=e;return lk=r,lk}var ck,mP;function Sz(){if(mP)return ck;mP=1;var r=wz();function e(t,n){if(t.length==null)throw new Error(t.length+"/"+n);for(var s=0;s<t.length&&t[s]==0;)s++;this.num=new Array(t.length-s+n);for(var i=0;i<t.length-s;i++)this.num[i]=t[i+s]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var n=new Array(this.getLength()+t.getLength()-1),s=0;s<this.getLength();s++)for(var i=0;i<t.getLength();i++)n[s+i]^=r.gexp(r.glog(this.get(s))+r.glog(t.get(i)));return new e(n,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var n=r.glog(this.get(0))-r.glog(t.get(0)),s=new Array(this.getLength()),i=0;i<this.getLength();i++)s[i]=this.get(i);for(var i=0;i<t.getLength();i++)s[i]^=r.gexp(r.glog(t.get(i))+n);return new e(s,0).mod(t)}},ck=e,ck}var uk,gP;function sle(){if(gP)return uk;gP=1;var r=vz(),e=Sz(),t=wz(),n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},s={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var a=i<<10;s.getBCHDigit(a)-s.getBCHDigit(s.G15)>=0;)a^=s.G15<<s.getBCHDigit(a)-s.getBCHDigit(s.G15);return(i<<10|a)^s.G15_MASK},getBCHTypeNumber:function(i){for(var a=i<<12;s.getBCHDigit(a)-s.getBCHDigit(s.G18)>=0;)a^=s.G18<<s.getBCHDigit(a)-s.getBCHDigit(s.G18);return i<<12|a},getBCHDigit:function(i){for(var a=0;i!=0;)a++,i>>>=1;return a},getPatternPosition:function(i){return s.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,a,o){switch(i){case n.PATTERN000:return(a+o)%2==0;case n.PATTERN001:return a%2==0;case n.PATTERN010:return o%3==0;case n.PATTERN011:return(a+o)%3==0;case n.PATTERN100:return(Math.floor(a/2)+Math.floor(o/3))%2==0;case n.PATTERN101:return a*o%2+a*o%3==0;case n.PATTERN110:return(a*o%2+a*o%3)%2==0;case n.PATTERN111:return(a*o%3+(a+o)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var a=new e([1],0),o=0;o<i;o++)a=a.multiply(new e([1,t.gexp(o)],0));return a},getLengthInBits:function(i,a){if(1<=a&&a<10)switch(i){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(a<27)switch(i){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(a<41)switch(i){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+a)},getLostPoint:function(i){for(var a=i.getModuleCount(),o=0,c=0;c<a;c++)for(var d=0;d<a;d++){for(var h=0,g=i.isDark(c,d),y=-1;y<=1;y++)if(!(c+y<0||a<=c+y))for(var b=-1;b<=1;b++)d+b<0||a<=d+b||y==0&&b==0||g==i.isDark(c+y,d+b)&&h++;h>5&&(o+=3+h-5)}for(var c=0;c<a-1;c++)for(var d=0;d<a-1;d++){var v=0;i.isDark(c,d)&&v++,i.isDark(c+1,d)&&v++,i.isDark(c,d+1)&&v++,i.isDark(c+1,d+1)&&v++,(v==0||v==4)&&(o+=3)}for(var c=0;c<a;c++)for(var d=0;d<a-6;d++)i.isDark(c,d)&&!i.isDark(c,d+1)&&i.isDark(c,d+2)&&i.isDark(c,d+3)&&i.isDark(c,d+4)&&!i.isDark(c,d+5)&&i.isDark(c,d+6)&&(o+=40);for(var d=0;d<a;d++)for(var c=0;c<a-6;c++)i.isDark(c,d)&&!i.isDark(c+1,d)&&i.isDark(c+2,d)&&i.isDark(c+3,d)&&i.isDark(c+4,d)&&!i.isDark(c+5,d)&&i.isDark(c+6,d)&&(o+=40);for(var w=0,d=0;d<a;d++)for(var c=0;c<a;c++)i.isDark(c,d)&&w++;var E=Math.abs(100*w/a/a-50)/5;return o+=E*10,o}};return uk=s,uk}var dk,yP;function ile(){if(yP)return dk;yP=1;var r=tle(),e=nle(),t=rle(),n=sle(),s=Sz();function i(o,c){this.typeNumber=o,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var a=i.prototype;return a.addData=function(o){var c=new r(o);this.dataList.push(c),this.dataCache=null},a.isDark=function(o,c){if(o<0||this.moduleCount<=o||c<0||this.moduleCount<=c)throw new Error(o+","+c);return this.modules[o][c]},a.getModuleCount=function(){return this.moduleCount},a.make=function(){if(this.typeNumber<1){var o=1;for(o=1;o<40;o++){for(var c=e.getRSBlocks(o,this.errorCorrectLevel),d=new t,h=0,g=0;g<c.length;g++)h+=c[g].dataCount;for(var g=0;g<this.dataList.length;g++){var y=this.dataList[g];d.put(y.mode,4),d.put(y.getLength(),n.getLengthInBits(y.mode,o)),y.write(d)}if(d.getLengthInBits()<=h*8)break}this.typeNumber=o}this.makeImpl(!1,this.getBestMaskPattern())},a.makeImpl=function(o,c){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var h=0;h<this.moduleCount;h++)this.modules[d][h]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(o,c),this.typeNumber>=7&&this.setupTypeNumber(o),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},a.setupPositionProbePattern=function(o,c){for(var d=-1;d<=7;d++)if(!(o+d<=-1||this.moduleCount<=o+d))for(var h=-1;h<=7;h++)c+h<=-1||this.moduleCount<=c+h||(0<=d&&d<=6&&(h==0||h==6)||0<=h&&h<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=h&&h<=4?this.modules[o+d][c+h]=!0:this.modules[o+d][c+h]=!1)},a.getBestMaskPattern=function(){for(var o=0,c=0,d=0;d<8;d++){this.makeImpl(!0,d);var h=n.getLostPoint(this);(d==0||o>h)&&(o=h,c=d)}return c},a.createMovieClip=function(o,c,d){var h=o.createEmptyMovieClip(c,d),g=1;this.make();for(var y=0;y<this.modules.length;y++)for(var b=y*g,v=0;v<this.modules[y].length;v++){var w=v*g,E=this.modules[y][v];E&&(h.beginFill(0,100),h.moveTo(w,b),h.lineTo(w+g,b),h.lineTo(w+g,b+g),h.lineTo(w,b+g),h.endFill())}return h},a.setupTimingPattern=function(){for(var o=8;o<this.moduleCount-8;o++)this.modules[o][6]==null&&(this.modules[o][6]=o%2==0);for(var c=8;c<this.moduleCount-8;c++)this.modules[6][c]==null&&(this.modules[6][c]=c%2==0)},a.setupPositionAdjustPattern=function(){for(var o=n.getPatternPosition(this.typeNumber),c=0;c<o.length;c++)for(var d=0;d<o.length;d++){var h=o[c],g=o[d];if(this.modules[h][g]==null)for(var y=-2;y<=2;y++)for(var b=-2;b<=2;b++)y==-2||y==2||b==-2||b==2||y==0&&b==0?this.modules[h+y][g+b]=!0:this.modules[h+y][g+b]=!1}},a.setupTypeNumber=function(o){for(var c=n.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var h=!o&&(c>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=h}for(var d=0;d<18;d++){var h=!o&&(c>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=h}},a.setupTypeInfo=function(o,c){for(var d=this.errorCorrectLevel<<3|c,h=n.getBCHTypeInfo(d),g=0;g<15;g++){var y=!o&&(h>>g&1)==1;g<6?this.modules[g][8]=y:g<8?this.modules[g+1][8]=y:this.modules[this.moduleCount-15+g][8]=y}for(var g=0;g<15;g++){var y=!o&&(h>>g&1)==1;g<8?this.modules[8][this.moduleCount-g-1]=y:g<9?this.modules[8][15-g-1+1]=y:this.modules[8][15-g-1]=y}this.modules[this.moduleCount-8][8]=!o},a.mapData=function(o,c){for(var d=-1,h=this.moduleCount-1,g=7,y=0,b=this.moduleCount-1;b>0;b-=2)for(b==6&&b--;;){for(var v=0;v<2;v++)if(this.modules[h][b-v]==null){var w=!1;y<o.length&&(w=(o[y]>>>g&1)==1);var E=n.getMask(c,h,b-v);E&&(w=!w),this.modules[h][b-v]=w,g--,g==-1&&(y++,g=7)}if(h+=d,h<0||this.moduleCount<=h){h-=d,d=-d;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(o,c,d){for(var h=e.getRSBlocks(o,c),g=new t,y=0;y<d.length;y++){var b=d[y];g.put(b.mode,4),g.put(b.getLength(),n.getLengthInBits(b.mode,o)),b.write(g)}for(var v=0,y=0;y<h.length;y++)v+=h[y].dataCount;if(g.getLengthInBits()>v*8)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+v*8+")");for(g.getLengthInBits()+4<=v*8&&g.put(0,4);g.getLengthInBits()%8!=0;)g.putBit(!1);for(;!(g.getLengthInBits()>=v*8||(g.put(i.PAD0,8),g.getLengthInBits()>=v*8));)g.put(i.PAD1,8);return i.createBytes(g,h)},i.createBytes=function(o,c){for(var d=0,h=0,g=0,y=new Array(c.length),b=new Array(c.length),v=0;v<c.length;v++){var w=c[v].dataCount,E=c[v].totalCount-w;h=Math.max(h,w),g=Math.max(g,E),y[v]=new Array(w);for(var C=0;C<y[v].length;C++)y[v][C]=255&o.buffer[C+d];d+=w;var N=n.getErrorCorrectPolynomial(E),A=new s(y[v],N.getLength()-1),k=A.mod(N);b[v]=new Array(N.getLength()-1);for(var C=0;C<b[v].length;C++){var M=C+k.getLength()-b[v].length;b[v][C]=M>=0?k.get(M):0}}for(var O=0,C=0;C<c.length;C++)O+=c[C].totalCount;for(var P=new Array(O),F=0,C=0;C<h;C++)for(var v=0;v<c.length;v++)C<y[v].length&&(P[F++]=y[v][C]);for(var C=0;C<g;C++)for(var v=0;v<c.length;v++)C<b[v].length&&(P[F++]=b[v][C]);return P},dk=i,dk}var _w={},xP;function ale(){if(xP)return _w;xP=1,Object.defineProperty(_w,"__esModule",{value:!0});var r=Object.assign||function(d){for(var h=1;h<arguments.length;h++){var g=arguments[h];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(d[y]=g[y])}return d},e=L7(),t=i(e),n=tp(),s=i(n);function i(d){return d&&d.__esModule?d:{default:d}}function a(d,h){var g={};for(var y in d)h.indexOf(y)>=0||Object.prototype.hasOwnProperty.call(d,y)&&(g[y]=d[y]);return g}var o={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},c=(0,n.forwardRef)(function(d,h){var g=d.bgColor,y=d.bgD,b=d.fgD,v=d.fgColor,w=d.size,E=d.title,C=d.viewBoxSize,N=d.xmlns,A=N===void 0?"http://www.w3.org/2000/svg":N,k=a(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",r({},k,{height:w,ref:h,viewBox:"0 0 "+C+" "+C,width:w,xmlns:A}),E?s.default.createElement("title",null,E):null,s.default.createElement("path",{d:y,fill:g}),s.default.createElement("path",{d:b,fill:v}))});return c.displayName="QRCodeSvg",c.propTypes=o,_w.default=c,_w}var bP;function ole(){if(bP)return qp;bP=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.QRCode=void 0;var r=Object.assign||function(w){for(var E=1;E<arguments.length;E++){var C=arguments[E];for(var N in C)Object.prototype.hasOwnProperty.call(C,N)&&(w[N]=C[N])}return w},e=L7(),t=g(e),n=bz(),s=g(n),i=ile(),a=g(i),o=tp(),c=g(o),d=ale(),h=g(d);function g(w){return w&&w.__esModule?w:{default:w}}function y(w,E){var C={};for(var N in w)E.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(w,N)&&(C[N]=w[N]);return C}var b={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},v=(0,o.forwardRef)(function(w,E){var C=w.bgColor,N=C===void 0?"#FFFFFF":C,A=w.fgColor,k=A===void 0?"#000000":A,M=w.level,O=M===void 0?"L":M,P=w.size,F=P===void 0?256:P,H=w.value,ee=y(w,["bgColor","fgColor","level","size","value"]),G=new a.default(-1,s.default[O]);G.addData(H),G.make();var J=G.modules;return c.default.createElement(h.default,r({},ee,{bgColor:N,bgD:J.map(function(V,X){return V.map(function(K,q){return K?"":"M "+q+" "+X+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:k,fgD:J.map(function(V,X){return V.map(function(K,q){return K?"M "+q+" "+X+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:E,size:F,viewBoxSize:J.length}))});return qp.QRCode=v,v.displayName="QRCode",v.propTypes=b,qp.default=v,qp}var lle=ole();const cle=Qf(lle);async function ule(){if("serviceWorker"in navigator&&"PushManager"in window){const r=await navigator.serviceWorker.ready;if(await window.Notification.requestPermission()!=="granted")return;const t=await r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:WW});await fetch("http://localhost:8080/api/subscribe",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")||""}`,"Content-Type":"application/json"},body:JSON.stringify(t)})}}function vP(){const r=Wt.useRef(),e=JSON.parse(localStorage.getItem("userData")),t=60,n=e.roles[0].name,s=dl(),[i,a]=I.useState(()=>{const g=localStorage.getItem("settings.activeTab");return g!==null?Number(g):0}),o=g=>{a(g),localStorage.setItem("settings.activeTab",String(g))},[c,d]=I.useState(!0),h=yo();return I.useEffect(()=>{if(!e){h("/login");return}const y=new URLSearchParams(s.search).get("tab");if(y!==null){const b=Number(y);Number.isNaN(b)||o(b)}else{const b=localStorage.getItem("settings.activeTab");b!==null&&a(Number(b))}d(!1)},[s.search]),f.jsxs(f.Fragment,{children:[f.jsx(TB,{position:"top-right"}),f.jsxs("div",{className:"flex flex-row  justify-center space-x-10 @container",children:[f.jsxs("div",{className:"flex-col bg-white border-gray-200  rounded-lg pt-5 @max-[800px]:hidden ",children:[f.jsxs(jw,{setIndex:o,Index:0,currentIndex:i,children:[f.jsx("svg",{height:"24px",width:"24px",fill:"#000000",viewBox:"0 -960 960 960",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"})}),f.jsx("p",{children:"Profile Settings"})]}),f.jsxs(jw,{setIndex:o,Index:1,currentIndex:i,children:[f.jsx("svg",{height:"24px",width:"24px",fill:"#000000",viewBox:"0 -960 960 960",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"})}),f.jsx("p",{children:"Password Settings"})]}),n==="ROLE_PATIENT"&&f.jsxs(jw,{setIndex:o,Index:4,currentIndex:i,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#000000",children:f.jsx("path",{d:"M600-80v-80h160v-400H200v160h-80v-320q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H600ZM320 0l-56-56 103-104H40v-80h327L264-344l56-56 200 200L320 0ZM200-640h560v-80H200v80Zm0 0v-80 80Z"})}),f.jsx("p",{children:"Reservations"})]}),f.jsxs(jw,{setIndex:o,Index:5,currentIndex:i,children:[f.jsx("svg",{height:"24px",width:"24px",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",children:f.jsx("path",{d:"M280-240h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80Zm240-140h240v-60H520v60Zm0 120h160v-60H520v60ZM160-80q-33 0-56.5-23.5T80-160v-440q0-33 23.5-56.5T160-680h200v-120q0-33 23.5-56.5T440-880h80q33 0 56.5 23.5T600-800v120h200q33 0 56.5 23.5T880-600v440q0 33-23.5 56.5T800-80H160Zm0-80h640v-440H600q0 33-23.5 56.5T520-520h-80q-33 0-56.5-23.5T360-600H160v440Zm280-440h80v-200h-80v200Zm40 220Z"})}),f.jsx("p",{children:"Medical History"})]})]}),f.jsx("div",{className:`flex-col w-[${t.toString()}vw] bg-white border-gray-200 border-1 rounded-lg p-10 ${n==="ROLE_DOCTOR"&&i===2?"w-[80vw]":""}`,children:i===0?f.jsx(dle,{user:e,fileInputRef:r,screenSize:t}):i===1?f.jsx(gle,{user:e,screenSize:t}):i===4?f.jsx(ple,{user:e}):i===5?f.jsx(fle,{user:e}):f.jsx("div",{className:"text-red-500",children:"Error: Index does not exist"})})]})]})}function jw({children:r,setIndex:e,Index:t,currentIndex:n}){const s=t===n;return f.jsx("div",{className:"flex flex-row items-center gap-3",children:f.jsx("button",{onClick:()=>{e(t)},className:`inline-flex w-full px-4 py-2 text-gray-800 hover:bg-blue-100 cursor-pointer ${s?"bg-gradient-custom":""}`,children:r})})}function dle({user:r,fileInputRef:e,screenSize:t}){let[n,s]=I.useState(null);const[i,a]=I.useState(!1),[o,c]=I.useState(null),[d,h]=I.useState(!1),[g,y]=I.useState(r==null?void 0:r.imageUrl),[b,v]=I.useState({username:r.username,email:r.email,fullName:r.fullName,gender:r.gender,bloodType:r.bloodType||"",dateOfBirth:r.dateOfBirth,address:r.address,cityId:r.city.cityId,age:r.age,nationalId:r.nationalId,phoneNumber:r.phoneNumber,emergencyContactName:r.emergencyContactName||"",emergencyContactPhone:r.emergencyContactPhone||"",emergencyContactRelation:r.emergencyContactRelation||""}),w=k=>{const{name:M,value:O}=k.target;v({...b,[M]:O})},E=()=>{e.current.click()},C=async k=>{const M=k.target.files[0],O=new FormData;O.append("file",M),h(!0),await Ue.uploadProfilePicture(O),await Ue.GetCurrentUser(),r=JSON.parse(localStorage.getItem("userData")),h(!1),y(r==null?void 0:r.imageUrl)},[N,A]=I.useState(!1);return f.jsxs("form",{onSubmit:async k=>{k.preventDefault(),c(null),a(!0);try{const M=await Ue.UpdateUser(b);s(M),tt.success("Profile updated successfully!")}catch(M){c(M.message),tt.error(M.message||"Failed to update profile"),a(!1)}finally{await Ue.GetCurrentUser(),r=JSON.parse(localStorage.getItem("userData")),v({username:r.username,email:r.email,fullName:r.fullName,gender:r.gender,bloodType:r.bloodType||"",dateOfBirth:r.dateOfBirth,address:r.address,cityId:r.city.cityId,age:r.age,nationalId:r.nationalId,phoneNumber:r.phoneNumber,emergencyContactName:r.emergencyContactName||"",emergencyContactPhone:r.emergencyContactPhone||"",emergencyContactRelation:r.emergencyContactRelation||""}),a(!1)}},children:[f.jsx("div",{className:"flex-row",children:f.jsxs("div",{className:"flex flex-row",children:[f.jsxs("div",{className:"relative overflow-hidden rounded-full mb-10",children:[d&&f.jsx("div",{className:"absolute rounded-full w-50 h-50 bg-blue-500/30 ",children:f.jsx("img",{src:"src/assets/Spinner@1x-1.0s-200px-200px.svg",alt:"loading",className:" w-[130px] h-[130px] ml-9 mt-8 "})}),f.jsx("img",{src:g??(r.gender==="male"?Lc:qf),alt:"user",className:"w-50 h-50 rounded-full object-cover"}),f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"file",ref:e,style:{display:"none"},onChange:C}),f.jsx("button",{onClick:E,type:"button",className:"absolute rounded-full w-50 h-50 bg-black/20 flex items-center justify-center -bottom-10 hover:bottom-0 opacity-0 hover:opacity-100 transition-all duration-100 ",children:f.jsxs("div",{className:"flex flex-row justify-center space-x-3 text-white",children:[f.jsx(R7,{className:"w-8 h-8"})," ",f.jsx("p",{className:"leading-8",children:"Select image"})]})})]})]}),f.jsxs("div",{className:"flex flex-col space-y-4",children:[f.jsxs("div",{className:"flex flex-row  justify-center self-end ",children:[f.jsxs("div",{className:"has-tooltip mr-2",children:[f.jsx("span",{className:"tooltip rounded shadow-lg p-2 bg-blue-900 text-white",children:"Turn Medical Profile ON allows people to view your profile publicly "}),"Notification"]}),f.jsxs("div",{children:[f.jsx(Cz,{checked:N,onChange:()=>{const k=!N;A(k),k&&ule()}}),f.jsx("span",{className:"ml-2",children:N?"On":"Off"})]})]}),f.jsxs("div",{className:"flex flex-col space-y-2",style:{marginLeft:`${t/5}vw`},children:[f.jsx("label",{className:"text-lg ",children:"Username"}),f.jsx("input",{type:"text",id:"username",name:"username",className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3 opacity-50 cursor-not-allowed",value:b.username,onChange:w,disabled:!0})]}),f.jsxs("div",{className:" flex flex-col space-y-2",style:{marginLeft:`${t/5}vw`},children:[f.jsx("label",{className:"text-lg ",children:"Email "}),f.jsx("input",{type:"text",id:"email",name:"email",className:"w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Email",value:b.email,onChange:w})]})]})]})}),f.jsxs("div",{className:"flex flex-col space-y-4",children:[f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"Full Name"}),f.jsx("input",{type:"text",id:"fullName",name:"fullName",className:" w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",value:b.fullName,onChange:w})]}),f.jsxs("div",{className:"flex flex-row space-x-10",children:[f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"Gender"}),f.jsxs("select",{className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",id:"gender",name:"gender",value:b.gender,onChange:w,children:[f.jsx("option",{value:"male",children:"Male"}),f.jsx("option",{value:"Female",children:"Female"})]})]}),f.jsxs("div",{className:" flex flex-col space-y-2 ",children:[f.jsx("label",{className:"text-lg ",children:"Age "}),f.jsx("input",{className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",type:"number",id:"age",name:"age",min:"0",max:"120",value:b.age,onChange:w})]})]}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Blood Type"}),f.jsxs("select",{className:" w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",id:"bloodType",name:"bloodType",value:b.bloodType,onChange:w,children:[f.jsx("option",{value:"",children:"Select Blood Type"}),f.jsx("option",{value:"A_POSITIVE",children:"A+"}),f.jsx("option",{value:"A_NEGATIVE",children:"A-"}),f.jsx("option",{value:"B_POSITIVE",children:"B+"}),f.jsx("option",{value:"B_NEGATIVE",children:"B-"}),f.jsx("option",{value:"AB_POSITIVE",children:"AB+"}),f.jsx("option",{value:"AB_NEGATIVE",children:"AB-"}),f.jsx("option",{value:"O_POSITIVE",children:"O+"}),f.jsx("option",{value:"O_NEGATIVE",children:"O-"})]})]}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{htmlFor:"dateOfBirth",children:"Date of Birth"}),f.jsx("input",{className:" w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",type:"date",id:"dateOfBirth",name:"dateOfBirth",value:b.dateOfBirth,onChange:w})]}),f.jsxs("div",{className:"flex flex-row space-x-10",children:[f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"address"}),f.jsx("input",{type:"text",id:"address",name:"address",className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"address",value:b.address,onChange:w})]}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"City"}),f.jsx("select",{className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",id:"cityId",name:"cityId",value:b.cityId,onChange:w,children:kB.map((k,M)=>f.jsxs("option",{value:M+1,children:[" ",k]},k))})]})]}),f.jsxs("div",{className:"flex flex-row space-x-10",children:[f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"phoneNumber"}),f.jsx("input",{type:"text",id:"phoneNumber",name:"phoneNumber",className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"phoneNumber",value:b.phoneNumber,onChange:w})]}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg ",children:"nationalId"}),f.jsx("input",{type:"text",id:"nationalId",name:"nationalId",className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"nationalId",value:b.nationalId,onChange:w})]})]}),f.jsx("h3",{className:"text-xl font-semibold text-gray-700 mt-6 mb-2 border-b pb-2",children:"Emergency Contact"}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Emergency Contact Name"}),f.jsx("input",{type:"text",id:"emergencyContactName",name:"emergencyContactName",className:" w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Emergency contact name",value:b.emergencyContactName,onChange:w})]}),f.jsxs("div",{className:"flex flex-row space-x-10",children:[f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Emergency Contact Phone"}),f.jsx("input",{type:"text",id:"emergencyContactPhone",name:"emergencyContactPhone",className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Emergency contact phone",value:b.emergencyContactPhone,onChange:w})]}),f.jsxs("div",{className:" flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Relation"}),f.jsxs("select",{className:" w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3",id:"emergencyContactRelation",name:"emergencyContactRelation",value:b.emergencyContactRelation,onChange:w,children:[f.jsx("option",{value:"",children:"Select Relation"}),f.jsx("option",{value:"Parent",children:"Parent"}),f.jsx("option",{value:"Spouse",children:"Spouse"}),f.jsx("option",{value:"Sibling",children:"Sibling"}),f.jsx("option",{value:"Child",children:"Child"}),f.jsx("option",{value:"Friend",children:"Friend"}),f.jsx("option",{value:"Other",children:"Other"})]})]})]}),f.jsxs("button",{type:"submit",disabled:i,onClick:()=>{},className:`bg-blue-500 text-white rounded-lg px-4 py-2 shadow\r
                    hover:shadow-md hover:bg-blue-600\r
                    active:shadow-sm active:translate-y-[1px]\r
                    transition-all duration-150`,"aria-pressed":"false",children:[i&&f.jsx("span",{className:"mr-2 inline-block h-4 w-4 animate-spin rounded-full border-2 border-white/40 border-t-white"}),f.jsx("span",{children:i?"Saving...":"Save"})]})]}),n&&f.jsx("p",{className:"text-green-500",children:n.message}),o&&f.jsx("p",{className:"text-red-500",children:o})]})}function hle({open:r,type:e,value:t,onChange:n,onClose:s,onSave:i,config:a}){if(!r||!e)return null;const o=a[e],c=y=>{y.preventDefault(),i()},d=y=>{const b={name:y.name,value:t[y.name]||"",onChange:n,required:!!y.required,className:"w-full border-2 border-gray-200 rounded-lg p-2",placeholder:y.placeholder||""};return f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-1",children:y.label}),y.type==="select"?f.jsxs("select",{...b,children:[f.jsx("option",{value:"",children:"Select"}),(y.options||[]).map(v=>f.jsx("option",{value:v,children:v},v))]}):f.jsx("input",{type:y.type||"text",...b})]},y.name)},h=(o.fields||[]).filter(y=>(y.group||"single")==="single"),g=(o.fields||[]).filter(y=>y.group==="grid2");return f.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:s}),f.jsxs("div",{className:"relative z-[1001] w-[92vw] max-w-lg rounded-lg bg-white p-5 shadow-xl",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:o.title}),f.jsxs("form",{onSubmit:c,className:"space-y-3",children:[h.map(d),g.length>0&&f.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(d)}),o.helpText&&f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.helpText}),f.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[f.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded-lg border border-gray-300",children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:"Save"})]})]})]})]})}function fle({user:r}){const[e,t]=I.useState(!1),[n,s]=I.useState({allergies:Array.isArray(r==null?void 0:r.allergy)?r.allergy:[],chronicDiseases:Array.isArray(r==null?void 0:r.chronicDiseases)?r.chronicDiseases:[],drugHistories:Array.isArray(r==null?void 0:r.drugHistory)?r.drugHistory:[],medicalHistories:Array.isArray(r==null?void 0:r.medicalHistory)?r.medicalHistory:[]}),[i,a]=I.useState(!1),[o,c]=I.useState(null),[d,h]=I.useState({}),g={drugHistories:{title:"Add New Medication",helpText:"Fill all relevant fields. You can save and add more later.",empty:{drugName:"",dosage:"",route:"",frequency:"",duration:"",prescribingPhysician:""},fields:[{name:"drugName",label:"Medication Name",type:"text",required:!0,placeholder:"e.g., Amoxicillin",group:"single"},{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500 mg",group:"grid2"},{name:"route",label:"Route",type:"select",options:["Oral","IV","IM","Topical"],group:"grid2"},{name:"frequency",label:"Frequency",type:"text",placeholder:"e.g., 3 times/day",group:"grid2"},{name:"duration",label:"Duration",type:"text",placeholder:"e.g., 7 days",group:"grid2"},{name:"prescribingPhysician",label:"Prescribing Physician",type:"text",placeholder:"e.g., Dr. Smith",group:"single"}]},allergies:{title:"Add New Allergy",helpText:"Specify allergen, reaction, and severity.",empty:{allergy:"",reaction:"",severity:""},fields:[{name:"allergy",label:"Allergen",type:"text",required:!0,placeholder:"e.g., Penicillin",group:"single"},{name:"reaction",label:"Reaction",type:"text",placeholder:"e.g., Rash, hives",group:"grid2"},{name:"severity",label:"Severity",type:"select",options:["Mild","Moderate","Severe"],group:"grid2"}]},chronicDiseases:{title:"Add Chronic Disease",helpText:"Enter the disease name and optional notes.",empty:{name:"",notes:""},fields:[{name:"name",label:"Disease Name",type:"text",required:!0,placeholder:"e.g., Diabetes Mellitus",group:"single"},{name:"notes",label:"Notes",type:"text",placeholder:"e.g., Type 2, on Metformin",group:"single"}]},medicalHistories:{title:"Add Medical History",helpText:"Add the event date and description.",empty:{date:"",description:""},fields:[{name:"date",label:"Date",type:"date",required:!0,group:"grid2"},{name:"description",label:"Description",type:"text",required:!0,placeholder:"e.g., Appendectomy",group:"grid2"}]}},y=N=>{const A=g[N];A&&(c(N),h(A.empty),a(!0))},b=()=>{a(!1),c(null),h({})},v=N=>{const{name:A,value:k}=N.target;h(M=>({...M,[A]:k}))},w=()=>{o&&(s(N=>({...N,[o]:[...Array.isArray(N[o])?N[o]:[],{...d}]})),a(!1),tt.success("Item added (not saved yet)"))},E=(N,A,k)=>{const{name:M,value:O}=N.target,P=[...n[k]||[]];P[A]={...P[A],[M]:O},s(F=>({...F,[k]:P}))},C=async N=>{N.preventDefault(),t(!0);try{await Ue.AddPatientInfo(n),tt.success("Medical history saved successfully!")}catch(A){tt.error(A.message||"Failed to save medical history")}finally{await Ue.GetCurrentUser(),t(!1)}};return f.jsxs("div",{className:"flex flex-col",children:[f.jsx(mle,{user:r}),f.jsxs("form",{onSubmit:C,children:[f.jsxs("section",{className:"mt-10 mb-10  relative group",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Active Medications"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-2 border",children:"Medication"}),f.jsx("th",{className:"p-2 border",children:"Dosage"}),f.jsx("th",{className:"p-2 border",children:"Route"}),f.jsx("th",{className:"p-2 border",children:"Frequency"}),f.jsx("th",{className:"p-2 border",children:"Duration"}),f.jsx("th",{className:"p-2 border",children:"Physician"})]})}),f.jsxs("tbody",{children:[(n.drugHistories||[]).map((N,A)=>f.jsxs("tr",{className:A%2===0?"bg-blue-50":"",children:[f.jsx("td",{className:"p-2 border",children:f.jsx("input",{name:"drugName",value:N.drugName||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",placeholder:"e.g., Amoxicillin"})}),f.jsx("td",{className:"p-2 border",children:f.jsx("input",{name:"dosage",value:N.dosage||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",placeholder:"e.g., 500 mg"})}),f.jsx("td",{className:"p-2 border",children:f.jsxs("select",{name:"route",value:N.route||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",children:[f.jsx("option",{value:"",children:"Select"}),f.jsx("option",{value:"Oral",children:"Oral"}),f.jsx("option",{value:"IV",children:"IV"}),f.jsx("option",{value:"IM",children:"IM"}),f.jsx("option",{value:"Topical",children:"Topical"})]})}),f.jsx("td",{className:"p-2 border",children:f.jsx("input",{name:"frequency",value:N.frequency||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",placeholder:"e.g., 3 times/day"})}),f.jsx("td",{className:"p-2 border",children:f.jsx("input",{name:"duration",value:N.duration||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",placeholder:"e.g., 7 days"})}),f.jsx("td",{className:"p-2 border",children:f.jsx("input",{name:"prescribingPhysician",value:N.prescribingPhysician||"",onChange:k=>E(k,A,"drugHistories"),className:"text-center w-full  p-1",placeholder:"e.g., Dr. Smith"})})]},A)),(!n.drugHistories||n.drugHistories.length===0)&&f.jsx("tr",{children:f.jsx("td",{className:"p-3 text-center text-gray-500",colSpan:6,children:'No medications yet. Click "Add New Medication".'})})]})]})]}),f.jsx("button",{type:"button",onClick:()=>y("drugHistories"),className:" block ml-auto bg-blue-500  text-white  rounded-xl w-l  p-2 right-0  hover:bg-blue-300 text-sm",children:"Add New Medication"}),f.jsxs("section",{className:"mb-10 relative group",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Allergies"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border ",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Allergen"}),f.jsx("th",{className:"px-4 py-2",children:"Reaction"}),f.jsx("th",{className:"px-4 py-2",children:"Severity"})]})}),f.jsx("tbody",{children:n.allergies.map((N,A)=>f.jsxs("tr",{className:A%2===0?"bg-blue-50":"",children:[f.jsx("td",{className:"border px-4 py-2",children:f.jsx("input",{type:"text",id:`allergy-${A}`,name:"allergy",className:"",value:N.allergy,onChange:k=>E(k,A,"allergies")})},`allergy-${A}`),f.jsx("td",{className:"border px-4 py-2",children:f.jsx("input",{type:"text",id:`reaction-${A}`,name:"reaction",className:" ",value:N.reaction,onChange:k=>E(k,A,"allergies")})},`reaction-${A}`),f.jsx("td",{className:"border px-4 py-2",children:f.jsx("input",{type:"text",id:`severity-${A}`,name:"severity",className:"",value:N.severity,onChange:k=>E(k,A,"allergies")})},`severity-${A}`)]},A))})]})]}),f.jsx("button",{type:"button",onClick:()=>y("allergies"),className:" block ml-auto bg-blue-500  text-white  rounded-xl w-l  p-2 right-0  hover:bg-blue-300 text-sm",children:"Add New Allergy"}),f.jsxs("section",{className:"flex-col flex mb-10 ",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Chronic disease"}),f.jsxs("div",{className:"flex-row flex space-x-2  flex-wrap gap-6 w-full",children:[n.chronicDiseases.map((N,A)=>f.jsx("input",{type:"text",id:`DiseaseName-${A}`,name:"name",className:"bg-blue-500 text-center rounded-lg h-8 w-35",value:N.name,onChange:k=>E(k,A,"chronicDiseases")},`${N.name}-${A}`)),f.jsx("button",{type:"button",onClick:()=>y("chronicDiseases"),className:" block ml-auto bg-blue-500  text-white  rounded-xl w-l  p-2 right-0  hover:bg-blue-300 text-sm",children:"Add New disease"})]})]}),f.jsxs("section",{className:"mb-10 relative group",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Medical History"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border ",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Condition"}),f.jsx("th",{className:"px-4 py-2",children:"Diagnosis Year"})]})}),f.jsx("tbody",{children:n.medicalHistories.map((N,A)=>f.jsxs("tr",{className:A%2===0?"bg-blue-50 ":"",children:[f.jsx("td",{className:" w-[40vw] text-center py-2",children:f.jsx("textarea",{type:"text",id:`mhDescription-${A}`,name:"description",className:" w-full ml-5",value:N.description,onChange:k=>E(k,A,"medicalHistories"),rows:3})},`mhDescription-${A}`),f.jsx("td",{className:" text-center py-2",children:f.jsx("input",{type:"date",id:`date-${A}`,name:"date",className:"text-center ",value:N.date,onChange:k=>E(k,A,"medicalHistories")})},`date-${A}`)]},A))})]})]}),f.jsx("button",{type:"button",onClick:()=>y("medicalHistories"),className:" block ml-auto bg-blue-500  text-white  rounded-xl w-l  p-2 right-0  hover:bg-blue-300 text-sm",children:"Add New Medical Record"}),f.jsxs("button",{type:"submit",className:"bg-blue-500 text-white p-3 rounded-lg mt-5 hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:e,onClick:C,children:[e&&f.jsx(If,{className:"w-4 h-4 animate-spin"}),e?"Saving...":"Save Changes"]})]}),f.jsx(hle,{open:i,type:o,value:d,onChange:v,onClose:b,onSave:w,config:g})]})}function ple(){const[r,e]=I.useState(JSON.parse(localStorage.getItem("DoctorsList"))||[]),[t,n]=I.useState(JSON.parse(localStorage.getItem("PatientReservations"))||[]),[s,i]=I.useState(null),[a,o]=I.useState({}),[c,d]=I.useState({open:!1,report:null}),h=V=>d({open:!0,report:V}),g=()=>d({open:!1,report:null}),[y,b]=I.useState(null),[v,w]=I.useState({status:"Canceled",id:""}),E=V=>{try{window.dispatchEvent(new CustomEvent("app:open-chat",{detail:{toId:String(V)}}))}catch(X){console.error("Open chat failed",X)}};I.useEffect(()=>{const V=async()=>{try{let X=JSON.parse(localStorage.getItem("DoctorsList"));(!X||X.length===0)&&(await Ue.GetDoctorsList(),X=JSON.parse(localStorage.getItem("DoctorsList"))||[]),e(X),await Ue.PatientReservations();const K=JSON.parse(localStorage.getItem("PatientReservations"))||[];n(K);const q=await Ue.GetReviews()||[],Z=Array.isArray(q)?q:JSON.parse(localStorage.getItem("ReservationReviewsList")||"[]"),he={};(Z||[]).forEach(W=>{const ne=W.reservationId;ne!=null&&(he[ne]={rating:W.rating??0,text:W.comment??W.text??""})});const te=JSON.parse(localStorage.getItem("ReservationReviews")||"{}"),pe=Object.keys(he).length?he:te;o(pe),localStorage.setItem("ReservationReviews",JSON.stringify(pe))}catch{tt.error("Failed to load reservations")}};(t.length===0||r.length===0)&&V()},[t.length,r.length]);function C({open:V,report:X,onClose:K}){return!V||!X?null:f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:K}),f.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg p-6 z-10 max-w-lg w-full",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Doctor Report"}),f.jsx("div",{className:"mb-4",children:f.jsx("div",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:X.reportText}})}),Array.isArray(X.reportFiles)&&X.reportFiles.length>0&&f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Files:"}),f.jsx("ul",{className:"list-disc pl-5",children:X.reportFiles.map((q,Z)=>f.jsx("li",{children:f.jsx("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:q.split("/").pop()})},Z))})]}),f.jsx("button",{onClick:K,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Close"})]})]})}const N=Wt.useMemo(()=>{const V={};return(r||[]).forEach(X=>{const K=X.id||X.doctorId||X.userId;K&&(V[K]=X)}),V},[r]),A=V=>{const X=V.date||V.appointmentDate||V.createdAt||V.startTime||V.time;if(!X)return"—";const K=new Date(X);return isNaN(K)?String(X):K.toLocaleDateString()},k=V=>{const X=V.time||V.appointmentTime;if(X)return X;const K=V.startTime||V.date||V.appointmentDate;if(!K)return"—";const q=new Date(K);return isNaN(q)?"—":q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},M=V=>{var K;const X=N[V.doctorId]||N[(K=V.doctor)==null?void 0:K.id];return V.doctorName||(X==null?void 0:X.fullName)||(X==null?void 0:X.name)||"Doctor"},O=V=>{var K,q;const X=N[V.doctorId]||N[(K=V.doctor)==null?void 0:K.id];return V.location||((q=X==null?void 0:X.clinic)==null?void 0:q.address)||(X==null?void 0:X.address)||"—"},P=V=>{i(X=>X===V?null:V)},F=(V,X)=>{o(K=>({...K,[V]:{...K[V]||{},text:X}}))},H=(V,X)=>{o(K=>({...K,[V]:{...K[V]||{},rating:X}}))},ee=async(V,X,K)=>{var Z;const q=a[K]||{};if(!q.rating||!((Z=q.text)!=null&&Z.trim())){tt.error("Please add rating and review text");return}try{b(K);const he={patientId:X,doctorId:V,rating:q.rating,comment:q.text,reservationId:K};await Ue.AddNewReview(he),o(te=>{const pe={...te,[K]:{rating:he.rating,text:he.comment}};return localStorage.setItem("ReservationReviews",JSON.stringify(pe)),pe}),tt.success("Review saved"),localStorage.setItem("ReservationReviews",JSON.stringify(a))}catch{tt.error("Failed to save review")}finally{b(null)}},G=V=>{const X=(V||"").toLowerCase();return X==="completed"?"bg-green-100 text-green-800":X==="canceled"||X==="cancelled"?"bg-red-100 text-red-800":X==="confirmed"?"bg-blue-100 text-blue-800":X==="pending"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-800"},J=({value:V,onChange:X})=>{const K=[1,2,3,4,5];return f.jsx("div",{className:"flex items-center gap-1",children:K.map(q=>f.jsx("button",{type:"button",onClick:()=>X(q),className:(V>=q?"text-yellow-400":"text-gray-300")+" text-xl leading-none","aria-label":`Rate ${q} star${q>1?"s":""}`,title:`${q} star${q>1?"s":""}`,children:"★"},q))})};return f.jsx("main",{className:"flex-1",children:f.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden border border-gray-100",children:[f.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Reservations"})}),f.jsxs("div",{className:"flex flex-col p-6 space-y-6",children:[(t||[]).map(V=>{const X=V.id,K=s===X,q=V.medications||V.drugHistories||[],Z=V.preVisit&&V.preVisit.reportText?V.preVisit.reportText:"",he=V.queueNumber||"—",te=V.doctorId,pe=a[X]||{rating:0,text:""};return f.jsxs("div",{className:"group bg-white transition-colors duration-150 border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[f.jsxs("div",{className:`px-6 py-4 grid grid-cols-12 gap-4 items-center cursor-pointer hover:bg-gray-50 ${K?"border-b-2 border-blue-500":""}`,onClick:()=>P(X),children:[f.jsxs("div",{className:"col-span-2",children:[f.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:"Date"}),f.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:[f.jsx("i",{className:"fa-regular fa-calendar mr-2 text-gray-400"}),A(V)]})]}),f.jsxs("div",{className:"col-span-3",children:[f.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:"Doctor Name"}),f.jsx("div",{className:"text-sm text-gray-600 font-semibold",children:M(V)})]}),f.jsxs("div",{className:"col-span-3",children:[f.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:"Location"}),f.jsxs("div",{className:"text-sm text-gray-600 truncate",children:[f.jsx("i",{className:"fa-solid fa-location-dot mr-1"}),O(V)]})]}),f.jsxs("div",{className:"col-span-2",children:[f.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:"Time"}),f.jsx("div",{className:"text-sm text-gray-600",children:k(V)})]}),f.jsxs("div",{className:"col-span-1 text-right",children:[f.jsx("div",{className:"text-xs font-bold text-gray-900 mb-1",children:"Status"}),f.jsx("span",{className:`status-badge inline-flex px-2 py-1 rounded text-xs font-medium ${G(V.status)}`,children:V.status||"—"})]})]}),K&&f.jsx("div",{className:"bg-gray-50 border-blue-100 px-6 py-6 pl-8 animate-fade-in",children:f.jsxs("div",{className:"grid-cols-3 grid space-y-3 ",children:[f.jsxs("div",{className:"flex flex-wrap items-baseline gap-2 col-span-2",children:[f.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Queue Number:"}),f.jsx("span",{className:"text-base font-bold text-gray-900",children:he})]}),f.jsxs("div",{className:"flex flex-wrap items-baseline gap-2 col-span-2",children:[f.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Latest Doctor Report:"}),Z?f.jsx("button",{className:"text-blue-600 underline",onClick:()=>h(V.preVisit),type:"button",children:"View Report"}):f.jsx("span",{className:"text-sm text-gray-500",children:"No report available"})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-2 col-span-2",children:[f.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Medications:"}),Array.isArray(q)&&q.length>0?q.map((W,ne)=>f.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800",children:W.drugName?`${W.drugName}${W.dosage?` ${W.dosage}`:""}`:typeof W=="string"?W:"Medication"},ne)):f.jsx("span",{className:"text-xs text-gray-500",children:"None"})]}),f.jsx("div",{className:"grid-cols-3 col-span-1 justify-items-end",children:f.jsxs("button",{className:"flex items-center gap-2 bg-[#0e7490] hover:bg-cyan-800 text-white px-5 py-2.5 rounded-lg shadow-md transition-all focus:ring-2 focus:ring-offset-2 focus:ring-[#0e7490] w-full lg:w-auto justify-center",type:"button",onClick:()=>E(V.doctorId),children:[f.jsx("span",{className:"material-icons-round",children:"chat_bubble"})," Message Doctor"]})}),V.status==="Completed"&&f.jsxs("div",{className:"pt-1 col-span-3",children:[f.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:"Review Last Visit"}),f.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-white mt-1 text-sm text-gray-600 ",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:"text-sm font-medium",children:"Add a review for this visit"}),f.jsx(J,{value:pe.rating||0,onChange:W=>H(X,W)})]}),f.jsx("textarea",{rows:3,className:"w-full border-2 border-gray-200 rounded-lg p-2 text-sm",placeholder:"Share feedback about your visit...",value:pe.text||"",onChange:W=>F(X,W.target.value)}),f.jsx("div",{className:"mt-2 flex justify-end",children:f.jsxs("button",{type:"button",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50",disabled:y===X,onClick:()=>ee(te,V.patientId,X),children:[y===X?"Saving...":"Save Review"," ",X]})})]})]})]})})]},X)}),f.jsx(C,{open:c.open,report:c.report,onClose:g}),(!t||t.length===0)&&f.jsx("div",{className:"px-4 py-6 text-sm text-gray-500",children:"No reservations found"})]})]})})}function mle({user:r}){const[e,t]=I.useState(!1);return f.jsxs("div",{className:"flex flex-row",children:[f.jsxs("div",{className:" w-[550px] h-70 bg-blue-50 flex flex-col rounded-xl",children:[f.jsxs("div",{className:"flex flex-rw bg-red-300 rounded-t-xl",children:[f.jsx("img",{src:"src/assets/MedicalSymbol.png",alt:"Medical",className:"w-16 mx-5  py-2"}),f.jsx("p",{className:"text-3xl justify-center items-center flex",children:"Emergancy Card"})]}),f.jsxs("div",{className:"flex-row flex ml-3 mt-5 items-center  relative",children:[f.jsx("div",{className:"flex-col flex h-30 absolute mt-5 right-0",children:f.jsxs("div",{className:"flex-row flex",children:[f.jsx("p",{className:"rotate-270 leading-30 font-WDXL-Lubrifont-TC text-3xl",children:"SCAN"}),f.jsx(Ja,{to:`http://localhost:5173/findpatient/${r.phoneNumber}`,children:f.jsx(cle,{className:"flex mr-6  w-25 h-30 ",bgColor:"#eff6ff",value:`http://localhost:5173/findpatient/${r.phoneNumber}`})})]})}),f.jsx("img",{src:r.imageUrl!=null?r.imageUrl:r.gender==="male"?Lc:qf,alt:"profile",className:"w-20 h-20 rounded-full object-cover "}),f.jsxs("div",{className:"flex-col ml-5",children:[f.jsxs("p",{children:["ID: ",r.nationalId]}),f.jsxs("p",{children:["phone: ",r.phoneNumber]}),f.jsxs("p",{children:["E.Contact: ",r.phoneNumber]})]})]}),f.jsx("div",{className:"flex-col ml-5 mt-5",children:f.jsxs("p",{children:["Name: ",r.fullName]})})]}),f.jsxs("div",{className:"flex flex-row w-[25vw] justify-center ",children:[f.jsxs("div",{className:"has-tooltip mr-2",children:[f.jsx("span",{className:"tooltip rounded shadow-lg p-2 bg-blue-900 text-white",children:"Turn Medical Profile ON allows people to view your profile publicly "}),"Medical Profile"]}),f.jsxs("div",{children:[f.jsx(Cz,{checked:e,onChange:()=>t(!e)}),f.jsx("span",{className:"ml-2",children:e?"On":"Off"})]})]})]})}function Cz({checked:r,onChange:e}){return f.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r,onChange:e}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-blue-500 transition-colors relative ",children:f.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform  ${r?"translate-x-5":"translate-x-0"}`})})]})}function gle({user:r,screenSize:e}){const[t,n]=I.useState(null),[s,i]=I.useState(null),[a,o]=I.useState(!1),[c,d]=I.useState({currentPassword:"",newPassword:"",confirmPassword:""}),h=y=>{const{name:b,value:v}=y.target;d({...c,[b]:v})},g=()=>c.newPassword!==c.confirmPassword?(i("New password and confirmation password don't match"),!1):c.newPassword.length<6?(i("New password must be at least 6 characters long"),!1):c.currentPassword===c.newPassword?(i("New password must be different from current password"),!1):!0;return f.jsxs("form",{onSubmit:async y=>{if(y.preventDefault(),i(null),n(null),!!g())try{o(!0);const b={currentPassword:c.currentPassword,newPassword:c.newPassword},v=await Ue.changePasswordSecure(b);n(v),tt.success("Password changed successfully!"),d({currentPassword:"",newPassword:"",confirmPassword:""})}catch(b){i(b.message),tt.error(b.message||"Failed to change password")}finally{o(!1)}},children:[f.jsx("div",{className:"flex-row",children:f.jsxs("div",{className:"flex flex-row",children:[f.jsx("div",{className:"relative overflow-hidden rounded-full mb-10",children:f.jsx("img",{src:r.imageUrl!=null?r.imageUrl:r.gender==="male"?Lc:qf,alt:r.gender==="male"?Lc:qf,className:"w-50 h-50 rounded-full object-cover"})}),f.jsxs("div",{className:"flex flex-col space-y-4",children:[f.jsxs("div",{className:"flex flex-col space-y-2",style:{marginLeft:`${e/5}vw`},children:[f.jsx("label",{className:"text-lg",children:"Username"}),f.jsx("input",{type:"text",className:"w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3 opacity-50 cursor-not-allowed",value:r.username,disabled:!0})]}),f.jsxs("div",{className:"flex flex-col space-y-2",style:{marginLeft:`${e/5}vw`},children:[f.jsx("label",{className:"text-lg",children:"Email"}),f.jsx("input",{type:"text",className:"w-[calc(30vw-60px)] border-2 border-gray-200 rounded-lg p-3 opacity-50 cursor-not-allowed",value:r.email,disabled:!0})]})]})]})}),f.jsxs("div",{className:"flex flex-col space-y-4 h-130",children:[f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Current Password"}),f.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",className:"w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Enter your current password",value:c.currentPassword,onChange:h,required:!0})]}),f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"New Password"}),f.jsx("input",{type:"password",id:"newPassword",name:"newPassword",className:"w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Enter your new password",value:c.newPassword,onChange:h,required:!0,minLength:"6"})]}),f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsx("label",{className:"text-lg",children:"Confirm New Password"}),f.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:"w-[calc(60vw-80px)] border-2 border-gray-200 rounded-lg p-3",placeholder:"Confirm your new password",value:c.confirmPassword,onChange:h,required:!0})]}),f.jsx("button",{type:"submit",className:`bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors ${a?"opacity-50 cursor-not-allowed":""}`,disabled:a,children:a?"Changing Password...":"Change Password"})]}),t&&f.jsx("p",{className:"text-green-500 mt-4",children:t.message}),s&&f.jsx("p",{className:"text-red-500 mt-4",children:s})]})}const yle=()=>{const[r,e]=I.useState([]);return I.useEffect(()=>{const t=new _7("http://localhost:8080/ws"),n=new j7({webSocketFactory:()=>t,connectHeaders:{Authorization:"Bearer "+localStorage.getItem("authToken")},onConnect:()=>{n.subscribe("/topic/updates",s=>{e(i=>[...i,s.body])})}});return n.activate(),()=>n.deactivate()},[]),f.jsxs("div",{children:[f.jsx("h1",{children:"Live Updates"}),f.jsx("ul",{children:r.map((t,n)=>f.jsx("li",{children:t},n))})]})};function xle(){const{phoneOrSSN:r}=cB(),[e,t]=I.useState(null);return I.useEffect(()=>{r&&fetch(`http://localhost:8080/findpatient/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(async n=>{if(!n.ok)throw new Error("Not found");const s=await n.json();t(s)}).catch(()=>t(null))},[r]),f.jsx("div",{children:e&&f.jsxs("div",{className:"max-w-5xl mx-auto my-10 bg-white p-6 md:p-10 rounded-xl shadow-lg text-gray-800",children:[f.jsx("h1",{className:"text-3xl font-bold text-center text-blue-900 mb-8",children:"Medication Profile Report"}),f.jsxs("section",{className:"mb-10",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Patient Information"}),f.jsxs("p",{children:[f.jsx("strong",{children:"Full Name:"})," ",e.fullName]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Date of Birth:"})," ",e.dateOfBirth]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Gender:"})," ",e.gender]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Phone number:"})," ",e.phoneNumber]}),f.jsxs("p",{children:[f.jsx("strong",{children:"SSN:"})," ",e.nationalId]})]}),f.jsxs("section",{className:"mb-10 overflow-x-auto",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Active Medications"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border ",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Medication Name"}),f.jsx("th",{className:"px-4 py-2",children:"Dosage"}),f.jsx("th",{className:"px-4 py-2",children:"Route"}),f.jsx("th",{className:"px-4 py-2",children:"Frequency"}),f.jsx("th",{className:"px-4 py-2",children:"duration"}),f.jsx("th",{className:"px-4 py-2",children:"Prescribing Physician"})]})}),f.jsx("tbody",{children:e.drugHistory.map((n,s)=>f.jsxs("tr",{className:s%2===0?"bg-blue-50":"",children:[f.jsx("td",{className:"border px-4 py-2",children:n.drugName},s),f.jsx("td",{className:"border px-4 py-2",children:n.dosage},s),f.jsx("td",{className:"border px-4 py-2",children:n.route},s),f.jsx("td",{className:"border px-4 py-2",children:n.frequency},s),f.jsx("td",{className:"border px-4 py-2",children:n.duration},s),f.jsx("td",{className:"border px-4 py-2",children:n.prescribingPhysician},s)]}))})]})]}),f.jsxs("section",{className:"mb-10 overflow-x-auto",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Allergies"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border ",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Allergen"}),f.jsx("th",{className:"px-4 py-2",children:"Reaction"}),f.jsx("th",{className:"px-4 py-2",children:"Severity"})]})}),f.jsx("tbody",{children:e.allergy.map((n,s)=>f.jsxs("tr",{className:s%2===0?"bg-blue-50":"",children:[f.jsx("td",{className:"border px-4 py-2",children:n.allergy},s),f.jsx("td",{className:"border px-4 py-2",children:n.reaction},s),f.jsx("td",{className:"border px-4 py-2",children:n.severity},s)]},s))})]})]}),f.jsxs("section",{className:"mb-10",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Chronic Diseases"}),f.jsx("ul",{className:"list-disc list-inside space-y-2",children:e.chronicDiseases.map((n,s)=>f.jsx("li",{children:n.name}))})]}),f.jsxs("section",{className:"mb-10 overflow-x-auto",children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Physician Contacts"}),f.jsxs("table",{className:"min-w-full text-sm table-auto border ",children:[f.jsx("thead",{className:"bg-blue-500 text-white",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Physician Name"}),f.jsx("th",{className:"px-4 py-2",children:"Specialty"}),f.jsx("th",{className:"px-4 py-2",children:"Contact Number"})]})}),f.jsx("tbody",{children:[["Dr. Alice Monroe","Endocrinologist","(555) 123-4567"],["Dr. Robert Smith","Cardiologist","(555) 234-5678"],["Dr. Emily Clark","Pulmonologist","(555) 345-6789"]].map((n,s)=>f.jsx("tr",{className:s%2===0?"bg-blue-50":"",children:n.map((i,a)=>f.jsx("td",{className:"border px-4 py-2",children:i},a))},s))})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"text-2xl font-semibold border-b-2 border-blue-500 pb-1 mb-4",children:"Emergency Contact"}),f.jsxs("p",{children:[f.jsx("strong",{children:"Name:"})," ",e.emergencyContactName||"N/A"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Relationship:"})," ",e.emergencyContactRelation||"N/A"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Phone:"})," ",e.emergencyContactPhone||"N/A"]})]})]})})}function hk(){return f.jsxs("footer",{className:"mt-20 bg-[#1F2937] text-gray-200",children:[f.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 grid gap-10 md:grid-cols-4",children:[f.jsxs("div",{className:"md:col-span-2 space-y-3",children:[f.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-[#A7EFFF]",children:"Medicare"}),f.jsx("p",{className:"text-sm text-gray-300 max-w-md",children:"We help you find the right doctors, clinics, and care for your family with trusted profiles and real patient ratings."}),f.jsx("p",{className:"text-xs text-gray-400",children:"Available 24/7 – wherever you are in Egypt."})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-[#C0D2FF] mb-3",children:"Quick Links"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#top",className:"hover:text-[#A7EFFF] transition-colors",children:"Search doctors"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"My profile"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"My reservations"})}),f.jsx("li",{children:f.jsx("a",{href:"/settings",className:"hover:text-[#A7EFFF] transition-colors",children:"Medical history"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-[#C0D2FF] mb-3",children:"Contact & Support"}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsx("li",{className:"text-gray-300",children:"support@medicare.eg"}),f.jsx("li",{className:"text-gray-300",children:"+20 (0) 123 456 789"}),f.jsx("li",{className:"text-gray-400 text-xs",children:"Sun – Thu, 9:00 AM – 9:00 PM"})]})]})]}),f.jsx("div",{className:"border-t border-gray-700",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex flex-col md:flex-row items-center justify-between text-xs text-gray-400",children:[f.jsxs("p",{children:["© ",new Date().getFullYear()," Medicare. All rights reserved."]}),f.jsxs("div",{className:"space-x-4 mt-2 md:mt-0",children:[f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Privacy"}),f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Terms"}),f.jsx("button",{className:"hover:text-[#A7EFFF]",children:"Cookies"})]})]})})]})}function Ez(){const[r,e]=I.useState(""),[t,n]=I.useState(""),[s,i]=I.useState(!1),a=yo(),o=async c=>{if(c.preventDefault(),n(""),!r.trim()){n("Please enter a phone number");return}i(!0);try{if(!(await fetch(`http://localhost:8080/findpatient/${r}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Patient not found");a(`/findpatient/${r}`)}catch{n("Patient not found with this phone number")}finally{i(!1)}};return f.jsx(f.Fragment,{children:f.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:f.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-lg p-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-center text-blue-900 mb-6",children:"Find Patient"}),f.jsxs("form",{onSubmit:o,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),f.jsx("input",{type:"text",id:"phoneNumber",value:r,onChange:c=>e(c.target.value),placeholder:"Enter patient's phone number",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]}),t&&f.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:t}),f.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Searching...":"Search Patient"})]})]})})})}const Dw=({title:r,value:e,icon:t,bgColor:n,textColor:s,iconBg:i})=>f.jsx("div",{className:`${n} border rounded-lg p-6`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:`${s} text-sm font-medium`,children:r}),f.jsx("p",{className:`text-3xl font-bold ${s.replace("600","900")}`,children:e})]}),f.jsx("div",{className:`${i} p-3 rounded-full`,children:t})]})}),ble=({user:r,isOpen:e,onClose:t,onSave:n})=>{const[s,i]=I.useState(r||{});if(!e)return null;const a=async o=>{o.preventDefault();try{await Ue.UpdateUserById(s,r.userId),n(s),t()}catch(c){console.error("Error updating user:",c),alert("Failed to update user")}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Edit User"}),f.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:a,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),f.jsx("input",{type:"text",value:s.fullName||"",onChange:o=>i({...s,fullName:o.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{type:"email",value:s.email||"",onChange:o=>i({...s,email:o.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),f.jsx("input",{type:"text",value:s.phoneNumber||"",onChange:o=>i({...s,phoneNumber:o.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Age"}),f.jsx("input",{type:"number",value:s.age||"",onChange:o=>i({...s,age:o.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),f.jsx("textarea",{value:s.address||"",onChange:o=>i({...s,address:o.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border",rows:"3"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Save Changes"})]})]})]})})},vle=({isOpen:r,onClose:e,onConfirm:t,title:n,message:s,confirmText:i="Confirm",cancelText:a="Cancel"})=>r?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:n}),f.jsx("p",{className:"text-gray-600",children:s})]}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:a}),f.jsx("button",{onClick:t,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:i})]})]})}):null;function Ow({children:r,setIndex:e,Index:t,currentIndex:n}){const s=t===n;return f.jsx("div",{className:"flex flex-row items-center gap-3",children:f.jsx("button",{onClick:()=>e(t),className:`inline-flex w-full px-4 py-2 text-gray-800 hover:bg-blue-100 cursor-pointer rounded-lg transition-colors ${s?"bg-blue-500 text-white":""}`,children:r})})}function wle(){const[r,e]=I.useState(0),t=80,[n,s]=I.useState([]),[i,a]=I.useState([]),[o,c]=I.useState([]),[d,h]=I.useState({totalUsers:0,totalDoctors:0,totalReservations:0,pendingDoctors:0}),[g,y]=I.useState(!1),[b,v]=I.useState(null),[w,E]=I.useState(!1),[C,N]=I.useState(!1),[A,k]=I.useState(null),[M,O]=I.useState(""),[P,F]=I.useState("all"),[H,ee]=I.useState("all"),G=async te=>{y(!0);try{switch(te){case 0:await J();break;case 1:await Ue.GetDoctorsList();const pe=JSON.parse(localStorage.getItem("DoctorsList")||"[]");s(pe);break;case 2:await Ue.GetAllUsers();const W=JSON.parse(localStorage.getItem("allUsers")||"[]");a(W);break;case 3:await V();break}}catch(pe){console.error("Error fetching data:",pe)}finally{y(!1)}},J=async()=>{try{await Ue.GetAllUsers(),await Ue.GetDoctorsList();const te=JSON.parse(localStorage.getItem("allUsers")||"[]"),pe=JSON.parse(localStorage.getItem("DoctorsList")||"[]");h({totalUsers:te.length,totalDoctors:pe.length,pendingDoctors:pe.filter(W=>W.status==="Pending").length,totalReservations:0})}catch(te){console.error("Error fetching stats:",te)}},V=async()=>{try{const te=await Ue.GetAllReservations();c(te||[])}catch(te){console.error("Error fetching reservations:",te),c([])}},X=te=>{k(te),N(!0)},K=async()=>{try{await Ue.DeleteUser(A.userId),await G(2),N(!1),k(null),alert("User deleted successfully")}catch(te){console.error("Error deleting user:",te),alert("Failed to delete user")}},q=async te=>{await G(2)},Z=i.filter(te=>{var ne,me,we,Ne,je,Me;const pe=((ne=te.fullName)==null?void 0:ne.toLowerCase().includes(M.toLowerCase()))||((me=te.email)==null?void 0:me.toLowerCase().includes(M.toLowerCase()))||((we=te.username)==null?void 0:we.toLowerCase().includes(M.toLowerCase())),W=P==="all"||((Me=(je=(Ne=te.roles)==null?void 0:Ne[0])==null?void 0:je.name)==null?void 0:Me.toLowerCase().includes(P.toLowerCase()));return pe&&W}),he=n.filter(te=>H==="all"||te.status===H);return I.useEffect(()=>{G(r)},[r]),f.jsxs(f.Fragment,{children:[f.jsx(Xy,{}),f.jsxs("div",{className:"flex flex-row justify-center space-x-10 @container min-h-screen bg-gray-50",children:[f.jsxs("div",{className:"flex-col bg-white border-gray-200 shadow-lg rounded-lg pt-5 @max-[800px]:hidden h-fit min-w-[250px]",children:[f.jsx("div",{className:"px-4 py-3 border-b",children:f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Admin Dashboard"})}),f.jsxs(Ow,{setIndex:e,Index:0,currentIndex:r,children:[f.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),f.jsx("p",{children:"Dashboard"})]}),f.jsxs(Ow,{setIndex:e,Index:1,currentIndex:r,children:[f.jsx("svg",{height:"24px",width:"24px",fill:"currentColor",viewBox:"0 -960 960 960",children:f.jsx("path",{d:"M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"})}),f.jsx("p",{children:"Doctor Management"})]}),f.jsxs(Ow,{setIndex:e,Index:2,currentIndex:r,children:[f.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("p",{children:"User Management"})]}),f.jsxs(Ow,{setIndex:e,Index:3,currentIndex:r,children:[f.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),f.jsx("p",{children:"Reservations"})]})]}),f.jsxs("div",{className:`flex-col w-[${t}vw] bg-white border-gray-200 border shadow-lg rounded-lg p-6`,children:[g&&f.jsx("div",{className:"flex justify-center items-center py-8",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),r===0&&!g&&f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard Overview"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[f.jsx(Dw,{title:"Total Users",value:d.totalUsers,bgColor:"bg-blue-50 border-blue-200",textColor:"text-blue-600",iconBg:"bg-blue-100",icon:f.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}),f.jsx(Dw,{title:"Total Doctors",value:d.totalDoctors,bgColor:"bg-green-50 border-green-200",textColor:"text-green-600",iconBg:"bg-green-100",icon:f.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"currentColor",viewBox:"-6 -6 24 24",children:f.jsx("path",{d:`M5.5,7C4.1193,7,3,5.8807,3,4.5l0,0v-2C3,2.2239,3.2239,2,3.5,2H4c0.2761,0,0.5-0.2239,0.5-0.5S4.2761,1,4,1H3.5
	C2.6716,1,2,1.6716,2,2.5v2c0.0013,1.1466,0.5658,2.2195,1.51,2.87l0,0C4.4131,8.1662,4.9514,9.297,5,10.5C5,12.433,6.567,14,8.5,14
	s3.5-1.567,3.5-3.5V9.93c1.0695-0.2761,1.7126-1.367,1.4365-2.4365C13.1603,6.424,12.0695,5.7809,11,6.057
	C9.9305,6.3332,9.2874,7.424,9.5635,8.4935C9.7454,9.198,10.2955,9.7481,11,9.93v0.57c0,1.3807-1.1193,2.5-2.5,2.5S6,11.8807,6,10.5
	c0.0511-1.2045,0.5932-2.3356,1.5-3.13l0,0C8.4404,6.7172,9.001,5.6448,9,4.5v-2C9,1.6716,8.3284,1,7.5,1H7
	C6.7239,1,6.5,1.2239,6.5,1.5S6.7239,2,7,2h0.5C7.7761,2,8,2.2239,8,2.5v2l0,0C8,5.8807,6.8807,7,5.5,7 M11.5,9
	c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.0523,9,11.5,9z`})})}),f.jsx(Dw,{title:"Pending Doctors",value:d.pendingDoctors,bgColor:"bg-yellow-50 border-yellow-200",textColor:"text-yellow-600",iconBg:"bg-yellow-100",icon:f.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsx(Dw,{title:"Total Reservations",value:o.length,bgColor:"bg-purple-50 border-purple-200",textColor:"text-purple-600",iconBg:"bg-purple-100",icon:f.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),f.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Quick Actions"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("button",{onClick:()=>e(1),className:"flex items-center p-4 bg-white rounded-lg border hover:bg-blue-50 transition-colors",children:[f.jsx("svg",{className:"w-12 h-12 text-blue-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:`M5.5,7C4.1193,7,3,5.8807,3,4.5l0,0v-2C3,2.2239,3.2239,2,3.5,2H4c0.2761,0,0.5-0.2239,0.5-0.5S4.2761,1,4,1H3.5
	C2.6716,1,2,1.6716,2,2.5v2c0.0013,1.1466,0.5658,2.2195,1.51,2.87l0,0C4.4131,8.1662,4.9514,9.297,5,10.5C5,12.433,6.567,14,8.5,14
	s3.5-1.567,3.5-3.5V9.93c1.0695-0.2761,1.7126-1.367,1.4365-2.4365C13.1603,6.424,12.0695,5.7809,11,6.057
	C9.9305,6.3332,9.2874,7.424,9.5635,8.4935C9.7454,9.198,10.2955,9.7481,11,9.93v0.57c0,1.3807-1.1193,2.5-2.5,2.5S6,11.8807,6,10.5
	c0.0511-1.2045,0.5932-2.3356,1.5-3.13l0,0C8.4404,6.7172,9.001,5.6448,9,4.5v-2C9,1.6716,8.3284,1,7.5,1H7
	C6.7239,1,6.5,1.2239,6.5,1.5S6.7239,2,7,2h0.5C7.7761,2,8,2.2239,8,2.5v2l0,0C8,5.8807,6.8807,7,5.5,7 M11.5,9
	c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.0523,9,11.5,9z`})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900",children:"Manage Doctors"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Approve pending doctors"})]})]}),f.jsxs("button",{onClick:()=>e(2),className:"flex items-center p-4 bg-white rounded-lg border hover:bg-green-50 transition-colors",children:[f.jsx("svg",{className:"w-8 h-8 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900",children:"Manage Users"}),f.jsx("p",{className:"text-sm text-gray-500",children:"View and edit user accounts"})]})]}),f.jsxs("button",{onClick:()=>e(3),className:"flex items-center p-4 bg-white rounded-lg border hover:bg-purple-50 transition-colors",children:[f.jsx("svg",{className:"w-8 h-8 text-purple-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium text-gray-900",children:"View Reservations"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Monitor appointments"})]})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Recent Activity"}),f.jsxs("div",{className:"space-y-3",children:[d.pendingDoctors>0&&f.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[f.jsx("svg",{className:"w-5 h-5 text-yellow-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92z",clipRule:"evenodd"})}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[d.pendingDoctors," doctor",d.pendingDoctors>1?"s":""," awaiting approval"]}),f.jsx("button",{onClick:()=>e(1),className:"text-sm text-yellow-600 hover:text-yellow-800 underline",children:"Review now →"})]})]}),f.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[f.jsx("svg",{className:"w-5 h-5 text-gray-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),f.jsx("p",{className:"text-sm text-gray-600",children:"System running normally"})]}),f.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[f.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("p",{className:"text-sm text-green-600",children:"All services operational"})]})]})]})]}),r===1&&!g&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Doctor Management"}),f.jsx("div",{className:"flex space-x-3",children:f.jsx("button",{onClick:()=>G(1),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Refresh"})})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),f.jsxs("select",{value:H,onChange:te=>ee(te.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsxs("option",{value:"all",children:["All Status (",n.length,")"]}),f.jsxs("option",{value:"Pending",children:["Pending (",n.filter(te=>te.status==="Pending").length,")"]}),f.jsxs("option",{value:"Confirmed",children:["Confirmed (",n.filter(te=>te.status==="Confirmed").length,")"]}),f.jsxs("option",{value:"Rejected",children:["Rejected (",n.filter(te=>te.status==="Rejected").length,")"]})]})]}),f.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",he.length," of ",n.length," doctors"]})]})}),f.jsx("div",{className:"space-y-4",children:he.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:n.length===0?"No doctors found.":"No doctors match the selected filter."}):he.map((te,pe)=>f.jsxs("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:te.fullName}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm text-gray-600",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Username:"})," ",te.username||"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"City:"})," ",te.city||"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Specialty:"})," ",te.specialty||"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Fees:"})," ",te.fees?`$${te.fees}`:"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Working Hours:"})," ",te.startTime&&te.endTime?`${te.startTime} - ${te.endTime}`:"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Rating:"})," ",te.rating?`${te.rating}/5`:"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Working Days:"})," ",te.workingDays?te.workingDays.join(", "):"N/A"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Specialty Details:"})," ",te.specialityDetails||"N/A"]})]}),te.bio&&f.jsx("div",{className:"mt-3",children:f.jsxs("p",{className:"text-sm text-gray-600",children:[f.jsx("span",{className:"font-medium",children:"Bio:"})," ",te.bio]})})]}),f.jsxs("div",{className:"ml-6 flex flex-col items-end",children:[f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium mb-3 ${te.status==="Confirmed"?"bg-green-100 text-green-800":te.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:te.status}),f.jsx("div",{className:"relative",children:f.jsxs("select",{value:te.status,onChange:async W=>{const ne=W.target.value;ne!==te.status&&(await Ue.UpdateDoctorStatus(te.doctorId,ne),await G(1),alert(`Doctor status updated to ${ne}`))},className:"text-xs px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:"Pending",children:"Pending"}),f.jsx("option",{value:"Confirmed",children:"Confirmed"}),f.jsx("option",{value:"Rejected",children:"Rejected"})]})})]})]}),te.status==="Pending"&&f.jsxs("div",{className:"flex space-x-3 mt-4 pt-4 border-t",children:[f.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Confirmed"),await G(1),alert("Doctor approved successfully!")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approve"]}),f.jsxs("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Rejected"),await G(1),alert("Doctor rejected.")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Reject"]})]}),te.status!=="Pending"&&f.jsxs("div",{className:"flex space-x-3 mt-4 pt-4 border-t",children:[te.status==="Confirmed"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Pending"),await G(1),alert("Doctor status changed to Pending for review.")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Set to Pending"]}),f.jsxs("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Rejected"),await G(1),alert("Doctor rejected.")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Reject"]})]}),te.status==="Rejected"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Confirmed"),await G(1),alert("Doctor approved successfully!")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approve"]}),f.jsxs("button",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors flex items-center",onClick:async()=>{await Ue.UpdateDoctorStatus(te.doctorId,"Pending"),await G(1),alert("Doctor status changed to Pending for review.")},children:[f.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Set to Pending"]})]})]})]},pe))})]}),r===2&&!g&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"User Management"}),f.jsx("button",{onClick:()=>G(2),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Refresh"})]}),f.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx("input",{type:"text",placeholder:"Search users by name, email, or username...",value:M,onChange:te=>O(te.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),f.jsx("div",{className:"sm:w-48",children:f.jsxs("select",{value:P,onChange:te=>F(te.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:"all",children:"All Roles"}),f.jsx("option",{value:"patient",children:"Patients"}),f.jsx("option",{value:"doctor",children:"Doctors"}),f.jsx("option",{value:"admin",children:"Admins"})]})})]}),f.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:i.length===0?"No users found.":"No users match your search criteria."})}):Z.map((te,pe)=>{var W,ne,me,we,Ne;return f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:f.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:f.jsx("span",{className:"text-sm font-medium text-gray-700",children:((W=te.fullName)==null?void 0:W.charAt(0))||"U"})})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.fullName}),f.jsx("div",{className:"text-sm text-gray-500",children:te.username})]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.email}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:((we=(me=(ne=te.roles)==null?void 0:ne[0])==null?void 0:me.name)==null?void 0:we.replace("ROLE_",""))||"PATIENT"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.age||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Ne=te.city)==null?void 0:Ne.name)||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:f.jsx("button",{onClick:()=>X(te),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},pe)})})]})})})]}),r===3&&!g&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Reservation Management"}),f.jsx("button",{onClick:()=>G(3),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Refresh"})]}),f.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specialty"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No reservations found."})}):o.map((te,pe)=>{var W,ne,me;return f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.id}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((W=te.user)==null?void 0:W.fullName)||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((ne=te.doctor)==null?void 0:ne.fullName)||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((me=te.doctor)==null?void 0:me.specialty)||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(te.date).toLocaleDateString()}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.duration?`${te.duration} min`:"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${te.status==="Confirmed"?"bg-green-100 text-green-800":te.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:te.status})})]},pe)})})]})})})]})]}),f.jsx(ble,{user:b,isOpen:w,onClose:()=>{E(!1),v(null)},onSave:q}),f.jsx(vle,{isOpen:C,onClose:()=>{N(!1),k(null)},onConfirm:K,title:"Delete User",message:`Are you sure you want to delete ${A==null?void 0:A.fullName}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel"})]})]})}function Sle(){const[e,t]=I.useState([]),[n,s]=I.useState(0);yo();const[i,a]=I.useState(JSON.parse(localStorage.getItem("userData")));JSON.parse(localStorage.getItem("DoctorReservations")||"[]");const[o,c]=I.useState({workingDays:i.doctor.workingDays,vacations:i.doctor.vacations,startTime:i.doctor.startTime,endTime:i.doctor.endTime,fees:i.doctor.fees}),d=async(E,C)=>{try{await Ue.UpdateAppointmentStatus(E,C,null),await Ue.DoctorReservations(),await Ue.GetCurrentUser(),b(JSON.parse(localStorage.getItem("DoctorReservations")));const N=JSON.parse(localStorage.getItem("userData"));return a(N),tt.success(`Appointment ${C.toLowerCase()} successfully!`),!0}catch(N){return console.error("Error updating appointment:",N),tt.error(N.message||"Failed to update appointment"),!1}},[h,g]=I.useState(!1),[y,b]=I.useState([]),[v,w]=I.useState(()=>{const E=localStorage.getItem("selectedDate");return E?new Date(E):new Date});return I.useEffect(()=>{if(e.length===0){for(let E=1;E<=12;E++)E<10?e.push({key:"0"+E+":00 AM",value:"0"+E+":00 AM"}):e.push({key:E+":00 AM",value:E+":00 AM"});for(let E=1;E<=12;E++)E<10?e.push({key:"0"+E+":00 PM",value:"0"+E+":00 PM"}):e.push({key:E+":00 PM",value:E+":00 PM"});t(e)}},[e]),f.jsxs(f.Fragment,{children:[f.jsx(TB,{position:"top-right"}),f.jsxs("div",{className:"flex flex-row  justify-center space-x-10 @container",children:[f.jsxs("div",{className:"flex-col bg-white ",children:[f.jsxs(Gp,{setIndex:s,Index:0,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===0?"text-teal-800 ":"text-gray-500"} `,children:"dashboard"}),f.jsx("p",{className:`${n===0?"text-teal-800 ":"text-gray-500"} font-medium`,children:"Dashboard"})]}),f.jsxs(Gp,{setIndex:s,Index:1,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===1?"text-teal-800 ":"text-gray-500"}`,children:"calendar_today"}),f.jsx("p",{className:`${n===1?"text-teal-800 ":"text-gray-500"} font-medium`,children:"Calender Settings"})]}),f.jsxs(Gp,{setIndex:s,Index:2,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===2?"text-teal-800 ":"text-gray-500"}`,children:"calendar_today"}),f.jsx("p",{className:`${n===2?"text-teal-800 ":"text-gray-500"} font-medium`,children:"Appointments"})]}),f.jsxs(Gp,{setIndex:s,Index:3,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===3?"text-teal-800 ":"text-gray-500"}`,children:"group"}),f.jsx("p",{className:`${n===3?"text-teal-800 ":"text-gray-500"} font-medium`,children:"Patients"})]}),f.jsxs(Gp,{setIndex:s,Index:4,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===4?"text-teal-800 ":"text-gray-500"}`,children:"person_search"}),f.jsx("p",{className:`${n===4?"text-teal-800 ":"text-gray-500"} font-medium`,children:"Find Patient"})]}),f.jsxs(Gp,{setIndex:s,Index:5,currentIndex:n,children:[f.jsx("span",{className:`material-icons-round mr-3 text-xl ${n===5?"text-teal-800 ":"text-gray-500"}`,children:"reviews"}),f.jsx("p",{className:`${n===5?"text-teal-800 ":"text-gray-500"} font-medium`,children:"reviews"})]})]}),f.jsx("div",{className:"flex-col w-[80vw]  bg-gray-50 border-gray-200 border-1  p-10",children:n===0?f.jsx(Cle,{workingHours:e,user:i,setUser:a,formData:o,setFormData:c,enableVacation:h,setEnableVacation:g,appointments:y,setAppointments:b,selectedDate:v,setSelectedDate:w,Index:n}):n===1?f.jsx(Tle,{workingHours:e,user:i,setUser:a,formData:o,setFormData:c,enableVacation:h,setEnableVacation:g,appointments:y,setSelectedDate:w}):n===4?f.jsx(Ez,{}):n===5?f.jsx("div",{className:"bg-white p-15  pr-50",children:f.jsx(WB,{selectedDoctor:i.doctor})}):f.jsx(Ale,{appointments:y,updateAppointmentStatus:d,setAppointments:b,selectedDate:v,setSelectedDate:w})})]})]})}function Cle({user:r,setUser:e,formData:t,setFormData:n,enableVacation:s,setEnableVacation:i,appointments:a,setAppointments:o,setSelectedDate:c,selectedDate:d}){var Gt,_t,ap,gr,hl,yi;const[h,g]=I.useState(()=>{const Ce=localStorage.getItem("showPatientInfo");return Ce?JSON.parse(Ce):!1}),[y,b]=I.useState(0),[v,w]=I.useState(!1),[E,C]=I.useState(null),[N,A]=I.useState(""),[k,M]=I.useState(""),[O,P]=I.useState(!1),[F,H]=I.useState(!1),[ee,G]=I.useState(null),[J,V]=I.useState(""),[X,K]=I.useState(""),[q,Z]=I.useState(!1),[he,te]=I.useState(()=>{const Ce=JSON.parse(localStorage.getItem("dailyRevenue")||"{}"),rt=new Date().toISOString().split("T")[0];return{totalPatients:0,newPatients:0,revenue:(Ce==null?void 0:Ce.date)===rt&&Ce.amount||0,todayRemaining:0,rating:r.doctor.rating,servingNumber:r.doctor.servingNumber,totalFees:0}});I.useEffect(()=>{localStorage.setItem("selectedDate",d.toISOString())},[d]),I.useEffect(()=>{localStorage.setItem("showPatientInfo",JSON.stringify(h))},[h]),I.useEffect(()=>{const Ce=setInterval(()=>{const rt=new Date().toISOString().split("T")[0];JSON.parse(localStorage.getItem("dailyRevenue")||"{}").date!==rt&&te(Rs=>{const Fr={...Rs,revenue:0};return W(0),Fr})},36e5);return()=>clearInterval(Ce)},[]),I.useEffect(()=>{(async()=>{try{await Ue.DoctorReservations();const rt=JSON.parse(localStorage.getItem("DoctorReservations"));o(rt.filter(Pt=>Pt.status==="Pending")),pe([...a,...rt.filter(Pt=>Pt.status==="Pending")])}catch(rt){console.error("Error fetching appointments:",rt)}})()},[]);const pe=Ce=>{const rt=new Date;rt.setHours(0,0,0,0);const Rs=Ce.filter(Ln=>{const Js=new Date(Ln.date);return Js.setHours(0,0,0,0),Js.getTime()===rt.getTime()&&Ln.status!=="Canceled"}).filter(Ln=>Ln.status!=="Completed").length,Fr=[...new Set(Ce.map(Ln=>Ln.patientId))],Ls=new Date;Ls.setMonth(Ls.getMonth()-1);const na=Ce.filter(Ln=>new Date(Ln.date)>=Ls).reduce((Ln,Js)=>(Ln.includes(Js.patientId)||Ln.push(Js.patientId),Ln),[]).length;te(Ln=>({...Ln,totalPatients:Fr.length,newPatients:na,todayRemaining:Rs}))};function W(Ce){const rt=new Date().toISOString().split("T")[0];localStorage.setItem("dailyRevenue",JSON.stringify({date:rt,amount:Ce}))}const ne=async(Ce,rt)=>{var Pt,Rs;try{await Ue.UpdateAppointmentStatus(Ce,rt,Number.parseInt(ar,10)+r.doctor.fees),await Ue.DoctorReservations(),await Ue.GetCurrentUser(),o(JSON.parse(localStorage.getItem("DoctorReservations")).filter(Ls=>Ls.status==="Pending")),pe(JSON.parse(localStorage.getItem("DoctorReservations")).filter(Ls=>Ls.status==="Pending"));const Fr=JSON.parse(localStorage.getItem("userData"));if(e(Fr),rt==="Completed"){const Ls=((Pt=Fr==null?void 0:Fr.doctor)==null?void 0:Pt.servingNumber)??he.servingNumber,na=Number(((Rs=r==null?void 0:r.doctor)==null?void 0:Rs.fees)||0);te(Ln=>{const Js=Ln.revenue+na,Fc={...Ln,revenue:Js,servingNumber:Ls};return W(Js),Fc})}return tt.success(`Appointment ${rt.toLowerCase()} successfully!`),!0}catch(Fr){return console.error("Error updating appointment:",Fr),tt.error(Fr.message||"Failed to update appointment"),!1}},me=async()=>{if(!N||!k){tt.error("Please select both date and time");return}P(!0);try{const rt={date:new Date(`${N}T${k}`).toISOString(),doctorId:E.doctorId};await Ue.RescheduleAppointment(E.id,rt),await Ue.DoctorReservations(),o(JSON.parse(localStorage.getItem("DoctorReservations")).filter(Pt=>Pt.status==="Pending")),tt.success("Appointment rescheduled successfully!"),w(!1),C(null),A(""),M("")}catch(Ce){tt.error(Ce.message||"Failed to reschedule appointment")}finally{P(!1)}},we=Ce=>{C(Ce);const rt=new Date(Ce.date);A(rt.toISOString().split("T")[0]),M(rt.toTimeString().slice(0,5)),w(!0)},Ne=Ce=>{G(Ce),V(new Date().toISOString().split("T")[0]),K(""),H(!0)},[je,Me]=I.useState(!1),[He,Ye]=I.useState("duration"),[Qe,Ht]=I.useState(""),[En,Ge]=I.useState(((Gt=r==null?void 0:r.doctor)==null?void 0:Gt.visitDuration)||30),[Ze,Mt]=I.useState(Number(((_t=r==null?void 0:r.doctor)==null?void 0:_t.fees)||0)),[Te,Be]=I.useState(Number(((ap=r==null?void 0:r.doctor)==null?void 0:ap.servingNumber)||0)),[et,mn]=I.useState(!1),[ar,gn]=I.useState(0),[an,gi]=I.useState(null),Tn=()=>{var Ce;Ye("duration"),Ht(""),Ge(((Ce=r==null?void 0:r.doctor)==null?void 0:Ce.visitDuration)||30),Me(!0)},Nr=()=>{var Ce;Ye("fees"),Mt(Number(((Ce=r==null?void 0:r.doctor)==null?void 0:Ce.fees)||0)),Me(!0)},Ks=()=>{var Ce;Ye("serving"),Be(Number(((Ce=r==null?void 0:r.doctor)==null?void 0:Ce.servingNumber)||0)),Me(!0)};function z(Ce){Ye("extraFees"),gi((Ce==null?void 0:Ce.id)||null),gn(0),Me(!0)}async function _(){if(!et)if(mn(!0),He==="extraFees")mn(!1),Me(!1);else try{const Ce={...r.doctor};if(He==="serving"){const rt=Math.max(0,Number.parseInt(Te,10)||0);await Ue.UpdateDoctorServingNumber(rt);const Pt=JSON.parse(localStorage.getItem("userData"))||r,Rs={...Pt,doctor:{...Pt.doctor,servingNumber:rt}};localStorage.setItem("userData",JSON.stringify(Rs)),e(Rs),te(Fr=>({...Fr,servingNumber:rt})),tt.success("Serving number updated.")}else{if(He==="duration"){const Pt=Number(Qe||En||30);Ce.visitDuration=Pt}else if(He==="fees"){const Pt=Math.max(0,Number(Ze||0));Ce.fees=Pt}await Ue.UpdateOrCreateDoctorInfo({workingDays:Ce.workingDays,vacations:Ce.vacations,startTime:Ce.startTime,endTime:Ce.endTime,fees:Ce.fees,visitDuration:Ce.visitDuration}),await Ue.GetCurrentUser();const rt=JSON.parse(localStorage.getItem("userData"))||{...r,doctor:Ce};e(rt),tt.success(He==="duration"?"Visit duration updated.":"Fees updated.")}Me(!1)}catch(Ce){tt.error((Ce==null?void 0:Ce.message)||"Failed to save settings.")}finally{mn(!1)}}const D=async()=>{if(!J||!X.trim()){tt.error("Please fill in both date and description");return}Z(!0);try{const Ce={patientId:ee.patientId,date:J,description:X};await Ue.AddMedicalHistory(Ce),await Ue.DoctorReservations(),o(JSON.parse(localStorage.getItem("DoctorReservations")).filter(rt=>rt.status==="Pending")),tt.success("Medical history added successfully!"),H(!1),G(null),V(""),K("")}catch(Ce){tt.error(Ce.message||"Failed to add medical history")}finally{Z(!1)}},Y=()=>{const Ce=new Date(d);return Ce.setHours(0,0,0,0),a.filter(rt=>{const Pt=new Date(rt.date);return Pt.setHours(0,0,0,0),Pt.getTime()===Ce.getTime()}).sort((rt,Pt)=>new Date(rt.date).getTime()-new Date(Pt.date).getTime())},se=()=>{const Ce=new Date;return d.getDate()===Ce.getDate()&&d.getMonth()===Ce.getMonth()&&d.getFullYear()===Ce.getFullYear()},[oe,xe]=I.useState(Y());I.useEffect(()=>{xe(Y())},[a,d]),I.useEffect(()=>{y>=oe.length&&(b(0),g(!1)),te(Ce=>({...Ce,todayRemaining:oe.length}))},[oe,y]);const $e=(r==null?void 0:r.fullName)||"Doctor",[wt,lt]=I.useState(!1);return f.jsxs("div",{children:[f.jsxs("section",{className:"relative bg-gradient-to-br from-teal-400 to-teal-800 rounded-2xl shadow-lg overflow-hidden text-white mb-6",children:[f.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 rounded-full bg-white opacity-5"}),f.jsx("div",{className:"absolute bottom-0 left-0 -ml-12 -mb-12 w-48 h-48 rounded-full bg-white opacity-5"}),f.jsxs("div",{className:"relative z-10 px-6 py-8 md:px-10 md:py-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[f.jsxs("div",{className:"space-y-4 max-w-2xl",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight mb-2",children:["Welcome back, Dr. ",$e,"! 👋"]}),f.jsxs("p",{className:"text-teal-100 text-lg font-light",children:["You have ",f.jsxs("span",{className:"font-semibold text-white",children:[he.todayRemaining||0," patients"]})," remaining today. Your dedication makes a difference."]})]}),f.jsxs("div",{className:"flex items-center gap-6 pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg border border-white/10",children:[f.jsx("span",{className:"material-icons-round text-yellow-300 text-sm",children:"star"}),f.jsxs("span",{className:"text-sm font-medium",children:[" Rating: ",f.jsx("span",{className:"font-bold text-white",children:he.rating||5})]})]}),f.jsxs("button",{className:"flex items-center gap-2 text-sm text-teal-100 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-lg border border-white/10",onClick:Tn,children:[f.jsx("span",{className:"material-icons-round text-sm opacity-80",children:"schedule"}),f.jsxs("span",{children:["visit duration ",r.doctor.visitDuration||30," min"]})]})]})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 min-w-[200px] text-center shadow-inner",children:[f.jsx("p",{className:"text-xs uppercase tracking-wider text-teal-200 font-semibold mb-1",children:"Current Time"}),f.jsxs("div",{className:"text-3xl font-bold font-display tabular-nums",children:[new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})," ",f.jsx("span",{className:"text-sm font-medium text-teal-200",children:new Date().toLocaleTimeString().split(" ")[1]})]}),f.jsx("div",{className:"h-px w-full bg-white/20 my-3"}),f.jsx("p",{className:"text-sm font-medium text-teal-50",children:new Date().toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric",year:"numeric"})})]})]})]}),f.jsxs("div",{className:"px-2 sm:px-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6 max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex flex-row bg-white rounded-xl p-6 shadow-sm border border-gray-100",style:{gap:"35%"},onClick:Nr,role:"button","aria-haspopup":"dialog",children:[f.jsxs("div",{className:" flex flex-col ",children:[f.jsx("div",{className:"flex justify-between items-start mb-4",children:f.jsx("div",{className:"p-2 bg-gray-900 rounded-lg text-white",children:f.jsx("span",{className:"material-icons-round text-xl",children:"payments"})})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Today's Revenue"}),f.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:Number(he.revenue)||0}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"EGP"})]})]}),f.jsxs("div",{className:"flex flex-col ",children:[f.jsx("span",{className:"self-end bg-green-200 p-2 mb-7 rounded text-sm text-gray-700",children:"Edit Fees"}),f.jsx("p",{className:" text-sm text-gray-500 font-medium",children:"Fee per Visit"}),f.jsxs("p",{className:" flex items-end text-gray font-bold text-2xl",children:[" ",r.doctor.fees," "]}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"EGP"})]})]}),f.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 flex flex-col justify-between",children:[f.jsx("div",{className:"flex justify-between items-start mb-4",children:f.jsx("div",{className:"p-2 bg-gray-900 rounded-lg text-white",children:f.jsx("span",{className:"material-icons-round text-xl",children:"group"})})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total Patients"}),f.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:Number(he.totalPatients)||0}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Patients"})]})]}),f.jsx("div",{className:" bg-white rounded-xl p-6 shadow-sm border border-gray-100 flex flex-col justify-between",children:f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-gray-500  uppercase tracking-wide font-medium  flex items-center",children:[" ",f.jsx("span",{className:"material-icons-round text-xl pr-2 ",children:"confirmation_number"})," Serving Number"]}),f.jsxs("h3",{className:"text-5xl font-black text-gray-900  mt-1 tabular-nums tracking-tight",children:["#",he.servingNumber]})]}),f.jsx("div",{className:"mb-1 flex items-center gap-2",children:f.jsxs("button",{className:"rounded-md bg-white  px-3 py-1.5 text-xs font-semibold text-gray-900 hadow-sm ring-1 ring-inset ring-gray-300  hover:bg-gray-50 transition-colors  flex",onClick:async()=>{await Ue.UpdateDoctorServingNumber(0),te(Ce=>({...Ce,servingNumber:0}))},children:[f.jsx("span",{className:"material-icons-round !text-[15px]  pr-2 ",children:"replay"})," Reset"]})})]}),f.jsx("div",{className:"mt-4 pt-4  flex gap-2",children:f.jsxs("button",{className:"flex-1 bg-[#14B8A6] active:bg-teal-700 text-white text-sm font-semibold py-2.5 px-3 rounded-lg shadow-sm hover:shadow transition-all flex items-center justify-center gap-2 group/btn",onClick:Ks,children:[f.jsx("span",{children:"SETTINGS"}),f.jsx("span",{className:"material-icons-round text-lg group-hover/btn:translate-x-0.5 transition-transform",children:"edit"})]})})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6 max-w-[1700px] mx-auto",children:[f.jsx("div",{className:`@container ${h?"lg:col-span-3 ":"lg:col-span-4 "} `,children:f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[f.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[f.jsx("h3",{className:"font-bold text-gray-900",children:"Upcoming Reservations"}),f.jsx("span",{className:"text-sm font-medium text-gray-500 bg-white px-3 py-1 rounded border border-gray-200",children:new Date(d).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]}),f.jsxs("div",{className:"divide-y divide-gray-100",children:[oe.length>0&&f.jsx("div",{className:"bg-[#0F766E]/5",children:f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"relative",children:f.jsx("div",{className:"w-15 h-15 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:(gr=oe[0].user)!=null&&gr.imageUrl?f.jsx("img",{src:oe[0].user.imageUrl,alt:"Patient",className:"h-15 w-15 rounded-full object-cover z-1 ml-1",onError:Ce=>{Ce.currentTarget.src=Lc}}):f.jsx("span",{className:"material-icons-round",children:"person"})})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-900",children:oe[0].user.fullName||"Patient"}),f.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-700",children:[f.jsx("span",{className:"material-icons-round text-base text-[#0F766E]",children:"schedule"}),f.jsx("span",{children:new Date(oe[0].date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),f.jsx("span",{className:"mx-1 text-gray-300",children:"|"}),f.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Next in 30min"})]})]})]}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("button",{className:"  self-end px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors",onClick:()=>we(oe[0]),children:f.jsxs("span",{className:"flex items-center gap-2  ",children:[" ",f.jsx("span",{className:"material-icons-round",children:"event_repeat"})," Reschedule"]})}),f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx("button",{className:"px-3 py-1.5 text-xs font-medium hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition-colors rounded",onClick:async()=>{z(oe[0])},children:f.jsxs("span",{className:"items-center gap-2 flex ",children:[" ",f.jsx("span",{className:"material-icons-round",children:"add_circle"})," extra fees ",Number(ar)||0]})}),f.jsx("button",{className:"px-6 py-1.5 text-xs font-medium hover:bg-gray-200 text-gray-500 hover:text-gray-700 transition-colors rounded disabled:opacity-50",disabled:wt,onClick:async()=>{lt(!0);try{await ne(oe[0].id,"Completed")}finally{gn(0),lt(!1),g(!1)}},children:f.jsxs("span",{className:"items-center gap-2 flex ",children:[" ",f.jsx("span",{className:"material-icons-round",children:"arrow_outward"})," ",wt?"Dismissing...":"Dismiss"]})})]})]})]}),f.jsxs("div",{className:"mt-4 flex items-center justify-between bg-white p-3 rounded-lg border border-gray-100",children:[f.jsx("p",{className:"text-sm text-gray-600 italic",children:oe[0].visitPurpose}),f.jsx("button",{className:"text-xs font-medium text-[#0F766E] hover:underline",onClick:()=>g(Ce=>!Ce),children:h?"Close Details":"More Details"})]})]})}),oe.slice(1).map(Ce=>{var rt;return f.jsx("div",{className:"p-5 hover:bg-gray-50 transition-colors",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-400",children:(rt=oe[0].user)!=null&&rt.imageUrl?f.jsx("img",{src:oe[0].user.imageUrl,alt:"Patient",className:"h-22 w-22 rounded-full object-cover z-1 ml-1",onError:Pt=>{Pt.currentTarget.src=Lc}}):f.jsx("span",{className:"material-icons-round",children:"person"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:Ce.user.fullName||"Patient"}),f.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[f.jsx("span",{className:"text-xs text-gray-500",children:Ce.type||"Visit"}),f.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),f.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[f.jsx("span",{className:"material-icons-round text-[10px]",children:"schedule"}),new Date(Ce.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),f.jsx("div",{className:"flex gap-2 opacity-60 hover:opacity-100 transition-opacity",children:f.jsx("button",{className:"p-1.5 rounded hover:bg-gray-100 text-gray-500",title:"Reschedule",onClick:()=>we(Ce),children:f.jsx("span",{className:"material-icons-round text-lg",children:"edit_calendar"})})})]})},Ce.id)})]}),oe.length===0&&f.jsxs("div",{className:"py-8 text-center text-gray-500",children:[f.jsx(GZ,{className:"mx-auto mb-2 h-8 w-8 text-gray-400"}),f.jsxs("p",{children:["No appointments scheduled for ",se()?"today":"this date","."]})]})]})}),h&&oe.length>y?f.jsx("div",{className:"lg:col-span-3",children:f.jsx(ele,{appointment:oe,Index:y,user:r,setUser:e,onAddHistory:Ne})}):f.jsx("div",{className:" lg:col-span-2",children:f.jsx(D7,{appointments:a,onDateSelect:Ce=>c(Ce),user:r,formData:t,setFormData:n,enableVacation:s,setEnableVacation:i})})]})]}),je&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[f.jsxs("div",{className:"sm:flex sm:items-start",children:[f.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:f.jsx("span",{className:"material-icons-round text-blue-600",children:He==="duration"?"schedule":He==="fees"?"payments":He==="serving"?"confirmation_number":"add_circle"})}),f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 ",id:"modal-title",children:He==="duration"?"Adjust Visit Duration":He==="fees"?"Standard Fee Per Visit":He==="serving"?"Edit Serving Number":"Additional Fees"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500 mb-4",children:He==="duration"?"Set the default duration for patient visits. This will affect future appointment scheduling.":He==="fees"?"The base cost for a regular patient consultation.":He==="serving"?"Update your current serving number":"Add surcharge for specialized procedures or materials"}),He==="duration"?f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"preset-duration",children:"Quick Preset"}),f.jsxs("select",{id:"preset-duration",name:"preset-duration",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300  focus:outline-none focus:ring-[#0F766E] focus:border-[#0F766E] sm:text-sm rounded-md shadow-sm h-10",value:Qe,onChange:Ce=>Ht(Ce.target.value),children:[f.jsx("option",{value:"",children:"Select..."}),f.jsx("option",{value:"15",children:"15 min"}),f.jsx("option",{value:"30",children:"30 min"}),f.jsx("option",{value:"45",children:"45 min"}),f.jsx("option",{value:"60",children:"60 min"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"duration",children:"Custom Duration"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("input",{id:"duration",name:"duration",type:"number",min:"5",step:"5",className:"focus:ring-[#0F766E] focus:border-[#0F766E] block w-full pl-3 pr-12 sm:text-sm border-gray-300 rounded-md h-10",value:En,onChange:Ce=>Ge(Ce.target.value),placeholder:"30"}),f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:f.jsx("span",{className:"text-gray-500 sm:text-sm",children:"min"})})]})]})]}):He==="fees"?f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"fee-input",children:"Base Consultation Fee"}),f.jsxs("div",{className:"mt-1 relative  w-70 border-gray-300 border rounded-md shadow-sm",children:[f.jsx("input",{id:"fee-input",name:"fee-input",className:"focus:ring-[#0F766E] focus:border-[#0F766E] block  pl-3 pr-10 sm:text-sm border-gray-500 rounded-md h-10 w-full",value:Ze,onChange:Ce=>Mt(Ce.target.value),placeholder:"0"}),f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:f.jsx("span",{className:"text-gray-500 sm:text-sm",children:"/ visit"})})]}),f.jsx("p",{className:"text-[12px] text-gray-500  mt-2",children:" This amount will be automatically applied to new  reservations."})]}):He==="serving"?f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 ",htmlFor:"serving-input",children:"Serving Number"}),f.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[f.jsx("input",{id:"serving-input",name:"serving-input",type:"number",min:"0",step:"1",className:"focus:ring-[#0F766E] focus:border-[#0F766E] block w-full pl-3 pr-10 sm:text-sm border-gray-300   rounded-md h-10",value:Te,onChange:Ce=>Be(Ce.target.value),placeholder:"0"}),f.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:f.jsx("span",{className:"text-gray-500 sm:text-sm",children:"#"})})]})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Extra fees amount (EGP)"}),f.jsx("input",{type:"number",min:"0",step:"0.01",value:ar,onChange:Ce=>gn(Ce.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"0.00"}),an&&f.jsxs("p",{className:"text-xs text-gray-400",children:["For appointment \\#",an]})]})]})]})]}),f.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[f.jsxs("button",{className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#0F766E] text-base font-medium text-white hover:bg-[#0F766E]-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0F766E] sm:ml-3 sm:w-auto sm:text-sm",type:"button",onClick:_,disabled:et,children:[et&&f.jsx(If,{className:"h-4 w-4 animate-spin"}),et?"Saving...":"Save Changes"]}),f.jsx("button",{className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300  shadow-sm px-4 py-2 bg-white  text-base font-medium text-gray-700 0 hover:bg-gray-50  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#0F766E] sm:mt-0 sm:w-auto sm:text-sm",type:"button",onClick:()=>Me(!1),children:"Cancel"})]})]})}),v&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Reschedule Appointment"}),f.jsx("button",{onClick:()=>{w(!1),C(null)},className:"text-gray-500 hover:text-gray-700",children:f.jsx(A6,{size:20})})]}),E&&f.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[f.jsxs("p",{className:"text-sm text-gray-600",children:["Patient: ",f.jsx("span",{className:"font-medium text-gray-900",children:(hl=E.user)==null?void 0:hl.fullName})]}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Current: ",f.jsx("span",{className:"font-medium text-gray-900",children:new Date(E.date).toLocaleString()})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Date"}),f.jsx("input",{type:"date",value:N,onChange:Ce=>A(Ce.target.value),min:new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Time"}),f.jsx("input",{type:"time",value:k,onChange:Ce=>M(Ce.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>{w(!1),C(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:me,disabled:O,className:"px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[O&&f.jsx(If,{className:"w-4 h-4 animate-spin"}),O?"Rescheduling...":"Reschedule"]})]})]})}),F&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4 shadow-xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Add Medical History"}),f.jsx("button",{onClick:()=>{H(!1),G(null)},className:"text-gray-500 hover:text-gray-700",children:f.jsx(A6,{size:20})})]}),ee&&f.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[f.jsxs("p",{className:"text-sm text-gray-600",children:["Patient: ",f.jsx("span",{className:"font-medium text-gray-900",children:(yi=ee.user)==null?void 0:yi.fullName})]}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Visit Purpose: ",f.jsx("span",{className:"font-medium text-gray-900",children:ee.visitPurpose})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),f.jsx("input",{type:"date",value:J,onChange:Ce=>V(Ce.target.value),max:new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),f.jsx("textarea",{value:X,onChange:Ce=>K(Ce.target.value),placeholder:"Enter medical history details, diagnosis, treatment notes, etc.",rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[f.jsx("button",{onClick:()=>{H(!1),G(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:D,disabled:q,className:"px-4 py-2 bg-green-500 text-white hover:bg-green-600 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[q&&f.jsx(If,{className:"w-4 h-4 animate-spin"}),q?"Adding...":"Add Medical History"]})]})]})})]})}function Gp({children:r,setIndex:e,Index:t,currentIndex:n}){const s=t===n;return f.jsx("div",{className:"flex flex-row items-center gap-3",children:f.jsx("button",{onClick:()=>{e(t),console.log(t)},className:`inline-flex w-full px-7 py-4 text-gray-800 hover:bg-blue-100 cursor-pointer ${s?"bg-gradient-custom":""}`,children:r})})}function Ele({workingHours:r,formData:e,setFormData:t,enableVacation:n,setEnableVacation:s}){function i(h){const{name:g,value:y}=h.target;t(b=>({...b,[g]:Nle(y)}))}function a(h){t(g=>({...g,vacations:(g.vacations||[]).filter(y=>y!==h)})),tt.success("Vacation removed.")}function o(h){t(g=>{const b=g.workingDays.includes(h)?g.workingDays.filter(v=>v!==h):[...g.workingDays,h];return{...g,workingDays:b}})}function c(h){try{return new Date(h).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}catch{return h}}const d=["SUN","MON","TUE","WED","THU","FRI","SAT"];return f.jsxs("div",{className:"bg-white p-5 w-full max-w-[760px] min-w-[450px]",children:[f.jsxs("div",{className:"mb-6 ",children:[f.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"material-icons-round text-gray-400 text-lg",children:"date_range"}),"Default Working Days"]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(h=>{const g=e.workingDays.includes(h);return f.jsx("button",{type:"button",onClick:()=>o(h),className:g?"w-12 h-10 rounded-lg text-sm font-bold transition-all text-[#14B8A6] bg-[#14B8A6]/10 border border-[#14B8A6]":"w-12 h-10 rounded-lg text-sm font-medium transition-all text-gray-500 bg-gray-50 border border-gray-200 hover:bg-gray-100",children:h.slice(0,3)},h)})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[f.jsx("span",{className:"material-icons-round text-gray-400 text-lg",children:"beach_access"}),"Planned Vacations"]}),f.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-blue-900",children:Array.isArray(e.vacations)&&e.vacations.length>0?`${e.vacations.length} vacation day(s) selected.`:"No vacations scheduled for this month."}),f.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Select days on the calendar to mark as off."})]}),f.jsx("button",{type:"button",onClick:()=>s(!n),className:"px-4 py-2 bg-white text-blue-600 text-sm font-medium rounded-md shadow-sm border border-blue-100 hover:bg-blue-50 transition-colors",children:n?"Done":"Edit"})]}),Array.isArray(e.vacations)&&e.vacations.length>0&&f.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:e.vacations.map(h=>f.jsxs("button",{type:"button",onClick:()=>a(h),className:"group inline-flex items-center gap-1 px-3 py-1.5 rounded-full bg-white border border-blue-200 text-blue-700 text-xs font-medium hover:bg-blue-50 hover:border-blue-300 transition-colors",title:"Click to remove",children:[f.jsx("span",{className:"material-icons-round text-[14px] text-blue-500 group-hover:text-blue-700",children:"event_busy"}),f.jsx("span",{children:c(h)})]},h))})]})]}),f.jsxs("div",{className:"mb-6 bg-gray-50 rounded-xl p-5 border border-gray-200",children:[f.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[f.jsx("span",{className:"material-icons-round text-gray-400 text-lg",children:"schedule"}),"Working Hours"]}),f.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[f.jsxs("div",{className:"w-full md:w-auto flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide",children:"Start Time"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{className:"block bg-white  w-full pl-10 pr-15 py-2.5 text-base border-gray-300  rounded-lg shadow-sm appearance-none",name:"startTime",value:wP(e.startTime),onChange:i,children:r.map(({key:h,value:g},y)=>f.jsx("option",{value:g,children:h},y))}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-3 text-gray-500",children:f.jsx("span",{className:"material-icons-round text-lg",children:"wb_sunny"})}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500",children:f.jsx("span",{className:"material-icons-round text-lg",children:"expand_more"})})]})]}),f.jsx("div",{className:"hidden md:flex items-center justify-center pt-6 text-gray-400",children:f.jsx("span",{className:"material-icons-round",children:"arrow_forward"})}),f.jsx("div",{className:"md:hidden flex items-center justify-center text-gray-400 rotate-90 my-[-10px]",children:f.jsx("span",{className:"material-icons-round",children:"arrow_forward"})}),f.jsxs("div",{className:"w-full md:w-auto flex-1",children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide",children:"End Time"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{className:"block bg-white  w-full pl-10 pr-15 py-2.5 text-base border-gray-300  rounded-lg shadow-sm appearance-none",name:"endTime",value:wP(e.endTime),onChange:i,children:r.map(({key:h,value:g},y)=>f.jsx("option",{value:g,children:h},y))}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-3 text-gray-500",children:f.jsx("span",{className:"material-icons-round text-lg",children:"nights_stay"})}),f.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500",children:f.jsx("span",{className:"material-icons-round text-lg",children:"expand_more"})})]})]})]})]})]})}function Tle({user:r,formData:e,setFormData:t,enableVacation:n,setEnableVacation:s,workingHours:i,setUser:a,setSelectedDate:o}){async function c(){try{await Ue.UpdateOrCreateDoctorInfo(e),await Ue.GetCurrentUser();const h=JSON.parse(localStorage.getItem("userData"));a(h),tt.success("Changes saved to the server.")}catch(h){tt.error((h==null?void 0:h.message)||"Failed to save changes.")}}function d(){const h=(r==null?void 0:r.doctor)||{};t({workingDays:h.workingDays||[],vacations:h.vacations||[],startTime:h.startTime||"08:00:00.000000",endTime:h.endTime||"16:00:00.000000",fees:h.fees||0}),tt.success("Reset local changes.")}return f.jsxs("div",{className:"flex flex-col bg-white border-gray-200 rounded-lg shadow-xs p-10 w-[80-vw] min-xl:h-[60vh] max-w-[1350px] mx-auto",children:[f.jsxs("div",{className:"flex flex-row justify-between items-center p-5 max-w-[1180px]",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("p",{className:"text-lg font-bold text-gray-900 flex",children:[f.jsx("span",{className:"material-icons-round text-[#14B8A6] pr-2",children:"edit_calendar"}),"Availability Settings"]}),f.jsx("p",{className:"text-sm text-gray-500 ",children:"Manage your working days and clinic hours ."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",onClick:d,children:[f.jsx("span",{className:"material-icons-round text-lg",children:"undo"}),"Reset"]}),f.jsxs("button",{type:"button",className:"flex items-center gap-2 px-4 py-2 bg-[#14B8A6] text-white rounded-lg text-sm font-medium hover:bg-[#14B8A6]/90 transition-colors shadow-sm",onClick:c,children:[f.jsx("span",{className:"material-icons-round text-lg",children:"save"}),"Save Changes"]})]})]}),f.jsxs("div",{className:" flex flex-wrap items-start justify-center gap-8",children:[f.jsx("div",{className:"flex-1 basis-[360px] max-w-[410px] min-w-[320px] mt-4",children:f.jsx(D7,{appointments:[],onDateSelect:h=>o(h),user:r,formData:e,setFormData:t,enableVacation:n,setEnableVacation:s})}),f.jsx("div",{className:"flex-1 basis-[520px] min-w-[420px] max-w-[860px]",children:f.jsx(Ele,{workingHours:i,setUser:a,formData:e,setFormData:t,enableVacation:n,setEnableVacation:s})})]})]})}function Ale({appointments:r,setAppointments:e,selectedDate:t,setSelectedDate:n}){const[s,i]=I.useState(!1);I.useEffect(()=>{const c=JSON.parse(localStorage.getItem("DoctorReservations"))||[];e(c)},[e]);const a=(()=>{const c=new Date(t);return c.setHours(0,0,0,0),c.getTime()})(),o=(r||[]).filter(c=>{const d=new Date(c.date);return d.setHours(0,0,0,0),d.getTime()===a});return f.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow overflow-hidden",children:[f.jsxs("div",{className:"bg-white p-4 border-b border-gray-300 flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"All Patient Appointments"}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{type:"button",className:"text-sm font-medium text-gray-600 bg-white px-3 py-1 rounded border border-gray-200 hover:bg-gray-50 flex items-center gap-2",onClick:()=>i(c=>!c),"aria-haspopup":"dialog","aria-expanded":s,children:[f.jsx("span",{className:"material-icons-round text-base text-gray-500",children:"calendar_today"}),new Date(t).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})]}),s&&f.jsx("div",{className:"absolute right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-md p-2 z-10",children:f.jsx("input",{type:"date",className:"border border-gray-300 rounded-md px-2 py-1 text-sm",value:new Date(t).toISOString().split("T")[0],onChange:c=>{const d=new Date(c.target.value);n(d),i(!1)}})})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full table-fixed divide-y divide-gray-200 text-xs sm:text-sm",children:[f.jsxs("colgroup",{children:[f.jsx("col",{className:"w-[25%]"}),f.jsx("col",{className:"w-[25%]"}),f.jsx("col",{className:"w-[15%]"}),f.jsx("col",{className:"w-[15%]"})]}),f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),f.jsx("th",{className:"px-8 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o&&o.length>0?o.map((c,d)=>{var h,g,y;return f.jsxs("tr",{className:`${c.status==="Canceled"?"bg-red-50":c.status==="Completed"?"bg-green-50":c.status==="Confirmed"?"bg-blue-50":""} hover:bg-gray-50`,children:[f.jsxs("td",{className:"px-10 py-3 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[220px]",children:((h=c.user)==null?void 0:h.fullName)||"Patient"}),f.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.patientId]})]}),f.jsxs("td",{className:"py-3 whitespace-nowrap",children:[f.jsx("div",{className:"text-sm text-gray-900 truncate max-w-[220px]",children:(g=c.user)==null?void 0:g.email}),f.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[220px]",children:(y=c.user)==null?void 0:y.phoneNumber})]}),f.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-500 ",children:f.jsxs("div",{className:"flex-col justify-center ",children:[f.jsx("div",{children:new Date(c.date).toLocaleDateString()}),f.jsx("div",{children:new Date(c.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),f.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-center",children:f.jsx("span",{className:`px-2 inline-flex justify-center text-xs leading-5 font-semibold rounded-full ${c.status==="Canceled"?"bg-red-100 text-red-800":c.status==="Completed"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:c.status})})]},d)}):f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No appointments found for the selected date."})})})]})})]})}function wP(r){const[e,t]=r.split(":");let n=parseInt(e,10);const s=n>=12?"PM":"AM";return n=n%12||12,`${n.toString().padStart(2,"0")}:${t} ${s}`}function Nle(r){const[e,t]=r.split(" ");let[n,s]=e.split(":").map(Number);return t==="PM"&&n!==12&&(n+=12),t==="AM"&&n===12&&(n=0),`${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:00.000000`}function SP(r){try{const e=new Date(r);return isNaN(e)?"":e.toLocaleString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return""}}function kle(){var q,Z,he,te;const{id:r}=cB(),e=dl(),t=yo(),[n,s]=I.useState(()=>{var pe;return((pe=e.state)==null?void 0:pe.reservation)||null}),[i,a]=I.useState(!((q=e.state)!=null&&q.reservation)),[o,c]=I.useState(!1),[d,h]=I.useState(!1),[g,y]=I.useState(!1),[b,v]=I.useState(!0),[w,E]=I.useState(""),[C,N]=I.useState(""),[A,k]=I.useState(),M=I.useMemo(()=>{const pe=Number(r||(n==null?void 0:n.id));return Number.isFinite(pe)?pe:null},[r,n]);I.useEffect(()=>{let pe=!0;async function W(){if(!n&&M){a(!0);try{const me=(await Ue.GetAllReservations()||[]).find(we=>String(we.id)===String(M));if(pe)if(me){s(me);const we=new Date(me.date);isNaN(we)||(E(we.toISOString().slice(0,10)),N(we.toTimeString().slice(0,5)))}else tt.error("Reservation not found")}catch(ne){tt.error(ne.message||"Failed to load reservation")}finally{pe&&a(!1)}}}return W(),()=>{pe=!1}},[M,n]);const O=((Z=n==null?void 0:n.doctor)==null?void 0:Z.fullName)||"Doctor",P=((he=n==null?void 0:n.doctor)==null?void 0:he.specialty)||(n==null?void 0:n.specialty)||"",F=(n==null?void 0:n.doctor.city)||(n==null?void 0:n.clinic)||"",H=(n==null?void 0:n.doctorId)||((te=n==null?void 0:n.doctor)==null?void 0:te.id),ee=n==null?void 0:n.status,G=I.useMemo(()=>{var ne;const pe=new Set,W=((ne=n==null?void 0:n.doctor)==null?void 0:ne.reservationDates)||[];if(!w||!Array.isArray(W))return pe;for(const me of W){const we=$B(me);if(isNaN(we))continue;we.toISOString().slice(0,10)===w&&pe.add(hr(we,"HH:mm"))}return pe},[n,w]),J=I.useMemo(()=>{const pe=[],W=(n==null?void 0:n.doctor)||{},ne=W.startTime,me=W.endTime,we=W.visitDuration||30,Ne=Array.isArray(W.workingDays)?W.workingDays:n==null?void 0:n.workingDays;if(!ne||!me||!we||!w)return pe;if(Array.isArray(Ne)&&Ne.length>0){const He={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6},Ye=new Set(Ne.map(Ht=>He[Ht])),Qe=Hy(new Date(w));if(!Ye.has(Qe))return pe}const je=Ac(ne,"HH:mm:ss",new Date),Me=Ac(me,"HH:mm:ss",new Date);for(;je<Me;){const He=hr(je,"HH:mm");je.setMinutes(je.getMinutes()+Number(we));const Ye=hr(je,"HH:mm");pe.push({startTime:He,endTime:Ye,disabled:G.has(He)})}return pe},[n,G,w]);async function V(){if(M){c(!0);try{await Ue.UpdateAppointmentStatus(M,"Confirmed",null),tt.success("Reservation confirmed"),s(pe=>pe&&{...pe,status:"Confirmed"})}catch(pe){tt.error(pe.message||"Failed to confirm")}finally{c(!1)}}}async function X(){if(M&&confirm("Cancel this reservation?")){h(!0);try{await Ue.CancelAppointment({id:M}),tt.success("Reservation canceled"),t("/settings")}catch(pe){tt.error(pe.message||"Failed to cancel")}finally{h(!1)}}}async function K(){if(!M||!H){tt.error("Missing doctor or reservation id");return}if(!w||!C){tt.error("Please select date and time");return}y(!0);try{const pe=new Date(`${w}T${C}`).toISOString();await Ue.RescheduleAppointment(M,{date:pe,queueNumber:A}),tt.success("Reservation updated"),s(W=>W&&{...W,date:pe})}catch(pe){tt.error(pe.message||"Failed to reschedule")}finally{y(!1)}}return f.jsx("main",{className:"flex-1 flex justify-center py-8 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex flex-col max-w-5xl flex-1 gap-8",children:[f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[f.jsx("button",{className:"hover:text-primary",onClick:()=>t(-1),children:"Appointments"}),f.jsx("span",{className:"material-icons-round text-base",children:"chevron_right"}),f.jsx("span",{children:"Reservation Details"})]}),f.jsxs("div",{className:"flex flex-wrap justify-between items-end gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-slate-900 text-3xl md:text-4xl font-black leading-tight tracking-tight",children:ee==="Confirmed"?"Confirmed Appointment":"Upcoming Appointment"}),f.jsx("p",{className:"text-slate-500 text-base font-normal mt-2",children:i?"Loading details…":`Review details and confirm your visit with ${O}.`})]}),ee!=="Confirmed"&&f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-50 text-amber-700 rounded-full border border-amber-200 text-sm font-bold",children:[f.jsx("span",{className:"material-icons-round text-lg",children:"warning"}),"ACTION REQUIRED"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-6",children:[f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[f.jsxs("div",{className:"p-6 sm:p-8 flex flex-col sm:flex-row gap-6 items-start sm:items-center border-b border-slate-100",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-2xl size-24 shadow-inner",style:{backgroundImage:`url(${(n==null?void 0:n.doctorAvatar)||"https://lh3.googleusercontent.com/aida-public/AB6AXuD33IDrJYGFQShTv_fqFAA65KOwiylTrhMy-rG24qJ0A3p71qlPsQOw7F-nM8iXIAK88btUsWNasz163gBwOA1T-191RrPeMGhS8ePAe1iJZWO3I66wcMGDZqy9F9GzvKmjd9si_u0A9VPbM55lNzGCgOjzeWZEdzwtJAkMqzbJ7cQIxLQkQwPUt8oMJsEmmJNuQf7OA4v2CPstuj6d6jvr4iYpJ7OhURVHd8cx8c8EeT7XSRo6Zk2WNV8Yd6y_G4KWLwcnQ8mzr7E"})`}}),f.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 size-5 rounded-full border-4 border-white"})]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("h3",{className:"text-slate-900 text-2xl font-bold",children:O}),P&&f.jsxs("p",{className:"text-primary font-medium flex items-center gap-1",children:[f.jsx("span",{className:"material-icons-round text-lg",children:"favorite"}),P]}),F&&f.jsxs("p",{className:"text-slate-500 text-sm flex items-center gap-1 mt-1",children:[f.jsx("span",{className:"material-icons-round text-lg",children:"location_on"}),F]})]})]}),f.jsx("div",{className:"p-6 sm:p-8 bg-slate-50/50",children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-8 gap-x-12",children:[f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-slate-500 text-xs uppercase font-bold tracking-wider",children:"Date & Time"}),f.jsxs("div",{className:"flex items-center gap-3 text-slate-900 font-semibold text-lg",children:[f.jsx("span",{className:"material-icons-round text-primary",children:"calendar_month"}),n!=null&&n.date?SP(n.date):"—"]})]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-slate-500 text-xs uppercase font-bold tracking-wider",children:"Status"}),f.jsxs("div",{className:"flex items-center gap-3 text-slate-900 font-semibold text-lg",children:[f.jsx("span",{className:"material-icons-round text-primary",children:"event_available"}),ee||"Pending"]})]}),(n==null?void 0:n.visitPurpose)&&f.jsxs("div",{className:"flex flex-col gap-1 sm:col-span-2",children:[f.jsx("span",{className:"text-slate-500 text-xs uppercase font-bold tracking-wider",children:"Reason for Visit"}),f.jsx("p",{className:"text-slate-900 font-medium",children:n.visitPurpose})]})]})}),f.jsxs("div",{className:"p-6 sm:p-8 border-t border-slate-200 flex flex-col sm:flex-row gap-4 justify-between items-center",children:[f.jsxs("button",{className:"w-full sm:w-auto flex-1 bg-blue-900 hover:bg-primary-dark text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-2 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",onClick:V,disabled:o||ee==="Confirmed",children:[o?f.jsx("span",{className:"loader text-sm","aria-label":"loading"}):f.jsx("span",{className:"material-icons-round",children:"check_circle"}),ee==="Confirmed"?"Confirmed":"Confirm Reservation"]}),f.jsxs("div",{className:"flex w-full sm:w-auto gap-3",children:[f.jsxs("button",{className:"flex-1 sm:flex-none bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-2 transition-colors",onClick:()=>v(pe=>!pe),children:[f.jsx("span",{className:"material-icons-round",children:"edit_calendar"}),b?"Hide Reschedule":"Reschedule"]}),f.jsx("button",{className:"flex-1 sm:flex-none text-red-600 hover:text-red-700 hover:bg-red-50 font-bold py-3.5 px-4 rounded-xl flex items-center justify-center transition-colors disabled:opacity-50",title:"Cancel Reservation",onClick:X,disabled:d,children:d?f.jsx("span",{className:"loader","aria-label":"loading"}):f.jsx("span",{className:"material-icons-round",children:"close"})})]})]})]}),b&&f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:f.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[f.jsx("span",{className:"material-icons-round text-primary",children:"edit_calendar"}),"Reschedule Appointment"]})}),f.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Select new date"}),f.jsx("input",{type:"date",className:"mt-2 rounded-lg border border-slate-300 px-3 py-2 w-full",value:w,onChange:pe=>{E(pe.target.value),N("")}}),f.jsx("div",{className:"mt-4 text-sm font-semibold text-slate-700",children:"Available Time Slots"}),f.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[!w&&f.jsx("div",{className:"text-sm text-slate-500 col-span-2",children:"Select a date to view time slots."}),w&&J.length===0&&f.jsx("div",{className:"text-sm text-slate-500 col-span-2",children:"No available slots for this date."}),J.map((pe,W)=>f.jsx("button",{className:"border border-slate-200 py-2 px-3 rounded-lg text-sm "+(pe.disabled?"text-slate-300 cursor-not-allowed":"text-slate-600 hover:border-primary hover:text-primary")+(C===pe.startTime?" bg-primary/10 border-primary text-primary font-bold":""),disabled:pe.disabled,onClick:()=>{k(W),N(pe.startTime)},children:hr(Ac(pe.startTime,"HH:mm",new Date),"h:mm a")},`${pe.startTime}-${pe.endTime}`))]})]}),f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("span",{className:"font-bold text-slate-900",children:"Overview"}),f.jsxs("div",{className:"rounded-xl border border-slate-200 p-4 bg-slate-50",children:[f.jsx("div",{className:"text-sm text-slate-600",children:"New Date & Time"}),f.jsx("div",{className:"font-bold text-slate-900",children:w&&C?SP(`${w}T${C}`):"—"})]}),f.jsx("button",{className:"mt-auto w-full bg-slate-900 text-white font-bold py-3 px-4 rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",onClick:K,disabled:g||!w||!C,children:g?"Updating…":"Update Reservation"})]})]})]})]}),f.jsxs("div",{className:"flex flex-col gap-6",children:[f.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[f.jsx("div",{className:"p-4 border-b border-slate-100",children:f.jsx("h3",{className:"font-bold text-slate-900",children:"Location"})}),f.jsxs("div",{className:"h-48 w-full bg-slate-200 relative",children:[f.jsx("div",{className:"absolute inset-0 bg-slate-200 opacity-50"}),f.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[f.jsx("div",{className:"size-16 rounded-full bg-primary/20 animate-pulse absolute"}),f.jsx("span",{className:"material-icons-round text-4xl text-primary drop-shadow-md z-10",children:"location_on"})]}),f.jsx("div",{className:"absolute bottom-3 left-3 bg-white px-3 py-1 rounded shadow text-xs font-bold text-slate-700",children:F||"Heart Center, CA"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("p",{className:"text-sm text-slate-600 mb-3",children:n==null?void 0:n.doctor.address}),f.jsxs("a",{className:"text-primary text-sm font-bold flex items-center gap-1 hover:underline",href:"#",children:["Get Directions",f.jsx("span",{className:"material-icons-round text-sm",children:"open_in_new"})]})]})]}),f.jsx("div",{className:"bg-primary/5 rounded-2xl border border-primary/20 p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"bg-white rounded-lg p-2 text-primary shadow-sm",children:f.jsx("span",{className:"material-icons-round",children:"description"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-slate-900 mb-1",children:"Preparation Instructions"}),f.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-3",children:"Please bring your ID and insurance card. Fasting is required for 8 hours prior to the blood work."}),f.jsx("a",{className:"text-sm font-bold text-primary",href:"#",children:"Read full guidelines"})]})]})}),f.jsx("div",{className:"text-center mt-2",children:f.jsxs("p",{className:"text-sm text-slate-500",children:["Need help? ",f.jsx("a",{className:"text-primary font-bold hover:underline",href:"#",children:"Contact Support"})]})})]})]})]})})}function Mle(){return f.jsxs(vG,{children:[f.jsx(ya,{path:"/",element:f.jsxs(f.Fragment,{children:[f.jsx(LZ,{}),f.jsx(C6,{})]})}),f.jsx(ya,{path:"/admin",element:f.jsx(BZ,{children:f.jsx(wle,{})})}),f.jsx(ya,{path:"/dashboard",element:f.jsxs(f.Fragment,{children:[f.jsx(Xy,{}),f.jsx(Sle,{}),f.jsx(hk,{})]})}),f.jsx(ya,{path:"/signup",element:f.jsx(IZ,{})}),f.jsx(ya,{path:"/settings",element:f.jsxs(f.Fragment,{children:[f.jsx(Xy,{}),f.jsx(vP,{}),f.jsx(C6,{}),f.jsx(hk,{})]})}),f.jsx(ya,{path:"/doctor",element:f.jsx(vP,{})}),f.jsx(ya,{path:"/websocket",element:f.jsx(yle,{})}),f.jsx(ya,{path:"/findpatient/:phoneOrSSN",element:f.jsx(xle,{})}),f.jsx(ya,{path:"/findpatient",element:f.jsxs(FZ,{children:[f.jsx(Xy,{}),f.jsx(Ez,{}),f.jsx(hk,{})]})}),f.jsx(ya,{path:"/reservation/:id",element:f.jsx(kle,{})}),f.jsx(ya,{path:"/login",element:f.jsx(GB,{})})]})}window.Buffer=RU.Buffer;window.process=IU;window.global=window;Da.workerPort=new Worker(new URL("/assets/pdf.worker.min-BKdij5_D.js",import.meta.url),{type:"module"});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"})});Cq.createRoot(document.getElementById("root")).render(f.jsx(CK,{children:f.jsx(VG,{children:f.jsx(Mle,{})})}));
